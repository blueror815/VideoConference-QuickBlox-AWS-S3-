/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
function formatData(t){for(var e=t[1],i=[],n=0;n<e.length;n++){var s=e[n];i.push({start_date:{year:s[0].start_date.split("-")[0],month:s[0].start_date.split("-")[1],day:s[0].start_date.split("-")[2],hour:"",minute:"",second:"",millisecond:"",format:""},end_date:{year:s[0].end_date.split("-")[0],month:s[0].end_date.split("-")[1],day:s[0].end_date.split("-")[2],hour:"",minute:"",second:"",millisecond:"",format:""},media:{caption:"",credit:"",url:s[0].url,thumbnail:s[0].url},text:{headline:s[2].title,text:s[2].description||"Missing text"}})}var r={title:{media:{caption:"",credit:"",url:t[1][0][1].profile_photo.url,thumbnail:t[1][0][1].profile_photo.url},text:{headline:t[1][0][1].first_name+"'s timeline",text:"Checkout my timeline"}},events:i};return r}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=Z.type(t);return"function"===i||Z.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(Z.isFunction(e))return Z.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return Z.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(at.test(e))return Z.filter(e,t,i);e=Z.filter(e,t)}return Z.grep(t,function(t){return X.call(e,t)>=0!==i})}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function r(t){var e=ft[t]={};return Z.each(t.match(pt)||[],function(t,i){e[i]=!0}),e}function o(){K.removeEventListener("DOMContentLoaded",o,!1),t.removeEventListener("load",o,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function l(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(_t,"-$1").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:bt.test(i)?Z.parseJSON(i):i}catch(s){}yt.set(t,e,i)}else i=void 0;return i}function c(){return!0}function h(){return!1}function u(){try{return K.activeElement}catch(t){}}function d(t,e){return Z.nodeName(t,"table")&&Z.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Rt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var i=0,n=t.length;n>i;i++)vt.set(t[i],"globalEval",!e||vt.get(e[i],"globalEval"))}function m(t,e){var i,n,s,r,o,a,l,c;if(1===e.nodeType){if(vt.hasData(t)&&(r=vt.access(t),o=vt.set(e,r),c=r.events)){delete o.handle,o.events={};for(s in c)for(i=0,n=c[s].length;n>i;i++)Z.event.add(e,s,c[s][i])}yt.hasData(t)&&(a=yt.access(t),l=Z.extend({},a),yt.set(e,l))}}function v(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Z.nodeName(t,e)?Z.merge([t],i):i}function y(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Tt.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}function b(e,i){var n,s=Z(i.createElement(e)).appendTo(i.body),r=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:Z.css(s[0],"display");return s.detach(),r}function _(t){var e=K,i=Ft[t];return i||(i=b(t,e),"none"!==i&&i||(Bt=(Bt||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Bt[0].contentDocument,e.write(),e.close(),i=b(t,e),Bt.detach()),Ft[t]=i),i}function x(t,e,i){var n,s,r,o,a=t.style;return i=i||zt(t),i&&(o=i.getPropertyValue(e)||i[e]),i&&(""!==o||Z.contains(t.ownerDocument,t)||(o=Z.style(t,e)),qt.test(o)&&Ht.test(e)&&(n=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=s,a.maxWidth=r)),void 0!==o?o+"":o}function w(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,s=Vt.length;s--;)if(e=Vt[s]+i,e in t)return e;return n}function T(t,e,i){var n=Wt.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function C(t,e,i,n,s){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,o=0;4>r;r+=2)"margin"===i&&(o+=Z.css(t,i+wt[r],!0,s)),n?("content"===i&&(o-=Z.css(t,"padding"+wt[r],!0,s)),"margin"!==i&&(o-=Z.css(t,"border"+wt[r]+"Width",!0,s))):(o+=Z.css(t,"padding"+wt[r],!0,s),"padding"!==i&&(o+=Z.css(t,"border"+wt[r]+"Width",!0,s)));return o}function S(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,r=zt(t),o="border-box"===Z.css(t,"boxSizing",!1,r);if(0>=s||null==s){if(s=x(t,e,r),(0>s||null==s)&&(s=t.style[e]),qt.test(s))return s;n=o&&(Q.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+C(t,e,i||(o?"border":"content"),n,r)+"px"}function A(t,e){for(var i,n,s,r=[],o=0,a=t.length;a>o;o++)n=t[o],n.style&&(r[o]=vt.get(n,"olddisplay"),i=n.style.display,e?(r[o]||"none"!==i||(n.style.display=""),""===n.style.display&&kt(n)&&(r[o]=vt.access(n,"olddisplay",_(n.nodeName)))):(s=kt(n),"none"===i&&s||vt.set(n,"olddisplay",s?i:Z.css(n,"display"))));for(o=0;a>o;o++)n=t[o],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[o]||"":"none"));return t}function E(t,e,i,n,s){return new E.prototype.init(t,e,i,n,s)}function L(){return setTimeout(function(){Qt=void 0}),Qt=Z.now()}function D(t,e){var i,n=0,s={height:t};for(e=e?1:0;4>n;n+=2-e)i=wt[n],s["margin"+i]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function I(t,e,i){for(var n,s=(ie[e]||[]).concat(ie["*"]),r=0,o=s.length;o>r;r++)if(n=s[r].call(i,e,t))return n}function P(t,e,i){var n,s,r,o,a,l,c,h,u=this,d={},p=t.style,f=t.nodeType&&kt(t),g=vt.get(t,"fxshow");i.queue||(a=Z._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,Z.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=Z.css(t,"display"),h="none"===c?vt.get(t,"olddisplay")||_(t.nodeName):c,"inline"===h&&"none"===Z.css(t,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],Jt.exec(s)){if(delete e[n],r=r||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!g||void 0===g[n])continue;f=!0}d[n]=g&&g[n]||Z.style(t,n)}else c=void 0;if(Z.isEmptyObject(d))"inline"===("none"===c?_(t.nodeName):c)&&(p.display=c);else{g?"hidden"in g&&(f=g.hidden):g=vt.access(t,"fxshow",{}),r&&(g.hidden=!f),f?Z(t).show():u.done(function(){Z(t).hide()}),u.done(function(){var e;vt.remove(t,"fxshow");for(e in d)Z.style(t,e,d[e])});for(n in d)o=I(f?g[n]:0,n,u),n in g||(g[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function N(t,e){var i,n,s,r,o;for(i in t)if(n=Z.camelCase(i),s=e[n],r=t[i],Z.isArray(r)&&(s=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),o=Z.cssHooks[n],o&&"expand"in o){r=o.expand(r),delete t[n];for(i in r)i in t||(t[i]=r[i],e[i]=s)}else e[n]=s}function O(t,e,i){var n,s,r=0,o=ee.length,a=Z.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=Qt||L(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,r=1-n,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(r);return a.notifyWith(t,[c,r,i]),1>r&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Qt||L(),duration:i.duration,tweens:[],createTween:function(e,i){var n=Z.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),h=c.props;for(N(h,c.opts.specialEasing);o>r;r++)if(n=ee[r].call(c,t,h,c.opts))return n;return Z.map(h,I,c),Z.isFunction(c.opts.start)&&c.opts.start.call(t,c),Z.fx.timer(Z.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function M(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,r=e.toLowerCase().match(pt)||[];if(Z.isFunction(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function R(t,e,i,n){function s(a){var l;return r[a]=!0,Z.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),l}var r={},o=t===xe;return s(e.dataTypes[0])||!r["*"]&&s("*")}function $(t,e){var i,n,s=Z.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&Z.extend(!0,t,n),t}function j(t,e,i){for(var n,s,r,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}o||(o=s)}r=r||o}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}function B(t,e,i,n){var s,r,o,a,l,c={},h=t.dataTypes.slice();if(h[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(r=h.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(o=c[l+" "+r]||c["* "+r],!o)for(s in c)if(a=s.split(" "),a[1]===r&&(o=c[l+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[s]:c[s]!==!0&&(r=a[0],h.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function F(t,e,i,n){var s;if(Z.isArray(e))Z.each(e,function(e,s){i||Ce.test(t)?n(t,s):F(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==Z.type(e))n(t,e);else for(s in e)F(t+"["+s+"]",e[s],i,n)}function H(t){return Z.isWindow(t)?t:9===t.nodeType&&t.defaultView}var q=[],z=q.slice,U=q.concat,W=q.push,X=q.indexOf,G={},Y=G.toString,V=G.hasOwnProperty,Q={},K=t.document,J="2.1.1",Z=function(t,e){return new Z.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,it=/-([\da-z])/gi,nt=function(t,e){return e.toUpperCase()};Z.fn=Z.prototype={jquery:J,constructor:Z,selector:"",length:0,toArray:function(){return z.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:z.call(this)},pushStack:function(t){var e=Z.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Z.each(this,t,e)},map:function(t){return this.pushStack(Z.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:q.sort,splice:q.splice},Z.extend=Z.fn.extend=function(){var t,e,i,n,s,r,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||Z.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)i=o[e],n=t[e],o!==n&&(c&&n&&(Z.isPlainObject(n)||(s=Z.isArray(n)))?(s?(s=!1,r=i&&Z.isArray(i)?i:[]):r=i&&Z.isPlainObject(i)?i:{},o[e]=Z.extend(c,r,n)):void 0!==n&&(o[e]=n));return o},Z.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Z.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"!==Z.type(t)||t.nodeType||Z.isWindow(t)?!1:t.constructor&&!V.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?G[Y.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=Z.trim(t),t&&(1===t.indexOf("use strict")?(e=K.createElement("script"),e.text=t,K.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(et,"ms-").replace(it,nt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,r=0,o=t.length,a=i(t);if(n){if(a)for(;o>r&&(s=e.apply(t[r],n),s!==!1);r++);else for(r in t)if(s=e.apply(t[r],n),s===!1)break}else if(a)for(;o>r&&(s=e.call(t[r],r,t[r]),s!==!1);r++);else for(r in t)if(s=e.call(t[r],r,t[r]),s===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?Z.merge(n,"string"==typeof t?[t]:t):W.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:X.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],r=0,o=t.length,a=!i;o>r;r++)n=!e(t[r],r),n!==a&&s.push(t[r]);return s},map:function(t,e,n){var s,r=0,o=t.length,a=i(t),l=[];if(a)for(;o>r;r++)s=e(t[r],r,n),null!=s&&l.push(s);else for(r in t)s=e(t[r],r,n),null!=s&&l.push(s);return U.apply([],l)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(i=t[e],e=t,t=i),Z.isFunction(t)?(n=z.call(arguments,2),s=function(){return t.apply(e||this,n.concat(z.call(arguments)))},s.guid=t.guid=t.guid||Z.guid++,s):void 0},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()});var st=function(t){function e(t,e,i,n){var s,r,o,a,l,c,u,p,f,g;if((e?e.ownerDocument||e:F)!==P&&I(e),e=e||P,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(O&&!n){if(s=yt.exec(t))if(o=s[1]){if(9===a){if(r=e.getElementById(o),!r||!r.parentNode)return i;if(r.id===o)return i.push(r),i}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(o))&&j(e,r)&&r.id===o)return i.push(r),i}else{if(s[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((o=s[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(o)),i}if(x.qsa&&(!M||!M.test(t))){if(p=u=B,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=C(t),(u=e.getAttribute("id"))?p=u.replace(_t,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+d(c[l]);f=bt.test(t)&&h(e.parentNode)||e,g=c.join(",")}if(g)try{return Z.apply(i,f.querySelectorAll(g)),i}catch(m){}finally{u||e.removeAttribute("id")}}}return A(t.replace(lt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>w.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[B]=!0,t}function s(t){var e=P.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var i=t.split("|"),n=t.length;n--;)w.attrHandle[i[n]]=e}function o(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var s,r=t([],i.length,e),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))})})}function h(t){return t&&typeof t.getElementsByTagName!==G&&t}function u(){}function d(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,s=i&&"parentNode"===n,r=q++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r)}:function(e,i,o){var a,l,c=[H,r];if(o){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(l=e[B]||(e[B]={}),(a=l[n])&&a[0]===H&&a[1]===r)return c[2]=a[2];if(l[n]=c,c[2]=t(e,i,o))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function g(t,i,n){for(var s=0,r=i.length;r>s;s++)e(t,i[s],n);return n}function m(t,e,i,n,s){for(var r,o=[],a=0,l=t.length,c=null!=e;l>a;a++)(r=t[a])&&(!i||i(r,n,s))&&(o.push(r),c&&e.push(a));return o}function v(t,e,i,s,r,o){return s&&!s[B]&&(s=v(s)),r&&!r[B]&&(r=v(r,o)),n(function(n,o,a,l){var c,h,u,d=[],p=[],f=o.length,v=n||g(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?v:m(v,d,t,a,l),b=i?r||(n?t:f||s)?[]:o:y;if(i&&i(y,b,a,l),s)for(c=m(b,p),s(c,[],a,l),h=c.length;h--;)(u=c[h])&&(b[p[h]]=!(y[p[h]]=u));if(n){if(r||t){if(r){for(c=[],h=b.length;h--;)(u=b[h])&&c.push(y[h]=u);r(null,b=[],c,l)}for(h=b.length;h--;)(u=b[h])&&(c=r?et.call(n,u):d[h])>-1&&(n[c]=!(o[c]=u))}}else b=m(b===o?b.splice(f,b.length):b),r?r(null,o,b,l):Z.apply(o,b)})}function y(t){for(var e,i,n,s=t.length,r=w.relative[t[0].type],o=r||w.relative[" "],a=r?1:0,l=p(function(t){return t===e},o,!0),c=p(function(t){return et.call(e,t)>-1},o,!0),h=[function(t,i,n){return!r&&(n||i!==E)||((e=i).nodeType?l(t,i,n):c(t,i,n))}];s>a;a++)if(i=w.relative[t[a].type])h=[p(f(h),i)];else{if(i=w.filter[t[a].type].apply(null,t[a].matches),i[B]){for(n=++a;s>n&&!w.relative[t[n].type];n++);return v(a>1&&f(h),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(lt,"$1"),i,n>a&&y(t.slice(a,n)),s>n&&y(t=t.slice(n)),s>n&&d(t))}h.push(i)}return f(h)}function b(t,i){var s=i.length>0,r=t.length>0,o=function(n,o,a,l,c){var h,u,d,p=0,f="0",g=n&&[],v=[],y=E,b=n||r&&w.find.TAG("*",c),_=H+=null==y?1:Math.random()||.1,x=b.length;for(c&&(E=o!==P&&o);f!==x&&null!=(h=b[f]);f++){if(r&&h){for(u=0;d=t[u++];)if(d(h,o,a)){l.push(h);break}c&&(H=_)}s&&((h=!d&&h)&&p--,n&&g.push(h))}if(p+=f,s&&f!==p){for(u=0;d=i[u++];)d(g,v,o,a);if(n){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=K.call(l));v=m(v)}Z.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(H=_,E=y),g};return s?n(o):o}var _,x,w,k,T,C,S,A,E,L,D,I,P,N,O,M,R,$,j,B="sizzle"+-new Date,F=t.document,H=0,q=0,z=i(),U=i(),W=i(),X=function(t,e){return t===e&&(D=!0),0},G="undefined",Y=1<<31,V={}.hasOwnProperty,Q=[],K=Q.pop,J=Q.push,Z=Q.push,tt=Q.slice,et=Q.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=st.replace("w","w#"),ot="\\["+nt+"*("+st+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",at=":("+st+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),ht=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ut=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(at),pt=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+st+")"),CLASS:new RegExp("^\\.("+st+")"),TAG:new RegExp("^("+st.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,_t=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(Q=tt.call(F.childNodes),F.childNodes),Q[F.childNodes.length].nodeType}catch(kt){Z={apply:Q.length?function(t,e){J.apply(t,tt.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}x=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},I=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:F,n=i.defaultView;return i!==P&&9===i.nodeType&&i.documentElement?(P=i,N=i.documentElement,O=!T(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){I()},!1):n.attachEvent&&n.attachEvent("onunload",function(){I()})),x.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=s(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(i.getElementsByClassName)&&s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=s(function(t){return N.appendChild(t).id=B,!i.getElementsByName||!i.getElementsByName(B).length}),x.getById?(w.find.ID=function(t,e){if(typeof e.getElementById!==G&&O){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(t){var e=t.replace(xt,wt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(xt,wt);return function(t){var i=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return i&&i.value===e}}),w.find.TAG=x.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==G?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],s=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},w.find.CLASS=x.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==G&&O?e.getElementsByClassName(t):void 0},R=[],M=[],(x.qsa=vt.test(i.querySelectorAll))&&(s(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&M.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||M.push("\\["+nt+"*(?:value|"+it+")"),t.querySelectorAll(":checked").length||M.push(":checked")}),s(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&M.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(x.matchesSelector=vt.test($=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&s(function(t){x.disconnectedMatch=$.call(t,"div"),$.call(t,"[s!='']:x"),R.push("!=",at)}),M=M.length&&new RegExp(M.join("|")),R=R.length&&new RegExp(R.join("|")),e=vt.test(N.compareDocumentPosition),j=e||vt.test(N.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},X=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===F&&j(F,t)?-1:e===i||e.ownerDocument===F&&j(F,e)?1:L?et.call(L,t)-et.call(L,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,s=0,r=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!r||!a)return t===i?-1:e===i?1:r?-1:a?1:L?et.call(L,t)-et.call(L,e):0;if(r===a)return o(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[s]===c[s];)s++;return s?o(l[s],c[s]):l[s]===F?-1:c[s]===F?1:0},i):P},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==P&&I(t),i=i.replace(ut,"='$1']"),!(!x.matchesSelector||!O||R&&R.test(i)||M&&M.test(i)))try{var n=$.call(t,i);if(n||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(i,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&I(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&I(t);var i=w.attrHandle[e.toLowerCase()],n=i&&V.call(w.attrHandle,e.toLowerCase())?i(t,e,!O):void 0;return void 0!==n?n:x.attributes||!O?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(D=!x.detectDuplicates,L=!x.sortStable&&t.slice(0),t.sort(X),D){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return L=null,t},k=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=k(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=k(e);return i},w=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(xt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&dt.test(i)&&(e=C(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var r=e.attr(s,t);return null==r?"!="===i:i?(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r+" ").indexOf(n)>-1:"|="===i?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,s){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,d,p,f,g=r!==o?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(r){for(;g;){for(u=e;u=u[g];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&y){for(h=m[B]||(m[B]={}),c=h[t]||[],p=c[0]===H&&c[1],d=c[0]===H&&c[2],u=p&&m.childNodes[p];u=++p&&u&&u[g]||(d=p=0)||f.pop();)if(1===u.nodeType&&++d&&u===e){h[t]=[H,p,d];break}}else if(y&&(c=(e[B]||(e[B]={}))[t])&&c[0]===H)d=c[1];else for(;(u=++p&&u&&u[g]||(d=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++d||(y&&((u[B]||(u[B]={}))[t]=[H,d]),u!==e)););return d-=s,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var s,r=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[B]?r(i):r.length>1?(s=[t,t,"",i],w.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=r(t,i),o=s.length;o--;)n=et.call(t,s[o]),t[n]=!(e[n]=s[o])}):function(t){return r(t,0,s)}):r}},pseudos:{not:n(function(t){var e=[],i=[],s=S(t.replace(lt,"$1"));return s[B]?n(function(t,e,i,n){for(var r,o=s(t,null,n,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,s(e,null,r,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,wt).toLowerCase(),function(e){var i;do if(i=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},w.pseudos.nth=w.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})w.pseudos[_]=l(_);return u.prototype=w.filters=w.pseudos,w.setFilters=new u,C=e.tokenize=function(t,i){var n,s,r,o,a,l,c,h=U[t+" "];if(h)return i?0:h.slice(0);for(a=t,l=[],c=w.preFilter;a;){(!n||(s=ct.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),l.push(r=[])),n=!1,(s=ht.exec(a))&&(n=s.shift(),r.push({value:n,type:s[0].replace(lt," ")}),a=a.slice(n.length));for(o in w.filter)!(s=ft[o].exec(a))||c[o]&&!(s=c[o](s))||(n=s.shift(),r.push({value:n,type:o,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):U(t,l).slice(0)},S=e.compile=function(t,e){var i,n=[],s=[],r=W[t+" "];if(!r){for(e||(e=C(t)),i=e.length;i--;)r=y(e[i]),r[B]?n.push(r):s.push(r);r=W(t,b(s,n)),r.selector=t}return r},A=e.select=function(t,e,i,n){var s,r,o,a,l,c="function"==typeof t&&t,u=!n&&C(t=c.selector||t);if(i=i||[],1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(o=r[0]).type&&x.getById&&9===e.nodeType&&O&&w.relative[r[1].type]){if(e=(w.find.ID(o.matches[0].replace(xt,wt),e)||[])[0],!e)return i;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(s=ft.needsContext.test(t)?0:r.length;s--&&(o=r[s],!w.relative[a=o.type]);)if((l=w.find[a])&&(n=l(o.matches[0].replace(xt,wt),bt.test(r[0].type)&&h(e.parentNode)||e))){if(r.splice(s,1),t=n.length&&d(r),!t)return Z.apply(i,n),i;break}}return(c||S(t,u))(n,e,!O,i,bt.test(t)&&h(e.parentNode)||e),i},x.sortStable=B.split("").sort(X).join("")===B,x.detectDuplicates=!!D,I(),x.sortDetached=s(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||r(it,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);Z.find=st,Z.expr=st.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=st.uniqueSort,Z.text=st.getText,Z.isXMLDoc=st.isXML,Z.contains=st.contains;var rt=Z.expr.match.needsContext,ot=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Z.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?Z.find.matchesSelector(n,t)?[n]:[]:Z.find.matches(t,Z.grep(e,function(t){return 1===t.nodeType}))},Z.fn.extend({find:function(t){var e,i=this.length,n=[],s=this;if("string"!=typeof t)return this.pushStack(Z(t).filter(function(){
for(e=0;i>e;e++)if(Z.contains(s[e],this))return!0}));for(e=0;i>e;e++)Z.find(t,s[e],n);return n=this.pushStack(i>1?Z.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&rt.test(t)?Z(t):t||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ht=Z.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ct.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||lt).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof Z?e[0]:e,Z.merge(this,Z.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:K,!0)),ot.test(i[1])&&Z.isPlainObject(e))for(i in e)Z.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return n=K.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=K,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Z.isFunction(t)?"undefined"!=typeof lt.ready?lt.ready(t):t(Z):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))};ht.prototype=Z.fn,lt=Z(K);var ut=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&Z(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),Z.fn.extend({has:function(t){var e=Z(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(Z.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,r=[],o=rt.test(t)||"string"!=typeof t?Z(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&Z.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?Z.unique(r):r)},index:function(t){return t?"string"==typeof t?X.call(Z(t),this[0]):X.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Z.unique(Z.merge(this.get(),Z(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,i){return Z.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,i){return Z.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return Z.dir(t,"previousSibling",i)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(i,n){var s=Z.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=Z.filter(n,s)),this.length>1&&(dt[t]||Z.unique(s),ut.test(t)&&s.reverse()),this.pushStack(s)}});var pt=/\S+/g,ft={};Z.Callbacks=function(t){t="string"==typeof t?ft[t]||r(t):Z.extend({},t);var e,i,n,s,o,a,l=[],c=!t.once&&[],h=function(r){for(e=t.memory&&r,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(r[0],r[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,l&&(c?c.length&&h(c.shift()):e?l=[]:u.disable())},u={add:function(){if(l){var i=l.length;!function r(e){Z.each(e,function(e,i){var n=Z.type(i);"function"===n?t.unique&&u.has(i)||l.push(i):i&&i.length&&"string"!==n&&r(i)})}(arguments),n?o=l.length:e&&(s=i,h(e))}return this},remove:function(){return l&&Z.each(arguments,function(t,e){for(var i;(i=Z.inArray(e,l,i))>-1;)l.splice(i,1),n&&(o>=i&&o--,a>=i&&a--)}),this},has:function(t){return t?Z.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=e=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,e||u.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||i&&!c||(e=e||[],e=[t,e.slice?e.slice():e],n?c.push(e):h(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(i){Z.each(e,function(e,r){var o=Z.isFunction(t[e])&&t[e];s[r[1]](function(){var t=o&&o.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r[0]+"With"](this===n?i.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,n):n}},s={};return n.pipe=n.then,Z.each(e,function(t,r){var o=r[2],a=r[3];n[r[1]]=o.add,a&&o.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?n:this,arguments),this},s[r[0]+"With"]=o.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,r=z.call(arguments),o=r.length,a=1!==o||t&&Z.isFunction(t.promise)?o:0,l=1===a?t:Z.Deferred(),c=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?z.call(arguments):s,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(o>1)for(e=new Array(o),i=new Array(o),n=new Array(o);o>s;s++)r[s]&&Z.isFunction(r[s].promise)?r[s].promise().done(c(s,n,r)).fail(l.reject).progress(c(s,i,e)):--a;return a||l.resolveWith(n,r),l.promise()}});var gt;Z.fn.ready=function(t){return Z.ready.promise().done(t),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){(t===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,t!==!0&&--Z.readyWait>0||(gt.resolveWith(K,[Z]),Z.fn.triggerHandler&&(Z(K).triggerHandler("ready"),Z(K).off("ready"))))}}),Z.ready.promise=function(e){return gt||(gt=Z.Deferred(),"complete"===K.readyState?setTimeout(Z.ready):(K.addEventListener("DOMContentLoaded",o,!1),t.addEventListener("load",o,!1))),gt.promise(e)},Z.ready.promise();var mt=Z.access=function(t,e,i,n,s,r,o){var a=0,l=t.length,c=null==i;if("object"===Z.type(i)){s=!0;for(a in i)Z.access(t,e,a,i[a],!0,r,o)}else if(void 0!==n&&(s=!0,Z.isFunction(n)||(o=!0),c&&(o?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(Z(t),i)})),e))for(;l>a;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return s?t:c?e.call(t):l?e(t[0],i):r};Z.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=a.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,Z.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,s=this.key(t),r=this.cache[s];if("string"==typeof e)r[e]=i;else if(Z.isEmptyObject(r))Z.extend(this.cache[s],e);else for(n in e)r[n]=e[n];return r},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,Z.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,s,r=this.key(t),o=this.cache[r];if(void 0===e)this.cache[r]={};else{Z.isArray(e)?n=e.concat(e.map(Z.camelCase)):(s=Z.camelCase(e),e in o?n=[e,s]:(n=s,n=n in o?[n]:n.match(pt)||[])),i=n.length;for(;i--;)delete o[n[i]]}},hasData:function(t){return!Z.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var vt=new a,yt=new a,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_t=/([A-Z])/g;Z.extend({hasData:function(t){return yt.hasData(t)||vt.hasData(t)},data:function(t,e,i){return yt.access(t,e,i)},removeData:function(t,e){yt.remove(t,e)},_data:function(t,e,i){return vt.access(t,e,i)},_removeData:function(t,e){vt.remove(t,e)}}),Z.fn.extend({data:function(t,e){var i,n,s,r=this[0],o=r&&r.attributes;if(void 0===t){if(this.length&&(s=yt.get(r),1===r.nodeType&&!vt.get(r,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=Z.camelCase(n.slice(5)),l(r,n,s[n])));vt.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){yt.set(this,t)}):mt(this,function(e){var i,n=Z.camelCase(t);if(r&&void 0===e){if(i=yt.get(r,t),void 0!==i)return i;if(i=yt.get(r,n),void 0!==i)return i;if(i=l(r,n,void 0),void 0!==i)return i}else this.each(function(){var i=yt.get(this,n);yt.set(this,n,e),-1!==t.indexOf("-")&&void 0!==i&&yt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){yt.remove(this,t)})}}),Z.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=vt.get(t,e),i&&(!n||Z.isArray(i)?n=vt.access(t,e,Z.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=Z.queue(t,e),n=i.length,s=i.shift(),r=Z._queueHooks(t,e),o=function(){Z.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete r.stop,s.call(t,o,r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return vt.get(t,i)||vt.access(t,i,{empty:Z.Callbacks("once memory").add(function(){vt.remove(t,[e+"queue",i])})})}}),Z.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?Z.queue(this[0],t):void 0===e?this:this.each(function(){var i=Z.queue(this,t,e);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=Z.Deferred(),r=this,o=this.length,a=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)i=vt.get(r[o],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=["Top","Right","Bottom","Left"],kt=function(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)},Tt=/^(?:checkbox|radio)$/i;!function(){var t=K.createDocumentFragment(),e=t.appendChild(K.createElement("div")),i=K.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),Q.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ct="undefined";Q.focusinBubbles="onfocusin"in t;var St=/^key/,At=/^(?:mouse|pointer|contextmenu)|click/,Et=/^(?:focusinfocus|focusoutblur)$/,Lt=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(t,e,i,n,s){var r,o,a,l,c,h,u,d,p,f,g,m=vt.get(t);if(m)for(i.handler&&(r=i,i=r.handler,s=r.selector),i.guid||(i.guid=Z.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(e){return typeof Z!==Ct&&Z.event.triggered!==e.type?Z.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pt)||[""],c=e.length;c--;)a=Lt.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(u=Z.event.special[p]||{},p=(s?u.delegateType:u.bindType)||p,u=Z.event.special[p]||{},h=Z.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&Z.expr.match.needsContext.test(s),namespace:f.join(".")},r),(d=l[p])||(d=l[p]=[],d.delegateCount=0,u.setup&&u.setup.call(t,n,f,o)!==!1||t.addEventListener&&t.addEventListener(p,o,!1)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,h):d.push(h),Z.event.global[p]=!0)},remove:function(t,e,i,n,s){var r,o,a,l,c,h,u,d,p,f,g,m=vt.hasData(t)&&vt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(pt)||[""],c=e.length;c--;)if(a=Lt.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(u=Z.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=d.length;r--;)h=d[r],!s&&g!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(r,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));o&&!d.length&&(u.teardown&&u.teardown.call(t,f,m.handle)!==!1||Z.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)Z.event.remove(t,p+e[c],i,n,!0);Z.isEmptyObject(l)&&(delete m.handle,vt.remove(t,"events"))}},trigger:function(e,i,n,s){var r,o,a,l,c,h,u,d=[n||K],p=V.call(e,"type")?e.type:e,f=V.call(e,"namespace")?e.namespace.split("."):[];if(o=a=n=n||K,3!==n.nodeType&&8!==n.nodeType&&!Et.test(p+Z.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,e=e[Z.expando]?e:new Z.Event(p,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:Z.makeArray(i,[e]),u=Z.event.special[p]||{},s||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!s&&!u.noBubble&&!Z.isWindow(n)){for(l=u.delegateType||p,Et.test(l+p)||(o=o.parentNode);o;o=o.parentNode)d.push(o),a=o;a===(n.ownerDocument||K)&&d.push(a.defaultView||a.parentWindow||t)}for(r=0;(o=d[r++])&&!e.isPropagationStopped();)e.type=r>1?l:u.bindType||p,h=(vt.get(o,"events")||{})[e.type]&&vt.get(o,"handle"),h&&h.apply(o,i),h=c&&o[c],h&&h.apply&&Z.acceptData(o)&&(e.result=h.apply(o,i),e.result===!1&&e.preventDefault());return e.type=p,s||e.isDefaultPrevented()||u._default&&u._default.apply(d.pop(),i)!==!1||!Z.acceptData(n)||c&&Z.isFunction(n[p])&&!Z.isWindow(n)&&(a=n[c],a&&(n[c]=null),Z.event.triggered=p,n[p](),Z.event.triggered=void 0,a&&(n[c]=a)),e.result}},dispatch:function(t){t=Z.event.fix(t);var e,i,n,s,r,o=[],a=z.call(arguments),l=(vt.get(this,"events")||{})[t.type]||[],c=Z.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(o=Z.event.handlers.call(this,t,l),e=0;(s=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,i=0;(r=s.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,n=((Z.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,r,o=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(n=[],i=0;a>i;i++)r=e[i],s=r.selector+" ",void 0===n[s]&&(n[s]=r.needsContext?Z(s,this).index(l)>=0:Z.find(s,this,null,[l]).length),n[s]&&n.push(r);n.length&&o.push({elem:l,handlers:n})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,r=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||K,n=i.documentElement,s=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,i,n,s=t.type,r=t,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=At.test(s)?this.mouseHooks:St.test(s)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new Z.Event(r),e=n.length;e--;)i=n[e],t[i]=r[i];return t.target||(t.target=K),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Z.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=Z.extend(new Z.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?Z.event.trigger(s,null,e):Z.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},Z.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:h):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(t,e)},Z.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,r=t.handleObj;return(!s||s!==n&&!Z.contains(n,s))&&(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=vt.access(n,e);s||n.addEventListener(t,i,!0),vt.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=vt.access(n,e)-1;s?vt.access(n,e,s):(n.removeEventListener(t,i,!0),vt.remove(n,e))}}}),Z.fn.extend({on:function(t,e,i,n,s){var r,o;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=h;else if(!n)return this;return 1===s&&(r=n,n=function(t){return Z().off(t),r.apply(this,arguments)},n.guid=r.guid||(r.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,Z(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=h),this.each(function(){Z.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?Z.event.trigger(t,e,i,!0):void 0}});var Dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,It=/<([\w:]+)/,Pt=/<|&#?\w+;/,Nt=/<(?:script|style|link)/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^$|\/(?:java|ecma)script/i,Rt=/^true\/(.*)/,$t=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,jt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};jt.optgroup=jt.option,jt.tbody=jt.tfoot=jt.colgroup=jt.caption=jt.thead,jt.th=jt.td,Z.extend({clone:function(t,e,i){var n,s,r,o,a=t.cloneNode(!0),l=Z.contains(t.ownerDocument,t);if(!(Q.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(o=v(a),r=v(t),n=0,s=r.length;s>n;n++)y(r[n],o[n]);if(e)if(i)for(r=r||v(t),o=o||v(a),n=0,s=r.length;s>n;n++)m(r[n],o[n]);else m(t,a);return o=v(a,"script"),o.length>0&&g(o,!l&&v(t,"script")),a},buildFragment:function(t,e,i,n){for(var s,r,o,a,l,c,h=e.createDocumentFragment(),u=[],d=0,p=t.length;p>d;d++)if(s=t[d],s||0===s)if("object"===Z.type(s))Z.merge(u,s.nodeType?[s]:s);else if(Pt.test(s)){for(r=r||h.appendChild(e.createElement("div")),o=(It.exec(s)||["",""])[1].toLowerCase(),a=jt[o]||jt._default,r.innerHTML=a[1]+s.replace(Dt,"<$1></$2>")+a[2],c=a[0];c--;)r=r.lastChild;Z.merge(u,r.childNodes),r=h.firstChild,r.textContent=""}else u.push(e.createTextNode(s));for(h.textContent="",d=0;s=u[d++];)if((!n||-1===Z.inArray(s,n))&&(l=Z.contains(s.ownerDocument,s),r=v(h.appendChild(s),"script"),l&&g(r),i))for(c=0;s=r[c++];)Mt.test(s.type||"")&&i.push(s);return h},cleanData:function(t){for(var e,i,n,s,r=Z.event.special,o=0;void 0!==(i=t[o]);o++){if(Z.acceptData(i)&&(s=i[vt.expando],s&&(e=vt.cache[s]))){if(e.events)for(n in e.events)r[n]?Z.event.remove(i,n):Z.removeEvent(i,n,e.handle);vt.cache[s]&&delete vt.cache[s]}delete yt.cache[i[yt.expando]]}}}),Z.fn.extend({text:function(t){return mt(this,function(t){return void 0===t?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?Z.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||Z.cleanData(v(i)),i.parentNode&&(e&&Z.contains(i.ownerDocument,i)&&g(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Z.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return mt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Nt.test(t)&&!jt[(It.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Dt,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(Z.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=U.apply([],t);var i,n,s,r,o,a,l=0,c=this.length,h=this,u=c-1,d=t[0],g=Z.isFunction(d);if(g||c>1&&"string"==typeof d&&!Q.checkClone&&Ot.test(d))return this.each(function(i){var n=h.eq(i);g&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(c&&(i=Z.buildFragment(t,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(s=Z.map(v(i,"script"),p),r=s.length;c>l;l++)o=i,l!==u&&(o=Z.clone(o,!0,!0),r&&Z.merge(s,v(o,"script"))),e.call(this[l],o,l);if(r)for(a=s[s.length-1].ownerDocument,Z.map(s,f),l=0;r>l;l++)o=s[l],Mt.test(o.type||"")&&!vt.access(o,"globalEval")&&Z.contains(a,o)&&(o.src?Z._evalUrl&&Z._evalUrl(o.src):Z.globalEval(o.textContent.replace($t,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(t){for(var i,n=[],s=Z(t),r=s.length-1,o=0;r>=o;o++)i=o===r?this:this.clone(!0),Z(s[o])[e](i),W.apply(n,i.get());return this.pushStack(n)}});var Bt,Ft={},Ht=/^margin/,qt=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),zt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",s.appendChild(r);var e=t.getComputedStyle(o,null);i="1%"!==e.top,n="4px"===e.width,s.removeChild(r)}var i,n,s=K.documentElement,r=K.createElement("div"),o=K.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===o.style.backgroundClip,r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(o),t.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,i=o.appendChild(K.createElement("div"));return i.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",o.style.width="1px",s.appendChild(r),e=!parseFloat(t.getComputedStyle(i,null).marginRight),s.removeChild(r),e}}))}(),Z.swap=function(t,e,i,n){var s,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];s=i.apply(t,n||[]);for(r in e)t.style[r]=o[r];return s};var Ut=/^(none|table(?!-c[ea]).+)/,Wt=new RegExp("^("+xt+")(.*)$","i"),Xt=new RegExp("^([+-])=("+xt+")","i"),Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"},Vt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=x(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,o,a=Z.camelCase(e),l=t.style;return e=Z.cssProps[a]||(Z.cssProps[a]=k(l,a)),o=Z.cssHooks[e]||Z.cssHooks[a],void 0===i?o&&"get"in o&&void 0!==(s=o.get(t,!1,n))?s:l[e]:(r=typeof i,"string"===r&&(s=Xt.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(Z.css(t,e)),r="number"),void(null!=i&&i===i&&("number"!==r||Z.cssNumber[a]||(i+="px"),Q.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(l[e]=i))))}},css:function(t,e,i,n){var s,r,o,a=Z.camelCase(e);return e=Z.cssProps[a]||(Z.cssProps[a]=k(t.style,a)),o=Z.cssHooks[e]||Z.cssHooks[a],o&&"get"in o&&(s=o.get(t,!0,i)),void 0===s&&(s=x(t,e,n)),"normal"===s&&e in Yt&&(s=Yt[e]),""===i||i?(r=parseFloat(s),i===!0||Z.isNumeric(r)?r||0:s):s}}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,i,n){return i?Ut.test(Z.css(t,"display"))&&0===t.offsetWidth?Z.swap(t,Gt,function(){return S(t,e,n)}):S(t,e,n):void 0},set:function(t,i,n){var s=n&&zt(t);return T(t,i,n?C(t,e,n,"border-box"===Z.css(t,"boxSizing",!1,s),s):0)}}}),Z.cssHooks.marginRight=w(Q.reliableMarginRight,function(t,e){return e?Z.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+wt[n]+e]=r[n]||r[n-2]||r[0];return s}},Ht.test(t)||(Z.cssHooks[t+e].set=T)}),Z.fn.extend({css:function(t,e){return mt(this,function(t,e,i){var n,s,r={},o=0;if(Z.isArray(e)){for(n=zt(t),s=e.length;s>o;o++)r[e[o]]=Z.css(t,e[o],!1,n);return r}return void 0!==i?Z.style(t,e,i):Z.css(t,e)},t,e,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){kt(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=E,E.prototype={constructor:E,init:function(t,e,i,n,s,r){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(Z.cssNumber[i]?"":"px")},cur:function(){var t=E.propHooks[this.prop];return t&&t.get?t.get(this):E.propHooks._default.get(this)},run:function(t){var e,i=E.propHooks[this.prop];return this.pos=e=this.options.duration?Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.fx=E.prototype.init,Z.fx.step={};var Qt,Kt,Jt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[P],ie={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=Zt.exec(e),r=s&&s[3]||(Z.cssNumber[t]?"":"px"),o=(Z.cssNumber[t]||"px"!==r&&+n)&&Zt.exec(Z.css(i.elem,t)),a=1,l=20;if(o&&o[3]!==r){r=r||o[3],s=s||[],o=+n||1;do a=a||".5",o/=a,Z.style(i.elem,t,o+r);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return s&&(o=i.start=+o||+n||0,i.unit=r,i.end=s[1]?o+(s[1]+1)*s[2]:+s[2]),i}]};Z.Animation=Z.extend(O,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],ie[i]=ie[i]||[],ie[i].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),Z.speed=function(t,e,i){var n=t&&"object"==typeof t?Z.extend({},t):{complete:i||!i&&e||Z.isFunction(t)&&t,duration:t,easing:i&&e||e&&!Z.isFunction(e)&&e};return n.duration=Z.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Z.fx.speeds?Z.fx.speeds[n.duration]:Z.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Z.isFunction(n.old)&&n.old.call(this),n.queue&&Z.dequeue(this,n.queue)},n},Z.fn.extend({fadeTo:function(t,e,i,n){return this.filter(kt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=Z.isEmptyObject(t),r=Z.speed(e,i,n),o=function(){var e=O(this,Z.extend({},t),r);(s||vt.get(this,"finish"))&&e.stop(!0)};return o.finish=o,s||r.queue===!1?this.each(o):this.queue(r.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",r=Z.timers,o=vt.get(this);if(s)o[s]&&o[s].stop&&n(o[s]);else for(s in o)o[s]&&o[s].stop&&te.test(s)&&n(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=t&&r[s].queue!==t||(r[s].anim.stop(i),e=!1,r.splice(s,1));(e||!i)&&Z.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=vt.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],r=Z.timers,o=n?n.length:0;for(i.finish=!0,Z.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;o>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),Z.each(["toggle","show","hide"],function(t,e){var i=Z.fn[e];Z.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(D(e,!0),t,n,s)}}),Z.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),Z.timers=[],Z.fx.tick=function(){var t,e=0,i=Z.timers;for(Qt=Z.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||Z.fx.stop(),Qt=void 0},Z.fx.timer=function(t){Z.timers.push(t),t()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Kt||(Kt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){
clearInterval(Kt),Kt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t=K.createElement("input"),e=K.createElement("select"),i=e.appendChild(K.createElement("option"));t.type="checkbox",Q.checkOn=""!==t.value,Q.optSelected=i.selected,e.disabled=!0,Q.optDisabled=!i.disabled,t=K.createElement("input"),t.value="t",t.type="radio",Q.radioValue="t"===t.value}();var ne,se,re=Z.expr.attrHandle;Z.fn.extend({attr:function(t,e){return mt(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})}}),Z.extend({attr:function(t,e,i){var n,s,r=t.nodeType;return t&&3!==r&&8!==r&&2!==r?typeof t.getAttribute===Ct?Z.prop(t,e,i):(1===r&&Z.isXMLDoc(t)||(e=e.toLowerCase(),n=Z.attrHooks[e]||(Z.expr.match.bool.test(e)?se:ne)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=Z.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void Z.removeAttr(t,e)):void 0},removeAttr:function(t,e){var i,n,s=0,r=e&&e.match(pt);if(r&&1===t.nodeType)for(;i=r[s++];)n=Z.propFix[i]||i,Z.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!Q.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),se={set:function(t,e,i){return e===!1?Z.removeAttr(t,i):t.setAttribute(i,i),i}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(t,e){var i=re[e]||Z.find.attr;re[e]=function(t,e,n){var s,r;return n||(r=re[e],re[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,re[e]=r),s}});var oe=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(t,e){return mt(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Z.propFix[t]||t]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,s,r,o=t.nodeType;return t&&3!==o&&8!==o&&2!==o?(r=1!==o||!Z.isXMLDoc(t),r&&(e=Z.propFix[e]||e,s=Z.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||oe.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var ae=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,i,n,s,r,o,a="string"==typeof t&&t,l=0,c=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pt)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):" ")){for(r=0;s=e[r++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");o=Z.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(t){var e,i,n,s,r,o,a=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pt)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):"")){for(r=0;s=e[r++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");o=t?Z.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(Z.isFunction(t)?function(i){Z(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,s=Z(this),r=t.match(pt)||[];e=r[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===Ct||"boolean"===i)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ae," ").indexOf(e)>=0)return!0;return!1}});var le=/\r/g;Z.fn.extend({val:function(t){var e,i,n,s=this[0];return arguments.length?(n=Z.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,Z(this).val()):t,null==s?s="":"number"==typeof s?s+="":Z.isArray(s)&&(s=Z.map(s,function(t){return null==t?"":t+""})),e=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))})):s?(e=Z.valHooks[s.type]||Z.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(le,""):null==i?"":i)):void 0}}),Z.extend({valHooks:{option:{get:function(t){var e=Z.find.attr(t,"value");return null!=e?e:Z.trim(Z.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,r="select-one"===t.type||0>s,o=r?null:[],a=r?s+1:n.length,l=0>s?a:r?s:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==s||(Q.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&Z.nodeName(i.parentNode,"optgroup"))){if(e=Z(i).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var i,n,s=t.options,r=Z.makeArray(e),o=s.length;o--;)n=s[o],(n.selected=Z.inArray(n.value,r)>=0)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}},Q.checkOn||(Z.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),Z.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var ce=Z.now(),he=/\?/;Z.parseJSON=function(t){return JSON.parse(t+"")},Z.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(n){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+t),e};var ue,de,pe=/#.*$/,fe=/([?&])_=[^&]*/,ge=/^(.*?):[ \t]*([^\r\n]*)$/gm,me=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ve=/^(?:GET|HEAD)$/,ye=/^\/\//,be=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,_e={},xe={},we="*/".concat("*");try{de=location.href}catch(ke){de=K.createElement("a"),de.href="",de=de.href}ue=be.exec(de.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:de,type:"GET",isLocal:me.test(ue[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":we,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$($(t,Z.ajaxSettings),e):$(Z.ajaxSettings,t)},ajaxPrefilter:M(_e),ajaxTransport:M(xe),ajax:function(t,e){function i(t,e,i,o){var l,h,v,y,_,w=e;2!==b&&(b=2,a&&clearTimeout(a),n=void 0,r=o||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,i&&(y=j(u,x,i)),y=B(u,y,x,l),l?(u.ifModified&&(_=x.getResponseHeader("Last-Modified"),_&&(Z.lastModified[s]=_),_=x.getResponseHeader("etag"),_&&(Z.etag[s]=_)),204===t||"HEAD"===u.type?w="nocontent":304===t?w="notmodified":(w=y.state,h=y.data,v=y.error,l=!v)):(v=w,(t||!w)&&(w="error",0>t&&(t=0))),x.status=t,x.statusText=(e||w)+"",l?f.resolveWith(d,[h,w,x]):f.rejectWith(d,[x,w,v]),x.statusCode(m),m=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,u,l?h:v]),g.fireWith(d,[x,w]),c&&(p.trigger("ajaxComplete",[x,u]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,r,o,a,l,c,h,u=Z.ajaxSetup({},e),d=u.context||u,p=u.context&&(d.nodeType||d.jquery)?Z(d):Z.event,f=Z.Deferred(),g=Z.Callbacks("once memory"),m=u.statusCode||{},v={},y={},b=0,_="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!o)for(o={};e=ge.exec(r);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=y[i]=y[i]||t,v[t]=e),this},overrideMimeType:function(t){return b||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||_;return n&&n.abort(e),i(0,e),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,u.url=((t||u.url||de)+"").replace(pe,"").replace(ye,ue[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=Z.trim(u.dataType||"*").toLowerCase().match(pt)||[""],null==u.crossDomain&&(l=be.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===ue[1]&&l[2]===ue[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ue[3]||("http:"===ue[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=Z.param(u.data,u.traditional)),R(_e,u,e,x),2===b)return x;c=u.global,c&&0===Z.active++&&Z.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!ve.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(he.test(s)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=fe.test(s)?s.replace(fe,"$1_="+ce++):s+(he.test(s)?"&":"?")+"_="+ce++)),u.ifModified&&(Z.lastModified[s]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[s]),Z.etag[s]&&x.setRequestHeader("If-None-Match",Z.etag[s])),(u.data&&u.hasContent&&u.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+we+"; q=0.01":""):u.accepts["*"]);for(h in u.headers)x.setRequestHeader(h,u.headers[h]);if(u.beforeSend&&(u.beforeSend.call(d,x,u)===!1||2===b))return x.abort();_="abort";for(h in{success:1,error:1,complete:1})x[h](u[h]);if(n=R(xe,u,e,x)){x.readyState=1,c&&p.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},u.timeout));try{b=1,n.send(v,i)}catch(w){if(!(2>b))throw w;i(-1,w)}}else i(-1,"No Transport");return x},getJSON:function(t,e,i){return Z.get(t,e,i,"json")},getScript:function(t,e){return Z.get(t,void 0,e,"script")}}),Z.each(["get","post"],function(t,e){Z[e]=function(t,i,n,s){return Z.isFunction(i)&&(s=s||n,n=i,i=void 0),Z.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z._evalUrl=function(t){return Z.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(t){var e;return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(Z.isFunction(t)?function(e){Z(this).wrapInner(t.call(this,e))}:function(){var e=Z(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(i){Z(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)};var Te=/%20/g,Ce=/\[\]$/,Se=/\r?\n/g,Ae=/^(?:submit|button|image|reset|file)$/i,Ee=/^(?:input|select|textarea|keygen)/i;Z.param=function(t,e){var i,n=[],s=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){s(this.name,this.value)});else for(i in t)F(i,t[i],e,s);return n.join("&").replace(Te,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Z.prop(this,"elements");return t?Z.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Z(this).is(":disabled")&&Ee.test(this.nodeName)&&!Ae.test(t)&&(this.checked||!Tt.test(t))}).map(function(t,e){var i=Z(this).val();return null==i?null:Z.isArray(i)?Z.map(i,function(t){return{name:e.name,value:t.replace(Se,"\r\n")}}):{name:e.name,value:i.replace(Se,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Le=0,De={},Ie={0:200,1223:204},Pe=Z.ajaxSettings.xhr();t.ActiveXObject&&Z(t).on("unload",function(){for(var t in De)De[t]()}),Q.cors=!!Pe&&"withCredentials"in Pe,Q.ajax=Pe=!!Pe,Z.ajaxTransport(function(t){var e;return Q.cors||Pe&&!t.crossDomain?{send:function(i,n){var s,r=t.xhr(),o=++Le;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)r[s]=t.xhrFields[s];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)r.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(delete De[o],e=r.onload=r.onerror=null,"abort"===t?r.abort():"error"===t?n(r.status,r.statusText):n(Ie[r.status]||r.status,r.statusText,"string"==typeof r.responseText?{text:r.responseText}:void 0,r.getAllResponseHeaders()))}},r.onload=e(),r.onerror=e("error"),e=De[o]=e("abort");try{r.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,s){e=Z("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),K.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Ne=[],Oe=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ne.pop()||Z.expando+"_"+ce++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(e,i,n){var s,r,o,a=e.jsonp!==!1&&(Oe.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oe.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Oe,"$1"+s):e.jsonp!==!1&&(e.url+=(he.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||Z.error(s+" was not called"),o[0]},e.dataTypes[0]="json",r=t[s],t[s]=function(){o=arguments},n.always(function(){t[s]=r,e[s]&&(e.jsonpCallback=i.jsonpCallback,Ne.push(s)),o&&Z.isFunction(r)&&r(o[0]),o=r=void 0}),"script"):void 0}),Z.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||K;var n=ot.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=Z.buildFragment([t],e,s),s&&s.length&&Z(s).remove(),Z.merge([],n.childNodes))};var Me=Z.fn.load;Z.fn.load=function(t,e,i){if("string"!=typeof t&&Me)return Me.apply(this,arguments);var n,s,r,o=this,a=t.indexOf(" ");return a>=0&&(n=Z.trim(t.slice(a)),t=t.slice(0,a)),Z.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),o.length>0&&Z.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){r=arguments,o.html(n?Z("<div>").append(Z.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){o.each(i,r||[t.responseText,e,t])}),this},Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var Re=t.document.documentElement;Z.offset={setOffset:function(t,e,i){var n,s,r,o,a,l,c,h=Z.css(t,"position"),u=Z(t),d={};"static"===h&&(t.style.position="relative"),a=u.offset(),r=Z.css(t,"top"),l=Z.css(t,"left"),c=("absolute"===h||"fixed"===h)&&(r+l).indexOf("auto")>-1,c?(n=u.position(),o=n.top,s=n.left):(o=parseFloat(r)||0,s=parseFloat(l)||0),Z.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+s),"using"in e?e.using.call(t,d):u.css(d)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,i,n=this[0],s={top:0,left:0},r=n&&n.ownerDocument;return r?(e=r.documentElement,Z.contains(e,n)?(typeof n.getBoundingClientRect!==Ct&&(s=n.getBoundingClientRect()),i=H(r),{top:s.top+i.pageYOffset-e.clientTop,left:s.left+i.pageXOffset-e.clientLeft}):s):void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===Z.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Z.nodeName(t[0],"html")||(n=t.offset()),n.top+=Z.css(t[0],"borderTopWidth",!0),n.left+=Z.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-Z.css(i,"marginTop",!0),left:e.left-n.left-Z.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Re;t&&!Z.nodeName(t,"html")&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||Re})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;Z.fn[e]=function(s){return mt(this,function(e,s,r){var o=H(e);return void 0===r?o?o[i]:e[s]:void(o?o.scrollTo(n?t.pageXOffset:r,n?r:t.pageYOffset):e[s]=r)},e,s,arguments.length,null)}}),Z.each(["top","left"],function(t,e){Z.cssHooks[e]=w(Q.pixelPosition,function(t,i){return i?(i=x(t,e),qt.test(i)?Z(t).position()[e]+"px":i):void 0})}),Z.each({Height:"height",Width:"width"},function(t,e){Z.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){Z.fn[n]=function(n,s){var r=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||s===!0?"margin":"border");return mt(this,function(e,i,n){var s;return Z.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?Z.css(e,i,o):Z.style(e,i,n,o)},e,r?n:void 0,r,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var $e=t.jQuery,je=t.$;return Z.noConflict=function(e){return t.$===Z&&(t.$=je),e&&t.jQuery===Z&&(t.jQuery=$e),Z},typeof e===Ct&&(t.jQuery=t.$=Z),Z}),function(t,e){"use strict";t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return t("meta[name=csrf-token]").attr("content")},csrfParam:function(){return t("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=i.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){t('form input[name="'+i.csrfParam()+'"]').val(i.csrfToken())},fire:function(e,i,n){var s=t.Event(i);return e.trigger(s,n),s.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==e&&t.data("remote")!==!1},handleRemote:function(n){var s,r,o,a,l,c;if(i.fire(n,"ajax:before")){if(a=n.data("with-credentials")||null,l=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){s=n.attr("method"),r=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(s=n.data("method"),r=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(s=n.data("method")||"get",r=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(s=n.data("method"),r=i.href(n),o=n.data("params")||null);return c={type:s||"GET",data:o,dataType:l,beforeSend:function(t,s){return s.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),i.fire(n,"ajax:beforeSend",[t,s])?void n.trigger("ajax:send",t):!1},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:i.isCrossDomain(r)},a&&(c.xhrFields={withCredentials:a}),r&&(c.url=r),i.ajax(c)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var i=document.createElement("a");try{return i.href=t,i.href=i.href,!((!i.protocol||":"===i.protocol)&&!i.host||e.protocol+"//"+e.host==i.protocol+"//"+i.host)}catch(n){return!0}},handleMethod:function(n){var s=i.href(n),r=n.data("method"),o=n.attr("target"),a=i.csrfToken(),l=i.csrfParam(),c=t('<form method="post" action="'+s+'"></form>'),h='<input name="_method" value="'+r+'" type="hidden" />';l===e||a===e||i.isCrossDomain(s)||(h+='<input name="'+l+'" value="'+a+'" type="hidden" />'),o&&c.attr("target",o),c.hide().append(h).appendTo("body"),c.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[i]()),n!==e&&t[i](n),t.prop("disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";"undefined"!=typeof t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),s=!1;if(!n)return!0;if(i.fire(t,"confirm")){try{s=i.confirm(n)}catch(r){(console.error||console.log).call(console,r.stack||r)}e=i.fire(t,"confirm:complete",[s])}return s&&e},blankInputs:function(e,i,n){var s,r,o=t(),a=i||"input,textarea",l=e.find(a);return l.each(function(){if(s=t(this),r=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):!!s.val(),r===n){if(s.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;o=o.add(s)}}),o.length?o:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");t.data("ujs:enable-with",t.html()),n!==e&&t.html(n),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableElement(e)})}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(e){var n=t(this),s=n.data("method"),r=n.data("params"),o=e.metaKey||e.ctrlKey;if(!i.allowAction(n))return i.stopEverything(e);if(!o&&n.is(i.linkDisableSelector)&&i.disableElement(n),i.isRemote(n)){if(o&&(!s||"GET"===s)&&!r)return!0;var a=i.handleRemote(n);return a===!1?i.enableElement(n):a.fail(function(){i.enableElement(n)}),!1}return s?(i.handleMethod(n),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n)||!i.isRemote(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var s=i.handleRemote(n);return s===!1?i.enableFormElement(n):s.fail(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)&&i.isRemote(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var s,r,o=t(this),a=i.isRemote(o);if(!i.allowAction(o))return i.stopEverything(n);if(o.attr("novalidate")===e&&(s=i.blankInputs(o,i.requiredInputSelector,!1),s&&i.fire(o,"ajax:aborted:required",[s])))return i.stopEverything(n);if(a){if(r=i.nonBlankInputs(o,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(o)},13);var l=i.fire(o,"ajax:aborted:file",[r]);return l||setTimeout(function(){i.enableFormElements(o)},13),l}return i.handleRemote(o),!1}setTimeout(function(){i.disableFormElements(o)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var s=n.attr("name"),r=s?{name:s,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(e){this===e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this===e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),/*
 * Foundation Responsive Library
 * http://foundation.zurb.com
 * Copyright 2014, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
function(t,e,i,n){"use strict";function s(t){return("string"==typeof t||t instanceof String)&&(t=t.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),t}var r=function(e){for(var i=e.length,n=t("head");i--;)0===n.has("."+e[i]).length&&n.append('<meta class="'+e[i]+'" />')};r(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),t(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof i.body&&FastClick.attach(i.body)});var o=function(e,n){if("string"==typeof e){if(n){var s;if(n.jquery){if(s=n[0],!s)return n}else s=n;return t(s.querySelectorAll(e))}return t(i.querySelectorAll(e))}return t(e,n)},a=function(t){var e=[];return t||e.push("data"),this.namespace.length>0&&e.push(this.namespace),e.push(this.name),e.join("-")},l=function(t){for(var e=t.split("-"),i=e.length,n=[];i--;)0!==i?n.push(e[i]):this.namespace.length>0?n.push(this.namespace,e[i]):n.push(e[i]);return n.reverse().join("-")},c=function(e,i){var n=this,s=function(){var s=o(this),r=!s.data(n.attr_name(!0)+"-init");s.data(n.attr_name(!0)+"-init",t.extend({},n.settings,i||e,n.data_options(s))),r&&n.events(this)};return o(this.scope).is("["+this.attr_name()+"]")?s.call(this.scope):o("["+this.attr_name()+"]",this.scope).each(s),"string"==typeof e?this[e].call(this,i):void 0},h=function(t,e){function i(){e(t[0])}function n(){if(this.one("load",i),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?void(t[0].complete||4===t[0].readyState?i():n.call(t)):void i()};/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license */
e.matchMedia||(e.matchMedia=function(){var t=e.styleMedia||e.media;if(!t){var n=i.createElement("style"),s=i.getElementsByTagName("script")[0],r=null;n.type="text/css",n.id="matchmediajs-test",s.parentNode.insertBefore(n,s),r="getComputedStyle"in e&&e.getComputedStyle(n,null)||n.currentStyle,t={matchMedium:function(t){var e="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return n.styleSheet?n.styleSheet.cssText=e:n.textContent=e,"1px"===r.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),/*
   * jquery.requestAnimationFrame
   * https://github.com/gnarf37/jquery-requestAnimationFrame
   * Requires jQuery 1.8+
   *
   * Copyright (c) 2012 Corey Frang
   * Licensed under the MIT license.
   */
function(t){function i(){n&&(o(i),l&&t.fx.tick())}for(var n,s=0,r=["webkit","moz"],o=e.requestAnimationFrame,a=e.cancelAnimationFrame,l="undefined"!=typeof t.fx;s<r.length&&!o;s++)o=e[r[s]+"RequestAnimationFrame"],a=a||e[r[s]+"CancelAnimationFrame"]||e[r[s]+"CancelRequestAnimationFrame"];o?(e.requestAnimationFrame=o,e.cancelAnimationFrame=a,l&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!n&&(n=!0,i())},t.fx.stop=function(){n=!1})):(e.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-s)),r=e.setTimeout(function(){t(i+n)},n);return s=i+n,r},e.cancelAnimationFrame=function(t){clearTimeout(t)})}(t),e.Foundation={name:"Foundation",version:"5.5.2",media_queries:{small:o(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"small-only":o(".foundation-mq-small-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:o(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"medium-only":o(".foundation-mq-medium-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:o(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"large-only":o(".foundation-mq-large-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:o(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"xlarge-only":o(".foundation-mq-xlarge-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:o(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:t("<style></style>").appendTo("head")[0].sheet,global:{namespace:n},init:function(t,i,n,s,r){var a=[t,n,s,r],l=[];if(this.rtl=/rtl/i.test(o("html").attr("dir")),this.scope=t||this.scope,this.set_namespace(),i&&"string"==typeof i&&!/reflow/i.test(i))this.libs.hasOwnProperty(i)&&l.push(this.init_lib(i,a));else for(var c in this.libs)l.push(this.init_lib(c,i));return o(e).load(function(){o(e).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),t},init_lib:function(e,i){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),i&&i.hasOwnProperty(e)?("undefined"!=typeof this.libs[e].settings?t.extend(!0,this.libs[e].settings,i[e]):"undefined"!=typeof this.libs[e].defaults&&t.extend(!0,this.libs[e].defaults,i[e]),this.libs[e].init.apply(this.libs[e],[this.scope,i[e]])):(i=i instanceof Array?i:new Array(i),this.libs[e].init.apply(this.libs[e],i))):function(){}},patch:function(t){t.scope=this.scope,t.namespace=this.global.namespace,t.rtl=this.rtl,t.data_options=this.utils.data_options,t.attr_name=a,t.add_namespace=l,t.bindings=c,t.S=this.utils.S},inherit:function(t,e){for(var i=e.split(" "),n=i.length;n--;)this.utils.hasOwnProperty(i[n])&&(t[i[n]]=this.utils[i[n]])},set_namespace:function(){var e=this.global.namespace===n?t(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===n||/false/i.test(e)?"":e},libs:{},utils:{S:o,throttle:function(t,e){var i=null;return function(){var n=this,s=arguments;null==i&&(i=setTimeout(function(){t.apply(n,s),i=null},e))}},debounce:function(t,e,i){var n,s;return function(){var r=this,o=arguments,a=function(){n=null,i||(s=t.apply(r,o))},l=i&&!n;return clearTimeout(n),n=setTimeout(a,e),l&&(s=t.apply(r,o)),s}},data_options:function(e,i){function n(t){return!isNaN(t-0)&&null!==t&&""!==t&&t!==!1&&t!==!0}function s(e){return"string"==typeof e?t.trim(e):e}i=i||"options";var r,o,a,l={},c=function(t){var e=Foundation.global.namespace;return e.length>0?t.data(e+"-"+i):t.data(i)},h=c(e);if("object"==typeof h)return h;for(a=(h||":").split(";"),r=a.length;r--;)o=a[r].split(":"),o=[o[0],o.slice(1).join(":")],/true/i.test(o[1])&&(o[1]=!0),/false/i.test(o[1])&&(o[1]=!1),n(o[1])&&(-1===o[1].indexOf(".")?o[1]=parseInt(o[1],10):o[1]=parseFloat(o[1])),2===o.length&&o[0].length>0&&(l[s(o[0])]=s(o[1]));return l},register_media:function(e,i){Foundation.media_queries[e]===n&&(t("head").append('<meta class="'+i+'"/>'),Foundation.media_queries[e]=s(t("."+i).css("font-family")))},add_custom_rule:function(t,e){if(e===n&&Foundation.stylesheet)Foundation.stylesheet.insertRule(t,Foundation.stylesheet.cssRules.length);else{var i=Foundation.media_queries[e];i!==n&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[e]+"{ "+t+" }",Foundation.stylesheet.cssRules.length)}},image_loaded:function(t,e){function i(t){for(var e=t.length,i=e-1;i>=0;i--)if(t.attr("height")===n)return!1;return!0}var s=this,r=t.length;(0===r||i(t))&&e(t),t.each(function(){h(s.S(this),function(){r-=1,0===r&&e(t)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(t){return e.matchMedia(t).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},t.fn.foundation=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(t)),this})}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.abide={name:"abide",version:"5.5.2",settings:{live_validate:!0,validate_on_blur:!0,focus_on_invalid:!0,error_labels:!0,error_class:"error",timeout:1e3,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/([-;:&=\+\$,\w]+@{1})?([-A-Za-z0-9\.]+)+:?(\d+)?((\/[-\+~%\/\.\w]+)?\??([-\+=&;%@\.\w]+)?#?([\w]+)?)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(t,e,n){var s=i.getElementById(t.getAttribute(this.add_namespace("data-equalto"))).value,r=t.value,o=s===r;return o}}},timer:null,init:function(t,e,i){this.bindings(e,i)},events:function(e){function i(t,e){clearTimeout(n.timer),n.timer=setTimeout(function(){n.validate([t],e)}.bind(t),r.timeout)}var n=this,s=n.S(e).attr("novalidate","novalidate"),r=s.data(this.attr_name(!0)+"-init")||{};this.invalid_attr=this.add_namespace("data-invalid"),s.off(".abide").on("submit.fndtn.abide",function(t){var e=/ajax/i.test(n.S(this).attr(n.attr_name()));return n.validate(n.S(this).find("input, textarea, select").not(":hidden, [data-abide-ignore]").get(),t,e)}).on("validate.fndtn.abide",function(t){"manual"===r.validate_on&&n.validate([t.target],t)}).on("reset",function(e){return n.reset(t(this),e)}).find("input, textarea, select").not(":hidden, [data-abide-ignore]").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(t){r.validate_on_blur&&r.validate_on_blur===!0&&i(this,t),"change"===r.validate_on&&i(this,t)}).on("keydown.fndtn.abide",function(t){r.live_validate&&r.live_validate===!0&&9!=t.which&&i(this,t),"tab"===r.validate_on&&9===t.which?i(this,t):"change"===r.validate_on&&i(this,t)}).on("focus",function(e){navigator.userAgent.match(/iPad|iPhone|Android|BlackBerry|Windows Phone|webOS/i)&&t("html, body").animate({scrollTop:t(e.target).offset().top},100)})},reset:function(e,i){var n=this;e.removeAttr(n.invalid_attr),t("["+n.invalid_attr+"]",e).removeAttr(n.invalid_attr),t("."+n.settings.error_class,e).not("small").removeClass(n.settings.error_class),t(":input",e).not(":button, :submit, :reset, :hidden, [data-abide-ignore]").val("").removeAttr(n.invalid_attr)},validate:function(t,e,i){for(var n=this.parse_patterns(t),s=n.length,r=this.S(t[0]).closest("form"),o=/submit/.test(e.type),a=0;s>a;a++)if(!n[a]&&(o||i))return this.settings.focus_on_invalid&&t[a].focus(),r.trigger("invalid.fndtn.abide"),this.S(t[a]).closest("form").attr(this.invalid_attr,""),!1;return(o||i)&&r.trigger("valid.fndtn.abide"),r.removeAttr(this.invalid_attr),i?!1:!0},parse_patterns:function(t){for(var e=t.length,i=[];e--;)i.push(this.pattern(t[e]));return this.check_validation_and_apply_styles(i)},pattern:function(t){var e=t.getAttribute("type"),i="string"==typeof t.getAttribute("required"),n=t.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(n)&&n.length>0?[t,this.settings.patterns[n],i]:n.length>0?[t,new RegExp(n),i]:this.settings.patterns.hasOwnProperty(e)?[t,this.settings.patterns[e],i]:(n=/.*/,[t,n,i])},check_validation_and_apply_styles:function(e){var i=e.length,n=[],s=this.S(e[0][0]).closest("[data-"+this.attr_name(!0)+"]");for(s.data(this.attr_name(!0)+"-init")||{};i--;){var r,o,a=e[i][0],l=e[i][2],c=a.value.trim(),h=this.S(a).parent(),u=a.getAttribute(this.add_namespace("data-abide-validator")),d="radio"===a.type,p="checkbox"===a.type,f=this.S('label[for="'+a.getAttribute("id")+'"]'),g=l?a.value.length>0:!0,m=[];if(a.getAttribute(this.add_namespace("data-equalto"))&&(u="equalTo"),r=h.is("label")?h.parent():h,d&&l)m.push(this.valid_radio(a,l));else if(p&&l)m.push(this.valid_checkbox(a,l));else if(u){for(var v=u.split(" "),y=!0,b=!0,_=0;_<v.length;_++)o=this.settings.validators[v[_]].apply(this,[a,l,r]),m.push(o),b=o&&y,y=o;b?(this.S(a).removeAttr(this.invalid_attr),r.removeClass("error"),f.length>0&&this.settings.error_labels&&f.removeClass(this.settings.error_class).removeAttr("role"),t(a).triggerHandler("valid")):(this.S(a).attr(this.invalid_attr,""),r.addClass("error"),f.length>0&&this.settings.error_labels&&f.addClass(this.settings.error_class).attr("role","alert"),t(a).triggerHandler("invalid"))}else if(e[i][1].test(c)&&g||!l&&a.value.length<1||t(a).attr("disabled")?m.push(!0):m.push(!1),m=[m.every(function(t){return t})],m[0])this.S(a).removeAttr(this.invalid_attr),a.setAttribute("aria-invalid","false"),a.removeAttribute("aria-describedby"),r.removeClass(this.settings.error_class),f.length>0&&this.settings.error_labels&&f.removeClass(this.settings.error_class).removeAttr("role"),t(a).triggerHandler("valid");else{this.S(a).attr(this.invalid_attr,""),a.setAttribute("aria-invalid","true");var x=r.find("small."+this.settings.error_class,"span."+this.settings.error_class),w=x.length>0?x[0].id:"";w.length>0&&a.setAttribute("aria-describedby",w),r.addClass(this.settings.error_class),f.length>0&&this.settings.error_labels&&f.addClass(this.settings.error_class).attr("role","alert"),t(a).triggerHandler("invalid")}n=n.concat(m)}return n},valid_checkbox:function(e,i){var e=this.S(e),n=e.is(":checked")||!i||e.get(0).getAttribute("disabled");return n?(e.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class),t(e).triggerHandler("valid")):(e.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),t(e).triggerHandler("invalid")),n},valid_radio:function(e,i){for(var n=e.getAttribute("name"),s=this.S(e).closest("[data-"+this.attr_name(!0)+"]").find("[name='"+n+"']"),r=s.length,o=!1,a=!1,l=0;r>l;l++)s[l].getAttribute("disabled")?(a=!0,o=!0):s[l].checked?o=!0:a&&(o=!1);for(var l=0;r>l;l++)o?(this.S(s[l]).removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class),t(s[l]).triggerHandler("valid")):(this.S(s[l]).attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),t(s[l]).triggerHandler("invalid"));return o},valid_equal:function(t,e,n){var s=i.getElementById(t.getAttribute(this.add_namespace("data-equalto"))).value,r=t.value,o=s===r;return o?(this.S(t).removeAttr(this.invalid_attr),n.removeClass(this.settings.error_class),label.length>0&&settings.error_labels&&label.removeClass(this.settings.error_class)):(this.S(t).attr(this.invalid_attr,""),n.addClass(this.settings.error_class),label.length>0&&settings.error_labels&&label.addClass(this.settings.error_class)),o},valid_oneof:function(t,e,i,n){var t=this.S(t),s=this.S("["+this.add_namespace("data-oneof")+"]"),r=s.filter(":checked").length>0;if(r?t.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):t.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),!n){var o=this;s.each(function(){o.valid_oneof.call(o,this,null,null,!0)})}return r},reflow:function(t,e){var i=this,n=i.S("["+this.attr_name()+"]").attr("novalidate","novalidate");i.S(n).each(function(t,e){i.events(e)})}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.accordion={name:"accordion",version:"5.5.2",settings:{content_class:"content",active_class:"active",multi_expand:!1,toggleable:!0,callback:function(){}},init:function(t,e,i){this.bindings(e,i)},events:function(e){var i=this,n=this.S;i.create(this.S(e)),n(this.scope).off(".fndtn.accordion").on("click.fndtn.accordion","["+this.attr_name()+"] > dd > a, ["+this.attr_name()+"] > li > a",function(e){var s=n(this).closest("["+i.attr_name()+"]"),r=i.attr_name()+"="+s.attr(i.attr_name()),o=s.data(i.attr_name(!0)+"-init")||i.settings,a=n("#"+this.href.split("#")[1]),l=t("> dd, > li",s),c=l.children("."+o.content_class),h=c.filter("."+o.active_class);return e.preventDefault(),s.attr(i.attr_name())&&(c=c.add("["+r+"] dd > ."+o.content_class+", ["+r+"] li > ."+o.content_class),l=l.add("["+r+"] dd, ["+r+"] li")),o.toggleable&&a.is(h)?(a.parent("dd, li").toggleClass(o.active_class,!1),a.toggleClass(o.active_class,!1),n(this).attr("aria-expanded",function(t,e){return"true"===e?"false":"true"}),o.callback(a),a.triggerHandler("toggled",[s]),void s.triggerHandler("toggled",[a])):(o.multi_expand||(c.removeClass(o.active_class),l.removeClass(o.active_class),l.children("a").attr("aria-expanded","false")),a.addClass(o.active_class).parent().addClass(o.active_class),o.callback(a),a.triggerHandler("toggled",[s]),s.triggerHandler("toggled",[a]),void n(this).attr("aria-expanded","true"))})},create:function(e){var i=this,n=e,s=t("> .accordion-navigation",n),r=n.data(i.attr_name(!0)+"-init")||i.settings;s.children("a").attr("aria-expanded","false"),s.has("."+r.content_class+"."+r.active_class).children("a").attr("aria-expanded","true"),r.multi_expand&&e.attr("aria-multiselectable","true")},off:function(){},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.alert={name:"alert",version:"5.5.2",settings:{callback:function(){}},init:function(t,e,i){this.bindings(e,i)},events:function(){var e=this,i=this.S;t(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] .close",function(t){var n=i(this).closest("["+e.attr_name()+"]"),s=n.data(e.attr_name(!0)+"-init")||e.settings;t.preventDefault(),Modernizr.csstransitions?(n.addClass("alert-close"),n.on("transitionend webkitTransitionEnd oTransitionEnd",function(t){i(this).trigger("close.fndtn.alert").remove(),s.callback()})):n.fadeOut(300,function(){i(this).trigger("close.fndtn.alert").remove(),s.callback()})})},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.5.2",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div><img class="clearing-preload-next" style="display: none" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><img class="clearing-preload-prev" style="display: none" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" />'},close_selectors:".clearing-close, div.clearing-blackout",open_selectors:"",skip_selector:"",touch_label:"",init:!1,locked:!1},init:function(t,e,i){var n=this;Foundation.inherit(this,"throttle image_loaded"),this.bindings(e,i),n.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(n.S("li",this.scope)):n.S("["+this.attr_name()+"]",this.scope).each(function(){n.assemble(n.S("li",this))})},events:function(n){var s=this,r=s.S,o=t(".scroll-container");o.length>0&&(this.scope=o),r(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li "+this.settings.open_selectors,function(t,e,i){var e=e||r(this),i=i||e,n=e.next("li"),o=e.closest("["+s.attr_name()+"]").data(s.attr_name(!0)+"-init"),a=r(t.target);t.preventDefault(),o||(s.init(),o=e.closest("["+s.attr_name()+"]").data(s.attr_name(!0)+"-init")),i.hasClass("visible")&&e[0]===i[0]&&n.length>0&&s.is_open(e)&&(i=n,a=r("img",i)),s.open(a,e,i),s.update_paddles(i)}).on("click.fndtn.clearing",".clearing-main-next",function(t){s.nav(t,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(t){s.nav(t,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(t){Foundation.libs.clearing.close(t,this)}),t(i).on("keydown.fndtn.clearing",function(t){s.keydown(t)}),r(e).off(".clearing").on("resize.fndtn.clearing",function(){s.resize()}),this.swipe_events(n)},swipe_events:function(t){var e=this,i=e.S;i(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(t){t.touches||(t=t.originalEvent);var e={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:n};i(this).data("swipe-transition",e),t.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(t){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale)){var n=i(this).data("swipe-transition");if("undefined"==typeof n&&(n={}),n.delta_x=t.touches[0].pageX-n.start_page_x,Foundation.rtl&&(n.delta_x=-n.delta_x),"undefined"==typeof n.is_scrolling&&(n.is_scrolling=!!(n.is_scrolling||Math.abs(n.delta_x)<Math.abs(t.touches[0].pageY-n.start_page_y))),!n.is_scrolling&&!n.active){t.preventDefault();var s=n.delta_x<0?"next":"prev";n.active=!0,e.nav(t,s)}}}).on("touchend.fndtn.clearing",".visible-img",function(t){i(this).data("swipe-transition",{}),t.stopPropagation()})},assemble:function(e){var i=e.parent();if(!i.parent().hasClass("carousel")){i.after('<div id="foundationClearingHolder"></div>');var n=i.detach(),s="";if(null!=n[0]){s=n[0].outerHTML;var r=this.S("#foundationClearingHolder"),o=i.data(this.attr_name(!0)+"-init"),a={grid:'<div class="carousel">'+s+"</div>",viewing:o.templates.viewing},l='<div class="clearing-assembled"><div>'+a.viewing+a.grid+"</div></div>",c=this.settings.touch_label;Modernizr.touch&&(l=t(l).find(".clearing-touch-label").html(c).end()),r.after(l).remove()}}},open:function(e,n,s){function r(){setTimeout(function(){this.image_loaded(d,function(){1!==d.outerWidth()||f?o.call(this,d):r.call(this)}.bind(this))}.bind(this),100)}function o(e){var i=t(e);i.css("visibility","visible"),i.trigger("imageVisible"),l.css("overflow","hidden"),c.addClass("clearing-blackout"),h.addClass("clearing-container"),u.show(),this.fix_height(s).caption(a.S(".clearing-caption",u),a.S("img",s)).center_and_label(e,p).shift(n,s,function(){s.closest("li").siblings().removeClass("visible"),s.closest("li").addClass("visible")}),u.trigger("opened.fndtn.clearing")}var a=this,l=t(i.body),c=s.closest(".clearing-assembled"),h=a.S("div",c).first(),u=a.S(".visible-img",h),d=a.S("img",u).not(e),p=a.S(".clearing-touch-label",h),f=!1,g={};t("body").on("touchmove",function(t){t.preventDefault()}),d.error(function(){f=!0}),this.locked()||(u.trigger("open.fndtn.clearing"),g=this.load(e),g.interchange?d.attr("data-interchange",g.interchange).foundation("interchange","reflow"):d.attr("src",g.src).attr("data-interchange",""),d.css("visibility","hidden"),r.call(this))},close:function(e,n){e.preventDefault();var s,r,o=function(t){return/blackout/.test(t.selector)?t:t.closest(".clearing-blackout")}(t(n)),a=t(i.body);return n===e.target&&o&&(a.css("overflow",""),s=t("div",o).first(),r=t(".visible-img",s),r.trigger("close.fndtn.clearing"),this.settings.prev_index=0,t("ul["+this.attr_name()+"]",o).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),s.removeClass("clearing-container"),r.hide(),r.trigger("closed.fndtn.clearing")),t("body").off("touchmove"),!1},is_open:function(t){return t.parent().prop("style").length>0},keydown:function(e){var i=t(".clearing-blackout ul["+this.attr_name()+"]"),n=this.rtl?37:39,s=this.rtl?39:37,r=27;e.which===n&&this.go(i,"next"),e.which===s&&this.go(i,"prev"),e.which===r&&this.S("a.clearing-close").trigger("click.fndtn.clearing")},nav:function(e,i){var n=t("ul["+this.attr_name()+"]",".clearing-blackout");e.preventDefault(),this.go(n,i)},resize:function(){var e=t("img",".clearing-blackout .visible-img"),i=t(".clearing-touch-label",".clearing-blackout");e.length&&(this.center_and_label(e,i),e.trigger("resized.fndtn.clearing"))},fix_height:function(t){var e=t.parent().children(),i=this;return e.each(function(){var t=i.S(this),e=t.find("img");t.height()>e.outerHeight()&&t.addClass("fix-height")}).closest("ul").width(100*e.length+"%"),this},update_paddles:function(t){t=t.closest("li");var e=t.closest(".carousel").siblings(".visible-img");t.next().length>0?this.S(".clearing-main-next",e).removeClass("disabled"):this.S(".clearing-main-next",e).addClass("disabled"),t.prev().length>0?this.S(".clearing-main-prev",e).removeClass("disabled"):this.S(".clearing-main-prev",e).addClass("disabled")},center_and_label:function(t,e){return!this.rtl&&e.length>0?e.css({marginLeft:-(e.outerWidth()/2),marginTop:-(t.outerHeight()/2)-e.outerHeight()-10}):e.css({marginRight:-(e.outerWidth()/2),marginTop:-(t.outerHeight()/2)-e.outerHeight()-10,left:"auto",right:"50%"}),this},load:function(t){var e,i,n;return"A"===t[0].nodeName?(e=t.attr("href"),i=t.data("clearing-interchange")):(n=t.closest("a"),e=n.attr("href"),i=n.data("clearing-interchange")),this.preload(t),{src:e?e:t.attr("src"),interchange:e?i:t.data("clearing-interchange")}},preload:function(t){this.img(t.closest("li").next(),"next").img(t.closest("li").prev(),"prev")},img:function(e,i){if(e.length){var n,s,r,o=t(".clearing-preload-"+i),a=this.S("a",e);a.length?(n=a.attr("href"),s=a.data("clearing-interchange")):(r=this.S("img",e),n=r.attr("src"),s=r.data("clearing-interchange")),s?o.attr("data-interchange",s):(o.attr("src",n),o.attr("data-interchange",""))}return this},caption:function(t,e){var i=e.attr("data-caption");return i?t.html(i).show():t.text("").hide(),this},go:function(t,e){var i=this.S(".visible",t),n=i[e]();this.settings.skip_selector&&0!=n.find(this.settings.skip_selector).length&&(n=n[e]()),n.length&&this.S("img",n).trigger("click.fndtn.clearing",[i,n]).trigger("change.fndtn.clearing")},shift:function(t,e,i){var n,s=e.parent(),r=this.settings.prev_index||e.index(),o=this.direction(s,t,e),a=this.rtl?"right":"left",l=parseInt(s.css("left"),10),c=e.outerWidth(),h={};e.index()===r||/skip/.test(o)?/skip/.test(o)&&(n=e.index()-this.settings.up_count,this.lock(),n>0?(h[a]=-(n*c),s.animate(h,300,this.unlock())):(h[a]=0,s.animate(h,300,this.unlock()))):/left/.test(o)?(this.lock(),h[a]=l+c,s.animate(h,300,this.unlock())):/right/.test(o)&&(this.lock(),h[a]=l-c,s.animate(h,300,this.unlock())),i()},direction:function(t,e,i){var n,s=this.S("li",t),r=s.outerWidth()+s.outerWidth()/4,o=Math.floor(this.S(".clearing-container").outerWidth()/r)-1,a=s.index(i);return this.settings.up_count=o,n=this.adjacent(this.settings.prev_index,a)?a>o&&a>this.settings.prev_index?"right":a>o-1&&a<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=a,n},adjacent:function(t,e){for(var i=e+1;i>=e-1;i--)if(i===t)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing"),this.S(e).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"5.5.2",settings:{active_class:"open",disabled_class:"disabled",mega_class:"mega",align:"bottom",is_hover:!1,hover_timeout:150,opened:function(){},closed:function(){}},init:function(e,i,n){Foundation.inherit(this,"throttle"),t.extend(!0,this.settings,i,n),this.bindings(i,n)},events:function(n){var s=this,r=s.S;r(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(e){var i=r(this).data(s.attr_name(!0)+"-init")||s.settings;(!i.is_hover||Modernizr.touch)&&(e.preventDefault(),r(this).parent("[data-reveal-id]").length&&e.stopPropagation(),s.toggle(t(this)))}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(t){var e,i,n=r(this);clearTimeout(s.timeout),n.data(s.data_attr())?(e=r("#"+n.data(s.data_attr())),i=n):(e=n,i=r("["+s.attr_name()+'="'+e.attr("id")+'"]'));var o=i.data(s.attr_name(!0)+"-init")||s.settings;r(t.currentTarget).data(s.data_attr())&&o.is_hover&&s.closeall.call(s),o.is_hover&&s.open.apply(s,[e,i])}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(t){var e,i=r(this);if(i.data(s.data_attr()))e=i.data(s.data_attr(!0)+"-init")||s.settings;else var n=r("["+s.attr_name()+'="'+r(this).attr("id")+'"]'),e=n.data(s.attr_name(!0)+"-init")||s.settings;s.timeout=setTimeout(function(){i.data(s.data_attr())?e.is_hover&&s.close.call(s,r("#"+i.data(s.data_attr()))):e.is_hover&&s.close.call(s,i)}.bind(this),e.hover_timeout)}).on("click.fndtn.dropdown",function(e){var n=r(e.target).closest("["+s.attr_name()+"-content]"),o=n.find("a");return o.length>0&&"false"!==n.attr("aria-autoclose")&&s.close.call(s,r("["+s.attr_name()+"-content]")),e.target!==i&&!t.contains(i.documentElement,e.target)||r(e.target).closest("["+s.attr_name()+"]").length>0?void 0:!r(e.target).data("revealId")&&n.length>0&&(r(e.target).is("["+s.attr_name()+"-content]")||t.contains(n.first()[0],e.target))?void e.stopPropagation():void s.close.call(s,r("["+s.attr_name()+"-content]"))}).on("opened.fndtn.dropdown","["+s.attr_name()+"-content]",function(){s.settings.opened.call(this)}).on("closed.fndtn.dropdown","["+s.attr_name()+"-content]",function(){s.settings.closed.call(this)}),r(e).off(".dropdown").on("resize.fndtn.dropdown",s.throttle(function(){s.resize.call(s)},50)),this.resize()},close:function(e){var i=this;e.each(function(n){var s=t("["+i.attr_name()+"="+e[n].id+"]")||t("aria-controls="+e[n].id+"]");s.attr("aria-expanded","false"),i.S(this).hasClass(i.settings.active_class)&&(i.S(this).css(Foundation.rtl?"right":"left","-99999px").attr("aria-hidden","true").removeClass(i.settings.active_class).prev("["+i.attr_name()+"]").removeClass(i.settings.active_class).removeData("target"),i.S(this).trigger("closed.fndtn.dropdown",[e]))}),e.removeClass("f-open-"+this.attr_name(!0))},closeall:function(){var e=this;t.each(e.S(".f-open-"+this.attr_name(!0)),function(){e.close.call(e,e.S(this))})},open:function(t,e){this.css(t.addClass(this.settings.active_class),e),t.prev("["+this.attr_name()+"]").addClass(this.settings.active_class),t.data("target",e.get(0)).trigger("opened.fndtn.dropdown",[t,e]),t.attr("aria-hidden","false"),e.attr("aria-expanded","true"),t.focus(),t.addClass("f-open-"+this.attr_name(!0))},data_attr:function(){return this.namespace.length>0?this.namespace+"-"+this.name:this.name},toggle:function(t){if(!t.hasClass(this.settings.disabled_class)){var e=this.S("#"+t.data(this.data_attr()));0!==e.length&&(this.close.call(this,this.S("["+this.attr_name()+"-content]").not(e)),e.hasClass(this.settings.active_class)?(this.close.call(this,e),e.data("target")!==t.get(0)&&this.open.call(this,e,t)):this.open.call(this,e,t))}},resize:function(){var e=this.S("["+this.attr_name()+"-content].open"),i=t(e.data("target"));e.length&&i.length&&this.css(e,i)},css:function(t,e){var i=Math.max((e.width()-t.width())/2,8),n=e.data(this.attr_name(!0)+"-init")||this.settings,s=t.parent().css("overflow-y")||t.parent().css("overflow");if(this.clear_idx(),this.small()){var r=this.dirs.bottom.call(t,e,n);t.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:r.top}),t.css(Foundation.rtl?"right":"left",i)}else if("visible"!==s){var o=e[0].offsetTop+e[0].offsetHeight;t.attr("style","").css({position:"absolute",top:o}),t.css(Foundation.rtl?"right":"left",i)}else this.style(t,e,n);return t},style:function(e,i,n){var s=t.extend({position:"absolute"},this.dirs[n.align].call(e,i,n));e.attr("style","").css(s)},dirs:{_base:function(t){var n=this.offsetParent(),s=n.offset(),r=t.offset();r.top-=s.top,r.left-=s.left,r.missRight=!1,r.missTop=!1,r.missLeft=!1,r.leftRightFlag=!1;var o;o=i.getElementsByClassName("row")[0]?i.getElementsByClassName("row")[0].clientWidth:e.innerWidth;var a=(e.innerWidth-o)/2,l=o;return this.hasClass("mega")||(t.offset().top<=this.outerHeight()&&(r.missTop=!0,l=e.innerWidth-a,r.leftRightFlag=!0),t.offset().left+this.outerWidth()>t.offset().left+a&&t.offset().left-a>this.outerWidth()&&(r.missRight=!0,r.missLeft=!1),t.offset().left-this.outerWidth()<=0&&(r.missLeft=!0,r.missRight=!1)),r},top:function(t,e){var i=Foundation.libs.dropdown,n=i.dirs._base.call(this,t);return this.addClass("drop-top"),1==n.missTop&&(n.top=n.top+t.outerHeight()+this.outerHeight(),this.removeClass("drop-top")),1==n.missRight&&(n.left=n.left-this.outerWidth()+t.outerWidth()),(t.outerWidth()<this.outerWidth()||i.small()||this.hasClass(e.mega_menu))&&i.adjust_pip(this,t,e,n),Foundation.rtl?{left:n.left-this.outerWidth()+t.outerWidth(),top:n.top-this.outerHeight()}:{left:n.left,top:n.top-this.outerHeight()}},bottom:function(t,e){var i=Foundation.libs.dropdown,n=i.dirs._base.call(this,t);return 1==n.missRight&&(n.left=n.left-this.outerWidth()+t.outerWidth()),(t.outerWidth()<this.outerWidth()||i.small()||this.hasClass(e.mega_menu))&&i.adjust_pip(this,t,e,n),i.rtl?{left:n.left-this.outerWidth()+t.outerWidth(),top:n.top+t.outerHeight()}:{left:n.left,top:n.top+t.outerHeight()}},left:function(t,e){var i=Foundation.libs.dropdown.dirs._base.call(this,t);return this.addClass("drop-left"),1==i.missLeft&&(i.left=i.left+this.outerWidth(),i.top=i.top+t.outerHeight(),this.removeClass("drop-left")),{left:i.left-this.outerWidth(),top:i.top}},right:function(t,e){var i=Foundation.libs.dropdown.dirs._base.call(this,t);this.addClass("drop-right"),1==i.missRight?(i.left=i.left-this.outerWidth(),i.top=i.top+t.outerHeight(),this.removeClass("drop-right")):i.triggeredRight=!0;var n=Foundation.libs.dropdown;return(t.outerWidth()<this.outerWidth()||n.small()||this.hasClass(e.mega_menu))&&n.adjust_pip(this,t,e,i),{left:i.left+t.outerWidth(),top:i.top}}},adjust_pip:function(t,e,i,n){var s=Foundation.stylesheet,r=8;t.hasClass(i.mega_class)?r=n.left+e.outerWidth()/2-8:this.small()&&(r+=n.left-8),this.rule_idx=s.cssRules.length;var o=".f-dropdown.open:before",a=".f-dropdown.open:after",l="left: "+r+"px;",c="left: "+(r-1)+"px;";1==n.missRight&&(r=t.outerWidth()-23,o=".f-dropdown.open:before",a=".f-dropdown.open:after",l="left: "+r+"px;",c="left: "+(r-1)+"px;"),1==n.triggeredRight&&(o=".f-dropdown.open:before",a=".f-dropdown.open:after",l="left:-12px;",c="left:-14px;"),s.insertRule?(s.insertRule([o,"{",l,"}"].join(" "),this.rule_idx),
s.insertRule([a,"{",c,"}"].join(" "),this.rule_idx+1)):(s.addRule(o,l,this.rule_idx),s.addRule(a,c,this.rule_idx+1))},clear_idx:function(){var t=Foundation.stylesheet;"undefined"!=typeof this.rule_idx&&(t.deleteRule(this.rule_idx),t.deleteRule(this.rule_idx),delete this.rule_idx)},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},off:function(){this.S(this.scope).off(".fndtn.dropdown"),this.S("html, body").off(".fndtn.dropdown"),this.S(e).off(".fndtn.dropdown"),this.S("[data-dropdown-content]").off(".fndtn.dropdown")},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.equalizer={name:"equalizer",version:"5.5.2",settings:{use_tallest:!0,before_height_change:t.noop,after_height_change:t.noop,equalize_on_stack:!1,act_on_hidden_el:!1},init:function(t,e,i){Foundation.inherit(this,"image_loaded"),this.bindings(e,i),this.reflow()},events:function(){this.S(e).off(".equalizer").on("resize.fndtn.equalizer",function(t){this.reflow()}.bind(this))},equalize:function(e){var i,n,s=!1,r=e.data("equalizer"),o=e.data(this.attr_name(!0)+"-init")||this.settings;if(i=o.act_on_hidden_el?r?e.find("["+this.attr_name()+'-watch="'+r+'"]'):e.find("["+this.attr_name()+"-watch]"):r?e.find("["+this.attr_name()+'-watch="'+r+'"]:visible'):e.find("["+this.attr_name()+"-watch]:visible"),0!==i.length&&(o.before_height_change(),e.trigger("before-height-change.fndth.equalizer"),i.height("inherit"),o.equalize_on_stack!==!1||(n=i.first().offset().top,i.each(function(){return t(this).offset().top!==n?(s=!0,!1):void 0}),!s))){var a=i.map(function(){return t(this).outerHeight(!1)}).get();if(o.use_tallest){var l=Math.max.apply(null,a);i.css("height",l)}else{var c=Math.min.apply(null,a);i.css("height",c)}o.after_height_change(),e.trigger("after-height-change.fndtn.equalizer")}},reflow:function(){var e=this;this.S("["+this.attr_name()+"]",this.scope).each(function(){var i=t(this),n=i.data("equalizer-mq"),s=!0;n&&(n="is_"+n.replace(/-/g,"_"),Foundation.utils.hasOwnProperty(n)&&(s=!1)),e.image_loaded(e.S("img",this),function(){if(s||Foundation.utils[n]())e.equalize(i);else{var t=i.find("["+e.attr_name()+"-watch]:visible");t.css("height","auto")}})})}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.interchange={name:"interchange",version:"5.5.2",cache:{},images_loaded:!1,nodes_loaded:!1,settings:{load_attr:"interchange",named_queries:{"default":"only screen",small:Foundation.media_queries.small,"small-only":Foundation.media_queries["small-only"],medium:Foundation.media_queries.medium,"medium-only":Foundation.media_queries["medium-only"],large:Foundation.media_queries.large,"large-only":Foundation.media_queries["large-only"],xlarge:Foundation.media_queries.xlarge,"xlarge-only":Foundation.media_queries["xlarge-only"],xxlarge:Foundation.media_queries.xxlarge,landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(e,i,n){if(null!==e&&/IMG/.test(e[0].nodeName)){var s=e[0].src;if(new RegExp(i,"i").test(s))return;return e.attr("src",i),n(e[0].src)}var r=e.data(this.data_attr+"-last-path"),o=this;if(r!=i)return/\.(gif|jpg|jpeg|tiff|png)([?#].*)?/i.test(i)?(t(e).css("background-image","url("+i+")"),e.data("interchange-last-path",i),n(i)):t.get(i,function(t){e.html(t),e.data(o.data_attr+"-last-path",i),n()})}}},init:function(e,i,n){Foundation.inherit(this,"throttle random_str"),this.data_attr=this.set_data_attr(),t.extend(!0,this.settings,i,n),this.bindings(i,n),this.reflow()},get_media_hash:function(){var t="";for(var e in this.settings.named_queries)t+=matchMedia(this.settings.named_queries[e]).matches.toString();return t},events:function(){var i,n=this;return t(e).off(".interchange").on("resize.fndtn.interchange",n.throttle(function(){var t=n.get_media_hash();t!==i&&n.resize(),i=t},50)),this},resize:function(){var e=this.cache;if(!this.images_loaded||!this.nodes_loaded)return void setTimeout(t.proxy(this.resize,this),50);for(var i in e)if(e.hasOwnProperty(i)){var n=this.results(i,e[i]);n&&this.settings.directives[n.scenario[1]].call(this,n.el,n.scenario[0],function(t){if(arguments[0]instanceof Array)var e=arguments[0];else var e=Array.prototype.slice.call(arguments,0);return function(){t.el.trigger(t.scenario[1],e)}}(n))}},results:function(t,e){var i=e.length;if(i>0)for(var n=this.S("["+this.add_namespace("data-uuid")+'="'+t+'"]');i--;){var s,r=e[i][2];if(s=this.settings.named_queries.hasOwnProperty(r)?matchMedia(this.settings.named_queries[r]):matchMedia(r),s.matches)return{el:n,scenario:e[i]}}return!1},load:function(t,e){return("undefined"==typeof this["cached_"+t]||e)&&this["update_"+t](),this["cached_"+t]},update_images:function(){var t=this.S("img["+this.data_attr+"]"),e=t.length,i=e,n=0,s=this.data_attr;for(this.cache={},this.cached_images=[],this.images_loaded=0===e;i--;){if(n++,t[i]){var r=t[i].getAttribute(s)||"";r.length>0&&this.cached_images.push(t[i])}n===e&&(this.images_loaded=!0,this.enhance("images"))}return this},update_nodes:function(){var t=this.S("["+this.data_attr+"]").not("img"),e=t.length,i=e,n=0,s=this.data_attr;for(this.cached_nodes=[],this.nodes_loaded=0===e;i--;){n++;var r=t[i].getAttribute(s)||"";r.length>0&&this.cached_nodes.push(t[i]),n===e&&(this.nodes_loaded=!0,this.enhance("nodes"))}return this},enhance:function(i){for(var n=this["cached_"+i].length;n--;)this.object(t(this["cached_"+i][n]));return t(e).trigger("resize.fndtn.interchange")},convert_directive:function(t){var e=this.trim(t);return e.length>0?e:"replace"},parse_scenario:function(t){var e=t[0].match(/(.+),\s*(\w+)\s*$/),i=t[1].match(/(.*)\)/);if(e)var n=e[1],s=e[2];else var r=t[0].split(/,\s*$/),n=r[0],s="";return[this.trim(n),this.convert_directive(s),this.trim(i[1])]},object:function(t){var e=this.parse_data_attr(t),i=[],n=e.length;if(n>0)for(;n--;){var s=e[n].split(/,\s?\(/);if(s.length>1){var r=this.parse_scenario(s);i.push(r)}}return this.store(t,i)},store:function(t,e){var i=this.random_str(),n=t.data(this.add_namespace("uuid",!0));return this.cache[n]?this.cache[n]:(t.attr(this.add_namespace("data-uuid"),i),this.cache[i]=e)},trim:function(e){return"string"==typeof e?t.trim(e):e},set_data_attr:function(t){return t?this.namespace.length>0?this.namespace+"-"+this.settings.load_attr:this.settings.load_attr:this.namespace.length>0?"data-"+this.namespace+"-"+this.settings.load_attr:"data-"+this.settings.load_attr},parse_data_attr:function(t){for(var e=t.attr(this.attr_name()).split(/\[(.*?)\]/),i=e.length,n=[];i--;)e[i].replace(/[\W\d]+/,"").length>4&&n.push(e[i]);return n},reflow:function(){this.load("images",!0),this.load("nodes",!0)}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.joyride={name:"joyride",version:"5.5.2",defaults:{expose:!1,modal:!0,keyboard:!0,tip_location:"bottom",nub_position:"auto",scroll_speed:1500,scroll_animation:"linear",timer:0,start_timer_on_click:!0,start_offset:0,next_button:!0,prev_button:!0,tip_animation:"fade",pause_after:[],exposed:[],tip_animation_fade_speed:300,cookie_monster:!1,cookie_name:"joyride",cookie_domain:!1,cookie_expires:365,tip_container:"body",abort_on_close:!0,tip_location_patterns:{top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},post_ride_callback:function(){},post_step_callback:function(){},pre_step_callback:function(){},pre_ride_callback:function(){},post_expose_callback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',prev_button:'<a href="#" class="small button joyride-prev-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',expose_cover:'<div class="joyride-expose-cover"></div>'},expose_add_class:""},init:function(e,i,n){Foundation.inherit(this,"throttle random_str"),this.settings=this.settings||t.extend({},this.defaults,n||i),this.bindings(i,n)},go_next:function(){this.settings.$li.next().length<1?this.end():this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(),this.startTimer()):(this.hide(),this.show())},go_prev:function(){this.settings.$li.prev().length<1||(this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(null,!0),this.startTimer()):(this.hide(),this.show(null,!0)))},events:function(){var i=this;t(this.scope).off(".joyride").on("click.fndtn.joyride",".joyride-next-tip, .joyride-modal-bg",function(t){t.preventDefault(),this.go_next()}.bind(this)).on("click.fndtn.joyride",".joyride-prev-tip",function(t){t.preventDefault(),this.go_prev()}.bind(this)).on("click.fndtn.joyride",".joyride-close-tip",function(t){t.preventDefault(),this.end(this.settings.abort_on_close)}.bind(this)).on("keyup.fndtn.joyride",function(t){if(this.settings.keyboard&&this.settings.riding)switch(t.which){case 39:t.preventDefault(),this.go_next();break;case 37:t.preventDefault(),this.go_prev();break;case 27:t.preventDefault(),this.end(this.settings.abort_on_close)}}.bind(this)),t(e).off(".joyride").on("resize.fndtn.joyride",i.throttle(function(){if(t("["+i.attr_name()+"]").length>0&&i.settings.$next_tip&&i.settings.riding){if(i.settings.exposed.length>0){var e=t(i.settings.exposed);e.each(function(){var e=t(this);i.un_expose(e),i.expose(e)})}i.is_phone()?i.pos_phone():i.pos_default(!1)}},100))},start:function(){var e=this,i=t("["+this.attr_name()+"]",this.scope),n=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],s=n.length;!i.length>0||(this.settings.init||this.events(),this.settings=i.data(this.attr_name(!0)+"-init"),this.settings.$content_el=i,this.settings.$body=t(this.settings.tip_container),this.settings.body_offset=t(this.settings.tip_container).position(),this.settings.$tip_content=this.settings.$content_el.find("> li"),this.settings.paused=!1,this.settings.attempts=0,this.settings.riding=!0,"function"!=typeof t.cookie&&(this.settings.cookie_monster=!1),(!this.settings.cookie_monster||this.settings.cookie_monster&&!t.cookie(this.settings.cookie_name))&&(this.settings.$tip_content.each(function(i){var r=t(this);this.settings=t.extend({},e.defaults,e.data_options(r));for(var o=s;o--;)e.settings[n[o]]=parseInt(e.settings[n[o]],10);e.create({$li:r,index:i})}),!this.settings.start_timer_on_click&&this.settings.timer>0?(this.show("init"),this.startTimer()):this.show("init")))},resume:function(){this.set_li(),this.show()},tip_template:function(e){var i,n;return e.tip_class=e.tip_class||"",i=t(this.settings.template.tip).addClass(e.tip_class),n=t.trim(t(e.li).html())+this.prev_button_text(e.prev_button_text,e.index)+this.button_text(e.button_text)+this.settings.template.link+this.timer_instance(e.index),i.append(t(this.settings.template.wrapper)),i.first().attr(this.add_namespace("data-index"),e.index),t(".joyride-content-wrapper",i).append(n),i[0]},timer_instance:function(e){var i;return i=0===e&&this.settings.start_timer_on_click&&this.settings.timer>0||0===this.settings.timer?"":t(this.settings.template.timer)[0].outerHTML},button_text:function(e){return this.settings.tip_settings.next_button?(e=t.trim(e)||"Next",e=t(this.settings.template.button).append(e)[0].outerHTML):e="",e},prev_button_text:function(e,i){return this.settings.tip_settings.prev_button?(e=t.trim(e)||"Previous",e=0==i?t(this.settings.template.prev_button).append(e).addClass("disabled")[0].outerHTML:t(this.settings.template.prev_button).append(e)[0].outerHTML):e="",e},create:function(e){this.settings.tip_settings=t.extend({},this.settings,this.data_options(e.$li));var i=e.$li.attr(this.add_namespace("data-button"))||e.$li.attr(this.add_namespace("data-text")),n=e.$li.attr(this.add_namespace("data-button-prev"))||e.$li.attr(this.add_namespace("data-prev-text")),s=e.$li.attr("class"),r=t(this.tip_template({tip_class:s,index:e.index,button_text:i,prev_button_text:n,li:e.$li}));t(this.settings.tip_container).append(r)},show:function(e,i){var s=null;if(this.settings.$li===n||-1===t.inArray(this.settings.$li.index(),this.settings.pause_after))if(this.settings.paused?this.settings.paused=!1:this.set_li(e,i),this.settings.attempts=0,this.settings.$li.length&&this.settings.$target.length>0){if(e&&(this.settings.pre_ride_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.show_modal()),this.settings.pre_step_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.settings.expose&&this.expose(),this.settings.tip_settings=t.extend({},this.settings,this.data_options(this.settings.$li)),this.settings.timer=parseInt(this.settings.timer,10),this.settings.tip_settings.tip_location_pattern=this.settings.tip_location_patterns[this.settings.tip_settings.tip_location],!/body/i.test(this.settings.$target.selector)){var r=t(".joyride-modal-bg");/pop/i.test(this.settings.tipAnimation)?r.hide():r.fadeOut(this.settings.tipAnimationFadeSpeed),this.scroll_to()}this.is_phone()?this.pos_phone(!0):this.pos_default(!0),s=this.settings.$next_tip.find(".joyride-timer-indicator"),/pop/i.test(this.settings.tip_animation)?(s.width(0),this.settings.timer>0?(this.settings.$next_tip.show(),setTimeout(function(){s.animate({width:s.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)):this.settings.$next_tip.show()):/fade/i.test(this.settings.tip_animation)&&(s.width(0),this.settings.timer>0?(this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed).show(),setTimeout(function(){s.animate({width:s.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)):this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed)),this.settings.$current_tip=this.settings.$next_tip}else this.settings.$li&&this.settings.$target.length<1?this.show(e,i):this.end();else this.settings.paused=!0},is_phone:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},hide:function(){this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.modal||t(".joyride-modal-bg").hide(),this.settings.$current_tip.css("visibility","hidden"),setTimeout(t.proxy(function(){this.hide(),this.css("visibility","visible")},this.settings.$current_tip),0),this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(t,e){t?(this.settings.$li=this.settings.$tip_content.eq(this.settings.start_offset),this.set_next_tip(),this.settings.$current_tip=this.settings.$next_tip):(e?this.settings.$li=this.settings.$li.prev():this.settings.$li=this.settings.$li.next(),this.set_next_tip()),this.set_target()},set_next_tip:function(){this.settings.$next_tip=t(".joyride-tip-guide").eq(this.settings.$li.index()),this.settings.$next_tip.data("closed","")},set_target:function(){var e=this.settings.$li.attr(this.add_namespace("data-class")),n=this.settings.$li.attr(this.add_namespace("data-id")),s=function(){return n?t(i.getElementById(n)):e?t("."+e).first():t("body")};this.settings.$target=s()},scroll_to:function(){var i,n;i=t(e).height()/2,n=Math.ceil(this.settings.$target.offset().top-i+this.settings.$next_tip.outerHeight()),0!=n&&t("html, body").stop().animate({scrollTop:n},this.settings.scroll_speed,"swing")},paused:function(){return-1===t.inArray(this.settings.$li.index()+1,this.settings.pause_after)},restart:function(){this.hide(),this.settings.$li=n,this.show("init")},pos_default:function(t){var e=this.settings.$next_tip.find(".joyride-nub"),i=Math.ceil(e.outerWidth()/2),n=Math.ceil(e.outerHeight()/2),s=t||!1;if(s&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector))this.settings.$li.length&&this.pos_modal(e);else{var r=this.settings.tip_settings.tipAdjustmentY?parseInt(this.settings.tip_settings.tipAdjustmentY):0,o=this.settings.tip_settings.tipAdjustmentX?parseInt(this.settings.tip_settings.tipAdjustmentX):0;this.bottom()?(this.rtl?this.settings.$next_tip.css({top:this.settings.$target.offset().top+n+this.settings.$target.outerHeight()+r,left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()+o}):this.settings.$next_tip.css({top:this.settings.$target.offset().top+n+this.settings.$target.outerHeight()+r,left:this.settings.$target.offset().left+o}),this.nub_position(e,this.settings.tip_settings.nub_position,"top")):this.top()?(this.rtl?this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-n+r,left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()}):this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-n+r,left:this.settings.$target.offset().left+o}),this.nub_position(e,this.settings.tip_settings.nub_position,"bottom")):this.right()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top+r,left:this.settings.$target.outerWidth()+this.settings.$target.offset().left+i+o}),this.nub_position(e,this.settings.tip_settings.nub_position,"left")):this.left()&&(this.settings.$next_tip.css({top:this.settings.$target.offset().top+r,left:this.settings.$target.offset().left-this.settings.$next_tip.outerWidth()-i+o}),this.nub_position(e,this.settings.tip_settings.nub_position,"right")),!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tip_settings.tip_location_pattern.length&&(e.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),this.settings.tip_settings.tip_location=this.settings.tip_settings.tip_location_pattern[this.settings.attempts],this.settings.attempts++,this.pos_default())}s&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_phone:function(e){var i=this.settings.$next_tip.outerHeight(),n=(this.settings.$next_tip.offset(),this.settings.$target.outerHeight()),s=t(".joyride-nub",this.settings.$next_tip),r=Math.ceil(s.outerHeight()/2),o=e||!1;s.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),o&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(s):this.top()?(this.settings.$next_tip.offset({top:this.settings.$target.offset().top-i-r}),s.addClass("bottom")):(this.settings.$next_tip.offset({top:this.settings.$target.offset().top+n+r}),s.addClass("top")),o&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_modal:function(t){this.center(),t.hide(),this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var e=t(".joyride-modal-bg");if(e.length<1){var e=t(this.settings.template.modal);e.appendTo("body")}/pop/i.test(this.settings.tip_animation)?e.show():e.fadeIn(this.settings.tip_animation_fade_speed)}},expose:function(){var i,n,s,r,o,a="expose-"+this.random_str(6);if(arguments.length>0&&arguments[0]instanceof t)s=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;s=this.settings.$target}return s.length<1?(e.console&&console.error("element not valid",s),!1):(i=t(this.settings.template.expose),this.settings.$body.append(i),i.css({top:s.offset().top,left:s.offset().left,width:s.outerWidth(!0),height:s.outerHeight(!0)}),n=t(this.settings.template.expose_cover),r={zIndex:s.css("z-index"),position:s.css("position")},o=null==s.attr("class")?"":s.attr("class"),s.css("z-index",parseInt(i.css("z-index"))+1),"static"==r.position&&s.css("position","relative"),s.data("expose-css",r),s.data("orig-class",o),s.attr("class",o+" "+this.settings.expose_add_class),n.css({top:s.offset().top,left:s.offset().left,width:s.outerWidth(!0),height:s.outerHeight(!0)}),this.settings.modal&&this.show_modal(),this.settings.$body.append(n),i.addClass(a),n.addClass(a),s.data("expose",a),this.settings.post_expose_callback(this.settings.$li.index(),this.settings.$next_tip,s),void this.add_exposed(s))},un_expose:function(){var i,n,s,r,o,a=!1;if(arguments.length>0&&arguments[0]instanceof t)n=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;n=this.settings.$target}return n.length<1?(e.console&&console.error("element not valid",n),!1):(i=n.data("expose"),s=t("."+i),arguments.length>1&&(a=arguments[1]),a===!0?t(".joyride-expose-wrapper,.joyride-expose-cover").remove():s.remove(),r=n.data("expose-css"),"auto"==r.zIndex?n.css("z-index",""):n.css("z-index",r.zIndex),r.position!=n.css("position")&&("static"==r.position?n.css("position",""):n.css("position",r.position)),o=n.data("orig-class"),n.attr("class",o),n.removeData("orig-classes"),n.removeData("expose"),n.removeData("expose-z-index"),void this.remove_exposed(n))},add_exposed:function(e){this.settings.exposed=this.settings.exposed||[],e instanceof t||"object"==typeof e?this.settings.exposed.push(e[0]):"string"==typeof e&&this.settings.exposed.push(e)},remove_exposed:function(e){var i,n;for(e instanceof t?i=e[0]:"string"==typeof e&&(i=e),this.settings.exposed=this.settings.exposed||[],n=this.settings.exposed.length;n--;)if(this.settings.exposed[n]==i)return void this.settings.exposed.splice(n,1)},center:function(){var i=t(e);return this.settings.$next_tip.css({top:(i.height()-this.settings.$next_tip.outerHeight())/2+i.scrollTop(),left:(i.width()-this.settings.$next_tip.outerWidth())/2+i.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(this.settings.tip_settings.tip_location)},top:function(){return/top/i.test(this.settings.tip_settings.tip_location)},right:function(){return/right/i.test(this.settings.tip_settings.tip_location)},left:function(){return/left/i.test(this.settings.tip_settings.tip_location)},corners:function(i){var n=t(e),s=n.height()/2,r=Math.ceil(this.settings.$target.offset().top-s+this.settings.$next_tip.outerHeight()),o=n.width()+n.scrollLeft(),a=n.height()+r,l=n.height()+n.scrollTop(),c=n.scrollTop();return c>r&&(c=0>r?0:r),a>l&&(l=a),[i.offset().top<c,o<i.offset().left+i.outerWidth(),l<i.offset().top+i.outerHeight(),n.scrollLeft()>i.offset().left]},visible:function(t){for(var e=t.length;e--;)if(t[e])return!1;return!0},nub_position:function(t,e,i){"auto"===e?t.addClass(i):t.addClass(e)},startTimer:function(){this.settings.$li.length?this.settings.automate=setTimeout(function(){this.hide(),this.show(),this.startTimer()}.bind(this),this.settings.timer):clearTimeout(this.settings.automate)},end:function(e){this.settings.cookie_monster&&t.cookie(this.settings.cookie_name,"ridden",{expires:this.settings.cookie_expires,domain:this.settings.cookie_domain}),this.settings.timer>0&&clearTimeout(this.settings.automate),this.settings.modal&&this.settings.expose&&this.un_expose(),t(this.scope).off("keyup.joyride"),this.settings.$next_tip.data("closed",!0),this.settings.riding=!1,t(".joyride-modal-bg").hide(),this.settings.$current_tip.hide(),("undefined"==typeof e||e===!1)&&(this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip),this.settings.post_ride_callback(this.settings.$li.index(),this.settings.$current_tip)),t(".joyride-tip-guide").remove()},off:function(){t(this.scope).off(".joyride"),t(e).off(".joyride"),t(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),t(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(this.settings.automate),this.settings={}},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs["magellan-expedition"]={name:"magellan-expedition",version:"5.5.2",settings:{active_class:"active",threshold:0,destination_threshold:20,throttle_delay:30,fixed_top:0,offset_by_height:!0,duration:700,easing:"swing"},init:function(t,e,i){Foundation.inherit(this,"throttle"),this.bindings(e,i)},events:function(){var e=this,i=e.S,n=e.settings;e.set_expedition_position(),i(e.scope).off(".magellan").on("click.fndtn.magellan","["+e.add_namespace("data-magellan-arrival")+"] a[href*=#]",function(i){var n=this.hostname===location.hostname||!this.hostname,s=e.filterPathname(location.pathname)===e.filterPathname(this.pathname),r=this.hash.replace(/(:|\.|\/)/g,"\\$1"),o=this;if(n&&s&&r){i.preventDefault();var a=t(this).closest("["+e.attr_name()+"]"),l=a.data("magellan-expedition-init"),c=this.hash.split("#").join(""),h=t('a[name="'+c+'"]');0===h.length&&(h=t("#"+c));var u=h.offset().top-l.destination_threshold+1;l.offset_by_height&&(u-=a.outerHeight()),t("html, body").stop().animate({scrollTop:u},l.duration,l.easing,function(){history.pushState?history.pushState(null,null,o.pathname+"#"+c):location.hash=o.pathname+"#"+c})}}).on("scroll.fndtn.magellan",e.throttle(this.check_for_arrivals.bind(this),n.throttle_delay))},check_for_arrivals:function(){var t=this;t.update_arrivals(),t.update_expedition_positions()},set_expedition_position:function(){var e=this;t("["+this.attr_name()+"=fixed]",e.scope).each(function(i,n){var s,r,o=t(this),a=o.data("magellan-expedition-init"),l=o.attr("styles");o.attr("style",""),s=o.offset().top+a.threshold,r=parseInt(o.data("magellan-fixed-top")),isNaN(r)||(e.settings.fixed_top=r),o.data(e.data_attr("magellan-top-offset"),s),o.attr("style",l)})},update_expedition_positions:function(){var i=this,n=t(e).scrollTop();t("["+this.attr_name()+"=fixed]",i.scope).each(function(){var e=t(this),s=e.data("magellan-expedition-init"),r=e.attr("style"),o=e.data("magellan-top-offset");if(n+i.settings.fixed_top>=o){var a=e.prev("["+i.add_namespace("data-magellan-expedition-clone")+"]");0===a.length&&(a=e.clone(),a.removeAttr(i.attr_name()),a.attr(i.add_namespace("data-magellan-expedition-clone"),""),e.before(a)),e.css({position:"fixed",top:s.fixed_top}).addClass("fixed")}else e.prev("["+i.add_namespace("data-magellan-expedition-clone")+"]").remove(),e.attr("style",r).css("position","").css("top","").removeClass("fixed")})},update_arrivals:function(){var i=this,n=t(e).scrollTop();t("["+this.attr_name()+"]",i.scope).each(function(){var e=t(this),s=e.data(i.attr_name(!0)+"-init"),r=i.offsets(e,n),o=e.find("["+i.add_namespace("data-magellan-arrival")+"]"),a=!1;r.each(function(t,n){if(n.viewport_offset>=n.top_offset){var r=e.find("["+i.add_namespace("data-magellan-arrival")+"]");return r.not(n.arrival).removeClass(s.active_class),n.arrival.addClass(s.active_class),a=!0,!0}}),a||o.removeClass(s.active_class)})},offsets:function(e,i){var n=this,s=e.data(n.attr_name(!0)+"-init"),r=i;return e.find("["+n.add_namespace("data-magellan-arrival")+"]").map(function(i,o){var a=t(this).data(n.data_attr("magellan-arrival")),l=t("["+n.add_namespace("data-magellan-destination")+"="+a+"]");if(l.length>0){var c=l.offset().top-s.destination_threshold;return s.offset_by_height&&(c-=e.outerHeight()),c=Math.floor(c),{destination:l,arrival:t(this),top_offset:c,viewport_offset:r}}}).sort(function(t,e){return t.top_offset<e.top_offset?-1:t.top_offset>e.top_offset?1:0})},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},off:function(){this.S(this.scope).off(".magellan"),this.S(e).off(".magellan")},filterPathname:function(t){return t=t||"",t.replace(/^\//,"").replace(/(?:index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},reflow:function(){var e=this;t("["+e.add_namespace("data-magellan-expedition-clone")+"]",e.scope).remove()}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.offcanvas={name:"offcanvas",version:"5.5.2",settings:{open_method:"move",close_on_click:!1},init:function(t,e,i){this.bindings(e,i)},events:function(){var e=this,i=e.S,n="",s="",r="";"move"===this.settings.open_method?(n="move-",s="right",r="left"):"overlap_single"===this.settings.open_method?(n="offcanvas-overlap-",s="right",r="left"):"overlap"===this.settings.open_method&&(n="offcanvas-overlap"),i(this.scope).off(".offcanvas").on("click.fndtn.offcanvas",".left-off-canvas-toggle",function(r){e.click_toggle_class(r,n+s),"overlap"!==e.settings.open_method&&i(".left-submenu").removeClass(n+s),t(".left-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".left-off-canvas-menu a",function(r){var o=e.get_settings(r),a=i(this).parent();!o.close_on_click||a.hasClass("has-submenu")||a.hasClass("back")?i(this).parent().hasClass("has-submenu")?(r.preventDefault(),i(this).siblings(".left-submenu").toggleClass(n+s)):a.hasClass("back")&&(r.preventDefault(),a.parent().removeClass(n+s)):(e.hide.call(e,n+s,e.get_wrapper(r)),a.parent().removeClass(n+s)),t(".left-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".right-off-canvas-toggle",function(s){e.click_toggle_class(s,n+r),"overlap"!==e.settings.open_method&&i(".right-submenu").removeClass(n+r),t(".right-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".right-off-canvas-menu a",function(s){var o=e.get_settings(s),a=i(this).parent();!o.close_on_click||a.hasClass("has-submenu")||a.hasClass("back")?i(this).parent().hasClass("has-submenu")?(s.preventDefault(),i(this).siblings(".right-submenu").toggleClass(n+r)):a.hasClass("back")&&(s.preventDefault(),a.parent().removeClass(n+r)):(e.hide.call(e,n+r,e.get_wrapper(s)),a.parent().removeClass(n+r)),t(".right-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".exit-off-canvas",function(o){e.click_remove_class(o,n+r),i(".right-submenu").removeClass(n+r),s&&(e.click_remove_class(o,n+s),i(".left-submenu").removeClass(n+r)),t(".right-off-canvas-toggle").attr("aria-expanded","true")}).on("click.fndtn.offcanvas",".exit-off-canvas",function(i){e.click_remove_class(i,n+r),t(".left-off-canvas-toggle").attr("aria-expanded","false"),s&&(e.click_remove_class(i,n+s),t(".right-off-canvas-toggle").attr("aria-expanded","false"))})},toggle:function(t,e){e=e||this.get_wrapper(),e.is("."+t)?this.hide(t,e):this.show(t,e)},show:function(t,e){e=e||this.get_wrapper(),e.trigger("open.fndtn.offcanvas"),e.addClass(t)},hide:function(t,e){e=e||this.get_wrapper(),e.trigger("close.fndtn.offcanvas"),e.removeClass(t)},click_toggle_class:function(t,e){t.preventDefault();var i=this.get_wrapper(t);this.toggle(e,i)},click_remove_class:function(t,e){t.preventDefault();var i=this.get_wrapper(t);this.hide(e,i)},get_settings:function(t){var e=this.S(t.target).closest("["+this.attr_name()+"]");return e.data(this.attr_name(!0)+"-init")||this.settings},get_wrapper:function(t){var e=this.S(t?t.target:this.scope).closest(".off-canvas-wrap");return 0===e.length&&(e=this.S(".off-canvas-wrap")),e},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";var s=function(){},r=function(s,r){if(s.hasClass(r.slides_container_class))return this;var c,h,u,d,p,f,g=this,m=s,v=0,y=!1;g.slides=function(){return m.children(r.slide_selector)},g.slides().first().addClass(r.active_slide_class),g.update_slide_number=function(e){r.slide_number&&(h.find("span:first").text(parseInt(e)+1),h.find("span:last").text(g.slides().length)),r.bullets&&(u.children().removeClass(r.bullets_active_class),t(u.children().get(e)).addClass(r.bullets_active_class))},g.update_active_link=function(e){var i=t('[data-orbit-link="'+g.slides().eq(e).attr("data-orbit-slide")+'"]');i.siblings().removeClass(r.bullets_active_class),i.addClass(r.bullets_active_class)},g.build_markup=function(){m.wrap('<div class="'+r.container_class+'"></div>'),c=m.parent(),m.addClass(r.slides_container_class),r.stack_on_small&&c.addClass(r.stack_on_small_class),r.navigation_arrows&&(c.append(t('<a href="#"><span></span></a>').addClass(r.prev_class)),c.append(t('<a href="#"><span></span></a>').addClass(r.next_class))),r.timer&&(d=t("<div>").addClass(r.timer_container_class),d.append("<span>"),d.append(t("<div>").addClass(r.timer_progress_class)),d.addClass(r.timer_paused_class),c.append(d)),r.slide_number&&(h=t("<div>").addClass(r.slide_number_class),h.append("<span></span> "+r.slide_number_text+" <span></span>"),c.append(h)),r.bullets&&(u=t("<ol>").addClass(r.bullets_container_class),c.append(u),u.wrap('<div class="orbit-bullets-container"></div>'),g.slides().each(function(e,i){var n=t("<li>").attr("data-orbit-slide",e).on("click",g.link_bullet);
u.append(n)}))},g._goto=function(e,i){if(e===v)return!1;"object"==typeof f&&f.restart();var n=g.slides(),s="next";if(y=!0,v>e&&(s="prev"),e>=n.length){if(!r.circular)return!1;e=0}else if(0>e){if(!r.circular)return!1;e=n.length-1}var o=t(n.get(v)),a=t(n.get(e));o.css("zIndex",2),o.removeClass(r.active_slide_class),a.css("zIndex",4).addClass(r.active_slide_class),m.trigger("before-slide-change.fndtn.orbit"),r.before_slide_change(),g.update_active_link(e);var l=function(){var t=function(){v=e,y=!1,i===!0&&(f=g.create_timer(),f.start()),g.update_slide_number(v),m.trigger("after-slide-change.fndtn.orbit",[{slide_number:v,total_slides:n.length}]),r.after_slide_change(v,n.length)};m.outerHeight()!=a.outerHeight()&&r.variable_height?m.animate({height:a.outerHeight()},250,"linear",t):t()};if(1===n.length)return l(),!1;var c=function(){"next"===s&&p.next(o,a,l),"prev"===s&&p.prev(o,a,l)};a.outerHeight()>m.outerHeight()&&r.variable_height?m.animate({height:a.outerHeight()},250,"linear",c):c()},g.next=function(t){t.stopImmediatePropagation(),t.preventDefault(),g._goto(v+1)},g.prev=function(t){t.stopImmediatePropagation(),t.preventDefault(),g._goto(v-1)},g.link_custom=function(e){e.preventDefault();var i=t(this).attr("data-orbit-link");if("string"==typeof i&&""!=(i=t.trim(i))){var n=c.find("[data-orbit-slide="+i+"]");-1!=n.index()&&g._goto(n.index())}},g.link_bullet=function(e){var i=t(this).attr("data-orbit-slide");if("string"==typeof i&&""!=(i=t.trim(i)))if(isNaN(parseInt(i))){var n=c.find("[data-orbit-slide="+i+"]");-1!=n.index()&&g._goto(n.index()+1)}else g._goto(parseInt(i))},g.timer_callback=function(){g._goto(v+1,!0)},g.compute_dimensions=function(){var e=t(g.slides().get(v)),i=e.outerHeight();r.variable_height||g.slides().each(function(){t(this).outerHeight()>i&&(i=t(this).outerHeight())}),m.height(i)},g.create_timer=function(){var t=new o(c.find("."+r.timer_container_class),r,g.timer_callback);return t},g.stop_timer=function(){"object"==typeof f&&f.stop()},g.toggle_timer=function(){var t=c.find("."+r.timer_container_class);t.hasClass(r.timer_paused_class)?("undefined"==typeof f&&(f=g.create_timer()),f.start()):"object"==typeof f&&f.stop()},g.init=function(){g.build_markup(),r.timer&&(f=g.create_timer(),Foundation.utils.image_loaded(this.slides().children("img"),f.start)),p=new l(r,m),"slide"===r.animation&&(p=new a(r,m)),c.on("click","."+r.next_class,g.next),c.on("click","."+r.prev_class,g.prev),r.next_on_click&&c.on("click","."+r.slides_container_class+" [data-orbit-slide]",g.link_bullet),c.on("click",g.toggle_timer),r.swipe&&c.on("touchstart.fndtn.orbit",function(t){t.touches||(t=t.originalEvent);var e={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:n};c.data("swipe-transition",e),t.stopPropagation()}).on("touchmove.fndtn.orbit",function(t){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale)){var e=c.data("swipe-transition");if("undefined"==typeof e&&(e={}),e.delta_x=t.touches[0].pageX-e.start_page_x,"undefined"==typeof e.is_scrolling&&(e.is_scrolling=!!(e.is_scrolling||Math.abs(e.delta_x)<Math.abs(t.touches[0].pageY-e.start_page_y))),!e.is_scrolling&&!e.active){t.preventDefault();var i=e.delta_x<0?v+1:v-1;e.active=!0,g._goto(i)}}}).on("touchend.fndtn.orbit",function(t){c.data("swipe-transition",{}),t.stopPropagation()}),c.on("mouseenter.fndtn.orbit",function(t){r.timer&&r.pause_on_hover&&g.stop_timer()}).on("mouseleave.fndtn.orbit",function(t){r.timer&&r.resume_on_mouseout&&f.start()}),t(i).on("click","[data-orbit-link]",g.link_custom),t(e).on("load resize",g.compute_dimensions),Foundation.utils.image_loaded(this.slides().children("img"),g.compute_dimensions),Foundation.utils.image_loaded(this.slides().children("img"),function(){c.prev("."+r.preloader_class).css("display","none"),g.update_slide_number(0),g.update_active_link(0),m.trigger("ready.fndtn.orbit")})},g.init()},o=function(t,e,i){var n,s,r=this,o=e.timer_speed,a=t.find("."+e.timer_progress_class),l=-1;this.update_progress=function(t){var e=a.clone();e.attr("style",""),e.css("width",t+"%"),a.replaceWith(e),a=e},this.restart=function(){clearTimeout(s),t.addClass(e.timer_paused_class),l=-1,r.update_progress(0)},this.start=function(){return t.hasClass(e.timer_paused_class)?(l=-1===l?o:l,t.removeClass(e.timer_paused_class),n=(new Date).getTime(),a.animate({width:"100%"},l,"linear"),s=setTimeout(function(){r.restart(),i()},l),void t.trigger("timer-started.fndtn.orbit")):!0},this.stop=function(){if(t.hasClass(e.timer_paused_class))return!0;clearTimeout(s),t.addClass(e.timer_paused_class);var i=(new Date).getTime();l-=i-n;var a=100-l/o*100;r.update_progress(a),t.trigger("timer-stopped.fndtn.orbit")}},a=function(e,i){var n=e.animation_speed,s=1===t("html[dir=rtl]").length,r=s?"marginRight":"marginLeft",o={};o[r]="0%",this.next=function(t,e,i){t.animate({marginLeft:"-100%"},n),e.animate(o,n,function(){t.css(r,"100%"),i()})},this.prev=function(t,e,i){t.animate({marginLeft:"100%"},n),e.css(r,"-100%"),e.animate(o,n,function(){t.css(r,"100%"),i()})}},l=function(e,i){var n=e.animation_speed;1===t("html[dir=rtl]").length;this.next=function(t,e,i){e.css({margin:"0%",opacity:"0.01"}),e.animate({opacity:"1"},n,"linear",function(){t.css("margin","100%"),i()})},this.prev=function(t,e,i){e.css({margin:"0%",opacity:"0.01"}),e.animate({opacity:"1"},n,"linear",function(){t.css("margin","100%"),i()})}};Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={name:"orbit",version:"5.5.2",settings:{animation:"slide",timer_speed:1e4,pause_on_hover:!0,resume_on_mouseout:!1,next_on_click:!0,animation_speed:500,stack_on_small:!1,navigation_arrows:!0,slide_number:!0,slide_number_text:"of",container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",preloader_class:"preloader",slide_selector:"*",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:!0,circular:!0,timer:!0,variable_height:!1,swipe:!0,before_slide_change:s,after_slide_change:s},init:function(t,e,i){this.bindings(e,i)},events:function(t){var e=new r(this.S(t),this.S(t).data("orbit-init"));this.S(t).data(this.name+"-instance",e)},reflow:function(){var t=this;if(t.S(t.scope).is("[data-orbit]")){var e=t.S(t.scope),i=e.data(t.name+"-instance");i.compute_dimensions()}else t.S("[data-orbit]",t.scope).each(function(e,i){var n=t.S(i),s=(t.data_options(n),n.data(t.name+"-instance"));s.compute_dimensions()})}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";function s(t){var e=/fade/i.test(t),i=/pop/i.test(t);return{animate:e||i,pop:i,fade:e}}Foundation.libs.reveal={name:"reveal",version:"5.5.2",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:t.noop,bg:t(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,i,n){t.extend(!0,this.settings,i,n),this.bindings(i,n)},events:function(t){var e=this,n=e.S;return n(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(t){if(t.preventDefault(),!e.locked){var i=n(this),s=i.data(e.data_attr("reveal-ajax")),r=i.data(e.data_attr("reveal-replace-content"));if(e.locked=!0,"undefined"==typeof s)e.open.call(e,i);else{var o=s===!0?i.attr("href"):s;e.open.call(e,i,{url:o},{replaceContentSel:r})}}}),n(i).on("click.fndtn.reveal",this.close_targets(),function(t){if(t.preventDefault(),!e.locked){var i=n("["+e.attr_name()+"].open").data(e.attr_name(!0)+"-init")||e.settings,s=n(t.target)[0]===n("."+i.bg_class)[0];if(s){if(!i.close_on_background_click)return;t.stopPropagation()}e.locked=!0,e.close.call(e,s?n("["+e.attr_name()+"].open:not(.toback)"):n(this).closest("["+e.attr_name()+"]"))}}),n("["+e.attr_name()+"]",this.scope).length>0?n(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):n(this.scope).on("open.fndtn.reveal","["+e.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+e.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+e.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+e.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+e.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+e.attr_name()+"]",this.close_video),!0},key_up_on:function(t){var e=this;return e.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(t){var i=e.S("["+e.attr_name()+"].open"),n=i.data(e.attr_name(!0)+"-init")||e.settings;n&&27===t.which&&n.close_on_esc&&!e.locked&&e.close.call(e,i)}),!0},key_up_off:function(t){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(i,n){var s,r=this;i?"undefined"!=typeof i.selector?s=r.S("#"+i.data(r.data_attr("reveal-id"))).first():(s=r.S(this.scope),n=i):s=r.S(this.scope);var o=s.data(r.attr_name(!0)+"-init");if(o=o||this.settings,s.hasClass("open")&&i.attr("data-reveal-id")==s.attr("id"))return r.close(s);if(!s.hasClass("open")){var a=r.S("["+r.attr_name()+"].open");if("undefined"==typeof s.data("css-top")&&s.data("css-top",parseInt(s.css("top"),10)).data("offset",this.cache_offset(s)),s.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(s),s.on("open.fndtn.reveal",function(t){"fndtn.reveal"!==t.namespace}),s.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),a.length<1&&this.toggle_bg(s,!0),"string"==typeof n&&(n={url:n}),"undefined"!=typeof n&&n.url){var l="undefined"!=typeof n.success?n.success:null;t.extend(n,{success:function(e,i,n){if(t.isFunction(l)){var c=l(e,i,n);"string"==typeof c&&(e=c)}"undefined"!=typeof options&&"undefined"!=typeof options.replaceContentSel?s.find(options.replaceContentSel).html(e):s.html(e),r.S(s).foundation("section","reflow"),r.S(s).children().foundation(),a.length>0&&(o.multiple_opened?r.to_back(a):r.hide(a,o.css.close)),r.show(s,o.css.open)}}),o.on_ajax_error!==t.noop&&t.extend(n,{error:o.on_ajax_error}),t.ajax(n)}else a.length>0&&(o.multiple_opened?r.to_back(a):r.hide(a,o.css.close)),this.show(s,o.css.open)}r.S(e).trigger("resize")},close:function(e){var e=e&&e.length?e:this.S(this.scope),i=this.S("["+this.attr_name()+"].open"),n=e.data(this.attr_name(!0)+"-init")||this.settings,s=this;i.length>0&&(e.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(e),e.trigger("close.fndtn.reveal"),(n.multiple_opened&&1===i.length||!n.multiple_opened||e.length>1)&&(s.toggle_bg(e,!1),s.to_front(e)),n.multiple_opened?(s.hide(e,n.css.close,n),s.to_front(t(t.makeArray(i).reverse()[1]))):s.hide(i,n.css.close,n))},close_targets:function(){var t="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?t+", ."+this.settings.bg_class:t},toggle_bg:function(e,i){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=t("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var s=this.settings.bg.filter(":visible").length>0;i!=s&&((i==n?s:!i)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(i,n){if(n){var r=i.data(this.attr_name(!0)+"-init")||this.settings,o=r.root_element,a=this;if(0===i.parent(o).length){var l=i.wrap('<div style="display: none;" />').parent();i.on("closed.fndtn.reveal.wrapped",function(){i.detach().appendTo(l),i.unwrap().unbind("closed.fndtn.reveal.wrapped")}),i.detach().appendTo(o)}var c=s(r.animation);if(c.animate||(this.locked=!1),c.pop){n.top=t(e).scrollTop()-i.data("offset")+"px";var h={top:t(e).scrollTop()+i.data("css-top")+"px",opacity:1};return setTimeout(function(){return i.css(n).animate(h,r.animation_speed,"linear",function(){a.locked=!1,i.trigger("opened.fndtn.reveal")}).addClass("open")},r.animation_speed/2)}if(c.fade){n.top=t(e).scrollTop()+i.data("css-top")+"px";var h={opacity:1};return setTimeout(function(){return i.css(n).animate(h,r.animation_speed,"linear",function(){a.locked=!1,i.trigger("opened.fndtn.reveal")}).addClass("open")},r.animation_speed/2)}return i.css(n).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var r=this.settings;return s(r.animation).fade?i.fadeIn(r.animation_speed/2):(this.locked=!1,i.show())},to_back:function(t){t.addClass("toback")},to_front:function(t){t.removeClass("toback")},hide:function(i,n){if(n){var r=i.data(this.attr_name(!0)+"-init"),o=this;r=r||this.settings;var a=s(r.animation);if(a.animate||(this.locked=!1),a.pop){var l={top:-t(e).scrollTop()-i.data("offset")+"px",opacity:0};return setTimeout(function(){return i.animate(l,r.animation_speed,"linear",function(){o.locked=!1,i.css(n).trigger("closed.fndtn.reveal")}).removeClass("open")},r.animation_speed/2)}if(a.fade){var l={opacity:0};return setTimeout(function(){return i.animate(l,r.animation_speed,"linear",function(){o.locked=!1,i.css(n).trigger("closed.fndtn.reveal")}).removeClass("open")},r.animation_speed/2)}return i.hide().css(n).removeClass("open").trigger("closed.fndtn.reveal")}var r=this.settings;return s(r.animation).fade?i.fadeOut(r.animation_speed/2):i.hide()},close_video:function(e){var i=t(".flex-video",e.target),n=t("iframe",i);n.length>0&&(n.attr("data-src",n[0].src),n.attr("src",n.attr("src")),i.hide())},open_video:function(e){var i=t(".flex-video",e.target),s=i.find("iframe");if(s.length>0){var r=s.attr("data-src");if("string"==typeof r)s[0].src=s.attr("data-src");else{var o=s[0].src;s[0].src=n,s[0].src=o}i.show()}},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},cache_offset:function(t){var e=t.show().height()+parseInt(t.css("top"),10)+t.scrollY;return t.hide(),e},off:function(){t(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.slider={name:"slider",version:"5.5.2",settings:{start:0,end:100,step:1,precision:null,initial:null,display_selector:"",vertical:!1,trigger_input_change:!1,on_change:function(){}},cache:{},init:function(t,e,i){Foundation.inherit(this,"throttle"),this.bindings(e,i),this.reflow()},events:function(){var i=this;t(this.scope).off(".slider").on("mousedown.fndtn.slider touchstart.fndtn.slider pointerdown.fndtn.slider","["+i.attr_name()+"]:not(.disabled, [disabled]) .range-slider-handle",function(e){i.cache.active||(e.preventDefault(),i.set_active_slider(t(e.target)))}).on("mousemove.fndtn.slider touchmove.fndtn.slider pointermove.fndtn.slider",function(n){if(i.cache.active)if(n.preventDefault(),t.data(i.cache.active[0],"settings").vertical){var s=0;n.pageY||(s=e.scrollY),i.calculate_position(i.cache.active,i.get_cursor_position(n,"y")+s)}else i.calculate_position(i.cache.active,i.get_cursor_position(n,"x"))}).on("mouseup.fndtn.slider touchend.fndtn.slider pointerup.fndtn.slider",function(t){i.remove_active_slider()}).on("change.fndtn.slider",function(t){i.settings.on_change()}),i.S(e).on("resize.fndtn.slider",i.throttle(function(t){i.reflow()},300)),this.S("["+this.attr_name()+"]").each(function(){var e=t(this),n=e.children(".range-slider-handle")[0],s=i.initialize_settings(n);""!=s.display_selector&&t(s.display_selector).each(function(){this.hasOwnProperty("value")&&t(this).change(function(){e.foundation("slider","set_value",t(this).val())})})})},get_cursor_position:function(t,e){var i,n="page"+e.toUpperCase(),s="client"+e.toUpperCase();return"undefined"!=typeof t[n]?i=t[n]:"undefined"!=typeof t.originalEvent[s]?i=t.originalEvent[s]:t.originalEvent.touches&&t.originalEvent.touches[0]&&"undefined"!=typeof t.originalEvent.touches[0][s]?i=t.originalEvent.touches[0][s]:t.currentPoint&&"undefined"!=typeof t.currentPoint[e]&&(i=t.currentPoint[e]),i},set_active_slider:function(t){this.cache.active=t},remove_active_slider:function(){this.cache.active=null},calculate_position:function(e,i){var n=this,s=t.data(e[0],"settings"),r=(t.data(e[0],"handle_l"),t.data(e[0],"handle_o"),t.data(e[0],"bar_l")),o=t.data(e[0],"bar_o");requestAnimationFrame(function(){var t;t=Foundation.rtl&&!s.vertical?n.limit_to((o+r-i)/r,0,1):n.limit_to((i-o)/r,0,1),t=s.vertical?1-t:t;var a=n.normalized_value(t,s.start,s.end,s.step,s.precision);n.set_ui(e,a)})},set_ui:function(e,i){var n=t.data(e[0],"settings"),s=t.data(e[0],"handle_l"),r=t.data(e[0],"bar_l"),o=this.normalized_percentage(i,n.start,n.end),a=o*(r-s)-1,l=100*o,c=e.parent(),h=e.parent().children("input[type=hidden]");Foundation.rtl&&!n.vertical&&(a=-a),a=n.vertical?-a+r-s+1:a,this.set_translate(e,a,n.vertical),n.vertical?e.siblings(".range-slider-active-segment").css("height",l+"%"):e.siblings(".range-slider-active-segment").css("width",l+"%"),c.attr(this.attr_name(),i).trigger("change.fndtn.slider"),h.val(i),n.trigger_input_change&&h.trigger("change.fndtn.slider"),e[0].hasAttribute("aria-valuemin")||e.attr({"aria-valuemin":n.start,"aria-valuemax":n.end}),e.attr("aria-valuenow",i),""!=n.display_selector&&t(n.display_selector).each(function(){this.hasAttribute("value")?t(this).val(i):t(this).text(i)})},normalized_percentage:function(t,e,i){return Math.min(1,(t-e)/(i-e))},normalized_value:function(t,e,i,n,s){var r=i-e,o=t*r,a=(o-o%n)/n,l=o%n,c=l>=.5*n?n:0;return(a*n+c+e).toFixed(s)},set_translate:function(e,i,n){n?t(e).css("-webkit-transform","translateY("+i+"px)").css("-moz-transform","translateY("+i+"px)").css("-ms-transform","translateY("+i+"px)").css("-o-transform","translateY("+i+"px)").css("transform","translateY("+i+"px)"):t(e).css("-webkit-transform","translateX("+i+"px)").css("-moz-transform","translateX("+i+"px)").css("-ms-transform","translateX("+i+"px)").css("-o-transform","translateX("+i+"px)").css("transform","translateX("+i+"px)")},limit_to:function(t,e,i){return Math.min(Math.max(t,e),i)},initialize_settings:function(e){var i,n=t.extend({},this.settings,this.data_options(t(e).parent()));return null===n.precision&&(i=(""+n.step).match(/\.([\d]*)/),n.precision=i&&i[1]?i[1].length:0),n.vertical?(t.data(e,"bar_o",t(e).parent().offset().top),t.data(e,"bar_l",t(e).parent().outerHeight()),t.data(e,"handle_o",t(e).offset().top),t.data(e,"handle_l",t(e).outerHeight())):(t.data(e,"bar_o",t(e).parent().offset().left),t.data(e,"bar_l",t(e).parent().outerWidth()),t.data(e,"handle_o",t(e).offset().left),t.data(e,"handle_l",t(e).outerWidth())),t.data(e,"bar",t(e).parent()),t.data(e,"settings",n)},set_initial_position:function(e){var i=t.data(e.children(".range-slider-handle")[0],"settings"),n="number"!=typeof i.initial||isNaN(i.initial)?Math.floor(.5*(i.end-i.start)/i.step)*i.step+i.start:i.initial,s=e.children(".range-slider-handle");this.set_ui(s,n)},set_value:function(e){var i=this;t("["+i.attr_name()+"]",this.scope).each(function(){t(this).attr(i.attr_name(),e)}),t(this.scope).attr(i.attr_name())&&t(this.scope).attr(i.attr_name(),e),i.reflow()},reflow:function(){var e=this;e.S("["+this.attr_name()+"]").each(function(){var i=t(this).children(".range-slider-handle")[0],n=t(this).attr(e.attr_name());e.initialize_settings(i),n?e.set_ui(t(i),parseFloat(n)):e.set_initial_position(t(this))})}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.tab={name:"tab",version:"5.5.2",settings:{active_class:"active",callback:function(){},deep_linking:!1,scroll_to_content:!0,is_hover:!1},default_tab_hashes:[],init:function(t,i,n){var s=this,r=this.S;r("["+this.attr_name()+"] > .active > a",this.scope).each(function(){s.default_tab_hashes.push(this.hash)}),s.entry_location=e.location.href,this.bindings(i,n),this.handle_location_hash_change()},events:function(){var t=this,i=this.S,n=function(e,n){var s=i(n).closest("["+t.attr_name()+"]").data(t.attr_name(!0)+"-init");(!s.is_hover||Modernizr.touch)&&(e.preventDefault(),e.stopPropagation(),t.toggle_active_tab(i(n).parent()))};i(this.scope).off(".tab").on("keydown.fndtn.tab","["+this.attr_name()+"] > * > a",function(t){var e=this,i=t.keyCode||t.which;9==i&&(t.preventDefault(),n(t,e))}).on("click.fndtn.tab","["+this.attr_name()+"] > * > a",function(t){var e=this;n(t,e)}).on("mouseenter.fndtn.tab","["+this.attr_name()+"] > * > a",function(e){var n=i(this).closest("["+t.attr_name()+"]").data(t.attr_name(!0)+"-init");n.is_hover&&t.toggle_active_tab(i(this).parent())}),i(e).on("hashchange.fndtn.tab",function(e){e.preventDefault(),t.handle_location_hash_change()})},handle_location_hash_change:function(){var e=this,i=this.S;i("["+this.attr_name()+"]",this.scope).each(function(){var s=i(this).data(e.attr_name(!0)+"-init");if(s.deep_linking){var r;if(r=s.scroll_to_content?e.scope.location.hash:e.scope.location.hash.replace("fndtn-",""),""!=r){var o=i(r);if(o.hasClass("content")&&o.parent().hasClass("tabs-content"))e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href="+r+"]").parent());else{var a=o.closest(".content").attr("id");a!=n&&e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href=#"+a+"]").parent(),r)}}else for(var l=0;l<e.default_tab_hashes.length;l++)e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href="+e.default_tab_hashes[l]+"]").parent())}})},toggle_active_tab:function(s,r){var o=this,a=o.S,l=s.closest("["+this.attr_name()+"]"),c=s.find("a"),h=s.children("a").first(),u="#"+h.attr("href").split("#")[1],d=a(u),p=s.siblings(),f=l.data(this.attr_name(!0)+"-init"),g=function(e){var n,s=t(this),r=t(this).parents("li").prev().children('[role="tab"]'),o=t(this).parents("li").next().children('[role="tab"]');switch(e.keyCode){case 37:n=r;break;case 39:n=o;break;default:n=!1}n.length&&(s.attr({tabindex:"-1","aria-selected":null}),n.attr({tabindex:"0","aria-selected":!0}).focus()),t('[role="tabpanel"]').attr("aria-hidden","true"),t("#"+t(i.activeElement).attr("href").substring(1)).attr("aria-hidden",null)},m=function(t){var i=e.location.href===o.entry_location,n=f.scroll_to_content?o.default_tab_hashes[0]:i?e.location.hash:"fndtn-"+o.default_tab_hashes[0].replace("#","");i&&t===n||(e.location.hash=t)};h.data("tab-content")&&(u="#"+h.data("tab-content").split("#")[1],d=a(u)),f.deep_linking&&(f.scroll_to_content?(m(r||u),r==n||r==u?s.parent()[0].scrollIntoView():a(u)[0].scrollIntoView()):m(r!=n?"fndtn-"+r.replace("#",""):"fndtn-"+u.replace("#",""))),s.addClass(f.active_class).triggerHandler("opened"),c.attr({"aria-selected":"true",tabindex:0}),p.removeClass(f.active_class),p.find("a").attr({"aria-selected":"false",tabindex:-1}),d.siblings().removeClass(f.active_class).attr({"aria-hidden":"true",tabindex:-1}),d.addClass(f.active_class).attr("aria-hidden","false").removeAttr("tabindex"),f.callback(s),d.triggerHandler("toggled",[d]),l.triggerHandler("toggled",[s]),c.off("keydown").on("keydown",g)},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},off:function(){},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.tooltip={name:"tooltip",version:"5.5.2",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:!1,hover_delay:200,show_on:"all",tip_template:function(t,e){return'<span data-selector="'+t+'" id="'+t+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'" role="tooltip">'+e+'<span class="nub"></span></span>'}},cache:{},init:function(t,e,i){Foundation.inherit(this,"random_str"),this.bindings(e,i)},should_show:function(e,i){var n=t.extend({},this.settings,this.data_options(e));return"all"===n.show_on?!0:this.small()&&"small"===n.show_on?!0:this.medium()&&"medium"===n.show_on?!0:this.large()&&"large"===n.show_on?!0:!1},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},events:function(e){function i(t,e,i){t.timer||(i?(t.timer=null,s.showTip(e)):t.timer=setTimeout(function(){t.timer=null,s.showTip(e)}.bind(t),s.settings.hover_delay))}function n(t,e){t.timer&&(clearTimeout(t.timer),t.timer=null),s.hide(e)}var s=this,r=s.S;s.create(this.S(e)),t(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]",function(e){var o=r(this),a=t.extend({},s.settings,s.data_options(o)),l=!1;if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&r(e.target).is("a"))return!1;if(/mouse/i.test(e.type)&&s.ie_touch(e))return!1;if(o.hasClass("open"))Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&e.preventDefault(),s.hide(o);else{if(a.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type))return;if(!a.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&(e.preventDefault(),r(a.tooltip_class+".open").hide(),l=!0,t(".open["+s.attr_name()+"]").length>0)){var c=r(t(".open["+s.attr_name()+"]")[0]);s.hide(c)}/enter|over/i.test(e.type)?i(this,o):"mouseout"===e.type||"mouseleave"===e.type?n(this,o):i(this,o,!0)}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(e){return/mouse/i.test(e.type)&&s.ie_touch(e)?!1:void(("touch"!=t(this).data("tooltip-open-event-type")||"mouseleave"!=e.type)&&("mouse"==t(this).data("tooltip-open-event-type")&&/MSPointerDown|touchstart/i.test(e.type)?s.convert_to_touch(t(this)):n(this,t(this))))}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(t){n(this,r(this))})},ie_touch:function(t){return!1},showTip:function(t){var e=this.getTip(t);return this.should_show(t,e)?this.show(t):void 0},getTip:function(e){var i=this.selector(e),n=t.extend({},this.settings,this.data_options(e)),s=null;return i&&(s=this.S('span[data-selector="'+i+'"]'+n.tooltip_class)),"object"==typeof s?s:!1},selector:function(t){var e=t.attr(this.attr_name())||t.attr("data-selector");return"string"!=typeof e&&(e=this.random_str(6),t.attr("data-selector",e).attr("aria-describedby",e)),e},create:function(i){var n=this,s=t.extend({},this.settings,this.data_options(i)),r=this.settings.tip_template;"string"==typeof s.tip_template&&e.hasOwnProperty(s.tip_template)&&(r=e[s.tip_template]);var o=t(r(this.selector(i),t("<div></div>").html(i.attr("title")).html())),a=this.inheritable_classes(i);o.addClass(a).appendTo(s.append_to),Modernizr.touch&&(o.append('<span class="tap-to-close">'+s.touch_close_text+"</span>"),o.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(t){n.hide(i)})),i.removeAttr("title").attr("title","")},reposition:function(e,i,n){var s,r,o,a,l;if(i.css("visibility","hidden").show(),s=e.data("width"),r=i.children(".nub"),o=r.outerHeight(),a=r.outerHeight(),this.small()?i.css({width:"100%"}):i.css({width:s?s:"auto"}),l=function(t,e,i,n,s,r){return t.css({top:e?e:"auto",bottom:n?n:"auto",left:s?s:"auto",right:i?i:"auto"}).end()},l(i,e.offset().top+e.outerHeight()+10,"auto","auto",e.offset().left),this.small())l(i,e.offset().top+e.outerHeight()+10,"auto","auto",12.5,t(this.scope).width()),i.addClass("tip-override"),l(r,-o,"auto","auto",e.offset().left);else{var c=e.offset().left;Foundation.rtl&&(r.addClass("rtl"),c=e.offset().left+e.outerWidth()-i.outerWidth()),l(i,e.offset().top+e.outerHeight()+10,"auto","auto",c),r.attr("style")&&r.removeAttr("style"),i.removeClass("tip-override"),n&&n.indexOf("tip-top")>-1?(Foundation.rtl&&r.addClass("rtl"),l(i,e.offset().top-i.outerHeight(),"auto","auto",c).removeClass("tip-override")):n&&n.indexOf("tip-left")>-1?(l(i,e.offset().top+e.outerHeight()/2-i.outerHeight()/2,"auto","auto",e.offset().left-i.outerWidth()-o).removeClass("tip-override"),r.removeClass("rtl")):n&&n.indexOf("tip-right")>-1&&(l(i,e.offset().top+e.outerHeight()/2-i.outerHeight()/2,"auto","auto",e.offset().left+e.outerWidth()+o).removeClass("tip-override"),r.removeClass("rtl"))}i.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},inheritable_classes:function(e){var i=t.extend({},this.settings,this.data_options(e)),n=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(i.additional_inheritable_classes),s=e.attr("class"),r=s?t.map(s.split(" "),function(e,i){return-1!==t.inArray(e,n)?e:void 0}).join(" "):"";return t.trim(r)},convert_to_touch:function(e){var i=this,n=i.getTip(e),s=t.extend({},i.settings,i.data_options(e));0===n.find(".tap-to-close").length&&(n.append('<span class="tap-to-close">'+s.touch_close_text+"</span>"),n.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(t){i.hide(e)})),e.data("tooltip-open-event-type","touch")},show:function(t){var e=this.getTip(t);"touch"==t.data("tooltip-open-event-type")&&this.convert_to_touch(t),this.reposition(t,e,t.attr("class")),t.addClass("open"),e.fadeIn(150)},hide:function(t){var e=this.getTip(t);e.fadeOut(150,function(){e.find(".tap-to-close").remove(),e.off("click.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose"),t.removeClass("open")})},off:function(){var e=this;this.S(this.scope).off(".fndtn.tooltip"),this.S(this.settings.tooltip_class).each(function(i){t("["+e.attr_name()+"]").eq(i).attr("title",t(this).text())}).remove()},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,n){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.5.2",settings:{index:0,start_offset:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",mobile_show_parent_link:!0,is_hover:!0,scrolltop:!0,sticky_on:"all",dropdown_autoclose:!0},init:function(e,i,n){Foundation.inherit(this,"add_custom_rule register_media throttle");var s=this;s.register_media("topbar","foundation-mq-topbar"),this.bindings(i,n),s.S("["+this.attr_name()+"]",this.scope).each(function(){var e=t(this),i=e.data(s.attr_name(!0)+"-init");s.S("section, .top-bar-section",this);e.data("index",0);var n=e.parent();n.hasClass("fixed")||s.is_sticky(e,n,i)?(s.settings.sticky_class=i.sticky_class,s.settings.sticky_topbar=e,e.data("height",n.outerHeight()),e.data("stickyoffset",n.offset().top)):e.data("height",e.outerHeight()),i.assembled||s.assemble(e),i.is_hover?s.S(".has-dropdown",e).addClass("not-click"):s.S(".has-dropdown",e).removeClass("not-click"),s.add_custom_rule(".f-topbar-fixed { padding-top: "+e.data("height")+"px }"),n.hasClass("fixed")&&s.S("body").addClass("f-topbar-fixed")})},is_sticky:function(t,e,i){var n=e.hasClass(i.sticky_class),s=matchMedia(Foundation.media_queries.small).matches,r=matchMedia(Foundation.media_queries.medium).matches,o=matchMedia(Foundation.media_queries.large).matches;return n&&"all"===i.sticky_on?!0:n&&this.small()&&-1!==i.sticky_on.indexOf("small")&&s&&!r&&!o?!0:n&&this.medium()&&-1!==i.sticky_on.indexOf("medium")&&s&&r&&!o?!0:n&&this.large()&&-1!==i.sticky_on.indexOf("large")&&s&&r&&o?!0:!1},toggle:function(i){var n,s=this;n=i?s.S(i).closest("["+this.attr_name()+"]"):s.S("["+this.attr_name()+"]");var r=n.data(this.attr_name(!0)+"-init"),o=s.S("section, .top-bar-section",n);s.breakpoint()&&(s.rtl?(o.css({right:"0%"}),t(">.name",o).css({right:"100%"})):(o.css({left:"0%"}),t(">.name",o).css({left:"100%"})),s.S("li.moved",o).removeClass("moved"),n.data("index",0),n.toggleClass("expanded").css("height","")),r.scrolltop?n.hasClass("expanded")?n.parent().hasClass("fixed")&&(r.scrolltop?(n.parent().removeClass("fixed"),n.addClass("fixed"),s.S("body").removeClass("f-topbar-fixed"),e.scrollTo(0,0)):n.parent().removeClass("expanded")):n.hasClass("fixed")&&(n.parent().addClass("fixed"),n.removeClass("fixed"),s.S("body").addClass("f-topbar-fixed")):(s.is_sticky(n,n.parent(),r)&&n.parent().addClass("fixed"),n.parent().hasClass("fixed")&&(n.hasClass("expanded")?(n.addClass("fixed"),n.parent().addClass("expanded"),s.S("body").addClass("f-topbar-fixed")):(n.removeClass("fixed"),n.parent().removeClass("expanded"),s.update_sticky_positioning())))},timer:null,events:function(i){var n=this,s=this.S;s(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(t){t.preventDefault(),n.toggle(this)}).on("click.fndtn.topbar contextmenu.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(e){var i=t(this).closest("li"),s=i.closest("["+n.attr_name()+"]"),r=s.data(n.attr_name(!0)+"-init");
if(r.dropdown_autoclose&&r.is_hover){var o=t(this).closest(".hover");o.removeClass("hover")}!n.breakpoint()||i.hasClass("back")||i.hasClass("has-dropdown")||n.toggle()}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(e){var i=s(this),r=s(e.target),o=i.closest("["+n.attr_name()+"]"),a=o.data(n.attr_name(!0)+"-init");return r.data("revealId")?void n.toggle():void(n.breakpoint()||(!a.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),i.hasClass("hover")?(i.removeClass("hover").find("li").removeClass("hover"),i.parents("li.hover").removeClass("hover")):(i.addClass("hover"),t(i).siblings().removeClass("hover"),"A"===r[0].nodeName&&r.parent().hasClass("has-dropdown")&&e.preventDefault())))}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(t){if(n.breakpoint()){t.preventDefault();var e=s(this),i=e.closest("["+n.attr_name()+"]"),r=i.find("section, .top-bar-section"),o=(e.next(".dropdown").outerHeight(),e.closest("li"));i.data("index",i.data("index")+1),o.addClass("moved"),n.rtl?(r.css({right:-(100*i.data("index"))+"%"}),r.find(">.name").css({right:100*i.data("index")+"%"})):(r.css({left:-(100*i.data("index"))+"%"}),r.find(">.name").css({left:100*i.data("index")+"%"})),i.css("height",e.siblings("ul").outerHeight(!0)+i.data("height"))}}),s(e).off(".topbar").on("resize.fndtn.topbar",n.throttle(function(){n.resize.call(n)},50)).trigger("resize.fndtn.topbar").load(function(){s(this).trigger("resize.fndtn.topbar")}),s("body").off(".topbar").on("click.fndtn.topbar",function(t){var e=s(t.target).closest("li").closest("li.hover");e.length>0||s("["+n.attr_name()+"] li.hover").removeClass("hover")}),s(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(t){t.preventDefault();var e=s(this),i=e.closest("["+n.attr_name()+"]"),r=i.find("section, .top-bar-section"),o=(i.data(n.attr_name(!0)+"-init"),e.closest("li.moved")),a=o.parent();i.data("index",i.data("index")-1),n.rtl?(r.css({right:-(100*i.data("index"))+"%"}),r.find(">.name").css({right:100*i.data("index")+"%"})):(r.css({left:-(100*i.data("index"))+"%"}),r.find(">.name").css({left:100*i.data("index")+"%"})),0===i.data("index")?i.css("height",""):i.css("height",a.outerHeight(!0)+i.data("height")),setTimeout(function(){o.removeClass("moved")},300)}),s(this.scope).find(".dropdown a").focus(function(){t(this).parents(".has-dropdown").addClass("hover")}).blur(function(){t(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var t=this;t.S("["+this.attr_name()+"]").each(function(){var e,n=t.S(this),s=n.data(t.attr_name(!0)+"-init"),r=n.parent("."+t.settings.sticky_class);if(!t.breakpoint()){var o=n.hasClass("expanded");n.css("height","").removeClass("expanded").find("li").removeClass("hover"),o&&t.toggle(n)}t.is_sticky(n,r,s)&&(r.hasClass("fixed")?(r.removeClass("fixed"),e=r.offset().top,t.S(i.body).hasClass("f-topbar-fixed")&&(e-=n.data("height")),n.data("stickyoffset",e),r.addClass("fixed")):(e=r.offset().top,n.data("stickyoffset",e)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(e){var i=this,n=e.data(this.attr_name(!0)+"-init"),s=i.S("section, .top-bar-section",e);s.detach(),i.S(".has-dropdown>a",s).each(function(){var e,s=i.S(this),r=s.siblings(".dropdown"),o=s.attr("href");r.find(".title.back").length||(e=t(1==n.mobile_show_parent_link&&o?'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link hide-for-medium-up"><a class="parent-link js-generated" href="'+o+'">'+s.html()+"</a></li>":'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>'),1==n.custom_back_text?t("h5>a",e).html(n.back_text):t("h5>a",e).html("&laquo; "+s.html()),r.prepend(e))}),s.appendTo(e),this.sticky(),this.assembled(e)},assembled:function(e){e.data(this.attr_name(!0),t.extend({},e.data(this.attr_name(!0)),{assembled:!0}))},height:function(e){var i=0,n=this;return t("> li",e).each(function(){i+=n.S(this).outerHeight(!0)}),i},sticky:function(){var t=this;this.S(e).on("scroll",function(){t.update_sticky_positioning()})},update_sticky_positioning:function(){var t="."+this.settings.sticky_class,i=this.S(e),n=this;if(n.settings.sticky_topbar&&n.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var s=this.settings.sticky_topbar.data("stickyoffset")+this.settings.start_offset;n.S(t).hasClass("expanded")||(i.scrollTop()>s?n.S(t).hasClass("fixed")||(n.S(t).addClass("fixed"),n.S("body").addClass("f-topbar-fixed")):i.scrollTop()<=s&&n.S(t).hasClass("fixed")&&(n.S(t).removeClass("fixed"),n.S("body").removeClass("f-topbar-fixed")))}},off:function(){this.S(this.scope).off(".fndtn.topbar"),this.S(e).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,window,window.document),/*
	Redactor 10.2.5
	Updated: October 1, 2015

	http://imperavi.com/redactor/

	Copyright (c) 2009-2015, Imperavi LLC.
	License: http://imperavi.com/redactor/license/

	Usage: $('#content').redactor();
*/
function(t){"use strict";function e(t,i){return new e.prototype.init(t,i)}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;return function(){return e.apply(t)}});var i=0;t.fn.redactor=function(i){var n=[],s=Array.prototype.slice.call(arguments,1);return"string"==typeof i?this.each(function(){var e,r=t.data(this,"redactor");if("-1"!=i.search(/\./)?(e=i.split("."),"undefined"!=typeof r[e[0]]&&(e=r[e[0]][e[1]])):e=r[i],"undefined"!=typeof r&&t.isFunction(e)){var o=e.apply(r,s);void 0!==o&&o!==r&&n.push(o)}else t.error('No such method "'+i+'" for Redactor')}):this.each(function(){t.data(this,"redactor",{}),t.data(this,"redactor",e(this,i))}),0===n.length?this:1===n.length?n[0]:n},t.Redactor=e,t.Redactor.VERSION="10.2.5",t.Redactor.modules=["alignment","autosave","block","buffer","build","button","caret","clean","code","core","dropdown","file","focus","image","indent","inline","insert","keydown","keyup","lang","line","link","linkify","list","modal","observe","paragraphize","paste","placeholder","progress","selection","shortcuts","tabifier","tidy","toolbar","upload","utils"],t.Redactor.opts={lang:"en",direction:"ltr",plugins:!1,focus:!1,focusEnd:!1,placeholder:!1,visual:!0,tabindex:!1,minHeight:!1,maxHeight:!1,linebreaks:!1,replaceDivs:!0,paragraphize:!0,cleanStyleOnEnter:!1,enterKey:!0,cleanOnPaste:!0,cleanSpaces:!0,pastePlainText:!1,autosave:!1,autosaveName:!1,autosaveInterval:60,autosaveOnChange:!1,autosaveFields:!1,linkTooltip:!0,linkProtocol:"http",linkNofollow:!1,linkSize:50,imageEditable:!0,imageLink:!0,imagePosition:!0,imageFloatMargin:"10px",imageResizable:!0,imageUpload:null,imageUploadParam:"file",uploadImageField:!1,dragImageUpload:!0,fileUpload:null,fileUploadParam:"file",dragFileUpload:!0,s3:!1,convertLinks:!0,convertUrlLinks:!0,convertImageLinks:!0,convertVideoLinks:!0,preSpaces:4,tabAsSpaces:!1,tabKey:!0,scrollTarget:!1,toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,source:!0,buttons:["html","formatting","bold","italic","deleted","unorderedlist","orderedlist","outdent","indent","image","file","link","alignment","horizontalrule"],buttonsHide:[],buttonsHideOnMobile:[],formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,tabifier:!0,deniedTags:["script","style"],allowedTags:!1,paragraphizeBlocks:["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],removeComments:!1,replaceTags:[["strike","del"],["b","strong"]],replaceStyles:[["font-weight:\\s?bold","strong"],["font-style:\\s?italic","em"],["text-decoration:\\s?underline","u"],["text-decoration:\\s?line-through","del"]],removeDataAttr:!1,removeAttr:!1,allowedAttr:!1,removeWithoutAttr:["span"],removeEmpty:["p"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,buffer:[],rebuffer:[],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",imageTypes:["image/png","image/jpeg","image/gif"],indentValue:20,verifiedTags:["a","img","b","strong","sub","sup","i","em","u","small","strike","del","cite","ul","ol","li"],inlineTags:["strong","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],alignmentTags:["P","H1","H2","H3","H4","H5","H6","DL","DT","DD","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],blockLevelElements:["PRE","UL","OL","LI"],highContrast:!1,observe:{dropdowns:[]},langs:{en:{html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",link_edit:"Edit link",unlink:"Unlink",formatting:"Formatting",paragraph:"Normal text",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",center:"Center",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code or Youtube/Vimeo Link",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment",filename:"Name (optional)",edit:"Edit",upload_label:"Drop file here or "}},linkify:{regexps:{youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,vimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,image:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi}},codemirror:!1},e.fn=t.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,UP:38,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},init:function(e,n){if(this.$element=t(e),this.uuid=i++,this.rtePaste=!1,this.$pasteBox=!1,this.loadOptions(n),this.loadModules(),this.formatting={},t.merge(this.opts.blockLevelElements,this.opts.alignmentTags),this.reIsBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i"),this.tidy.setupAllowed(),this.opts.deniedTags!==!1)for(var s=["html","head","link","body","meta","applet"],r=0;r<s.length;r++)this.opts.deniedTags.push(s[r]);this.lang.load(),t.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.core.setCallback("start"),this.start=!0,this.build.run()},loadOptions:function(e){this.opts=t.extend({},t.extend(!0,{},t.Redactor.opts),this.$element.data(),e)},getModuleMethods:function(t){return Object.getOwnPropertyNames(t).filter(function(e){return"function"==typeof t[e]})},loadModules:function(){for(var e=t.Redactor.modules.length,i=0;e>i;i++)this.bindModuleMethods(t.Redactor.modules[i])},bindModuleMethods:function(t){if("undefined"!=typeof this[t]){this[t]=this[t]();for(var e=this.getModuleMethods(this[t]),i=e.length,n=0;i>n;n++)this[t][e[n]]=this[t][e[n]].bind(this)}},alignment:function(){return{left:function(){this.alignment.set("")},right:function(){this.alignment.set("right")},center:function(){this.alignment.set("center")},justify:function(){this.alignment.set("justify")},set:function(t){this.utils.browser("msie")||this.opts.linebreaks||this.$editor.focus(),this.alignment.blocks=this.selection.getBlocks(),this.alignment.type=t,this.buffer.set(),this.selection.save(),this.alignment.isLinebreaksOrNoBlocks()?this.alignment.setText():this.alignment.setBlocks(),this.selection.restore(),this.code.sync()},setText:function(){var e=this.selection.wrap("div");t(e).attr("data-tagblock","redactor").css("text-align",this.alignment.type)},setBlocks:function(){t.each(this.alignment.blocks,t.proxy(function(t,e){var i=this.utils.getAlignmentElement(e);i&&(this.alignment.isNeedReplaceElement(i)?this.alignment.replaceElement(i):this.alignment.alignElement(i))},this))},isLinebreaksOrNoBlocks:function(){return this.opts.linebreaks&&this.alignment.blocks[0]===!1},isNeedReplaceElement:function(t){return""===this.alignment.type&&"undefined"!=typeof t.data("tagblock")},replaceElement:function(t){t.replaceWith(t.html())},alignElement:function(t){t.css("text-align",this.alignment.type),this.utils.removeEmptyAttr(t,"style")}}},autosave:function(){return{html:!1,enable:function(){this.opts.autosave&&(this.autosave.name=this.opts.autosaveName?this.opts.autosaveName:this.$textarea.attr("name"),this.opts.autosaveOnChange||(this.autosaveInterval=setInterval(this.autosave.load,1e3*this.opts.autosaveInterval)))},onChange:function(){this.opts.autosaveOnChange&&this.autosave.load()},load:function(){if(this.opts.autosave&&(this.autosave.source=this.code.get(),this.autosave.html!==this.autosave.source)){var e={};e.name=this.autosave.name,e[this.autosave.name]=this.autosave.source,e=this.autosave.getHiddenFields(e);var i=t.ajax({url:this.opts.autosave,type:"post",data:e});i.done(this.autosave.success)}},getHiddenFields:function(e){return this.opts.autosaveFields===!1||"object"!=typeof this.opts.autosaveFields?e:(t.each(this.opts.autosaveFields,t.proxy(function(i,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),e[i]=n},this)),e)},success:function(e){var i;try{i=t.parseJSON(e)}catch(n){i=e}var s="undefined"==typeof i.error?"autosave":"autosaveError";this.core.setCallback(s,this.autosave.name,i),this.autosave.html=this.autosave.source},disable:function(){clearInterval(this.autosaveInterval)}}},block:function(){return{formatting:function(t){this.block.clearStyle=!1;var e,i;"undefined"!=typeof this.formatting[t].data?e="data":"undefined"!=typeof this.formatting[t].attr?e="attr":"undefined"!=typeof this.formatting[t]["class"]&&(e="class"),"undefined"!=typeof this.formatting[t].clear&&(this.block.clearStyle=!0),e&&(i=this.formatting[t][e]),this.block.format(this.formatting[t].tag,e,i)},format:function(e,i,n){"quote"==e&&(e="blockquote");var s=["p","pre","blockquote","h1","h2","h3","h4","h5","h6"];if(-1!=t.inArray(e,s)){this.block.isRemoveInline="pre"==e||-1!=e.search(/h[1-6]/i),this.utils.browser("msie")||this.$editor.focus();var r=t.trim(this.$editor.html());if(this.block.isEmpty=this.utils.isEmpty(r),this.utils.browser("mozilla")&&!this.focus.isFocused()&&this.block.isEmpty){var o;this.opts.linebreaks||(o=this.$editor.children().first(),this.caret.setEnd(o))}this.block.blocks=this.selection.getBlocks(),this.block.blocksSize=this.block.blocks.length,this.block.type=i,this.block.value=n,this.buffer.set(),this.selection.save(),this.block.set(e),this.selection.restore(),this.code.sync(),this.observe.load()}},set:function(t){this.selection.get(),this.block.containerTag=this.range.commonAncestorContainer.tagName,this.range.collapsed?this.block.setCollapsed(t):this.block.setMultiple(t)},setCollapsed:function(e){if(this.opts.linebreaks&&this.block.isEmpty&&"p"!=e){var i=document.createElement(e);return this.$editor.html(i),void this.caret.setEnd(i)}var n=this.block.blocks[0];if(n!==!1){if("LI"==n.tagName){if("blockquote"!=e)return;return void this.block.formatListToBlockquote()}var s="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(s&&!this.opts.linebreaks)document.execCommand("formatblock",!1,"<"+e+">"),n=this.selection.getBlock(),this.block.toggle(t(n));else if(n.tagName.toLowerCase()!=e)if(this.opts.linebreaks&&"p"==e)t(n).append("<br>"),this.utils.replaceWithContents(n);else{var r=this.utils.replaceToTag(n,e);this.block.toggle(r),"p"!=e&&"blockquote"!=e&&r.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(r),("p"==e||this.block.headTag)&&r.find("p").contents().unwrap(),this.block.formatTableWrapping(r)}else if("blockquote"==e&&n.tagName.toLowerCase()==e)if(this.opts.linebreaks)t(n).append("<br>"),this.utils.replaceWithContents(n);else{var o=this.utils.replaceToTag(n,"p");this.block.toggle(o)}else n.tagName.toLowerCase()==e&&this.block.toggle(t(n));"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&t(n).removeAttr("class").removeAttr("style")}},setMultiple:function(e){var i=this.block.blocks[0],n="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(i!==!1&&1===this.block.blocksSize)if(i.tagName.toLowerCase()==e&&"blockquote"==e)if(this.opts.linebreaks)t(i).append("<br>"),this.utils.replaceWithContents(i);else{var s=this.utils.replaceToTag(i,"p");this.block.toggle(s)}else if("LI"==i.tagName){if("blockquote"!=e)return;this.block.formatListToBlockquote()}else if("BLOCKQUOTE"==this.block.containerTag)this.block.formatBlockquote(e);else if(this.opts.linebreaks&&(n||this.range.commonAncestorContainer!=i))this.block.formatWrap(e);else if(this.opts.linebreaks&&"p"==e)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else if("TD"===i.tagName)this.block.formatWrap(e);else{var r=this.utils.replaceToTag(i,e);this.block.toggle(r),this.block.isRemoveInline&&this.utils.removeInlineTags(r),("p"==e||this.block.headTag)&&r.find("p").contents().unwrap()}else if(this.opts.linebreaks||"p"!=e){if("blockquote"==e){for(var o=0,a=0;a<this.block.blocksSize;a++)"BLOCKQUOTE"==this.block.blocks[a].tagName&&o++;if(o==this.block.blocksSize)return void t.each(this.block.blocks,t.proxy(function(e,i){var n=!1;this.opts.linebreaks?(t(i).prepend("<br>").append("<br>"),n=this.utils.replaceWithContents(i)):n=this.utils.replaceToTag(i,"p"),n&&"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&n.removeAttr("class").removeAttr("style")},this))}this.block.formatWrap(e)}else{var l=0,c=!1;"class"==this.block.type&&(c="toggle",l=t(this.block.blocks).filter("."+this.block.value).length,this.block.blocksSize==l?c="toggle":this.block.blocksSize>l?c="set":0===l&&(c="set"));var h=["ul","ol","li","td","th","dl","dt","dd"];t.each(this.block.blocks,t.proxy(function(i,n){if(-1==t.inArray(n.tagName.toLowerCase(),h)){var s=this.utils.replaceToTag(n,e);c?"toggle"==c?this.block.toggle(s):"remove"==c?this.block.remove(s):"set"==c&&this.block.setForce(s):this.block.toggle(s),"p"!=e&&"blockquote"!=e&&s.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"==e||this.block.headTag)&&s.find("p").contents().unwrap(),"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&s.removeAttr("class").removeAttr("style")}},this))}},setForce:function(t){return this.block.clearStyle&&t.removeAttr("class").removeAttr("style"),"class"==this.block.type?void t.addClass(this.block.value):"attr"==this.block.type||"data"==this.block.type?void t.attr(this.block.value.name,this.block.value.value):void 0},toggle:function(t){return this.block.clearStyle&&t.removeAttr("class").removeAttr("style"),"class"==this.block.type?void t.toggleClass(this.block.value):"attr"==this.block.type||"data"==this.block.type?void(t.attr(this.block.value.name)==this.block.value.value?t.removeAttr(this.block.value.name):t.attr(this.block.value.name,this.block.value.value)):void t.removeAttr("style class")},remove:function(t){t.removeClass(this.block.value)},formatListToBlockquote:function(){var e=t(this.block.blocks[0]).closest("ul, ol",this.$editor[0]);t(e).find("ul, ol").contents().unwrap(),t(e).find("li").append(t("<br>")).contents().unwrap();var i=this.utils.replaceToTag(e,"blockquote");this.block.toggle(i)},formatBlockquote:function(e){document.execCommand("outdent"),document.execCommand("formatblock",!1,e),this.clean.clearUnverified(),this.$editor.find("p:empty").remove();var i=this.selection.getBlock();"p"!=e&&t(i).find("img").remove(),this.opts.linebreaks||this.block.toggle(t(i)),this.$editor.find("ul, ol, tr, blockquote, p").each(t.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&"p"==e&&this.utils.replaceWithContents(i)},formatWrap:function(e){if("UL"==this.block.containerTag||"OL"==this.block.containerTag){if("blockquote"!=e)return;this.block.formatListToBlockquote()}var i=this.selection.wrap(e);if(i!==!1){var n=t(i);this.block.formatTableWrapping(n);var s=n.find(this.opts.blockLevelElements.join(",")+", td, table, thead, tbody, tfoot, th, tr");if(s.contents().unwrap(),"p"!=e&&"blockquote"!=e&&n.find("img").remove(),t.each(this.block.blocks,t.proxy(this.utils.removeEmpty,this)),n.append(this.selection.getMarker(2)),this.opts.linebreaks||this.block.toggle(n),this.$editor.find("ul, ol, tr, blockquote, p").each(t.proxy(this.utils.removeEmpty,this)),n.find("blockquote:empty").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(n),this.opts.linebreaks&&"p"==e&&this.utils.replaceWithContents(n),this.opts.linebreaks){var r=n.next().next();0!=r.size()&&"BR"===r[0].tagName&&r.remove()}}},formatTableWrapping:function(t){0!==t.closest("table",this.$editor[0]).length&&(0===t.closest("tr",this.$editor[0]).length&&t.wrap("<tr>"),0===t.closest("td",this.$editor[0]).length&&0===t.closest("th").length&&t.wrap("<td>"))},removeData:function(e,i){var n=this.selection.getBlocks();t(n).removeAttr("data-"+e),this.code.sync()},setData:function(e,i){var n=this.selection.getBlocks();t(n).attr("data-"+e,i),this.code.sync()},toggleData:function(e,i){var n=this.selection.getBlocks();t.each(n,function(){t(this).attr("data-"+e)?t(this).removeAttr("data-"+e):t(this).attr("data-"+e,i)})},removeAttr:function(e,i){var n=this.selection.getBlocks();t(n).removeAttr(e),this.code.sync()},setAttr:function(e,i){var n=this.selection.getBlocks();t(n).attr(e,i),this.code.sync()},toggleAttr:function(e,i){var n=this.selection.getBlocks();t.each(n,function(){t(this).attr(name)?t(this).removeAttr(name):t(this).attr(name,i)})},removeClass:function(e){var i=this.selection.getBlocks();t(i).removeClass(e),this.utils.removeEmptyAttr(i,"class"),this.code.sync()},setClass:function(e){var i=this.selection.getBlocks();t(i).addClass(e),this.code.sync()},toggleClass:function(e){var i=this.selection.getBlocks();t(i).toggleClass(e),this.code.sync()}}},buffer:function(){return{set:function(t){"undefined"==typeof t||"undo"==t?this.buffer.setUndo():this.buffer.setRedo()},setUndo:function(){this.selection.save(),this.opts.buffer.push(this.$editor.html()),this.selection.restore()},setRedo:function(){this.selection.save(),this.opts.rebuffer.push(this.$editor.html()),this.selection.restore()},getUndo:function(){this.$editor.html(this.opts.buffer.pop())},getRedo:function(){this.$editor.html(this.opts.rebuffer.pop())},add:function(){this.opts.buffer.push(this.$editor.html())},undo:function(){0!==this.opts.buffer.length&&(this.buffer.set("redo"),this.buffer.getUndo(),this.selection.restore(),setTimeout(t.proxy(this.observe.load,this),50))},redo:function(){0!==this.opts.rebuffer.length&&(this.buffer.set("undo"),this.buffer.getRedo(),this.selection.restore(),setTimeout(t.proxy(this.observe.load,this),50))}}},build:function(){return{focused:!1,blured:!0,run:function(){this.build.createContainerBox(),this.build.loadContent(),this.build.loadEditor(),this.build.enableEditor(),this.build.setCodeAndCall()},isTextarea:function(){return"TEXTAREA"===this.$element[0].tagName},createContainerBox:function(){this.$box=t('<div class="redactor-box" role="application" />')},createTextarea:function(){this.$textarea=t("<textarea />").attr("name",this.build.getTextareaName())},getTextareaName:function(){return"undefined"==typeof name?"content-"+this.uuid:this.$element.attr("id")},loadContent:function(){var e=this.build.isTextarea()?"val":"html";this.content=t.trim(this.$element[e]())},enableEditor:function(){this.$editor.attr({contenteditable:!0,dir:this.opts.direction})},loadEditor:function(){var t=this.build.isTextarea()?"fromTextarea":"fromElement";this.build[t]()},fromTextarea:function(){this.$editor=t("<div />"),this.$textarea=this.$element,this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.$editor.addClass("redactor-editor"),this.$element.hide()},fromElement:function(){this.$editor=this.$element,this.build.createTextarea(),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$textarea),this.$editor.addClass("redactor-editor"),this.$textarea.hide()},setCodeAndCall:function(){this.code.set(this.content),this.build.setOptions(),this.build.callEditor(),this.opts.visual||setTimeout(t.proxy(this.code.showCode,this),200)},callEditor:function(){this.build.disableMozillaEditing(),this.build.disableIeLinks(),this.build.setEvents(),this.build.setHelpers(),this.opts.toolbar&&(this.opts.toolbar=this.toolbar.init(),this.toolbar.build()),this.modal.loadTemplates(),this.build.plugins(),setTimeout(t.proxy(this.observe.load,this),4),this.core.setCallback("init")},setOptions:function(){t(this.$textarea).attr("dir",this.opts.direction),this.opts.linebreaks&&this.$editor.addClass("redactor-linebreaks"),this.opts.tabindex&&this.$editor.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight)},setEventDropUpload:function(t){if(t.preventDefault(),this.opts.dragImageUpload&&this.opts.dragFileUpload){var e=t.dataTransfer.files;this.upload.directUpload(e[0],t)}},setEventDrop:function(t){this.code.sync(),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",t)},setEvents:function(){this.$editor.on("dragover.redactor dragenter.redactor",function(t){t.preventDefault(),t.stopPropagation()}),this.$editor.on("drop.redactor",t.proxy(function(t){return t=t.originalEvent||t,void 0!==window.FormData&&t.dataTransfer?0===t.dataTransfer.files.length?this.build.setEventDrop(t):(this.build.setEventDropUpload(t),setTimeout(this.clean.clearUnverified,1),void this.core.setCallback("drop",t)):!0},this)),this.$editor.on("click.redactor",t.proxy(function(t){var e=this.core.getEvent(),i="click"==e||"arrow"==e?!1:"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.setCallback("click",t)},this)),this.$editor.on("paste.redactor",t.proxy(this.paste.init,this)),this.$editor.on("cut.redactor",t.proxy(this.code.sync,this)),this.$editor.on("keydown.redactor",t.proxy(this.keydown.init,this)),this.$editor.on("keyup.redactor",t.proxy(this.keyup.init,this)),t.isFunction(this.opts.codeKeydownCallback)&&this.$textarea.on("keydown.redactor-textarea",t.proxy(this.opts.codeKeydownCallback,this)),t.isFunction(this.opts.codeKeyupCallback)&&this.$textarea.on("keyup.redactor-textarea",t.proxy(this.opts.codeKeyupCallback,this)),this.$editor.on("focus.redactor",t.proxy(function(e){t.isFunction(this.opts.focusCallback)&&this.core.setCallback("focus",e),this.build.focused=!0,this.build.blured=!1,this.selection.getCurrent()===!1&&(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),this.selection.addRange())},this)),t(document).on("mousedown.redactor-blur."+this.uuid,t.proxy(function(e){this.start||this.rtePaste||0===t(e.target).closest(".redactor-editor, .redactor-toolbar, .redactor-dropdown").size()&&(this.utils.disableSelectAll(),!this.build.blured&&t.isFunction(this.opts.blurCallback)&&this.core.setCallback("blur",e),this.build.focused=!1,this.build.blured=!0)},this))},setHelpers:function(){this.linkify.isEnabled()&&this.linkify.format(),this.placeholder.enable(),this.opts.focus&&setTimeout(this.focus.setStart,100),this.opts.focusEnd&&setTimeout(this.focus.setEnd,100)},plugins:function(){this.opts.plugins&&t.each(this.opts.plugins,t.proxy(function(i,n){var s="undefined"!=typeof RedactorPlugins&&"undefined"!=typeof RedactorPlugins[n]?RedactorPlugins:e.fn;if(t.isFunction(s[n])){this[n]=s[n]();for(var r=this.getModuleMethods(this[n]),o=r.length,a=0;o>a;a++)this[n][r[a]]=this[n][r[a]].bind(this);t.isFunction(this[n].init)&&this[n].init()}},this))},disableMozillaEditing:function(){if(this.utils.browser("mozilla"))try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(t){}},disableIeLinks:function(){this.utils.browser("msie")&&document.execCommand("AutoUrlDetect",!1,!1)}}},button:function(){return{build:function(e,i){var n=t('<a href="#" class="re-icon re-'+e+'" rel="'+e+'" />').attr({role:"button","aria-label":i.title,tabindex:"-1"});if((i.func||i.command||i.dropdown)&&this.button.setEvent(n,e,i),i.dropdown){n.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var s=t('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+e+'" style="display: none;">');n.data("dropdown",s),this.dropdown.build(e,s,i.dropdown)}return this.utils.isDesktop()&&this.button.createTooltip(n,e,i.title),n},setEvent:function(e,i,n){e.on("touchstart click",t.proxy(function(t){if(e.hasClass("redactor-button-disabled"))return!1;var s="func",r=n.func;n.command?(s="command",r=n.command):n.dropdown&&(s="dropdown",r=!1),this.button.onClick(t,i,s,r)},this))},createTooltip:function(e,i,n){var s=t("<span>").addClass("redactor-toolbar-tooltip redactor-toolbar-tooltip-"+this.uuid+" redactor-toolbar-tooltip-"+i).hide().html(n);s.appendTo("body"),e.on("mouseover",function(){if(!t(this).hasClass("redactor-button-disabled")){var i=e.offset();s.css({top:i.top+e.innerHeight()+"px",left:i.left+e.innerWidth()/2-s.innerWidth()/2+"px"}),s.show()}}),e.on("mouseout",function(){s.hide()})},onClick:function(e,i,n,s){this.button.caretOffset=this.caret.getOffset(),e.preventDefault(),t(document).find(".redactor-toolbar-tooltip").hide(),this.utils.browser("msie")&&(e.returnValue=!1),"command"==n?this.inline.format(s):"dropdown"==n?this.dropdown.show(e,i):this.button.onClickCallback(e,s,i)},onClickCallback:function(e,i,n){var s;if(t.isFunction(i))i.call(this,n);else if("-1"!=i.search(/\./)){if(s=i.split("."),"undefined"==typeof this[s[0]])return;this[s[0]][s[1]](n)}else this[i](n);this.observe.buttons(e,n)},get:function(t){return this.$toolbar.find("a.re-"+t)},setActive:function(t){this.button.get(t).addClass("redactor-act")},setInactive:function(t){this.button.get(t).removeClass("redactor-act")},setInactiveAll:function(t){"undefined"==typeof t?this.$toolbar.find("a.re-icon").removeClass("redactor-act"):this.$toolbar.find("a.re-icon").not(".re-"+t).removeClass("redactor-act")},setActiveInVisual:function(){this.$toolbar.find("a.re-icon").not("a.re-html, a.re-fullscreen").removeClass("redactor-button-disabled")},setInactiveInCode:function(){this.$toolbar.find("a.re-icon").not("a.re-html, a.re-fullscreen").addClass("redactor-button-disabled")},changeIcon:function(t,e){this.button.get(t).addClass("re-"+e)},removeIcon:function(t,e){this.button.get(t).removeClass("re-"+e)},setAwesome:function(t,e){var i=this.button.get(t);i.removeClass("redactor-btn-image").addClass("fa-redactor-btn"),i.html('<i class="fa '+e+'"></i>')},addCallback:function(e,i){if("buffer"!=e){var n="dropdown"==i?"dropdown":"func",s=e.attr("rel");e.on("touchstart click",t.proxy(function(t){return e.hasClass("redactor-button-disabled")?!1:void this.button.onClick(t,s,n,i)},this))}},addDropdown:function(e,i){e.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var n=e.attr("rel");this.button.addCallback(e,"dropdown");var s=t('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+n+'" style="display: none;">');return e.data("dropdown",s),i&&this.dropdown.build(n,s,i),s},add:function(e,i){if(this.opts.toolbar){if(this.button.isMobileUndoRedo(e))return"buffer";var n=this.button.build(e,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.append(t("<li>").append(n)),n}},addFirst:function(e,i){if(this.opts.toolbar){if(this.button.isMobileUndoRedo(e))return"buffer";var n=this.button.build(e,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.prepend(t("<li>").append(n)),n}},addAfter:function(e,i,n){if(this.opts.toolbar){if(this.button.isMobileUndoRedo(i))return"buffer";var s=this.button.build(i,{title:n});s.addClass("redactor-btn-image");var r=this.button.get(e);return 0!==r.length?r.parent().after(t("<li>").append(s)):this.$toolbar.append(t("<li>").append(s)),s}},addBefore:function(e,i,n){if(this.opts.toolbar){if(this.button.isMobileUndoRedo(i))return"buffer";var s=this.button.build(i,{title:n});s.addClass("redactor-btn-image");var r=this.button.get(e);return 0!==r.length?r.parent().before(t("<li>").append(s)):this.$toolbar.append(t("<li>").append(s)),s}},remove:function(t){this.button.get(t).remove()},isMobileUndoRedo:function(t){return("undo"==t||"redo"==t)&&!this.utils.isDesktop()}}},caret:function(){return{setStart:function(e){if(this.utils.isBlock(e))this.caret.set(e,0,e,0);else{var i=this.utils.createSpaceElement();t(e).prepend(i),this.caret.setEnd(i)}},setEnd:function(t){return t=t[0]||t,1==t.lastChild.nodeType?this.caret.setAfter(t.lastChild):void this.caret.set(t,1,t,1)},set:function(e,i,n,s){if(e=e[0]||e,n=n[0]||n,this.utils.isBlockTag(e.tagName)&&""===e.innerHTML&&(e.innerHTML=this.opts.invisibleSpace),"BR"==e.tagName&&this.opts.linebreaks===!1){var r=t(this.opts.emptyHtml)[0];t(e).replaceWith(r),e=r,n=e}this.selection.get();try{this.range.setStart(e,i),this.range.setEnd(n,s)}catch(o){}this.selection.addRange()},setAfter:function(e){try{var i=t(e)[0].tagName;if("BR"==i||this.utils.isBlock(e))"BR"!=i&&this.utils.browser("msie")?this.caret.setStart(t(e).next()):this.caret.setAfterOrBefore(e,"after");else{var n=this.utils.createSpaceElement();t(e).after(n),this.caret.setEnd(n)}}catch(s){var n=this.utils.createSpaceElement();t(e).after(n),this.caret.setEnd(n)}},setBefore:function(e){this.utils.isBlock(e)?this.caret.setEnd(t(e).prev()):this.caret.setAfterOrBefore(e,"before")},setAfterOrBefore:function(t,e){if(this.utils.browser("msie")||this.$editor.focus(),t=t[0]||t,this.selection.get(),"after"==e)try{this.range.setStartAfter(t),this.range.setEndAfter(t)}catch(i){}else try{this.range.setStartBefore(t),this.range.setEndBefore(t)}catch(i){}this.range.collapse(!1),this.selection.addRange()},getOffsetOfElement:function(e){e=e[0]||e,this.selection.get();var i=this.range.cloneRange();return i.selectNodeContents(e),i.setEnd(this.range.endContainer,this.range.endOffset),t.trim(i.toString()).length},getOffset:function(){var t=0,e=window.getSelection();if(e.rangeCount>0){var i=window.getSelection().getRangeAt(0),n=i.cloneRange();n.selectNodeContents(this.$editor[0]),n.setEnd(i.endContainer,i.endOffset),t=n.toString().length}return t},setOffset:function(t,e){"undefined"==typeof e&&(e=t),this.focus.isFocused()||this.focus.setStart();for(var i,n=(this.selection.get(),0),s=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);i=s.nextNode();)if(n+=i.nodeValue.length,n>t&&(this.range.setStart(i,i.nodeValue.length+t-n),t=1/0),n>=e){this.range.setEnd(i,i.nodeValue.length+e-n);break}this.range.collapse(!1),this.selection.addRange()},setToPoint:function(t,e){this.caret.setOffset(t,e)},getCoords:function(){return this.caret.getOffset()}}},clean:function(){return{onSet:function(e){e=this.clean.savePreCode(e),e=e.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi,'<pre class="redactor-script-tag" style="display: none;" $1>$2</pre>'),e=e.replace(/\$/g,"&#36;"),e=e.replace(/<a href="(.*?[^>]?)\xae(.*?[^>]?)">/gi,'<a href="$1&reg$2">'),this.opts.replaceDivs&&!this.opts.linebreaks&&(e=this.clean.replaceDivs(e)),this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),e=this.clean.saveFormTags(e);var i=t("<div>");i.html(e);var n=i.find("font[style]");return 0!==n.length&&(n.replaceWith(function(){var e=t(this),i=t("<span>").attr("style",e.attr("style"));return i.append(e.contents())}),e=i.html()),i.remove(),e=e.replace(/<font(.*?)>/gi,""),e=e.replace(/<\/font>/gi,""),e=this.tidy.load(e),this.opts.paragraphize&&(e=this.paragraphize.load(e)),e=this.clean.setVerified(e),e=this.clean.convertInline(e),e=e.replace(/&amp;/g,"&")},onSync:function(e){if(e=e.replace(/\u200B/g,""),e=e.replace(/&#x200b;/gi,""),this.opts.cleanSpaces&&(e=e.replace(/&nbsp;/gi," ")),-1!=e.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";e=e.replace(/<pre class="redactor-script-tag" style="display: none;"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2</script>"),e=this.clean.restoreFormTags(e);var i={"\u2122":"&trade;","\xa9":"&copy;","\u2026":"&hellip;","\u2014":"&mdash;","\u2010":"&dash;"};t.each(i,function(t,i){e=e.replace(new RegExp(t,"g"),i)}),this.utils.browser("mozilla")&&(e=e.replace(/<br\s?\/?>$/gi,"")),e=e.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),
e=e.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),e=e.replace(/<(.*?)rel="\s*?"(.*?[^>]?)>/gi,'<$1$2">'),e=e.replace(/<(.*?)style="\s*?"(.*?[^>]?)>/gi,'<$1$2">'),e=e.replace(/="">/gi,">"),e=e.replace(/""">/gi,'">'),e=e.replace(/"">/gi,'">'),e=e.replace(/<div(.*?)data-tagblock="redactor"(.*?[^>])>/gi,"<div$1$2>"),e=e.replace(/<(.*?) data-verified="redactor"(.*?[^>])>/gi,"<$1$2>");var n=t("<div/>").html(t.parseHTML(e,document,!0));return n.find("span").removeAttr("rel"),n.find("pre .redactor-invisible-space").each(function(){t(this).contents().unwrap()}),e=n.html(),e=e.replace(/<img(.*?[^>])rel="(.*?[^>])"(.*?[^>])>/gi,"<img$1$3>"),e=e.replace(/<span class="redactor-invisible-space">(.*?)<\/span>/gi,"$1"),e=e.replace(/ data-save-url="(.*?[^>])"/gi,""),e=e.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi,"$3<img$4>"),e=e.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi,""),e=e.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi,""),e=e.replace(/<font(.*?)>/gi,""),e=e.replace(/<\/font>/gi,""),e=this.tidy.load(e),this.opts.linkNofollow&&(e=e.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi,"<a$1$2>"),e=e.replace(/<a(.*?[^>])>/gi,'<a$1 rel="nofollow">')),e=e.replace(/\sdata-redactor-(tag|class|style)="(.*?[^>])"/gi,""),e=e.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>',"gi"),"<$1$2>"),e=e.replace(new RegExp('<(.*?) data-verified="redactor">',"gi"),"<$1>"),e=e.replace(/&amp;/g,"&")},onPaste:function(e,i){if(e=t.trim(e),e=e.replace(/\$/g,"&#36;"),e=e.replace(/<span class="s[0-9]">/gi,"<span>"),e=e.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),e=e.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi,"	"),e=e.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi," "),this.opts.pastePlainText)return this.clean.getPlainText(e);if(!this.utils.isSelectAll()&&"undefined"==typeof i){if(this.utils.isCurrentOrParent(["FIGCAPTION","A"]))return this.clean.getPlainText(e,!1);if(this.utils.isCurrentOrParent("PRE"))return e=e.replace(/\u201d/g,'"'),e=e.replace(/\u201c/g,'"'),e=e.replace(/\u2018/g,"'"),e=e.replace(/\u2019/g,"'"),this.clean.getPreCode(e);if(this.utils.isCurrentOrParent(["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"])){if(e=this.clean.getOnlyImages(e),!this.utils.browser("msie")){var n=this.selection.getBlock();n&&"P"==n.tagName&&(e=e.replace(/<img(.*?)>/gi,"<p><img$1></p>"))}return e}if(this.utils.isCurrentOrParent(["TD"]))return e=this.clean.onPasteTidy(e,"td"),this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),e=this.clean.replaceDivsToBr(e);if(this.utils.isCurrentOrParent(["LI"]))return this.clean.onPasteTidy(e,"li")}return e=this.clean.isSingleLine(e,i),this.clean.singleLine||(this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),this.opts.replaceDivs&&(e=this.clean.replaceDivs(e)),e=this.clean.saveFormTags(e)),e=this.clean.onPasteWord(e),e=this.clean.onPasteExtra(e),e=this.clean.onPasteTidy(e,"all"),!this.clean.singleLine&&this.opts.paragraphize&&(e=this.paragraphize.load(e)),e=this.clean.removeDirtyStyles(e),e=this.clean.onPasteRemoveSpans(e),e=this.clean.onPasteRemoveEmpty(e),e=this.clean.convertInline(e)},onPasteWord:function(e){if(e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,""),e=e.replace(/<o\:p[^>]*>[\s\S]*?<\/o\:p>/gi,""),e.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i)){e=e.replace(/<!--[\s\S]+?-->/gi,""),e=e.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,""),e=e.replace(/<(\/?)s>/gi,"<$1strike>"),e=e.replace(/ /gi," "),e=e.replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join("\xa0"):""}),e=this.clean.onPasteIeFixLinks(e),e=e.replace(/<img(.*?)v:shapes=(.*?)>/gi,""),e=e.replace(/src="file\:\/\/(.*?)"/,'src=""');var i=t("<div/>").html(e),n=!1,s=1,r=[];i.find("p[style]").each(function(){var e=t(this).attr("style").match(/mso\-list\:l([0-9]+)\slevel([0-9]+)/);if(e){var o=parseInt(e[1]),a=parseInt(e[2]),l=t(this).html().match(/^[\w]+\./)?"ol":"ul",c=t("<li/>").html(t(this).html());if(c.html(c.html().replace(/^([\w\.]+)</,"<")),c.find("span:first").remove(),1==a&&-1==t.inArray(o,r)){var h=t("<"+l+"/>").attr({"data-level":a,"data-list":o}).html(c);t(this).replaceWith(h),n=o,r.push(o)}else{if(a>s){for(var u=i.find('[data-level="'+s+'"][data-list="'+n+'"]'),d=u,p=s;a>p;p++)h=t("<"+l+"/>"),h.appendTo(d.find("li").last()),d=h;d.attr({"data-level":a,"data-list":o}).html(c)}else{var u=i.find('[data-level="'+a+'"][data-list="'+o+'"]').last();u.append(c)}s=a,n=o,t(this).remove()}}}),i.find("[data-level][data-list]").removeAttr("data-level data-list"),e=i.html(),e=e.replace(/\xb7/g,""),e=e.replace(/<p class="Mso(.*?)"/gi,"<p"),e=e.replace(/ class=\"(mso[^\"]*)\"/gi,""),e=e.replace(/ class=(mso\w+)/gi,""),e=e.replace(/<o:p(.*?)>([\w\W]*?)<\/o:p>/gi,"$2"),e=e.replace(/\n/g," "),e=e.replace(/<p>\n?<li>/gi,"<li>")}return e},onPasteExtra:function(t){return t=t.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),t=t.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),t=t.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style="font-weight: bold;"><span style="font-style: italic;">'),t=t.replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style="font-style: italic;">'),t=t.replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style="font-weight: bold;">'),t=t.replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style="text-decoration: underline;">'),t=t.replace(/<img>/gi,""),t=t.replace(/\n{3,}/gi,"\n"),t=t.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2"),t=t.replace(/<p><p>/gi,"<p>"),t=t.replace(/<\/p><\/p>/gi,"</p>"),t=t.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),t=t.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),t=t.replace(/<\/p>\s<p/gi,"</p><p"),t=t.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,""),t=t.replace(/<p>\u2022([\w\W]*?)<\/p>/gi,"<li>$1</li>"),this.utils.browser("mozilla")&&(t=t.replace(/<br\s?\/?>$/gi,"")),t},onPasteTidy:function(t,e){var i=["span","a","pre","blockquote","small","em","strong","code","kbd","mark","address","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","p","br","video","audio","iframe","embed","param","object","img","table","td","th","tr","tbody","tfoot","thead","h1","h2","h3","h4","h5","h6"],n=!1,s=[["a","*"],["img",["src","alt"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]];"all"==e?(n=["p","span","h1","h2","h3","h4","h5","h6"],s=[["table","class"],["td",["colspan","rowspan"]],["a","*"],["img",["src","alt","data-redactor-inserted-image"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]]):"td"==e?i=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","br","iframe","video","audio","embed","param","object","img","h1","h2","h3","h4","h5","h6"]:"li"==e&&(i=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","br","iframe","video","audio","embed","param","object","img"]);var r={deniedTags:this.opts.deniedTags?this.opts.deniedTags:!1,allowedTags:this.opts.allowedTags?this.opts.allowedTags:i,removeComments:!0,removePhp:!0,removeAttr:this.opts.removeAttr?this.opts.removeAttr:!1,allowedAttr:this.opts.allowedAttr?this.opts.allowedAttr:s,removeEmpty:n};return this.tidy.load(t,r)},onPasteRemoveEmpty:function(t){return t=t.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi,""),this.opts.linebreaks||(t=t.replace(/<br>$/i,"")),t},onPasteRemoveSpans:function(t){return t=t.replace(/<span>(.*?)<\/span>/gi,"$1"),t=t.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi," ")},onPasteIeFixLinks:function(e){if(!this.utils.browser("msie"))return e;var i=t.trim(e);return 0===i.search(/^<a(.*?)>(.*?)<\/a>$/i)&&(e=e.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2")),e},isSingleLine:function(t,e){if(this.clean.singleLine=!1,!this.utils.isSelectAll()&&"undefined"==typeof e){var i=this.opts.blockLevelElements.join("|").replace("P|","").replace("DIV|",""),n=t.match(new RegExp("</("+i+")>","gi")),s=t.match(/<\/(p|div)>/gi);if(!n&&(null===s||s&&s.length<=1)){var r=t.match(/<br\s?\/?>/gi);r||(this.clean.singleLine=!0,t=t.replace(/<\/?(p|div)(.*?)>/gi,""))}}return t},stripTags:function(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(i,function(t,i){return e.indexOf("<"+i.toLowerCase()+">")>-1?t:""})},savePreCode:function(t){return t=this.clean.savePreFormatting(t),t=this.clean.saveCodeFormatting(t),t=this.clean.restoreSelectionMarker(t)},savePreFormatting:function(e){var i=e.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==i&&t.each(i,t.proxy(function(t,i){var n=i.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);n[2]=n[2].replace(/<br\s?\/?>/g,"\n"),n[2]=n[2].replace(/&nbsp;/g," "),this.opts.preSpaces&&(n[2]=n[2].replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<pre"+n[1]+">"+n[2]+"</pre>")},this)),e},saveCodeFormatting:function(e){var i=e.match(/<code(.*?)>([\w\W]*?)<\/code>/gi);return null!==i&&t.each(i,t.proxy(function(t,i){var n=i.match(/<code(.*?)>([\w\W]*?)<\/code>/i);n[2]=n[2].replace(/&nbsp;/g," "),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<code"+n[1]+">"+n[2]+"</code>")},this)),e},restoreSelectionMarker:function(t){return t=t.replace(/&lt;span id=&quot;selection-marker-([0-9])&quot; class=&quot;redactor-selection-marker&quot; data-verified=&quot;redactor&quot;&gt;\u200b&lt;\/span&gt;/g,'<span id="selection-marker-$1" class="redactor-selection-marker" data-verified="redactor">\u200b</span>')},getTextFromHtml:function(e){e=e.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n");var i=document.createElement("div");return i.innerHTML=e,e=i.textContent||i.innerText,t.trim(e)},getPlainText:function(t,e){return t=this.clean.getTextFromHtml(t),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/\n\n/g,"\n"),t=t.replace(/\n/g,"<br />"),this.opts.paragraphize&&"undefined"==typeof e&&!this.utils.browser("mozilla")&&(t=this.paragraphize.load(t)),t},getPreCode:function(t){return t=t.replace(/<img(.*?) style="(.*?)"(.*?[^>])>/gi,"<img$1$3>"),t=t.replace(/<img(.*?)>/gi,"&lt;img$1&gt;"),t=this.clean.getTextFromHtml(t),this.opts.preSpaces&&(t=t.replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),t=this.clean.encodeEntities(t)},getOnlyImages:function(t){return t=t.replace(/<img(.*?)>/gi,"[img$1]"),t=t.replace(/<([Ss]*?)>/gi,""),t=t.replace(/\[img(.*?)\]/gi,"<img$1>")},getOnlyLinksAndImages:function(t){return t=t.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),t=t.replace(/<img(.*?)>/gi,"[img$1]"),t=t.replace(/<(.*?)>/gi,""),t=t.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),t=t.replace(/\[img(.*?)\]/gi,"<img$1>")},encodeEntities:function(t){return t=String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},removeDirtyStyles:function(e){if(this.utils.browser("msie"))return e;var i=document.createElement("div");return i.innerHTML=e,this.clean.clearUnverifiedRemove(t(i)),e=i.innerHTML,t(i).remove(),e},clearUnverified:function(){if(!this.utils.browser("msie")){this.clean.clearUnverifiedRemove(this.$editor);var t=this.$editor.find("h1, h2, h3, h4, h5, h6");t.find("span").removeAttr("style"),t.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),this.code.sync()}},clearUnverifiedRemove:function(e){e.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),e.find("span").not('[data-verified="redactor"]').removeAttr("style"),e.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(e,i){var n=t(i);n.attr("style",n.attr("rel"))})},cleanEmptyParagraph:function(){},setVerified:function(t){if(this.utils.browser("msie"))return t;t=t.replace(new RegExp("<img(.*?[^>])>","gi"),'<img$1 data-verified="redactor">'),t=t.replace(new RegExp("<span(.*?[^>])>","gi"),'<span$1 data-verified="redactor">');var e=t.match(new RegExp('<(span|img)(.*?)style="(.*?)"(.*?[^>])>',"gi"));if(e)for(var i=e.length,n=0;i>n;n++)try{var s=e[n].replace(/style="(.*?)"/i,'style="$1" rel="$1"');t=t.replace(e[n],s)}catch(r){}return t},convertInline:function(e){var i=t("<div />").html(e),n=this.opts.inlineTags;return n.push("span"),i.find(n.join(",")).each(function(){var e=t(this),i=this.tagName.toLowerCase();e.attr("data-redactor-tag",i),"span"==i&&(e.attr("style")?e.attr("data-redactor-style",e.attr("style")):e.attr("class")&&e.attr("data-redactor-class",e.attr("class")))}),e=i.html(),i.remove(),e},normalizeLists:function(){this.$editor.find("li").each(function(e,i){var n=t(i).next();0===n.length||"UL"!=n[0].tagName&&"OL"!=n[0].tagName||t(i).append(n)})},removeSpaces:function(t){return t=t.replace(/\n/g,""),t=t.replace(/[\t]*/g,""),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/g," "),t=t.replace(/[\s\n]*$/g," "),t=t.replace(/>\s{2,}</g,"> <"),t=t.replace(/\n\n/g,"\n"),t=t.replace(/\u200B/g,"")},replaceDivs:function(t){return this.opts.linebreaks?(t=t.replace(/<div><br\s?\/?><\/div>/gi,"<br />"),t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2<br />")):t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>"),t=t.replace(/<div(.*?[^>])>/gi,""),t=t.replace(/<\/div>/gi,"")},replaceDivsToBr:function(t){return t=t.replace(/<div\s(.*?)>/gi,"<p>"),t=t.replace(/<div><br\s?\/?><\/div>/gi,"<br /><br />"),t=t.replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br /><br />")},replaceParagraphsToBr:function(t){return t=t.replace(/<p\s(.*?)>/gi,"<p>"),t=t.replace(/<p><br\s?\/?><\/p>/gi,"<br />"),t=t.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br /><br />"),t=t.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>")},saveFormTags:function(t){return t.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(t){return t.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")}}},code:function(){return{set:function(e){e=t.trim(e.toString()),e=this.clean.onSet(e),this.utils.browser("msie")&&(e=e.replace(/<span(.*?)id="selection-marker-(1|2)"(.*?)><\/span>/gi,"")),this.$editor.html(e),this.code.sync(),""!==e&&this.placeholder.remove(),setTimeout(t.proxy(this.buffer.add,this),15),this.start===!1&&this.observe.load()},get:function(){var t=this.$textarea.val();return this.opts.replaceDivs&&(t=this.clean.replaceDivs(t)),this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),t=this.tabifier.get(t)},sync:function(){setTimeout(t.proxy(this.code.startSync,this),10)},startSync:function(){var t=this.$editor.html();this.code.syncCode&&this.code.syncCode==t||this.start&&""==t||(this.code.syncCode=t,t=this.core.setCallback("syncBefore",t),t=this.clean.onSync(t),this.$textarea.val(t),this.core.setCallback("sync",t),this.start===!1&&this.core.setCallback("change",t),this.start=!1,0==this.autosave.html&&(this.autosave.html=this.code.get()),this.opts.codemirror&&this.$textarea.next(".CodeMirror").each(function(e,i){i.CodeMirror.setValue(t)}),this.autosave.onChange(),this.autosave.enable())},toggle:function(){this.opts.visual?this.code.showCode():this.code.showVisual()},showCode:function(){this.selection.save(),this.code.offset=this.caret.getOffset();var e=t(window).scrollTop(),i=(this.$editor.innerWidth(),this.$editor.innerHeight());this.$editor.hide();var n=this.$textarea.val();this.modified=this.clean.removeSpaces(n),n=this.tabifier.get(n);var s=0,r=0,o=t("<div/>").append(t.parseHTML(this.clean.onSync(this.$editor.html()),document,!0)),a=o.find("span.redactor-selection-marker");if(a.length>0){var l=this.tabifier.get(o.html()).replace(/&amp;/g,"&");1==a.length?(s=this.utils.strpos(l,o.find("#selection-marker-1").prop("outerHTML")),r=s):2==a.length&&(s=this.utils.strpos(l,o.find("#selection-marker-1").prop("outerHTML")),r=this.utils.strpos(l,o.find("#selection-marker-2").prop("outerHTML"))-o.find("#selection-marker-1").prop("outerHTML").toString().length)}this.selection.removeMarkers(),this.$textarea.val(n),this.opts.codemirror?this.$textarea.next(".CodeMirror").each(function(e,o){t(o).show(),o.CodeMirror.setValue(n),o.CodeMirror.setSize("100%",i),o.CodeMirror.refresh(),s==r?o.CodeMirror.setCursor(o.CodeMirror.posFromIndex(s).line,o.CodeMirror.posFromIndex(r).ch):o.CodeMirror.setSelection({line:o.CodeMirror.posFromIndex(s).line,ch:o.CodeMirror.posFromIndex(s).ch},{line:o.CodeMirror.posFromIndex(r).line,ch:o.CodeMirror.posFromIndex(r).ch}),o.CodeMirror.focus()}):(this.$textarea.height(i).show().focus(),this.$textarea.on("keydown.redactor-textarea-indenting",this.code.textareaIndenting),t(window).scrollTop(e),this.$textarea[0].setSelectionRange&&this.$textarea[0].setSelectionRange(s,r),this.$textarea[0].scrollTop=0),this.opts.visual=!1,this.button.setInactiveInCode(),this.button.setActive("html"),this.core.setCallback("source",n)},showVisual:function(){var t;if(!this.opts.visual){var e=0,i=0;if(this.opts.codemirror){var n;this.$textarea.next(".CodeMirror").each(function(s,r){n=r.CodeMirror.listSelections(),e=r.CodeMirror.indexFromPos(n[0].anchor),i=r.CodeMirror.indexFromPos(n[0].head),t=r.CodeMirror.getValue()})}else e=this.$textarea.get(0).selectionStart,i=this.$textarea.get(0).selectionEnd,t=this.$textarea.hide().val();if(e>i&&i>0){var s=i,r=e;e=s,i=r}if(e=this.code.enlargeOffset(t,e),i=this.code.enlargeOffset(t,i),t=t.substr(0,e)+this.selection.getMarkerAsHtml(1)+t.substr(e),i>e){var o=this.selection.getMarkerAsHtml(1).toString().length;t=t.substr(0,i+o)+this.selection.getMarkerAsHtml(2)+t.substr(i+o)}this.modified!==this.clean.removeSpaces(t)&&this.code.set(t),this.opts.codemirror&&this.$textarea.next(".CodeMirror").hide(),this.$editor.show(),this.utils.isEmpty(t)||this.placeholder.remove(),this.selection.restore(),this.$textarea.off("keydown.redactor-textarea-indenting"),this.button.setActiveInVisual(),this.button.setInactive("html"),this.observe.load(),this.opts.visual=!0,this.core.setCallback("visual",t)}},textareaIndenting:function(t){if(9!==t.keyCode)return!0;var e=this.$textarea,i=e.get(0).selectionStart;return e.val(e.val().substring(0,i)+"	"+e.val().substring(e.get(0).selectionEnd)),e.get(0).selectionStart=e.get(0).selectionEnd=i+1,!1},enlargeOffset:function(t,e){var i=t.length,n=0;if(">"==t[e])n++;else for(var s=e;i>=s&&(n++,">"!=t[s]);s++)if("<"==t[s]||s==i){n=0;break}return e+n}}},core:function(){return{getObject:function(){return t.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getElement:function(){return this.$element},getTextarea:function(){return this.$textarea},getToolbar:function(){return this.$toolbar?this.$toolbar:!1},addEvent:function(t){this.core.event=t},getEvent:function(){return this.core.event},setCallback:function(e,i,n){var s=e+"Callback",r="redactor",o=this.opts[s];if(this.$textarea){var a=!1,l=t._data(this.$textarea[0],"events");if("undefined"!=typeof l&&"undefined"!=typeof l[s]&&t.each(l[s],t.proxy(function(t,e){if(e.namespace==r){var n="undefined"==typeof n?[i]:[i,n];a="undefined"==typeof n?e.handler.call(this,i):e.handler.call(this,i,n)}},this)),a)return a}return t.isFunction(o)?"undefined"==typeof n?o.call(this,i):o.call(this,i,n):"undefined"==typeof n?i:n},destroy:function(){this.opts.destroyed=!0,this.core.setCallback("destroy"),this.$element.off(".redactor").removeData("redactor"),this.$editor.off(".redactor"),t(document).off("mousedown.redactor-blur."+this.uuid),t(document).off("mousedown.redactor."+this.uuid),t(document).off("click.redactor-image-delete."+this.uuid),t(document).off("click.redactor-image-resize-hide."+this.uuid),t(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),t("body").off("scroll.redactor."+this.uuid),t(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid),this.$editor.removeClass("redactor-editor redactor-linebreaks redactor-placeholder"),this.$editor.removeAttr("contenteditable");var e=this.code.get();this.opts.toolbar&&this.$toolbar.find("a").each(function(){var e=t(this);e.data("dropdown")&&(e.data("dropdown").remove(),e.data("dropdown",{}))}),this.build.isTextarea()?(this.$box.after(this.$element),this.$box.remove(),this.$element.val(e).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$element.html(e).show()),this.$pasteBox&&this.$pasteBox.remove(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),t(".redactor-toolbar-tooltip-"+this.uuid).remove(),clearInterval(this.autosaveInterval)}}},dropdown:function(){return{build:function(e,i,n){"formatting"==e&&this.opts.formattingAdd&&t.each(this.opts.formattingAdd,t.proxy(function(t,e){var i,s=e.tag;"undefined"!=typeof e["class"]&&(s=s+"-"+e["class"]),e.type=this.utils.isBlockTag(e.tag)?"block":"inline",i="undefined"!=typeof e.func?e.func:"inline"==e.type?"inline.formatting":"block.formatting",this.opts.linebreaks&&"block"==e.type&&"p"==e.tag||(this.formatting[s]={tag:e.tag,style:e.style,"class":e["class"],attr:e.attr,data:e.data,clear:e.clear},n[s]={func:i,title:e.title})},this)),t.each(n,t.proxy(function(n,s){var r=t('<a href="#" class="redactor-dropdown-'+n+'" role="button">'+s.title+"</a>");"formatting"==e&&r.addClass("redactor-formatting-"+n),r.on("click",t.proxy(function(e){e.preventDefault();var i="func",r=s.func;s.command?(i="command",r=s.command):s.dropdown&&(i="dropdown",r=s.dropdown),t(e.target).hasClass("redactor-dropdown-link-inactive")||(this.button.onClick(e,n,i,r),this.dropdown.hideAll())},this)),this.observe.addDropdown(r,n,s),i.append(r)},this))},show:function(e,i){if(!this.opts.visual)return e.preventDefault(),!1;var n=this.button.get(i),s=n.data("dropdown").appendTo(document.body);if(this.opts.highContrast&&s.addClass("redactor-dropdown-contrast"),n.hasClass("dropact"))this.dropdown.hideAll();else{this.dropdown.hideAll(),this.observe.dropdowns(),this.core.setCallback("dropdownShow",{dropdown:s,key:i,button:n}),this.button.setActive(i),n.addClass("dropact");var r=n.offset(),o=s.width();r.left+o>t(document).width()&&(r.left=Math.max(0,r.left-o));var a=r.left+"px";if(this.$toolbar.hasClass("toolbar-fixed-box")){var l=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,c="fixed";this.opts.toolbarFixedTarget!==document&&(l=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,c="absolute"),s.css({position:c,left:a,top:l+"px"}).show()}else{var l=n.innerHeight()+r.top+"px";s.css({position:"absolute",left:a,top:l}).show()}this.core.setCallback("dropdownShown",{dropdown:s,key:i,button:n}),this.$dropdown=s}t(document).one("click.redactor-dropdown",t.proxy(this.dropdown.hide,this)),this.$editor.one("click.redactor-dropdown",t.proxy(this.dropdown.hide,this)),t(document).one("keyup.redactor-dropdown",t.proxy(this.dropdown.closeHandler,this)),s.on("mouseover.redactor-dropdown",t.proxy(this.utils.disableBodyScroll,this)).on("mouseout.redactor-dropdown",t.proxy(this.utils.enableBodyScroll,this)),e.stopPropagation()},closeHandler:function(t){t.which==this.keyCode.ESC&&(this.dropdown.hideAll(),this.$editor.focus())},hideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor-act").removeClass("dropact"),this.utils.enableBodyScroll(),t(".redactor-dropdown-"+this.uuid).hide(),t(".redactor-dropdown-link-selected").removeClass("redactor-dropdown-link-selected"),this.$dropdown&&(this.$dropdown.off(".redactor-dropdown"),this.core.setCallback("dropdownHide",this.$dropdown),this.$dropdown=!1)},hide:function(e){var i=t(e.target);i.hasClass("dropact")||i.hasClass("redactor-dropdown-link-inactive")||(i.hasClass("redactor-dropdown")&&(i.removeClass("dropact"),i.off("mouseover mouseout")),this.dropdown.hideAll())}}},file:function(){return{show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),this.selection.save(),this.selection.get();var e=this.sel.toString();t("#redactor-filename").val(e),this.modal.show()},insert:function(e,i,n){if("undefined"!=typeof e.error)return this.modal.close(),this.selection.restore(),void this.core.setCallback("fileUploadError",e);var s;if("string"==typeof e)s=e;else{var r=t("#redactor-filename").val();("undefined"==typeof r||""===r)&&(r=e.filename),s='<a href="'+e.filelink+'" id="filelink-marker">'+r+"</a>"}if(i){this.selection.removeMarkers();var o=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,o)}else this.modal.close();if(this.selection.restore(),this.buffer.set(),this.insert.htmlWithoutClean(s),"string"!=typeof e){var a=t(this.$editor.find("a#filelink-marker"));0!==a.length?a.removeAttr("id").removeAttr("style"):a=!1,this.core.setCallback("fileUpload",a,e)}}}},focus:function(){return{setStart:function(){this.$editor.focus();var t=this.$editor.children().first();if(0!==t.length&&0!==t[0].length&&"BR"!=t[0].tagName&&3!=t[0].nodeType){if("UL"==t[0].tagName||"OL"==t[0].tagName){var e=t.find("li").first();if(!this.utils.isBlock(e)&&""===e.text())return void this.caret.setStart(e)}return this.opts.linebreaks&&!this.utils.isBlockTag(t[0].tagName)?(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),void this.selection.addRange()):void this.caret.setStart(t)}},setEnd:function(){var t=this.$editor.children().last();this.$editor.focus(),0!==t.size()&&(this.utils.isEmpty(this.$editor.html())?(this.selection.get(),this.range.collapse(!0),this.range.setStartAfter(t[0]),this.range.setEnd(t[0],0),this.selection.addRange()):(this.selection.get(),this.range.selectNodeContents(t[0]),this.range.collapse(!1),this.selection.addRange()))},isFocused:function(){return this.$editor[0]===document.activeElement}}},image:function(){return{show:function(){this.modal.load("image",this.lang.get("image"),700),this.upload.init("#redactor-modal-image-droparea",this.opts.imageUpload,this.image.insert),this.selection.save(),this.modal.show()},showEdit:function(e){var i=e.closest("a",this.$editor[0]);if(this.modal.load("imageEdit",this.lang.get("edit"),705),this.modal.createCancelButton(),this.image.buttonDelete=this.modal.createDeleteButton(this.lang.get("_delete")),this.image.buttonSave=this.modal.createActionButton(this.lang.get("save")),this.image.buttonDelete.on("click",t.proxy(function(){this.image.remove(e)},this)),this.image.buttonSave.on("click",t.proxy(function(){this.image.update(e)},this)),t(".redactor-link-tooltip").remove(),t("#redactor-image-title").val(e.attr("alt")),this.opts.imageLink){var n=t("#redactor-image-link");n.attr("href",e.attr("src")),0!==i.length&&(n.val(i.attr("href")),"_blank"==i.attr("target")&&t("#redactor-image-link-blank").prop("checked",!0))}else t(".redactor-image-link-option").hide();if(this.opts.imagePosition){var s="block"==e.css("display")&&"none"==e.css("float")?"center":e.css("float");t("#redactor-image-align").val(s)}else t(".redactor-image-position-option").hide();this.modal.show(),t("#redactor-image-title").focus()},setFloating:function(e){var i=t("#redactor-image-align").val(),n="",s="",r="";switch(i){case"left":n="left",r="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";break;case"right":n="right",r="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin;break;case"center":s="block",r="auto"}e.css({"float":n,display:s,margin:r}),e.attr("rel",e.attr("style"))},update:function(e){this.image.hideResize(),this.buffer.set();var i=e.closest("a",this.$editor[0]),n=t("#redactor-image-title").val().replace(/(<([^>]+)>)/gi,"");e.attr("alt",n),this.image.setFloating(e);var s=t.trim(t("#redactor-image-link").val()),s=s.replace(/(<([^>]+)>)/gi,"");if(""!==s){var r="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",o=new RegExp("^(http|ftp|https)://"+r,"i"),a=new RegExp("^"+r,"i");-1==s.search(o)&&0===s.search(a)&&this.opts.linkProtocol&&(s=this.opts.linkProtocol+"://"+s);var l=t("#redactor-image-link-blank").prop("checked")?!0:!1;if(0===i.length){var c=t('<a href="'+s+'">'+this.utils.getOuterHtml(e)+"</a>");l&&c.attr("target","_blank"),e.replaceWith(c)}else i.attr("href",s),l?i.attr("target","_blank"):i.removeAttr("target")}else 0!==i.length&&i.replaceWith(this.utils.getOuterHtml(e));this.modal.close(),this.observe.images(),this.code.sync()},setEditable:function(e){this.opts.imageEditable&&e.on("dragstart",t.proxy(this.image.onDrag,this));var i=t.proxy(function(i){this.observe.image=e,this.image.resizer=this.image.loadEditableControls(e),t(document).on("mousedown.redactor-image-resize-hide."+this.uuid,t.proxy(this.image.hideResize,this)),this.opts.imageResizable&&this.image.resizer.on("mousedown.redactor touchstart.redactor",t.proxy(function(t){this.image.setResizable(t,e)},this))},this);e.off("mousedown.redactor").on("mousedown.redactor",t.proxy(this.image.hideResize,this)),e.off("click.redactor touchstart.redactor").on("click.redactor touchstart.redactor",i)},setResizable:function(t,e){t.preventDefault(),this.image.resizeHandle={x:t.pageX,y:t.pageY,el:e,ratio:e.width()/e.height(),h:e.height()},t=t.originalEvent||t,t.targetTouches&&(this.image.resizeHandle.x=t.targetTouches[0].pageX,this.image.resizeHandle.y=t.targetTouches[0].pageY),this.image.startResize()},startResize:function(){t(document).on("mousemove.redactor-image-resize touchmove.redactor-image-resize",t.proxy(this.image.moveResize,this)),t(document).on("mouseup.redactor-image-resize touchend.redactor-image-resize",t.proxy(this.image.stopResize,this))},moveResize:function(t){t.preventDefault(),t=t.originalEvent||t;var e=this.image.resizeHandle.h;e+=t.targetTouches?t.targetTouches[0].pageY-this.image.resizeHandle.y:t.pageY-this.image.resizeHandle.y;var i=Math.round(e*this.image.resizeHandle.ratio);if(!(50>e||100>i)){var e=Math.round(this.image.resizeHandle.el.width()/this.image.resizeHandle.ratio);this.image.resizeHandle.el.attr({width:i,height:e}),this.image.resizeHandle.el.width(i),this.image.resizeHandle.el.height(e),this.code.sync()}},stopResize:function(){this.handle=!1,t(document).off(".redactor-image-resize"),this.image.hideResize()},onDrag:function(e){return 0!==this.$editor.find("#redactor-image-box").length?(e.preventDefault(),!1):void this.$editor.on("drop.redactor-image-inside-drop",t.proxy(function(){setTimeout(t.proxy(this.image.onDrop,this),1)},this))},onDrop:function(){this.image.fixImageSourceAfterDrop(),this.observe.images(),this.$editor.off("drop.redactor-image-inside-drop"),this.clean.clearUnverified(),this.code.sync()},fixImageSourceAfterDrop:function(){this.$editor.find("img[data-save-url]").each(function(){var e=t(this);e.attr("src",e.attr("data-save-url")),e.removeAttr("data-save-url")})},hideResize:function(e){if(!e||0===t(e.target).closest("#redactor-image-box",this.$editor[0]).length){if(e&&"IMG"==e.target.tagName){var i=t(e.target);i.attr("data-save-url",i.attr("src"))}var n=this.$editor.find("#redactor-image-box");0!==n.length&&(t("#redactor-image-editter").remove(),t("#redactor-image-resizer").remove(),n.find("img").css({marginTop:n[0].style.marginTop,marginBottom:n[0].style.marginBottom,marginLeft:n[0].style.marginLeft,marginRight:n[0].style.marginRight}),n.css("margin",""),n.find("img").css("opacity",""),n.replaceWith(function(){return t(this).contents()}),t(document).off("mousedown.redactor-image-resize-hide."+this.uuid),"undefined"!=typeof this.image.resizeHandle&&this.image.resizeHandle.el.attr("rel",this.image.resizeHandle.el.attr("style")),this.code.sync())}},loadResizableControls:function(e,i){if(this.opts.imageResizable&&!this.utils.isMobile()){var n=t('<span id="redactor-image-resizer" data-redactor="verified"></span>');return this.utils.isDesktop()||n.css({width:"15px",height:"15px"}),n.attr("contenteditable",!1),i.append(n),i.append(e),n}return i.append(e),!1},loadEditableControls:function(e){var i=t('<span id="redactor-image-box" data-redactor="verified">');if(i.css("float",e.css("float")).attr("contenteditable",!1),"auto"!=e[0].style.margin?(i.css({marginTop:e[0].style.marginTop,marginBottom:e[0].style.marginBottom,marginLeft:e[0].style.marginLeft,marginRight:e[0].style.marginRight}),e.css("margin","")):i.css({display:"block",margin:"auto"}),e.css("opacity",".5").after(i),this.opts.imageEditable){this.image.editter=t('<span id="redactor-image-editter" data-redactor="verified">'+this.lang.get("edit")+"</span>"),
this.image.editter.attr("contenteditable",!1),this.image.editter.on("click",t.proxy(function(){this.image.showEdit(e)},this)),i.append(this.image.editter);var n=this.image.editter.innerWidth();this.image.editter.css("margin-left","-"+n/2+"px")}return this.image.loadResizableControls(e,i)},remove:function(e){var i=t(e),n=i.closest("a",this.$editor[0]),s=i.closest("figure",this.$editor[0]),r=i.parent();0!==t("#redactor-image-box").length&&(r=t("#redactor-image-box").parent());var o;0!==s.length?(o=s.next(),s.remove()):0!==n.length?(r=n.parent(),n.remove()):i.remove(),t("#redactor-image-box").remove(),0!==s.length?this.caret.setStart(o):this.caret.setStart(r),this.core.setCallback("imageDelete",i[0].src,i),this.modal.close(),this.code.sync()},insert:function(e,i,n){if("undefined"!=typeof e.error)return this.modal.close(),this.selection.restore(),void this.core.setCallback("imageUploadError",e);var s;"string"==typeof e?s=t(e).attr("data-redactor-inserted-image","true"):(s=t("<img>"),s.attr("src",e.filelink).attr("data-redactor-inserted-image","true"));var r=s,o=this.utils.isCurrentOrParent("P");if(o&&(r=t("<blockquote />").append(s)),i){this.selection.removeMarkers();var a=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,a)}else this.modal.close();this.selection.restore(),this.buffer.set(),this.insert.html(this.utils.getOuterHtml(r),!1);var l=this.$editor.find("img[data-redactor-inserted-image=true]").removeAttr("data-redactor-inserted-image");o?l.parent().contents().unwrap().wrap("<p />"):this.opts.linebreaks&&(this.utils.isEmpty(this.code.get())||l.before("<br>"),l.after("<br>")),"string"!=typeof e&&this.core.setCallback("imageUpload",l,e)}}},indent:function(){return{increase:function(){this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save();var t=this.selection.getBlock();t&&"LI"==t.tagName?this.indent.increaseLists():t===!1&&this.opts.linebreaks?this.indent.increaseText():this.indent.increaseBlocks(),this.selection.restore(),this.code.sync()},increaseLists:function(){document.execCommand("indent"),this.indent.fixEmptyIndent(),this.clean.normalizeLists(),this.clean.clearUnverified()},increaseBlocks:function(){t.each(this.selection.getBlocks(),t.proxy(function(t,e){if("TD"!==e.tagName&&"TH"!==e.tagName){var i=this.utils.getAlignmentElement(e),n=this.utils.normalize(i.css("margin-left"))+this.opts.indentValue;i.css("margin-left",n+"px")}},this))},increaseText:function(){var e=this.selection.wrap("div");t(e).attr("data-tagblock","redactor"),t(e).css("margin-left",this.opts.indentValue+"px")},decrease:function(){this.buffer.set(),this.selection.save();var t=this.selection.getBlock();t&&"LI"==t.tagName?this.indent.decreaseLists():this.indent.decreaseBlocks(),this.selection.restore(),this.code.sync()},decreaseLists:function(){document.execCommand("outdent");var e=this.selection.getCurrent(),i=t(e).closest("li",this.$editor[0]);this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==i.length||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote, p").each(t.proxy(this.utils.removeEmpty,this))),this.clean.clearUnverified()},decreaseBlocks:function(){t.each(this.selection.getBlocks(),t.proxy(function(t,e){var i=this.utils.getAlignmentElement(e),n=this.utils.normalize(i.css("margin-left"))-this.opts.indentValue;0>=n?this.opts.linebreaks&&"undefined"!=typeof i.data("tagblock")?i.replaceWith(i.html()+"<br />"):(i.css("margin-left",""),this.utils.removeEmptyAttr(i,"style")):i.css("margin-left",n+"px")},this))},fixEmptyIndent:function(){var e=this.selection.getBlock();if(this.range.collapsed&&e&&"LI"==e.tagName&&this.utils.isEmpty(t(e).text())){var i=t(e);i.find("span").not(".redactor-selection-marker").contents().unwrap(),i.append("<br>")}}}},inline:function(){return{formatting:function(t){var e,i;"undefined"!=typeof this.formatting[t].style?e="style":"undefined"!=typeof this.formatting[t]["class"]&&(e="class"),e&&(i=this.formatting[t][e]),this.inline.format(this.formatting[t].tag,e,i)},format:function(e,i,n){var s=this.selection.getCurrent();if(!(s&&"TR"===s.tagName||this.utils.isCurrentOrParent("PRE")||this.utils.isCurrentOrParentHeader())){for(var r=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],o=["strong","strong","em","em","u","del","del","sup","sub"],a=0;a<r.length;a++)e==r[a]&&(e=o[a]);if(this.opts.allowedTags){if(-1==t.inArray(e,this.opts.allowedTags))return}else if(-1!==t.inArray(e,this.opts.deniedTags))return;this.inline.type=i||!1,this.inline.value=n||!1,this.buffer.set(),this.utils.browser("msie")||this.opts.linebreaks||this.$editor.focus(),this.selection.get(),this.range.collapsed?this.inline.formatCollapsed(e):this.inline.formatMultiple(e)}},formatCollapsed:function(e){var i=this.selection.getCurrent(),n=t(i).closest(e+"[data-redactor-tag="+e+"]",this.$editor[0]);if(0!==n.length&&"style"!=this.inline.type&&"SPAN"!=n[0].tagName)return void(this.utils.isEmpty(n.text())?(this.caret.setAfter(n[0]),n.remove(),this.code.sync()):this.utils.isEndOfElement(n)&&this.caret.setAfter(n[0]));var s=t("<"+e+">").attr("data-verified","redactor").attr("data-redactor-tag",e);s.html(this.opts.invisibleSpace),s=this.inline.setFormat(s);var s=this.insert.node(s);this.caret.setEnd(s),this.code.sync()},formatMultiple:function(e){if(this.inline.formatConvert(e),this.selection.save(),document.execCommand("strikethrough"),this.$editor.find("strike").each(t.proxy(function(i,n){var s=t(n);this.inline.formatRemoveSameChildren(s,e);var r;this.inline.type?(r=t("<span>").attr("data-redactor-tag",e).attr("data-verified","redactor"),r=this.inline.setFormat(r)):r=t("<"+e+">").attr("data-redactor-tag",e).attr("data-verified","redactor"),s.replaceWith(r.html(s.contents()));var o=r.parent();if("A"===r[0].tagName&&o&&"U"===o[0].tagName&&r.parent().replaceWith(r),"span"==e&&o&&"SPAN"===o[0].tagName&&"style"===this.inline.type)for(var a=this.inline.value.split(";"),l=0;l<a.length;l++){if(""===a[l])return;var c=a[l].split(":");o.css(c[0],""),this.utils.removeEmptyAttr(o,"style")&&o.replaceWith(o.contents())}},this)),"span"!=e&&this.$editor.find(this.opts.inlineTags.join(", ")).each(t.proxy(function(e,i){var n=t(i);if("U"===i.tagName&&0===i.attributes.length)return void n.replaceWith(n.contents());var s=n.css("text-decoration");"line-through"===s&&(n.css("text-decoration",""),this.utils.removeEmptyAttr(n,"style"))},this)),"del"!=e){var i=this;this.$editor.find("inline").each(function(t,e){i.utils.replaceToTag(e,"del")})}if("u"!=e){var i=this;this.$editor.find("unline").each(function(t,e){i.utils.replaceToTag(e,"u")})}this.selection.restore(),this.code.sync()},formatRemoveSameChildren:function(e,i){var n=this;e.children(i).each(function(){var e=t(this);if(!e.hasClass("redactor-selection-marker"))if("style"==n.inline.type)for(var i=n.inline.value.split(";"),s=0;s<i.length;s++){if(""===i[s])return;var r=i[s].split(":");e.css(r[0],""),n.utils.removeEmptyAttr(e,"style")&&e.replaceWith(e.contents())}else e.contents().unwrap()})},formatConvert:function(e){this.selection.save();var i="";"class"==this.inline.type?i="[data-redactor-class="+this.inline.value+"]":"style"==this.inline.type&&(i='[data-redactor-style="'+this.inline.value+'"]');var n=this;"del"!=e&&this.$editor.find("del").each(function(t,e){n.utils.replaceToTag(e,"inline")}),"u"!=e&&this.$editor.find("u").each(function(t,e){n.utils.replaceToTag(e,"unline")}),"span"!=e&&this.$editor.find(e).each(function(){var e=t(this);e.replaceWith(t("<strike />").html(e.contents()))}),this.$editor.find('[data-redactor-tag="'+e+'"]'+i).each(function(){if(""!==i||"span"!=e||this.tagName.toLowerCase()!=e){var n=t(this);n.replaceWith(t("<strike />").html(n.contents()))}}),this.selection.restore()},setFormat:function(t){switch(this.inline.type){case"class":t.hasClass(this.inline.value)?(t.removeClass(this.inline.value),t.removeAttr("data-redactor-class")):(t.addClass(this.inline.value),t.attr("data-redactor-class",this.inline.value));break;case"style":t[0].style.cssText=this.inline.value,t.attr("data-redactor-style",this.inline.value)}return t},removeStyle:function(){this.buffer.set();var e=this.selection.getCurrent(),i=this.selection.getInlines();if(this.selection.save(),e&&"SPAN"===e.tagName){var n=t(e);n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents())}t.each(i,t.proxy(function(e,i){var n=t(i);-1==t.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)||n.hasClass("redactor-selection-marker")||(n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents()))},this)),this.selection.restore(),this.code.sync()},removeStyleRule:function(e){this.buffer.set();var i=this.selection.getParent(),n=this.selection.getInlines();if(this.selection.save(),i&&"SPAN"===i.tagName){var s=t(i);s.css(e,""),this.utils.removeEmptyAttr(s,"style"),0===s[0].attributes.length&&s.replaceWith(s.contents())}t.each(n,t.proxy(function(i,n){var s=t(n);-1==t.inArray(n.tagName.toLowerCase(),this.opts.inlineTags)||s.hasClass("redactor-selection-marker")||(s.css(e,""),this.utils.removeEmptyAttr(s,"style"),0===s[0].attributes.length&&s.replaceWith(s.contents()))},this)),this.selection.restore(),this.code.sync()},removeFormat:function(){this.buffer.set();var e=this.selection.getCurrent();this.selection.save(),document.execCommand("removeFormat"),e&&"SPAN"===e.tagName&&t(e).replaceWith(t(e).contents()),t.each(this.selection.getNodes(),t.proxy(function(e,i){var n=t(i);-1==t.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)||n.hasClass("redactor-selection-marker")||n.replaceWith(n.contents())},this)),this.selection.restore(),this.code.sync()},toggleClass:function(t){this.inline.format("span","class",t)},toggleStyle:function(t){this.inline.format("span","style",t)}}},insert:function(){return{set:function(e,i){this.placeholder.remove(),e=this.clean.setVerified(e),"undefined"==typeof i&&(e=this.clean.onPaste(e,!1)),this.$editor.html(e),this.selection.remove(),this.focus.setEnd(),this.clean.normalizeLists(),this.code.sync(),this.observe.load(),"undefined"==typeof i&&setTimeout(t.proxy(this.clean.clearUnverified,this),10)},text:function(e){if(this.placeholder.remove(),e=e.toString(),e=t.trim(e),e=this.clean.getPlainText(e,!1),this.$editor.focus(),this.utils.browser("msie"))this.insert.htmlIe(e);else{this.selection.get(),this.range.deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var n,s,r=document.createDocumentFragment();n=i.firstChild;)s=r.appendChild(n);if(this.range.insertNode(r),s){var o=this.range.cloneRange();o.setStartAfter(s),o.collapse(!0),this.sel.removeAllRanges(),this.sel.addRange(o)}}this.code.sync(),this.clean.clearUnverified()},htmlWithoutClean:function(t){this.insert.html(t,!1)},html:function(e,i){this.placeholder.remove(),"undefined"==typeof i&&(i=!0),this.opts.linebreaks||this.$editor.focus(),e=this.clean.setVerified(e),i&&(e=this.clean.onPaste(e)),this.utils.browser("msie")?this.insert.htmlIe(e):(this.clean.singleLine?this.insert.execHtml(e):document.execCommand("insertHTML",!1,e),this.insert.htmlFixMozilla()),this.clean.normalizeLists(),this.opts.linebreaks||this.$editor.find("p").each(t.proxy(this.utils.removeEmpty,this)),this.code.sync(),this.observe.load(),i&&this.clean.clearUnverified()},htmlFixMozilla:function(){if(this.utils.browser("mozilla")){var e=t(this.selection.getBlock()).next();e.length>0&&"P"==e[0].tagName&&""===e.html()&&e.remove()}},htmlIe:function(e){if(this.utils.isIe11()){var i=this.utils.isCurrentOrParent("P"),n=t("<div>").append(e),s=n.contents().is("p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article");return void(i&&s?this.insert.ie11FixInserting(i,e):this.insert.ie11PasteFrag(e))}document.selection.createRange().pasteHTML(e)},execHtml:function(t){t=this.clean.setVerified(t),this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n,s=document.createDocumentFragment();i=e.firstChild;)n=s.appendChild(i);this.range.insertNode(s),this.range.collapse(!0),this.caret.setAfter(n)},node:function(e,i){e=e[0]||e;var n=this.caret.getOffset(),s=this.utils.getOuterHtml(e);return s=this.clean.setVerified(s),null!==s.match(/</g)&&(e=t(s)[0]),this.selection.get(),i!==!1&&this.range.deleteContents(),this.range.insertNode(e),this.range.collapse(!1),this.selection.addRange(),this.caret.setOffset(n),e},nodeToPoint:function(t,e,i){t=t[0]||t,this.selection.get();var n;if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(e,i);this.range.setStart(s.offsetNode,s.offset),this.range.collapse(!0),this.range.insertNode(t)}else if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e,i),n.insertNode(t);else if("undefined"!=typeof document.body.createTextRange){n=document.body.createTextRange(),n.moveToPoint(e,i);var r=n.duplicate();r.moveToPoint(e,i),n.setEndPoint("EndToEnd",r),n.select()}},nodeToCaretPositionFromPoint:function(t,e){e=e[0]||e;var i,n=t.clientX,s=t.clientY;if(document.caretPositionFromPoint){var r=document.caretPositionFromPoint(n,s),o=document.getSelection();i=o.getRangeAt(0),i.setStart(r.offsetNode,r.offset),i.collapse(!0),i.insertNode(e)}else if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n,s),i.insertNode(e);else if("undefined"!=typeof document.body.createTextRange){i=document.body.createTextRange(),i.moveToPoint(n,s);var a=i.duplicate();a.moveToPoint(n,s),i.setEndPoint("EndToEnd",a),i.select()}},ie11FixInserting:function(e,i){var n=document.createElement("span");n.className="redactor-ie-paste",this.insert.node(n);var s=t(e).html();s="<p>"+s.replace(/<span class="redactor-ie-paste"><\/span>/gi,"</p>"+i+"<p>")+"</p>",s=s.replace(/<p><\/p>/gi,""),t(e).replaceWith(s)},ie11PasteFrag:function(t){this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n,s=document.createDocumentFragment();i=e.firstChild;)n=s.appendChild(i);this.range.insertNode(s),this.range.collapse(!1),this.selection.addRange()}}},keydown:function(){return{init:function(e){if(!this.rtePaste){var i=e.which,n=i>=37&&40>=i;this.keydown.ctrl=e.ctrlKey||e.metaKey,this.keydown.current=this.selection.getCurrent(),this.keydown.parent=this.selection.getParent(),this.keydown.block=this.selection.getBlock(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.shortcuts.init(e,i),this.utils.isDesktop()&&(this.keydown.checkEvents(n,i),this.keydown.setupBuffer(e,i)),this.keydown.addArrowsEvent(n),this.keydown.setupSelectAll(e,i);var s=this.core.setCallback("keydown",e);if(s===!1)return e.preventDefault(),!1;if(this.opts.enterKey&&(this.utils.browser("msie")||this.utils.browser("mozilla"))&&(i===this.keyCode.DOWN||i===this.keyCode.RIGHT)){var r=!1,o=!1;if(this.keydown.block&&"TD"===this.keydown.block.tagName&&(o=t(this.keydown.block).closest("table",this.$editor[0])),o&&o.find("td").last()[0]===this.keydown.block&&(r=!0),this.utils.isEndOfElement()&&r){var a=t(this.opts.emptyHtml);o.after(a),this.caret.setStart(a)}}if(this.opts.enterKey&&i===this.keyCode.DOWN&&this.keydown.onArrowDown(),!this.opts.enterKey&&i===this.keyCode.ENTER)return e.preventDefault(),void(this.range.collapsed||this.range.deleteContents());if(i==this.keyCode.ENTER&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey){var l=this.core.setCallback("enter",e);if(l===!1)return e.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(e)===!0)return!1;var c,h;if(this.keydown.pre)return this.keydown.insertNewLine(e);if(this.keydown.blockquote||this.keydown.figcaption)return c=this.selection.getCurrent(),h=t(c).next(),0!==h.length&&"BR"==h[0].tagName?this.keydown.insertBreakLine(e):this.utils.isEndOfElement()&&c&&"SPAN"!=c?this.keydown.insertDblBreakLine(e):this.keydown.insertBreakLine(e);if(this.opts.linebreaks&&!this.keydown.block)return c=this.selection.getCurrent(),h=t(this.keydown.current).next(),0!==h.length&&"BR"==h[0].tagName?this.keydown.insertBreakLine(e):c!==!1&&t(c).hasClass("redactor-invisible-space")?(this.caret.setAfter(c),t(c).contents().unwrap(),this.keydown.insertDblBreakLine(e)):this.utils.isEndOfEditor()?this.keydown.insertDblBreakLine(e):0===h.length&&c===!1&&"undefined"!=typeof h.context?this.keydown.insertBreakLine(e):this.keydown.insertBreakLine(e);if(this.opts.linebreaks&&this.keydown.block)setTimeout(t.proxy(this.keydown.replaceDivToBreakLine,this),1);else if(!this.opts.linebreaks&&this.keydown.block){if(setTimeout(t.proxy(this.keydown.replaceDivToParagraph,this),1),"LI"===this.keydown.block.tagName){c=this.selection.getCurrent();var u=t(c).closest("li",this.$editor[0]),d=u.closest("ul,ol",this.$editor[0]);if(0!==u.length&&this.utils.isEmpty(u.html())&&0===d.next().length&&this.utils.isEmpty(d.find("li").last().html())){d.find("li").last().remove();var a=t(this.opts.emptyHtml);return d.after(a),this.caret.setStart(a),!1}}}else if(!this.opts.linebreaks&&!this.keydown.block)return this.keydown.insertParagraph(e)}if(i===this.keyCode.ENTER&&(e.ctrlKey||e.shiftKey))return this.keydown.onShiftEnter(e);if(i===this.keyCode.TAB||e.metaKey&&221===i||e.metaKey&&219===i)return this.keydown.onTab(e,i);if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){var p=this.selection.getNodes();if(p)for(var f,g=p.length,m=0;g>m;m++){var v=t(p[m]).children("img");if(0!==v.length){var y=this;t.each(v,function(e,i){var n=t(i);"none"==n.css("float")&&(y.core.setCallback("imageDelete",i.src,n),f=i)})}else"IMG"==p[m].tagName&&f!=p[m]&&(this.core.setCallback("imageDelete",p[m].src,t(p[m])),f=p[m])}}if(i===this.keyCode.BACKSPACE){var b=this.selection.getBlock(),_="0px"!==t(b).css("margin-left");if(b&&_&&this.range.collapsed&&this.utils.isStartOfElement())return this.indent.decrease(),void e.preventDefault();if(this.utils.browser("mozilla")){var x=this.selection.getPrev(),w=t(x).prev()[0];x&&"HR"===x.tagName&&t(x).remove(),w&&"HR"===w.tagName&&t(w).remove()}this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(e)}this.code.sync()}},checkEvents:function(t,e){t||"click"!=this.core.getEvent()&&"arrow"!=this.core.getEvent()||(this.core.addEvent(!1),this.keydown.checkKeyEvents(e)&&this.buffer.set())},checkKeyEvents:function(e){var i=this.keyCode,n=[i.BACKSPACE,i.DELETE,i.ENTER,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return-1==t.inArray(e,n)?!0:!1},addArrowsEvent:function(t){return t?"click"==this.core.getEvent()||"arrow"==this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow"):void 0},setupBuffer:function(t,e){return this.keydown.ctrl&&90===e&&!t.shiftKey&&!t.altKey&&this.opts.buffer.length?(t.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===e&&t.shiftKey&&!t.altKey&&0!==this.opts.rebuffer.length?(t.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||(e==this.keyCode.BACKSPACE||e==this.keyCode.DELETE||e==this.keyCode.ENTER&&!t.ctrlKey&&!t.shiftKey)&&this.buffer.set())},setupSelectAll:function(t,e){this.keydown.ctrl&&65===e?this.utils.enableSelectAll():e==this.keyCode.LEFT_WIN||this.keydown.ctrl||this.utils.disableSelectAll()},onArrowDown:function(){for(var t=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],e=0;e<t.length;e++)if(t[e])return this.keydown.insertAfterLastElement(t[e]),!1},onShiftEnter:function(t){return this.buffer.set(),this.utils.isEndOfElement()?this.keydown.insertDblBreakLine(t):this.keydown.insertBreakLine(t)},onTab:function(t,e){if(!this.opts.tabKey)return!0;if(this.utils.isEmpty(this.code.get())&&this.opts.tabAsSpaces===!1)return!0;t.preventDefault();var i;return this.keydown.pre&&!t.shiftKey?(i=this.opts.preSpaces?document.createTextNode(Array(this.opts.preSpaces+1).join("\xa0")):document.createTextNode("	"),this.insert.node(i),this.code.sync()):this.opts.tabAsSpaces!==!1?(i=document.createTextNode(Array(this.opts.tabAsSpaces+1).join("\xa0")),this.insert.node(i),this.code.sync()):t.metaKey&&219===e?this.indent.decrease():t.metaKey&&221===e?this.indent.increase():t.shiftKey?this.indent.decrease():this.indent.increase(),!1},replaceDivToBreakLine:function(){var e=this.selection.getBlock(),i=e.innerHTML.replace(/<br\s?\/?>/gi,"");if(("DIV"===e.tagName||"P"===e.tagName)&&""===i&&!t(e).hasClass("redactor-editor")){var n=document.createElement("br");return t(e).replaceWith(n),this.caret.setBefore(n),this.code.sync(),!1}},replaceDivToParagraph:function(){var e=this.selection.getBlock(),i=e.innerHTML.replace(/<br\s?\/?>/gi,"");if("DIV"===e.tagName&&this.utils.isEmpty(i)&&!t(e).hasClass("redactor-editor")){var n=document.createElement("p");return n.innerHTML=this.opts.invisibleSpace,t(e).replaceWith(n),this.caret.setStart(n),this.code.sync(),!1}this.opts.cleanStyleOnEnter&&"P"==e.tagName&&t(e).removeAttr("class").removeAttr("style")},insertParagraph:function(t){t.preventDefault(),this.selection.get();var e=document.createElement("p");return e.innerHTML=this.opts.invisibleSpace,this.range.deleteContents(),this.range.insertNode(e),this.caret.setStart(e),this.code.sync(),!1},exitFromBlockquote:function(e){if(this.utils.isEndOfElement()){var i=t.trim(t(this.keydown.block).html());if(-1!=i.search(/(<br\s?\/?>){2}$/i)){if(e.preventDefault(),this.opts.linebreaks){var n=document.createElement("br");t(this.keydown.blockquote).after(n),this.caret.setBefore(n),t(this.keydown.block).html(i.replace(/<br\s?\/?>$/i,""))}else{var s=t(this.opts.emptyHtml);t(this.keydown.blockquote).after(s),this.caret.setStart(s)}return!0}}},insertAfterLastElement:function(e){if(this.utils.isEndOfElement())if(this.buffer.set(),this.opts.linebreaks){var i=t("<div>").append(t.trim(this.$editor.html())).contents(),n=i.last()[0];if("SPAN"==n.tagName&&""===n.innerHTML&&(n=i.prev()[0]),this.utils.getOuterHtml(n)!=this.utils.getOuterHtml(e))return;var s=document.createElement("br");t(e).after(s),this.caret.setAfter(s)}else{if(this.$editor.contents().last()[0]!==e)return;var r=t(this.opts.emptyHtml);t(e).after(r),this.caret.setStart(r)}},insertNewLine:function(t){t.preventDefault();var e=document.createTextNode("\n");return this.selection.get(),this.range.deleteContents(),this.range.insertNode(e),this.caret.setAfter(e),this.code.sync(),!1},insertBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t)},insertDblBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t,!0)},insertBreakLineProcessing:function(e,i){e.stopPropagation(),this.selection.get();var n=document.createElement("br");this.utils.browser("msie")?(this.range.collapse(!1),this.range.setEnd(this.range.endContainer,this.range.endOffset)):this.range.deleteContents(),this.range.insertNode(n);var s=t(n).parent("a");if(s.length>0&&(s.find(n).remove(),s.after(n)),i===!0){var r=t(n).next();if(0!==r.length&&"BR"===r[0].tagName&&this.utils.isEndOfEditor())return this.caret.setAfter(n),this.code.sync(),!1;var o=document.createElement("br");this.range.insertNode(o),this.caret.setAfter(o)}else if(this.utils.browser("msie")){var a=document.createElement("span");a.innerHTML="&#x200b;",t(n).after(a),this.range.setStartAfter(a),this.range.setEndAfter(a),t(a).remove()}else{var l=document.createRange();l.setStartAfter(n),l.collapse(!0);var c=window.getSelection();c.removeAllRanges(),c.addRange(l)}return this.code.sync(),!1},removeInvisibleSpace:function(){var e=t(this.keydown.current);0===e.text().search(/^\u200B$/g)&&e.remove()},removeEmptyListInTable:function(e){var i=t(this.keydown.current),n=t(this.keydown.parent),s=i.closest("td",this.$editor[0]);if(0!==s.length&&i.closest("li",this.$editor[0])&&1===n.children("li").length){if(!this.utils.isEmpty(i.text()))return;e.preventDefault(),i.remove(),n.remove(),this.caret.setStart(s)}}}},keyup:function(){return{init:function(e){if(!this.rtePaste){var i=e.which;this.keyup.current=this.selection.getCurrent(),this.keyup.parent=this.selection.getParent();var n=this.utils.isRedactorParent(t(this.keyup.parent).parent()),s=this.core.setCallback("keyup",e);if(s===!1)return e.preventDefault(),!1;if(!this.opts.linebreaks&&3===this.keyup.current.nodeType&&this.keyup.current.length<=1&&(this.keyup.parent===!1||"BODY"==this.keyup.parent.tagName)&&this.keyup.replaceToParagraph(),!this.opts.linebreaks&&this.utils.isRedactorParent(this.keyup.current)&&"DIV"===this.keyup.current.tagName&&this.keyup.replaceToParagraph(!1),this.opts.linebreaks||!t(this.keyup.parent).hasClass("redactor-invisible-space")||n!==!1&&"BODY"!=n[0].tagName||(t(this.keyup.parent).contents().unwrap(),this.keyup.replaceToParagraph()),this.linkify.isEnabled()&&this.linkify.isKey(i)&&this.linkify.format(),i===this.keyCode.DELETE||i===this.keyCode.BACKSPACE){if(this.utils.browser("mozilla")){var r=t(this.keydown.current).closest("td",this.$editor[0]);if(0!==r.size()&&""!==r.text())return e.preventDefault(),!1}return this.clean.clearUnverified(),this.observe.image?(e.preventDefault(),this.image.hideResize(),this.buffer.set(),this.image.remove(this.observe.image),this.observe.image=!1,!1):(this.$editor.find("p").each(t.proxy(function(e,i){this.utils.removeEmpty(e,t(i).html())},this)),this.opts.linebreaks&&this.keyup.current&&"DIV"==this.keyup.current.tagName&&this.utils.isEmpty(this.keyup.current.innerHTML)&&(t(this.keyup.current).after(this.selection.getMarkerAsHtml()),this.selection.restore(),t(this.keyup.current).remove()),this.keyup.removeEmptyLists(),this.keyup.formatEmpty(e))}}},replaceToParagraph:function(e){var i,n=t(this.keyup.current);i=e===!1?t("<p>").append(n.html()):t("<p>").append(n.clone()),n.replaceWith(i);var s=t(i).next();"undefined"!=typeof s[0]&&"BR"==s[0].tagName&&s.remove(),this.caret.setEnd(i)},removeEmptyLists:function(){var e=function(){var e=t.trim(this.innerHTML).replace(/\/t\/n/g,"");""===e&&t(this).remove()};this.$editor.find("li").each(e),this.$editor.find("ul, ol").each(e)},formatEmpty:function(e){var i=t.trim(this.$editor.html());if(this.utils.isEmpty(i))return e.preventDefault(),this.opts.linebreaks?(this.$editor.html(this.selection.getMarkerAsHtml()),this.selection.restore()):(this.$editor.html(this.opts.emptyHtml),this.focus.setStart()),this.code.sync(),!1}}},lang:function(){return{load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(t){return"undefined"!=typeof this.opts.curLang[t]?this.opts.curLang[t]:""}}},line:function(){return{insert:function(){this.buffer.set();var t=this.selection.getBlocks();return t[0]!==!1&&this.line.isExceptLastOrFirst(t)?void(this.utils.browser("msie")||this.$editor.focus()):void(this.utils.browser("msie")?this.line.insertInIe():this.line.insertInOthersBrowsers())},isExceptLastOrFirst:function(e){var i=["li","td","th","blockquote","figcaption","pre","dl","dt","dd"],n=e[0].tagName.toLowerCase(),s=this.selection.getLastBlock();s="undefined"==typeof s?n:s.tagName.toLowerCase();var r=-1!=t.inArray(n,i),o=-1!=t.inArray(s,i);return r&&o||r?!0:void 0},insertInIe:function(){this.utils.saveScroll(),this.buffer.set(),this.insert.node(document.createElement("hr")),this.utils.restoreScroll(),this.code.sync()},insertInOthersBrowsers:function(){this.buffer.set();var t='<p id="redactor-insert-line"><br /></p>';this.opts.linebreaks&&(t='<br id="redactor-insert-line">'),document.execCommand("insertHtml",!1,"<hr>"+t),this.line.setFocus(),this.code.sync()},setFocus:function(){var e=this.$editor.find("#redactor-insert-line"),i=t(e).next()[0],n=i;this.utils.browser("mozilla")&&i&&""===i.innerHTML&&(n=t(i).next()[0],t(i).remove()),n?(e.remove(),this.opts.linebreaks||(this.$editor.focus(),this.line.setStart(n))):(e.removeAttr("id"),this.line.setStart(e[0]))},setStart:function(t){if("undefined"!=typeof t){var e=document.createTextNode("\u200b");this.selection.get(),this.range.setStart(t,0),this.range.insertNode(e),this.range.collapse(!0),this.selection.addRange()}}}},link:function(){return{show:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault(),this.observe.isCurrent("a")?this.modal.load("link",this.lang.get("link_edit"),600):this.modal.load("link",this.lang.get("link_insert"),600),this.modal.createCancelButton();var i=this.observe.isCurrent("a")?this.lang.get("edit"):this.lang.get("insert");this.link.buttonInsert=this.modal.createActionButton(i),this.selection.get(),this.link.getData(),this.link.cleanUrl(),"_blank"==this.link.target&&t("#redactor-link-blank").prop("checked",!0),this.link.$inputUrl=t("#redactor-link-url"),this.link.$inputText=t("#redactor-link-url-text"),this.link.$inputText.val(this.link.text),this.link.$inputUrl.val(this.link.url),this.link.buttonInsert.on("click",t.proxy(this.link.insert,this)),t(".redactor-link-tooltip").remove(),this.selection.save(),this.modal.show(),this.link.$inputUrl.focus()},cleanUrl:function(){var t=self.location.href.replace(/\/$/i,"");if("undefined"!=typeof this.link.url&&(this.link.url=this.link.url.replace(t,""),this.link.url=this.link.url.replace(/^\/#/,"#"),this.link.url=this.link.url.replace("mailto:",""),!this.opts.linkProtocol)){var e=new RegExp("^(http|ftp|https)://"+self.location.host,"i");this.link.url=this.link.url.replace(e,"")}},getData:function(){this.link.$node=!1;var e=t(this.selection.getCurrent()).closest("a",this.$editor[0]);0!==e.length&&"A"===e[0].tagName?(this.link.$node=e,this.link.url=e.attr("href"),this.link.text=e.text(),this.link.target=e.attr("target")):(this.link.text=this.sel.toString(),this.link.url="",this.link.target="")},insert:function(){this.placeholder.remove();var e="",i=this.link.$inputUrl.val(),n=this.link.$inputText.val().replace(/(<([^>]+)>)/gi,"");if(""===t.trim(i))return void this.link.$inputUrl.addClass("redactor-input-error").on("keyup",function(){t(this).removeClass("redactor-input-error"),t(this).off("keyup")});if(-1!=i.search("@")&&/(http|ftp|https):\/\//i.test(i)===!1)i=i.replace("mailto:",""),i="mailto:"+i;else if(0!==i.search("#")){t("#redactor-link-blank").prop("checked")&&(e="_blank");var s="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",r=new RegExp("^(http|ftp|https)://"+s,"i"),o=new RegExp("^"+s,"i"),a=new RegExp(".(html|php)$","i");-1==i.search(r)&&-1==i.search(a)&&0===i.search(o)&&this.opts.linkProtocol&&(i=this.opts.linkProtocol+"://"+i)}this.link.set(n,i,e),this.modal.close()},set:function(e,i,n){e=t.trim(e.replace(/<|>/g,"")),this.selection.restore();var s=this.selection.getBlocks();if(""!==e||""!==i){if(""===e&&""!==i&&(e=i),this.link.$node){this.buffer.set();var r=this.link.$node,o=r.children();if(o.length>0){for(;o.length;)o=o.children();o=o.end()}else o=r;r.attr("href",i),o.text(e),""!==n?r.attr("target",n):r.removeAttr("target"),this.selection.selectElement(r),this.code.sync()}else{if(this.utils.browser("mozilla")&&""===this.link.text){var a=t("<a />").attr("href",i).text(e);""!==n&&a.attr("target",n),a=t(this.insert.node(a)),this.opts.linebreaks&&a.after("&nbsp;"),this.selection.selectElement(a)}else{var a;this.utils.browser("msie")?(a=t('<a href="'+i+'">').text(e),""!==n&&a.attr("target",n),a=t(this.insert.node(a)),this.selection.getText().match(/\s$/)&&a.after(" "),this.selection.selectElement(a)):(document.execCommand("createLink",!1,i),a=t(this.selection.getCurrent()).closest("a",this.$editor[0]),this.utils.browser("mozilla")&&(a=t('a[_moz_dirty=""]')),""!==n&&a.attr("target",n),a.removeAttr("style").removeAttr("_moz_dirty"),this.selection.getText().match(/\s$/)&&a.after(" "),(""!==this.link.text||this.link.text!=e)&&(!this.opts.linebreaks&&s&&s.length<=1?a.text(e):this.opts.linebreaks&&a.text(e),this.selection.selectElement(a)))}this.code.sync(),this.core.setCallback("insertedLink",a)}setTimeout(t.proxy(function(){this.observe.links()},this),5)}},unlink:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault();var i=this.selection.getNodes();if(i){this.buffer.set();for(var n=i.length,s=[],r=0;n>r;r++){"A"===i[r].tagName&&s.push(i[r]);var o=t(i[r]).closest("a",this.$editor[0]);o.replaceWith(o.contents())}this.core.setCallback("deletedLink",s),t(".redactor-link-tooltip").remove(),this.code.sync()}},toggleClass:function(t){this.link.setClass(t,"toggleClass")},addClass:function(t){this.link.setClass(t,"addClass")},removeClass:function(t){this.link.setClass(t,"removeClass")},setClass:function(e,i){var n=this.selection.getInlinesTags(["a"]);n!==!1&&t.each(n,function(){t(this)[i](e)})}}},linkify:function(){return{isKey:function(t){return t==this.keyCode.ENTER||t==this.keyCode.SPACE},isEnabled:function(){return this.opts.convertLinks&&(this.opts.convertUrlLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&!this.utils.isCurrentOrParent("PRE")},format:function(){var e=this.linkify,i=this.opts;this.$editor.find(":not(iframe,img,a,pre)").addBack().contents().filter(function(){return 3===this.nodeType&&""!=t.trim(this.nodeValue)&&!t(this).parent().is("pre")&&(this.nodeValue.match(i.linkify.regexps.youtube)||this.nodeValue.match(i.linkify.regexps.vimeo)||this.nodeValue.match(i.linkify.regexps.image)||this.nodeValue.match(i.linkify.regexps.url));
}).each(function(){var n=t(this).text(),s=n;i.convertVideoLinks&&(s.match(i.linkify.regexps.youtube)||s.match(i.linkify.regexps.vimeo))?s=e.convertVideoLinks(s):i.convertImageLinks&&s.match(i.linkify.regexps.image)?s=e.convertImages(s):i.convertUrlLinks&&(s=e.convertLinks(s)),t(this).before(n.replace(n,s)).remove()});var n=this.$editor.find(".redactor-linkify-object").each(function(){var e=t(this);return e.removeClass("redactor-linkify-object"),""===e.attr("class")&&e.removeAttr("class"),e[0]});setTimeout(t.proxy(function(){this.observe.load(),this.core.setCallback("linkify",n)},this),100),this.code.sync()},convertVideoLinks:function(t){var e='<iframe class="redactor-linkify-object" width="500" height="281" src="',i='" frameborder="0" allowfullscreen></iframe>';return t.match(this.opts.linkify.regexps.youtube)&&(t=t.replace(this.opts.linkify.regexps.youtube,e+"//www.youtube.com/embed/$1"+i)),t.match(this.opts.linkify.regexps.vimeo)&&(t=t.replace(this.opts.linkify.regexps.vimeo,e+"//player.vimeo.com/video/$2"+i)),t},convertImages:function(t){var e=t.match(this.opts.linkify.regexps.image);return e&&(t=t.replace(t,'<img src="'+e+'" class="redactor-linkify-object" />'),this.opts.linebreaks&&(this.utils.isEmpty(this.code.get())||(t="<br>"+t)),t+="<br>"),t},convertLinks:function(e){var i=e.match(this.opts.linkify.regexps.url);if(i){i=t.grep(i,function(e,n){return t.inArray(e,i)===n});for(var n=i.length,s=0;n>s;s++){var r=i[s],o=r,a=this.opts.linkProtocol+"://";null!==r.match(/(https?|ftp):\/\//i)&&(a=""),o.length>this.opts.linkSize&&(o=o.substring(0,this.opts.linkSize)+"..."),-1===o.search("%")&&(o=decodeURIComponent(o));var l="\\b";-1!=t.inArray(r.slice(-1),["/","&","="])&&(l="");var c=new RegExp("("+r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")","g");e=e.replace(c,'<a href="'+a+t.trim(r)+'" class="redactor-linkify-object">'+t.trim(o)+"</a>")}}return e}}},list:function(){return{toggle:function(e){this.placeholder.remove(),this.utils.browser("msie")||this.opts.linebreaks||this.$editor.focus(),this.buffer.set(),this.selection.save();var i=this.selection.getParent(),n=t(i).closest("ol, ul",this.$editor[0]);this.utils.isRedactorParent(n)||0===n.length||(n=!1);var s,r,o=!1;if(n&&n.length){o=!0;var a=n[0].tagName;s="orderedlist"===e&&"UL"===a,r="unorderedlist"===e&&"OL"===a}s?this.utils.replaceToTag(n,"ol"):r?this.utils.replaceToTag(n,"ul"):o?this.list.remove(e,n):this.list.insert(e),this.selection.restore(),this.code.sync()},insert:function(e){var i=this.selection.getCurrent(),n=t(i).closest("td, th",this.$editor[0]);this.utils.browser("msie")&&this.opts.linebreaks?this.list.insertInIe(e):document.execCommand("insert"+e);var s=this.selection.getParent(),r=t(s).closest("ol, ul",this.$editor[0]);if(0!==n.length){var o=n.clone();n.after(o).remove("")}if(this.utils.isEmpty(r.find("li").text())){var a=r.children("li");a.find("br").remove(),a.append(this.selection.getMarkerAsHtml()),this.opts.linebreaks&&this.utils.browser("mozilla")&&2==a.size()&&this.utils.isEmpty(a.eq(1).text())&&a.eq(1).remove()}if(r.length){var l=r.parent();this.utils.isRedactorParent(l)&&"LI"!=l[0].tagName&&this.utils.isBlock(l[0])&&l.replaceWith(l.contents())}this.utils.browser("msie")||this.$editor.focus(),this.clean.clearUnverified()},insertInIe:function(e){var i=this.selection.wrap("div"),n=t(i).html(),s=t("orderedlist"==e?"<ol>":"<ul>"),r=t("<li>");if(""===t.trim(n))r.append(this.selection.getMarkerAsHtml()),s.append(r),this.$editor.find("#selection-marker-1").replaceWith(s);else{var o=n.split(/<br\s?\/?>/gi);if(o)for(var a=0;a<o.length;a++)""!==t.trim(o[a])&&s.append(t("<li>").html(o[a]));else r.append(n),s.append(r);t(i).replaceWith(s)}},remove:function(e,i){t.inArray("ul",this.selection.getBlocks())&&(e="unorderedlist"),document.execCommand("insert"+e);var n=t(this.selection.getCurrent());this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==n.closest("li, th, td",this.$editor[0]).length||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote").each(t.proxy(this.utils.removeEmpty,this)));var s=t(this.selection.getCurrent()).closest("table",this.$editor[0]),r=s.prev();this.opts.linebreaks||0===s.length||0===r.length||"BR"!=r[0].tagName||r.remove(),this.clean.clearUnverified()}}},modal:function(){return{callbacks:{},loadTemplates:function(){this.opts.modal={imageEdit:String()+'<section id="redactor-modal-image-edit"><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /><label class="redactor-image-link-option">'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" class="redactor-image-link-option" aria-label="'+this.lang.get("link")+'" /><label class="redactor-image-link-option"><input type="checkbox" id="redactor-image-link-blank" aria-label="'+this.lang.get("link_new_tab")+'"> '+this.lang.get("link_new_tab")+'</label><label class="redactor-image-position-option">'+this.lang.get("image_position")+'</label><select class="redactor-image-position-option" id="redactor-image-align" aria-label="'+this.lang.get("image_position")+'"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+"</option></select></section>",image:String()+'<section id="redactor-modal-image-insert"><div id="redactor-modal-image-droparea"></div></section>',file:String()+'<section id="redactor-modal-file-insert"><div id="redactor-modal-file-upload-box"><label>'+this.lang.get("filename")+'</label><input type="text" id="redactor-filename" aria-label="'+this.lang.get("filename")+'" /><br><br><div id="redactor-modal-file-upload"></div></div></section>',link:String()+'<section id="redactor-modal-link-insert"><label>URL</label><input type="url" id="redactor-link-url" aria-label="URL" /><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" aria-label="'+this.lang.get("text")+'" /><label><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link_new_tab")+"</label></section>"},t.extend(this.opts,this.opts.modal)},addCallback:function(t,e){this.modal.callbacks[t]=e},createTabber:function(e){this.modal.$tabber=t("<div>").attr("id","redactor-modal-tabber"),e.prepend(this.modal.$tabber)},addTab:function(e,i,n){var s=t('<a href="#" rel="tab'+e+'">').text(i);n&&s.addClass("active");var r=this;s.on("click",function(e){e.preventDefault(),t(".redactor-tab").hide(),t(".redactor-"+t(this).attr("rel")).show(),r.modal.$tabber.find("a").removeClass("active"),t(this).addClass("active")}),this.modal.$tabber.append(s)},addTemplate:function(t,e){this.opts.modal[t]=e},getTemplate:function(t){return this.opts.modal[t]},getModal:function(){return this.$modalBody.find("section")},load:function(t,e,i){this.modal.templateName=t,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(e),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[t]&&this.modal.callbacks[t].call(this)},show:function(){this.utils.disableBodyScroll(),this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop(),this.opts.highContrast&&this.$modalBox.addClass("redactor-modal-contrast"),this.$modalOverlay.show(),this.$modalBox.show(),this.$modal.attr("tabindex","-1"),this.$modal.focus(),this.modal.setButtonsWidth(),this.utils.saveScroll(),this.utils.isMobile()||(setTimeout(t.proxy(this.modal.showOnDesktop,this),0),t(window).on("resize.redactor-modal",t.proxy(this.modal.resize,this))),this.core.setCallback("modalOpened",this.modal.templateName,this.$modal),t(document).off("focusin.modal"),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor-modal",t.proxy(this.modal.setEnter,this))},showOnDesktop:function(){var e=this.$modal.outerHeight(),i=t(window).height(),n=t(window).width();return this.modal.width>n?void this.$modal.css({width:"96%",marginTop:i/2-e/2+"px"}):void(e>i?this.$modal.css({width:this.modal.width+"px",marginTop:"20px"}):this.$modal.css({width:this.modal.width+"px",marginTop:i/2-e/2+"px"}))},showOnMobile:function(){this.$modal.css({width:"96%",marginTop:"2%"})},resize:function(){this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop()},setTitle:function(t){this.$modalHeader.html(t)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName))},setDraggable:function(){"undefined"!=typeof t.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(t){13==t.which&&(t.preventDefault(),this.$modal.find("button.redactor-modal-action-btn").click())},createCancelButton:function(){var e=t("<button>").addClass("redactor-modal-btn redactor-modal-close-btn").html(this.lang.get("cancel"));e.on("click",t.proxy(this.modal.close,this)),this.$modalFooter.append(e)},createDeleteButton:function(t){return this.modal.createButton(t,"delete")},createActionButton:function(t){return this.modal.createButton(t,"action")},createButton:function(e,i){var n=t("<button>").addClass("redactor-modal-btn").addClass("redactor-modal-"+i+"-btn").html(e);return this.$modalFooter.append(n),n},setButtonsWidth:function(){var t=this.$modalFooter.find("button"),e=t.length;0!==e&&t.css("width",100/e+"%")},build:function(){this.modal.buildOverlay(),this.$modalBox=t('<div id="redactor-modal-box"/>').hide(),this.$modal=t('<div id="redactor-modal" role="dialog" aria-labelledby="redactor-modal-header" />'),this.$modalHeader=t('<header id="redactor-modal-header"/>'),this.$modalClose=t('<button type="button" id="redactor-modal-close" tabindex="1" aria-label="Close" />').html("&times;"),this.$modalBody=t('<div id="redactor-modal-body" />'),this.$modalFooter=t("<footer />"),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalClose),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalFooter),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=t('<div id="redactor-modal-overlay">').hide(),t("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("click.redactor-modal",t.proxy(this.modal.close,this)),t(document).on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$editor.on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",t.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("click.redactor-modal"),t(document).off("keyup.redactor-modal"),this.$editor.off("keyup.redactor-modal"),this.$modalBox.off("click.redactor-modal"),t(window).off("resize.redactor-modal")},closeHandler:function(t){t.which==this.keyCode.ESC&&this.modal.close(!1)},close:function(e){if(e){if(!t(e.target).hasClass("redactor-modal-close-btn")&&e.target!=this.$modalClose[0]&&e.target!=this.$modalBox[0])return;e.preventDefault()}this.$modalBox&&(this.modal.disableEvents(),this.utils.enableBodyScroll(),this.$modalOverlay.remove(),this.$modalBox.fadeOut("fast",t.proxy(function(){this.$modalBox.remove(),setTimeout(t.proxy(this.utils.restoreScroll,this),0),void 0!==e&&this.selection.restore(),t(document.body).css("overflow",this.modal.bodyOveflow),this.core.setCallback("modalClosed",this.modal.templateName)},this)))}}},observe:function(){return{load:function(){if("undefined"==typeof this.opts.destroyed){if(this.utils.browser("msie")){var e=this;this.$editor.find("pre, code").on("mouseover",function(){e.$editor.attr("contenteditable",!1),t(this).attr("contenteditable",!0)}).on("mouseout",function(){e.$editor.attr("contenteditable",!0),t(this).removeAttr("contenteditable")})}this.observe.images(),this.observe.links()}},toolbar:function(t,e){this.observe.buttons(t,e),this.observe.dropdowns()},isCurrent:function(e,i){if("undefined"==typeof i)var i=t(this.selection.getCurrent());return i.is(e)||i.parents(e).length>0},dropdowns:function(){var e=t(this.selection.getCurrent());t.each(this.opts.observe.dropdowns,t.proxy(function(t,i){var n=i.observe,s=n.element,r=i.item,o="undefined"!=typeof n["in"]?n["in"]:!1,a="undefined"!=typeof n.out?n.out:!1;e.closest(s).size()>0?this.observe.setDropdownProperties(r,o,a):this.observe.setDropdownProperties(r,a,o)},this))},setDropdownProperties:function(t,e,i){i&&"undefined"!=typeof i.attr&&this.observe.setDropdownAttr(t,i.attr,!0),"undefined"!=typeof e.attr&&this.observe.setDropdownAttr(t,e.attr),"undefined"!=typeof e.title&&t.text(e.title)},setDropdownAttr:function(e,i,n){t.each(i,function(t,i){"class"==t?n?e.removeClass(i):e.addClass(i):n?e.removeAttr(t):e.attr(t,i)})},addDropdown:function(t,e,i){"undefined"!=typeof i.observe&&(i.item=t,this.opts.observe.dropdowns.push(i))},buttons:function(e,i){var n=this.selection.getCurrent(),s=this.selection.getParent();if(e!==!1?this.button.setInactiveAll():this.button.setInactiveAll(i),e===!1&&"html"!==i)return void(-1!=t.inArray(i,this.opts.activeButtons)&&this.button.toggleActive(i));t.each(this.opts.activeButtonsStates,t.proxy(function(e,i){var r=t(s).closest(e,this.$editor[0]),o=t(n).closest(e,this.$editor[0]);(0===r.length||this.utils.isRedactorParent(r))&&this.utils.isRedactorParent(o)&&(0!==r.length||0!==o.closest(e,this.$editor[0]).length)&&this.button.setActive(i)},this));var r=t(s).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(this.utils.isRedactorParent(s)&&r.length){var o=""===r.css("text-align")?"left":r.css("text-align");this.button.setActive("align"+o)}},addButton:function(t,e){this.opts.activeButtons.push(e),this.opts.activeButtonsStates[t]=e},images:function(){this.$editor.find("img").each(t.proxy(function(e,i){var n=t(i);n.closest("a",this.$editor[0]).on("click",function(t){t.preventDefault()}),this.utils.browser("msie")&&n.attr("unselectable","on"),this.image.setEditable(n)},this)),t(document).on("click.redactor-image-delete."+this.uuid,t.proxy(function(t){this.observe.image=!1,"IMG"==t.target.tagName&&this.utils.isRedactorParent(t.target)&&(this.observe.image=this.observe.image&&this.observe.image==t.target?!1:t.target)},this))},links:function(){this.opts.linkTooltip&&(this.$editor.find("a").on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.showTooltip,this)),this.$editor.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)),t(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)))},getTooltipPosition:function(t){return t.offset()},showTooltip:function(e){var i=t(e.target);if("IMG"!=i[0].tagName&&("A"!==i[0].tagName&&(i=i.closest("a",this.$editor[0])),"A"===i[0].tagName)){var n=i,s=this.observe.getTooltipPosition(n),r=t('<span class="redactor-link-tooltip"></span>'),o=n.attr("href");void 0===o&&(o=""),o.length>24&&(o=o.substring(0,24)+"...");var a=t('<a href="'+n.attr("href")+'" target="_blank" />').html(o).addClass("redactor-link-tooltip-action"),l=t('<a href="#" />').html(this.lang.get("edit")).on("click",t.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),c=t('<a href="#" />').html(this.lang.get("unlink")).on("click",t.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");r.append(a).append(" | ").append(l).append(" | ").append(c),r.css({top:s.top+parseInt(n.css("line-height"),10)+"px",left:s.left+"px"}),t(".redactor-link-tooltip").remove(),t("body").append(r)}},closeTooltip:function(e){e=e.originalEvent||e;var i=e.target,n=t(i).closest("a",this.$editor[0]);(0===n.length||"A"!==n[0].tagName||"A"===i.tagName)&&("A"===i.tagName&&this.utils.isRedactorParent(i)||t(i).hasClass("redactor-link-tooltip-action")||t(".redactor-link-tooltip").remove())}}},paragraphize:function(){return{load:function(e){return this.opts.linebreaks?e:""===e||"<p></p>"===e?this.opts.emptyHtml:(e+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,e=e.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),e=this.paragraphize.getSafes(e),e=this.paragraphize.getSafesComments(e),e=this.paragraphize.replaceBreaksToNewLines(e),e=this.paragraphize.replaceBreaksToParagraphs(e),e=this.paragraphize.clear(e),e=this.paragraphize.restoreSafes(e),e=e.replace(new RegExp("<br\\s?/?>\n?<("+this.opts.paragraphizeBlocks.join("|")+")(.*?[^>])>","gi"),"<p><br /></p>\n<$1$2>"),t.trim(e))},getSafes:function(e){var i=t("<div />").append(e);return i.find("blockquote p").replaceWith(function(){return t(this).append("<br />").contents()}),e=i.html(),i.find(this.opts.paragraphizeBlocks.join(", ")).each(t.proxy(function(t,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,e=e.replace(i.outerHTML,"\n{replace"+this.paragraphize.z+"}")},this)),e},getSafesComments:function(e){var i=e.match(/<!--([\w\W]*?)-->/gi);return i?(t.each(i,t.proxy(function(t,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i,e=e.replace(i,"\n{replace"+this.paragraphize.z+"}")},this)),e):e},restoreSafes:function(e){return t.each(this.paragraphize.safes,function(t,i){i="undefined"!=typeof i?i.replace(/\$/g,"&#36;"):i,e=e.replace("{replace"+t+"}",i)}),e},replaceBreaksToParagraphs:function(t){var e=t.split(new RegExp("\n","g"),-1);if(t="",e)for(var i=e.length,n=0;i>n;n++){if(!e.hasOwnProperty(n))return;-1==e[n].search("{replace")?(e[n]=e[n].replace(/<p>\n\t?<\/p>/gi,""),e[n]=e[n].replace(/<p><\/p>/gi,""),""!==e[n]&&(t+="<p>"+e[n].replace(/^\n+|\n+$/g,"")+"</p>")):t+=e[n]}return t},replaceBreaksToNewLines:function(t){return t=t.replace(/<br \/>\s*<br \/>/gi,"\n\n"),t=t.replace(/<br\s?\/?>\n?<br\s?\/?>/gi,"\n<br /><br />"),t=t.replace(new RegExp("\r\n","g"),"\n"),t=t.replace(new RegExp("\r","g"),"\n"),t=t.replace(new RegExp("/\n\n+/"),"g","\n\n")},clear:function(t){return t=t.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),t=t.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),t=t.replace(new RegExp("<p><p ","gi"),"<p "),t=t.replace(new RegExp("<p><p>","gi"),"<p>"),t=t.replace(new RegExp("</p></p>","gi"),"</p>"),t=t.replace(new RegExp("<p>\\s?</p>","gi"),""),t=t.replace(new RegExp("\n</p>","gi"),"</p>"),t=t.replace(new RegExp("<p>	?	?\n?<p>","gi"),"<p>"),t=t.replace(new RegExp("<p>	*</p>","gi"),"")}}},paste:function(){return{init:function(e){return this.opts.cleanOnPaste?(this.rtePaste=!0,this.buffer.set(),this.selection.save(),this.utils.saveScroll(),this.paste.createPasteBox(),t(window).on("scroll.redactor-freeze",t.proxy(function(){t(window).scrollTop(this.saveBodyScroll)},this)),void setTimeout(t.proxy(function(){var e=this.$pasteBox.html();this.$pasteBox.remove(),this.selection.restore(),this.utils.restoreScroll(),this.paste.insert(e),t(window).off("scroll.redactor-freeze"),this.linkify.isEnabled()&&this.linkify.format()},this),1)):void setTimeout(t.proxy(this.code.sync,this),1)},createPasteBox:function(){if(this.$pasteBox=t("<div>").html("").attr("contenteditable","true").css({position:"fixed",width:0,top:0,left:"-9999px"}),this.utils.browser("msie"))this.$box.append(this.$pasteBox);else{var e=t(".modal-body:visible");e.length>0?e.append(this.$pasteBox):t("body").append(this.$pasteBox)}this.$pasteBox.get(0).focus()},insert:function(e){e=this.core.setCallback("pasteBefore",e),e=this.utils.isSelectAll()?this.clean.onPaste(e,!1):this.clean.onPaste(e),e=this.core.setCallback("paste",e),this.utils.isSelectAll()?this.insert.set(e,!1):this.insert.html(e,!1),this.utils.disableSelectAll(),this.rtePaste=!1,setTimeout(t.proxy(this.clean.clearUnverified,this),10),setTimeout(t.proxy(function(){var e=this.$editor.find("span");t.each(e,function(e,i){var n=i.innerHTML.replace(/\u200B/,"");""===n&&0===i.attributes.length&&t(i).remove()})},this),10)}}},placeholder:function(){return{enable:function(){this.placeholder.is()&&(this.$editor.attr("placeholder",this.$element.attr("placeholder")),this.placeholder.toggle(),this.$editor.on("keydown.redactor-placeholder",t.proxy(this.placeholder.toggle,this)))},toggle:function(){setTimeout(t.proxy(function(){var t=this.utils.isEmpty(this.$editor.html(),!1)?"addClass":"removeClass";this.$editor[t]("redactor-placeholder")},this),5)},remove:function(){this.$editor.removeClass("redactor-placeholder")},is:function(){return this.opts.placeholder?this.$element.attr("placeholder",this.opts.placeholder):!("undefined"==typeof this.$element.attr("placeholder")||""===this.$element.attr("placeholder"))}}},progress:function(){return{show:function(){t(document.body).append(t('<div id="redactor-progress"><span></span></div>')),t("#redactor-progress").fadeIn()},hide:function(){t("#redactor-progress").fadeOut(1500,function(){t(this).remove()})}}},selection:function(){return{get:function(){this.sel=document.getSelection(),document.getSelection&&this.sel.getRangeAt&&this.sel.rangeCount?this.range=this.sel.getRangeAt(0):this.range=document.createRange()},addRange:function(){try{this.sel.removeAllRanges()}catch(t){}this.sel.addRange(this.range)},getCurrent:function(){var t=!1;return this.selection.get(),this.sel&&this.sel.rangeCount>0&&(t=this.sel.getRangeAt(0).startContainer),this.utils.isRedactorParent(t)},getParent:function(e){return e=e||this.selection.getCurrent(),e?this.utils.isRedactorParent(t(e).parent()[0]):!1},getPrev:function(){return window.getSelection().anchorNode.previousSibling},getNext:function(){return window.getSelection().anchorNode.nextSibling},getBlock:function(e){for(e=e||this.selection.getCurrent();e;){if(this.utils.isBlockTag(e.tagName))return t(e).hasClass("redactor-editor")?!1:e;e=e.parentNode}return!1},getInlines:function(e,i){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var n=[];e="undefined"==typeof e||e===!1?this.selection.getNodes():e;var s=this.opts.inlineTags;if(s.push("span"),"undefined"!=typeof i)for(var r=0;r<i.length;r++)s.push(i[r]);return t.each(e,t.proxy(function(e,i){-1!=t.inArray(i.tagName.toLowerCase(),s)&&n.push(i)},this)),0===n.length?!1:n},getInlinesTags:function(e){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var i=[],n=this.selection.getNodes();return t.each(n,t.proxy(function(n,s){-1!=t.inArray(s.tagName.toLowerCase(),e)&&i.push(s)},this)),0===i.length?!1:i},getBlocks:function(e){if(this.selection.get(),this.range&&this.range.collapsed)return[this.selection.getBlock()];var i=[];return e="undefined"==typeof e?this.selection.getNodes():e,t.each(e,t.proxy(function(t,e){this.utils.isBlock(e)&&i.push(e)},this)),0===i.length?[this.selection.getBlock()]:i},getLastBlock:function(){return this.selection.lastBlock},getNodes:function(){this.selection.get();var e=this.selection.getNodesMarker(1),i=this.selection.getNodesMarker(2);if(this.range.collapsed===!1){if(window.getSelection){var n=window.getSelection();if(n.rangeCount>0){var s=n.getRangeAt(0),r=s.startContainer,o=s.startOffset,a=s.cloneRange();a.collapse(!1),a.insertNode(i),a.setStart(r,o),a.collapse(!0),a.insertNode(e),s.setStartAfter(e),s.setEndBefore(i),n.removeAllRanges(),n.addRange(s)}}}else this.selection.setNodesMarker(this.range,e,!0),i=e;var l=[],c=0,h=this;this.$editor.find("*").each(function(){if(this==e){var n=t(this).parent();0!==n.length&&"BODY"!=n[0].tagName&&h.utils.isRedactorParent(n[0])&&l.push(n[0]),l.push(this),c=1}else c>0&&(l.push(this),c+=1);return this==i?!1:void 0});for(var u=[],d=l.length,p=0;d>p;p++)"nodes-marker-1"!=l[p].id&&"nodes-marker-2"!=l[p].id&&u.push(l[p]);return this.selection.removeNodesMarkers(),u},getNodesMarker:function(e){return t('<span id="nodes-marker-'+e+'" class="redactor-nodes-marker" data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},setNodesMarker:function(t,e,i){var t=t.cloneRange();try{t.collapse(i),t.insertNode(e)}catch(n){}},removeNodesMarkers:function(){t(document).find("span.redactor-nodes-marker").remove(),this.$editor.find("span.redactor-nodes-marker").remove()},fromPoint:function(t,e){this.caret.setOffset(t,e)},wrap:function(t){if(this.selection.get(),this.range.collapsed)return!1;var e=document.createElement(t);return e.appendChild(this.range.extractContents()),this.range.insertNode(e),e},selectElement:function(t){if(this.utils.browser("mozilla")){t=t[0]||t;var e=document.createRange();e.selectNodeContents(t)}else this.caret.set(t,0,t,1)},selectAll:function(){this.selection.get(),this.range.selectNodeContents(this.$editor[0]),this.selection.addRange()},remove:function(){this.selection.get(),this.sel.removeAllRanges()},save:function(){this.selection.createMarkers()},createMarkers:function(){this.selection.get();var t=this.selection.getMarker(1);if(this.selection.setMarker(this.range,t,!0),this.range.collapsed===!1){var e=this.selection.getMarker(2);this.selection.setMarker(this.range,e,!1)}this.savedSel=this.$editor.html()},getMarker:function(e){return"undefined"==typeof e&&(e=1),t('<span id="selection-marker-'+e+'" class="redactor-selection-marker"  data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},getMarkerAsHtml:function(t){return this.utils.getOuterHtml(this.selection.getMarker(t))},setMarker:function(t,e,i){t=t.cloneRange();try{t.collapse(i),t.insertNode(e)}catch(n){this.focus.setStart()}},restore:function(){var t=this.$editor.find("span#selection-marker-1"),e=this.$editor.find("span#selection-marker-2");this.utils.browser("mozilla")&&this.$editor.focus(),0!==t.length&&0!==e.length?this.caret.set(t,0,e,0):0!==t.length?this.caret.set(t,0,t,0):this.$editor.focus(),this.selection.removeMarkers(),this.savedSel=!1},removeMarkers:function(){this.$editor.find("span.redactor-selection-marker").each(function(e,i){var n=t(i).text().replace(/\u200B/g,"");""===n?t(i).remove():t(i).replaceWith(function(){return t(this).contents()})})},getText:function(){return this.selection.get(),this.sel.toString()},getHtml:function(){var t="";if(this.selection.get(),this.sel.rangeCount){for(var e=document.createElement("div"),i=this.sel.rangeCount,n=0;i>n;++n)e.appendChild(this.sel.getRangeAt(n).cloneContents());t=e.innerHTML}return this.clean.onSync(t)},replaceSelection:function(t){this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n=document.createDocumentFragment();i=e.firstChild;)n.appendChild(i);this.range.insertNode(n)},replaceWithHtml:function(t){t=this.selection.getMarkerAsHtml(1)+t+this.selection.getMarkerAsHtml(2),this.selection.get(),window.getSelection&&window.getSelection().getRangeAt?this.selection.replaceSelection(t):document.selection&&document.selection.createRange&&this.range.pasteHTML(t),this.selection.restore(),this.code.sync()}}},shortcuts:function(){return{init:function(e,i){return this.opts.shortcuts?void t.each(this.opts.shortcuts,t.proxy(function(i,n){for(var s=i.split(","),r=s.length,o=0;r>o;o++)"string"==typeof s[o]&&this.shortcuts.handler(e,t.trim(s[o]),t.proxy(function(){var t;"-1"!=n.func.search(/\./)?(t=n.func.split("."),"undefined"!=typeof this[t[0]]&&this[t[0]][t[1]].apply(this,n.params)):this[n.func].apply(this,n.params)},this))},this)):(!e.ctrlKey&&!e.metaKey||66!==i&&73!==i||e.preventDefault(),!1)},handler:function(e,i,n){var s={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"};i=i.toLowerCase().split(" ");var o=s[e.keyCode],a=String.fromCharCode(e.which).toLowerCase(),l="",c={};t.each(["alt","ctrl","meta","shift"],function(t,i){e[i+"Key"]&&o!==i&&(l+=i+"+")}),o&&(c[l+o]=!0),a&&(c[l+a]=!0,c[l+r[a]]=!0,"shift+"===l&&(c[r[a]]=!0));for(var h=0,u=i.length;u>h;h++)if(c[i[h]])return e.preventDefault(),n.apply(this,arguments)}}},tabifier:function(){return{get:function(t){if(!this.opts.tabifier)return t;var e=["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],i=["li","dt","dt","h[1-6]","option","script"],n=["p","blockquote","div","dl","fieldset","form","frameset","map","ol","pre","select","td","th","tr","ul"];this.tabifier.lineBefore=new RegExp("^<(/?"+e.join("|/?")+"|"+i.join("|")+")[ >]"),this.tabifier.lineAfter=new RegExp("^<(br|/?"+e.join("|/?")+"|/"+i.join("|/")+")[ >]"),this.tabifier.newLevel=new RegExp("^</?("+n.join("|")+")[ >]");var s=0,r=t.length,o=0,a=null,l=null,c="",h="",u="";for(this.tabifier.cleanlevel=0;r>s;s++){if(o=s,-1==t.substr(s).indexOf("<"))return h+=t.substr(s),this.tabifier.finish(h);for(;r>o&&"<"!=t.charAt(o);)o++;for(s!=o&&(u=t.substr(s,o-s),u.match(/^\s{2,}$/g)||("\n"==h.charAt(h.length-1)?h+=this.tabifier.getTabs():"\n"==u.charAt(0)&&(h+="\n"+this.tabifier.getTabs(),u=u.replace(/^\s+/,"")),h+=u),u.match(/\n/)&&(h+="\n"+this.tabifier.getTabs())),a=o;r>o&&">"!=t.charAt(o);)o++;c=t.substr(a,o-a),s=o;var d;if("!--"==c.substr(1,3)){if(!c.match(/--$/)){for(;"-->"!=t.substr(o,3);)o++;o+=2,c=t.substr(a,o-a),s=o}"\n"!=h.charAt(h.length-1)&&(h+="\n"),h+=this.tabifier.getTabs(),h+=c+">\n"}else"!"==c[1]?h=this.tabifier.placeTag(c+">",h):"?"==c[1]?h+=c+">\n":(d=c.match(/^<(script|style|pre)/i))?(d[1]=d[1].toLowerCase(),c=this.tabifier.cleanTag(c),h=this.tabifier.placeTag(c,h),l=String(t.substr(s+1)).toLowerCase().indexOf("</"+d[1]),l&&(u=t.substr(s+1,l),s+=l,h+=u)):(c=this.tabifier.cleanTag(c),h=this.tabifier.placeTag(c,h))}return this.tabifier.finish(h)},getTabs:function(){for(var t="",e=0;e<this.tabifier.cleanlevel;e++)t+="	";return t},finish:function(t){return t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/,""),t=t.replace(/[\s\n]*$/,""),t=t.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.tabifier.cleanlevel=0,t},cleanTag:function(t){var e="";t=t.replace(/\n/g," "),t=t.replace(/\s{2,}/g," "),t=t.replace(/^\s+|\s+$/g," ");var i="";t.match(/\/$/)&&(i="/",t=t.replace(/\/+$/,""));for(var n;n=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(t);)n[2]?e+=n[1].toLowerCase()+"="+n[2]:n[1]&&(e+=n[1].toLowerCase()),e+=" ",t=t.substr(n[0].length);return e.replace(/\s*$/,"")+i+">"},placeTag:function(t,e){var i=t.match(this.tabifier.newLevel);return(t.match(this.tabifier.lineBefore)||i)&&(e=e.replace(/\s*$/,""),e+="\n"),i&&"/"==t.charAt(1)&&this.tabifier.cleanlevel--,"\n"==e.charAt(e.length-1)&&(e+=this.tabifier.getTabs()),i&&"/"!=t.charAt(1)&&this.tabifier.cleanlevel++,e+=t,(t.match(this.tabifier.lineAfter)||t.match(this.tabifier.newLevel))&&(e=e.replace(/ *$/,"")),e}}},tidy:function(){return{setupAllowed:function(){var e=t.inArray("span",this.opts.removeEmpty);if(-1!==e&&this.opts.removeEmpty.splice(e,1),this.opts.allowedTags&&(this.opts.deniedTags=!1),this.opts.allowedAttr&&(this.opts.removeAttr=!1),!this.opts.linebreaks){var i=["p","section"];this.opts.allowedTags&&this.tidy.addToAllowed(i),this.opts.deniedTags&&this.tidy.removeFromDenied(i)}},addToAllowed:function(e){for(var i=e.length,n=0;i>n;n++)-1==t.inArray(e[n],this.opts.allowedTags)&&this.opts.allowedTags.push(e[n])},removeFromDenied:function(e){for(var i=e.length,n=0;i>n;n++){var s=t.inArray(e[n],this.opts.deniedTags);-1!=s&&this.opts.deniedTags.splice(s,1)}},load:function(e,i){return this.tidy.settings={deniedTags:this.opts.deniedTags,allowedTags:this.opts.allowedTags,removeComments:this.opts.removeComments,replaceTags:this.opts.replaceTags,replaceStyles:this.opts.replaceStyles,removeDataAttr:this.opts.removeDataAttr,removeAttr:this.opts.removeAttr,allowedAttr:this.opts.allowedAttr,removeWithoutAttr:this.opts.removeWithoutAttr,removeEmpty:this.opts.removeEmpty},t.extend(this.tidy.settings,i),e=this.tidy.removeComments(e),this.tidy.$div=t("<div />").append(e),this.tidy.replaceTags(),this.tidy.replaceStyles(),this.tidy.removeTags(),this.tidy.removeAttr(),this.tidy.removeEmpty(),this.tidy.removeParagraphsInLists(),this.tidy.removeDataAttr(),this.tidy.removeWithoutAttr(),e=this.tidy.$div.html(),this.tidy.$div.remove(),e},removeComments:function(t){return this.tidy.settings.removeComments?t.replace(/<!--[\s\S]*?-->/gi,""):t},replaceTags:function(e){if(!this.tidy.settings.replaceTags)return e;for(var i=this.tidy.settings.replaceTags.length,n=[],s=[],r=0;i>r;r++)s.push(this.tidy.settings.replaceTags[r][1]),n.push(this.tidy.settings.replaceTags[r][0]);t.each(n,t.proxy(function(e,i){this.tidy.$div.find(i).replaceWith(function(){
return t("<"+s[e]+" />",{html:t(this).html()})})},this))},replaceStyles:function(){if(this.tidy.settings.replaceStyles){var e=this.tidy.settings.replaceStyles.length;this.tidy.$div.find("span").each(t.proxy(function(i,n){for(var s=t(n),r=s.attr("style"),o=0;e>o;o++)if(r&&r.match(new RegExp("^"+this.tidy.settings.replaceStyles[o][0],"i"))){var a=this.tidy.settings.replaceStyles[o][1];s.replaceWith(function(){var e=document.createElement(a);return t(e).append(t(this).contents())})}},this))}},removeTags:function(){!this.tidy.settings.deniedTags&&this.tidy.settings.allowedTags&&this.tidy.$div.find("*").not(this.tidy.settings.allowedTags.join(",")).each(function(e,i){""===i.innerHTML?t(i).remove():t(i).contents().unwrap()}),this.tidy.settings.deniedTags&&this.tidy.$div.find(this.tidy.settings.deniedTags.join(",")).each(function(e,i){t(i).hasClass("redactor-script-tag")||t(i).hasClass("redactor-selection-marker")||(""===i.innerHTML?t(i).remove():t(i).contents().unwrap())})},removeAttr:function(){var e;if(!this.tidy.settings.removeAttr&&this.tidy.settings.allowedAttr){var i=[],n=[];e=this.tidy.settings.allowedAttr.length;for(var s=0;e>s;s++)i.push(this.tidy.settings.allowedAttr[s][0]),n.push(this.tidy.settings.allowedAttr[s][1]);this.tidy.$div.find("*").each(t.proxy(function(e,s){var r=t(s),o=t.inArray(r[0].tagName.toLowerCase(),i),a=this.tidy.removeAttrGetRemoves(o,n,r);a&&t.each(a,function(t,e){r.removeAttr(e)})},this))}if(this.tidy.settings.removeAttr){e=this.tidy.settings.removeAttr.length;for(var s=0;e>s;s++){var r=this.tidy.settings.removeAttr[s][1];t.isArray(r)&&(r=r.join(" ")),this.tidy.$div.find(this.tidy.settings.removeAttr[s][0]).removeAttr(r)}}},removeAttrGetRemoves:function(e,i,n){var s=[];return-1==e?t.each(n[0].attributes,function(t,e){s.push(e.name)}):"*"==i[e]?s=[]:t.each(n[0].attributes,function(n,r){t.isArray(i[e])?-1==t.inArray(r.name,i[e])&&s.push(r.name):i[e]!=r.name&&s.push(r.name)}),s},removeAttrs:function(e,i){return i=new RegExp(i,"g"),e.each(function(){for(var e=t(this),n=this.attributes.length-1,s=n;s>=0;s--){var r=this.attributes[s];r&&r.specified&&r.name.search(i)>=0&&e.removeAttr(r.name)}})},removeEmpty:function(){this.tidy.settings.removeEmpty&&this.tidy.$div.find(this.tidy.settings.removeEmpty.join(",")).each(function(){var e=t(this),i=e.text();i=i.replace(/\u200B/g,""),i=i.replace(/&nbsp;/gi,""),i=i.replace(/\s/g,""),""===i&&0===e.children().length&&e.remove()})},removeParagraphsInLists:function(){this.tidy.$div.find("li p").contents().unwrap()},removeDataAttr:function(){if(this.tidy.settings.removeDataAttr){var e=this.tidy.settings.removeDataAttr;t.isArray(this.tidy.settings.removeDataAttr)&&(e=this.tidy.settings.removeDataAttr.join(",")),this.tidy.removeAttrs(this.tidy.$div.find(e),"^(data-)")}},removeWithoutAttr:function(){this.tidy.settings.removeWithoutAttr&&this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(",")).each(function(){0===this.attributes.length&&t(this).contents().unwrap()})}}},toolbar:function(){return{init:function(){return{html:{title:this.lang.get("html"),func:"code.toggle"},formatting:{title:this.lang.get("formatting"),dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("header1"),func:"block.format"},h2:{title:this.lang.get("header2"),func:"block.format"},h3:{title:this.lang.get("header3"),func:"block.format"},h4:{title:this.lang.get("header4"),func:"block.format"},h5:{title:this.lang.get("header5"),func:"block.format"}}},bold:{title:this.lang.get("bold"),func:"inline.format"},italic:{title:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline"),func:"inline.format"},unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease"},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase"},image:{title:this.lang.get("image"),func:"image.show"},file:{title:this.lang.get("file"),func:"file.show"},link:{title:this.lang.get("link"),dropdown:{link:{title:this.lang.get("link_insert"),func:"link.show",observe:{element:"a","in":{title:this.lang.get("link_edit")},out:{title:this.lang.get("link_insert")}}},unlink:{title:this.lang.get("unlink"),func:"link.unlink",observe:{element:"a",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},alignment:{title:this.lang.get("alignment"),dropdown:{left:{title:this.lang.get("align_left"),func:"alignment.left"},center:{title:this.lang.get("align_center"),func:"alignment.center"},right:{title:this.lang.get("align_right"),func:"alignment.right"},justify:{title:this.lang.get("align_justify"),func:"alignment.justify"}}},horizontalrule:{title:this.lang.get("horizontalrule"),func:"line.insert"}}},build:function(){this.toolbar.hideButtons(),this.toolbar.hideButtonsOnMobile(),this.toolbar.isButtonSourceNeeded(),0!==this.opts.buttons.length&&(this.$toolbar=this.toolbar.createContainer(),this.toolbar.setOverflow(),this.toolbar.append(),this.toolbar.setFormattingTags(),this.toolbar.loadButtons(),this.toolbar.setFixed(),this.opts.activeButtons&&this.$editor.on("mouseup.redactor keyup.redactor focus.redactor",t.proxy(this.observe.toolbar,this)))},createContainer:function(){return t("<ul>").addClass("redactor-toolbar").attr({id:"redactor-toolbar-"+this.uuid,role:"toolbar"})},setFormattingTags:function(){t.each(this.opts.toolbar.formatting.dropdown,t.proxy(function(e,i){-1==t.inArray(e,this.opts.formatting)&&delete this.opts.toolbar.formatting.dropdown[e]},this))},loadButtons:function(){t.each(this.opts.buttons,t.proxy(function(e,i){if(this.opts.toolbar[i]){if("file"===i){if(this.opts.fileUpload===!1)return;if(!this.opts.fileUpload&&this.opts.s3===!1)return}if("image"===i){if(this.opts.imageUpload===!1)return;if(!this.opts.imageUpload&&this.opts.s3===!1)return}var n=this.opts.toolbar[i];this.$toolbar.append(t("<li>").append(this.button.build(i,n)))}},this))},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),t(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar)},setFixed:function(){this.utils.isDesktop()&&(this.opts.toolbarExternal||this.opts.toolbarFixed&&(this.toolbar.observeScroll(),t(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,t.proxy(this.toolbar.observeScroll,this))))},setOverflow:function(){this.utils.isMobile()&&this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},isButtonSourceNeeded:function(){if(!this.opts.source){var t=this.opts.buttons.indexOf("html");-1!==t&&this.opts.buttons.splice(t,1)}},hideButtons:function(){0!==this.opts.buttonsHide.length&&t.each(this.opts.buttonsHide,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);this.opts.buttons.splice(i,1)},this))},hideButtonsOnMobile:function(){this.utils.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&t.each(this.opts.buttonsHideOnMobile,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);this.opts.buttons.splice(i,1)},this))},observeScroll:function(){var e=t(this.opts.toolbarFixedTarget).scrollTop(),i=1;this.opts.toolbarFixedTarget===document&&(i=this.$box.offset().top),e+this.opts.toolbarFixedTopOffset>i?this.toolbar.observeScrollEnable(e,i):this.toolbar.observeScrollDisable()},observeScrollEnable:function(e,i){var n=this.opts.toolbarFixedTopOffset+e-i,s=0,r=i+this.$box.height()-32,o=this.$box.innerWidth();this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:"absolute",width:o,top:n+"px",left:s}),e>r&&t(".redactor-dropdown-"+this.uuid+":visible").hide(),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",r>e?"visible":"hidden")},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box")},setDropdownsFixed:function(){var e=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(e=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),t(".redactor-dropdown-"+this.uuid).each(function(){t(this).css({position:i,top:e+"px"})})},unsetDropdownsFixed:function(){var e=this.$toolbar.innerHeight()+this.$toolbar.offset().top;t(".redactor-dropdown-"+this.uuid).each(function(){t(this).css({position:"absolute",top:e+"px"})})}}},upload:function(){return{init:function(e,i,n){this.upload.direct=!1,this.upload.callback=n,this.upload.url=i,this.upload.$el=t(e),this.upload.$droparea=t('<div id="redactor-droparea" />'),this.upload.$placeholdler=t('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload_label")),this.upload.$input=t('<input type="file" name="file" />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",t.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",t.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",t.proxy(function(t){t=t.originalEvent||t,this.upload.traverseFile(this.upload.$input[0].files[0],t)},this)),this.upload.$droparea.on("drop.redactor.upload",t.proxy(function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(t)},this))},directUpload:function(t,e){this.upload.direct=!0,this.upload.traverseFile(t,e)},onDrop:function(t){t=t.originalEvent||t;var e=t.dataTransfer.files;this.upload.traverseFile(e[0],t)},traverseFile:function(t,e){if(this.opts.s3)return this.upload.setConfig(t),void this.upload.s3uploadFile(t);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(t);var n="image"==this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(n,t)}this.progress.show(),this.core.setCallback("uploadStart",e,i),this.upload.sendData(i,e)},setConfig:function(t){this.upload.getType(t),this.upload.direct&&(this.upload.url="image"==this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"==this.upload.type?this.image.insert:this.file.insert)},getType:function(t){this.upload.type="image",-1==this.opts.imageTypes.indexOf(t.type)&&(this.upload.type="file")},getHiddenFields:function(e,i){return e===!1||"object"!=typeof e?i:(t.each(e,t.proxy(function(e,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),i.append(e,n)},this)),i)},sendData:function(e,i){"image"==this.upload.type?(e=this.upload.getHiddenFields(this.opts.uploadImageFields,e),e=this.upload.getHiddenFields(this.upload.imageFields,e)):(e=this.upload.getHiddenFields(this.opts.uploadFileFields,e),e=this.upload.getHiddenFields(this.upload.fileFields,e));var n=new XMLHttpRequest;n.open("POST",this.upload.url),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=t.proxy(function(){if(4==n.readyState){var e=n.responseText;e=e.replace(/^\[/,""),e=e.replace(/\]$/,"");var s;try{s="string"==typeof e?t.parseJSON(e):e}catch(r){s={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(s,this.upload.direct,i)}},this),n.send(e)},onDrag:function(t){t.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(t,e){this.upload.imageFields[t]=e},removeImageFields:function(t){delete this.upload.imageFields[t]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(t,e){this.upload.fileFields[t]=e},removeFileFields:function(t){delete this.upload.fileFields[t]},s3uploadFile:function(e){this.upload.s3executeOnSignedUrl(e,t.proxy(function(t){this.upload.s3uploadToS3(e,t)},this))},s3executeOnSignedUrl:function(t,e){var i=new XMLHttpRequest,n="-1"!==this.opts.s3.search(/\?/)?"?":"&";i.open("GET",this.opts.s3+n+"name="+t.name+"&type="+t.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var s=this;i.onreadystatechange=function(t){4==this.readyState&&200==this.status?(s.progress.show(),e(decodeURIComponent(this.responseText))):4==this.readyState&&200!=this.status},i.send()},s3createCORSRequest:function(t,e){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(t,e,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(t,e)):i=null,i},s3uploadToS3:function(e,i){var n=this.upload.s3createCORSRequest("PUT",i);n&&(n.onload=t.proxy(function(){if(200==n.status){this.progress.hide();var t=i.split("?");if(!t[0])return!1;this.upload.direct||this.upload.$droparea.removeClass("drag-drop");var e={filelink:t[0]};if("file"==this.upload.type){var s=t[0].split("/");e.filename=s[s.length-1]}this.upload.callback(e,this.upload.direct,!1)}},this),n.onerror=function(){},n.upload.onprogress=function(t){},n.setRequestHeader("Content-Type",e.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(e))}}},utils:function(){return{isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},isEmpty:function(e,i){return e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),e=e.replace(/&nbsp;/gi,""),e=e.replace(/<\/?br\s?\/?>/g,""),e=e.replace(/\s/g,""),e=e.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),e=e.replace(/<iframe(.*?[^>])>$/i,"iframe"),e=e.replace(/<source(.*?[^>])>$/i,"source"),i!==!1&&(e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")),e=t.trim(e),""===e},normalize:function(t){return"undefined"==typeof t?0:parseInt(t.replace("px",""),10)},hexToRgb:function(t){if("undefined"!=typeof t){if(-1==t.search(/^#/))return t;var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")"}},getOuterHtml:function(e){return t("<div>").append(t(e).eq(0).clone()).html()},getAlignmentElement:function(e){return-1!==t.inArray(e.tagName,this.opts.alignmentTags)?t(e):t(e).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0])},removeEmptyAttr:function(e,i){var n=t(e);return"undefined"==typeof n.attr(i)?!0:""===n.attr(i)?(n.removeAttr(i),!0):!1},removeEmpty:function(e,i){var n=t(t.parseHTML(i));if(n.find(".redactor-invisible-space").removeAttr("style").removeAttr("class"),0===n.find("hr, br, img, iframe, source").length){var s=t.trim(n.text());this.utils.isEmpty(s,!1)&&n.remove()}},saveScroll:function(){this.saveEditorScroll=this.$editor.scrollTop(),this.saveBodyScroll=t(window).scrollTop(),this.opts.scrollTarget&&(this.saveTargetScroll=t(this.opts.scrollTarget).scrollTop())},restoreScroll:function(){("undefined"!=typeof this.saveScroll||"undefined"!=typeof this.saveBodyScroll)&&(t(window).scrollTop(this.saveBodyScroll),this.$editor.scrollTop(this.saveEditorScroll),this.opts.scrollTarget&&t(this.opts.scrollTarget).scrollTop(this.saveTargetScroll))},createSpaceElement:function(){var t=document.createElement("span");return t.className="redactor-invisible-space",t.innerHTML=this.opts.invisibleSpace,t},removeInlineTags:function(e){var i=this.opts.inlineTags;i.push("span"),"PRE"==e.tagName&&i.push("a"),t(e).find(i.join(",")).not("span.redactor-selection-marker").contents().unwrap()},replaceWithContents:function(e,i){var n=this;return t(e).replaceWith(function(){return i===!0&&n.utils.removeInlineTags(this),t(this).contents()}),t(e)},replaceToTag:function(e,i,n){var s,r=this;return t(e).replaceWith(function(){s=t("<"+i+" />").append(t(this).contents());for(var e=0;e<this.attributes.length;e++)s.attr(this.attributes[e].name,this.attributes[e].value);return n===!0&&r.utils.removeInlineTags(s),s}),s},isStartOfElement:function(){var t=this.selection.getBlock();if(!t)return!1;var e=this.caret.getOffsetOfElement(t);return 0===e?!0:!1},isEndOfElement:function(e){if("undefined"==typeof e){var e=this.selection.getBlock();if(!e)return!1}var i=this.caret.getOffsetOfElement(e),n=t.trim(t(e).text()).replace(/\n\r\n/g,"");return i==n.length?!0:!1},isStartOfEditor:function(){var t=this.caret.getOffsetOfElement(this.$editor[0]);return 0===t?!0:!1},isEndOfEditor:function(){var e=this.$editor[0],i=this.caret.getOffsetOfElement(e),n=t.trim(t(e).html().replace(/(<([^>]+)>)/gi,""));return i==n.length?!0:!1},isBlock:function(t){return t=t[0]||t,t&&this.utils.isBlockTag(t.tagName)},isBlockTag:function(t){return"undefined"==typeof t?!1:this.reIsBlock.test(t)},isTag:function(e,i){var n=t(e).closest(i,this.$editor[0]);return 1==n.length?n[0]:!1},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},isRedactorParent:function(e){return e?0===t(e).parents(".redactor-editor").length||t(e).hasClass("redactor-editor")?!1:e:!1},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(e){var i=this.selection.getParent(),n=this.selection.getCurrent();if(t.isArray(e)){var s=0;return t.each(e,t.proxy(function(t,e){this.utils.isCurrentOrParentOne(n,i,e)&&s++},this)),0===s?!1:!0}return this.utils.isCurrentOrParentOne(n,i,e)},isCurrentOrParentOne:function(t,e,i){return i=i.toUpperCase(),e&&e.tagName===i?e:t&&t.tagName===i?t:!1},isOldIe:function(){return this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<9?!0:!1},isLessIe10:function(){return this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<10?!0:!1},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(t){var e=navigator.userAgent.toLowerCase(),i=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return"safari"==t?"undefined"!=typeof i[3]?"safari"==i[3]:!1:"version"==t?i[2]:"webkit"==t?"chrome"==i[1]||"opr"==i[1]||"webkit"==i[1]:"rv"==i[1]?"msie"==t:"opr"==i[1]?"webkit"==t:t==i[1]},strpos:function(t,e,i){var n=t.indexOf(e,i);return n>=0?n:!1},disableBodyScroll:function(){var e=t("html"),i=window.innerWidth;if(!i){var n=document.documentElement.getBoundingClientRect();i=n.right-Math.abs(n.left)}var s=document.body.clientWidth<i,r=this.utils.measureScrollbar();e.css("overflow","hidden"),s&&e.css("padding-right",r)},measureScrollbar:function(){var e=t("body"),i=document.createElement("div");i.className="redactor-scrollbar-measure",e.append(i);var n=i.offsetWidth-i.clientWidth;return e[0].removeChild(i),n},enableBodyScroll:function(){t("html").css({overflow:"","padding-right":""}),t("body").remove("redactor-scrollbar-measure")}}}},t(window).on("load.tools.redactor",function(){t('[data-tools="redactor"]').redactor()}),e.prototype.init.prototype=e.prototype}(jQuery),function(){function t(){var t,e,i=arguments,n={},s=function(t,e){var i,n;"object"!=typeof t&&(t={});for(n in e)e.hasOwnProperty(n)&&(i=e[n],t[n]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?s(t[n]||{},i):e[n]);return t};for(i[0]===!0&&(n=i[1],i=Array.prototype.slice.call(i,2)),e=i.length,t=0;e>t;t++)n=s(n,i[t]);return n}function e(t,e){return parseInt(t,e||10)}function i(t){return"string"==typeof t}function n(t){return t&&"object"==typeof t}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return"number"==typeof t}function o(t){return ot.log(t)/ot.LN10}function a(t){return ot.pow(10,t)}function l(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function c(t){return t!==P&&null!==t}function h(t,e,s){var r,o;if(i(e))c(s)?t.setAttribute(e,s):t&&t.getAttribute&&(o=t.getAttribute(e));else if(c(e)&&n(e))for(r in e)t.setAttribute(r,e[r]);return o}function u(t){return s(t)?t:[t]}function d(t,e){bt&&!Ct&&e&&e.opacity!==P&&(e.filter="alpha(opacity="+100*e.opacity+")"),Bt(t.style,e)}function p(t,e,i,n,s){return t=st.createElement(t),e&&Bt(t,e),s&&d(t,{padding:0,border:Ot,margin:0}),i&&d(t,i),n&&n.appendChild(t),t}function f(t,e){var i=function(){return P};return i.prototype=new t,Bt(i.prototype,e),i}function g(t,e){return Array((e||2)+1-String(t).length).join(0)+t}function m(t){return 6e4*(z&&z(t)||q||0)}function v(t,e){for(var i,n,s,r,o,a="{",l=!1,c=[];-1!==(a=t.indexOf(a));){if(i=t.slice(0,a),l){for(n=i.split(":"),s=n.shift().split("."),o=s.length,i=e,r=0;o>r;r++)i=i[s[r]];n.length&&(n=n.join(":"),s=/\.([0-9])/,r=R.lang,o=void 0,/f$/.test(n)?(o=(o=n.match(s))?o[1]:-1,null!==i&&(i=nt.numberFormat(i,o,r.decimalPoint,n.indexOf(",")>-1?r.thousandsSep:""))):i=$(n,i))}c.push(i),t=t.slice(a+1),a=(l=!l)?"}":"{"}return c.push(t),c.join("")}function y(t){return ot.pow(10,lt(ot.log(t)/ot.LN10))}function b(t,e,i,n,s){var r,o=t,i=Ft(i,1);for(r=t/i,e||(e=[1,2,2.5,5,10],n===!1&&(1===i?e=[1,2,5,10]:.1>=i&&(e=[1/i]))),n=0;n<e.length&&(o=e[n],!(s&&o*i>=t||!s&&r<=(e[n]+(e[n+1]||e[n]))/2));n++);return o*=i}function _(t,e){var i,n,s=t.length;for(n=0;s>n;n++)t[n].ss_i=n;for(t.sort(function(t,n){return i=e(t,n),0===i?t.ss_i-n.ss_i:i}),n=0;s>n;n++)delete t[n].ss_i}function x(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function w(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function k(t,e){for(var i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function T(t){M||(M=p(Nt)),t&&M.appendChild(t),M.innerHTML=""}function C(t,e){var i="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw i;rt.console&&console.log(i)}function S(t,e){return parseFloat(t.toPrecision(e||14))}function A(t,e){e.renderer.globalAnimation=Ft(t,e.animation)}function E(){var t=R.global,e=t.useUTC,i=e?"getUTC":"get",n=e?"setUTC":"set";F=t.Date||window.Date,q=e&&t.timezoneOffset,z=e&&t.getTimezoneOffset,H=function(t,i,n,s,r,o){var a;return e?(a=F.UTC.apply(0,arguments),a+=m(a)):a=new F(t,i,Ft(n,1),Ft(s,0),Ft(r,0),Ft(o,0)).getTime(),a},U=i+"Minutes",W=i+"Hours",X=i+"Day",G=i+"Date",Y=i+"Month",V=i+"FullYear",Q=n+"Milliseconds",K=n+"Seconds",J=n+"Minutes",Z=n+"Hours",tt=n+"Date",et=n+"Month",it=n+"FullYear"}function L(){}function D(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,!i&&!n&&this.addLabel()}function I(t,e,i,n,s){var r=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=s,this.alignOptions={align:e.align||(r?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(r?"middle":i?"bottom":"top"),y:Ft(e.y,r?4:i?14:-6),x:Ft(e.x,r?i?-6:6:0)},this.textAlign=e.textAlign||(r?i?"right":"left":"center")}var P,N,O,M,R,$,j,B,F,H,q,z,U,W,X,G,Y,V,Q,K,J,Z,tt,et,it,nt,st=document,rt=window,ot=Math,at=ot.round,lt=ot.floor,ct=ot.ceil,ht=ot.max,ut=ot.min,dt=ot.abs,pt=ot.cos,ft=ot.sin,gt=ot.PI,mt=2*gt/360,vt=navigator.userAgent,yt=rt.opera,bt=/(msie|trident)/i.test(vt)&&!yt,_t=8===st.documentMode,xt=/AppleWebKit/.test(vt),wt=/Firefox/.test(vt),kt=/(Mobile|Android|Windows Phone)/.test(vt),Tt="http://www.w3.org/2000/svg",Ct=!!st.createElementNS&&!!st.createElementNS(Tt,"svg").createSVGRect,St=wt&&parseInt(vt.split("Firefox/")[1],10)<4,At=!Ct&&!bt&&!!st.createElement("canvas").getContext,Et={},Lt=0,Dt=function(){return P},It=[],Pt=0,Nt="div",Ot="none",Mt=/^[0-9]+$/,Rt=["plotTop","marginRight","marginBottom","plotLeft"],$t="stroke-width",jt={};nt=rt.Highcharts=rt.Highcharts?C(16,!0):{},nt.seriesTypes=jt;var Bt=nt.extend=function(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t},Ft=nt.pick=function(){var t,e,i=arguments,n=i.length;for(t=0;n>t;t++)if(e=i[t],e!==P&&null!==e)return e},Ht=nt.wrap=function(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}};$=function(t,e,i){if(!c(e)||isNaN(e))return R.lang.invalidDate||"";var n,t=Ft(t,"%Y-%m-%d %H:%M:%S"),s=new F(e-m(e)),r=s[W](),o=s[X](),a=s[G](),l=s[Y](),h=s[V](),u=R.lang,d=u.weekdays,s=Bt({a:d[o].substr(0,3),A:d[o],d:g(a),e:a,w:o,b:u.shortMonths[l],B:u.months[l],m:g(l+1),y:h.toString().substr(2,2),Y:h,H:g(r),k:r,I:g(r%12||12),l:r%12||12,M:g(s[U]()),p:12>r?"AM":"PM",P:12>r?"am":"pm",S:g(s.getSeconds()),L:g(at(e%1e3),3)},nt.dateFormats);for(n in s)for(;-1!==t.indexOf("%"+n);)t=t.replace("%"+n,"function"==typeof s[n]?s[n](e):s[n]);return i?t.substr(0,1).toUpperCase()+t.substr(1):t},B={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},nt.numberFormat=function(t,i,n,s){var r=R.lang,t=+t||0,o=-1===i?ut((t.toString().split(".")[1]||"").length,20):isNaN(i=dt(i))?2:i,i=void 0===n?r.decimalPoint:n,s=void 0===s?r.thousandsSep:s,r=0>t?"-":"",n=String(e(t=dt(t).toFixed(o))),a=n.length>3?n.length%3:0;return r+(a?n.substr(0,a)+s:"")+n.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+s)+(o?i+dt(t-n).toFixed(o).slice(2):"")},j={init:function(t,e,i){var n,s,r,e=e||"",o=t.shift,a=e.indexOf("C")>-1,l=a?7:3,e=e.split(" "),i=[].concat(i),c=function(t){for(n=t.length;n--;)"M"===t[n]&&t.splice(n+1,0,t[n+1],t[n+2],t[n+1],t[n+2])};if(a&&(c(e),c(i)),t.isArea&&(s=e.splice(e.length-6,6),r=i.splice(i.length-6,6)),o<=i.length/l&&e.length===i.length)for(;o--;)i=[].concat(i).splice(0,l).concat(i);if(t.shift=0,e.length)for(t=i.length;e.length<t;)o=[].concat(e).splice(e.length-l,l),a&&(o[l-6]=o[l-2],o[l-5]=o[l-1]),e=e.concat(o);return s&&(e=e.concat(s),i=i.concat(r)),[e,i]},step:function(t,e,i,n){var s=[],r=t.length;if(1===i)s=n;else if(r===e.length&&1>i)for(;r--;)n=parseFloat(t[r]),s[r]=isNaN(n)?t[r]:i*parseFloat(e[r]-n)+n;else s=e;return s}},function(t){rt.HighchartsAdapter=rt.HighchartsAdapter||t&&{init:function(e){var n=t.fx;t.extend(t.easing,{easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i}}),t.each(["cur","_default","width","height","opacity"],function(e,i){var s,r=n.step;"cur"===i?r=n.prototype:"_default"===i&&t.Tween&&(r=t.Tween.propHooks[i],i="set"),(s=r[i])&&(r[i]=function(t){var n,t=e?t:this;return"align"!==t.prop?(n=t.elem,n.attr?n.attr(t.prop,"cur"===i?P:t.now):s.apply(this,arguments)):void 0})}),Ht(t.cssHooks.opacity,"get",function(t,e,i){return e.attr?e.opacity||0:t.call(this,e,i)}),this.addAnimSetter("d",function(t){var i,n=t.elem;t.started||(i=e.init(n,n.d,n.toD),t.start=i[0],t.end=i[1],t.started=!0),n.attr("d",e.step(t.start,t.end,t.pos,n.toD))}),this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){var i,n=t.length;for(i=0;n>i;i++)if(e.call(t[i],t[i],i,t)===!1)return i},t.fn.highcharts=function(){var t,e,n="Chart",s=arguments;return this[0]&&(i(s[0])&&(n=s[0],s=Array.prototype.slice.call(s,1)),t=s[0],t!==P&&(t.chart=t.chart||{},t.chart.renderTo=this[0],new nt[n](t,s[1]),e=this),t===P&&(e=It[h(this[0],"data-highcharts-chart")])),e}},addAnimSetter:function(e,i){t.Tween?t.Tween.propHooks[e]={set:i}:t.fx.step[e]=i},getScript:t.getScript,inArray:t.inArray,adapterRun:function(e,i){return t(e)[i]()},grep:t.grep,map:function(t,e){for(var i=[],n=0,s=t.length;s>n;n++)i[n]=e.call(t[n],t[n],n,t);return i},offset:function(e){return t(e).offset()},addEvent:function(e,i,n){t(e).bind(i,n)},removeEvent:function(e,i,n){var s=st.removeEventListener?"removeEventListener":"detachEvent";st[s]&&e&&!e[s]&&(e[s]=function(){}),t(e).unbind(i,n)},fireEvent:function(e,i,n,s){var r,o=t.Event(i),a="detached"+i;!bt&&n&&(delete n.layerX,delete n.layerY,delete n.returnValue),Bt(o,n),e[i]&&(e[a]=e[i],e[i]=null),t.each(["preventDefault","stopPropagation"],function(t,e){var i=o[e];o[e]=function(){try{i.call(o)}catch(t){"preventDefault"===e&&(r=!0)}}}),t(e).trigger(o),e[a]&&(e[i]=e[a],e[a]=null),s&&!o.isDefaultPrevented()&&!r&&s(o)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===P&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(e,i,n){var s=t(e);e.style||(e.style={}),i.d&&(e.toD=i.d,i.d=1),s.stop(),i.opacity!==P&&e.attr&&(i.opacity+="px"),e.hasAnim=1,s.animate(i,n)},stop:function(e){e.hasAnim&&t(e).stop()}}}(rt.jQuery);var qt=rt.HighchartsAdapter,zt=qt||{};qt&&qt.init.call(qt,j);var Ut=zt.adapterRun,Wt=zt.getScript,Xt=zt.inArray,Gt=nt.each=zt.each,Yt=zt.grep,Vt=zt.offset,Qt=zt.map,Kt=zt.addEvent,Jt=zt.removeEvent,Zt=zt.fireEvent,te=zt.washMouseEvent,ee=zt.animate,ie=zt.stop;R={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#2b908f,#f45b5b,#91e8e1".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.1.8/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.1.8/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":nt.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Ct,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:kt?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var ne=R.plotOptions,qt=ne.line;E();var se=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,re=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,oe=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,ae=function(i){var n,s,o=[];return function(t){t&&t.stops?s=Qt(t.stops,function(t){return ae(t[1])}):(n=se.exec(t))?o=[e(n[1]),e(n[2]),e(n[3]),parseFloat(n[4],10)]:(n=re.exec(t))?o=[e(n[1],16),e(n[2],16),e(n[3],16),1]:(n=oe.exec(t))&&(o=[e(n[1]),e(n[2]),e(n[3]),1]);
}(i),{get:function(e){var n;return s?(n=t(i),n.stops=[].concat(n.stops),Gt(s,function(t,i){n.stops[i]=[n.stops[i][0],t.get(e)]})):n=o&&!isNaN(o[0])?"rgb"===e?"rgb("+o[0]+","+o[1]+","+o[2]+")":"a"===e?o[3]:"rgba("+o.join(",")+")":i,n},brighten:function(t){if(s)Gt(s,function(e){e.brighten(t)});else if(r(t)&&0!==t){var i;for(i=0;3>i;i++)o[i]+=e(255*t),o[i]<0&&(o[i]=0),o[i]>255&&(o[i]=255)}return this},rgba:o,setOpacity:function(t){return o[3]=t,this},raw:i}};L.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,fontStyle,color,lineHeight,width,textDecoration,textOverflow,textShadow".split(","),init:function(t,e){this.element="span"===e?p(e):st.createElementNS(Tt,e),this.renderer=t},animate:function(e,i,n){return i=Ft(i,this.renderer.globalAnimation,!0),ie(this),i?(i=t(i,{}),n&&(i.complete=n),ee(this,e,i)):this.attr(e,null,n),this},colorGradient:function(e,i,n){var r,o,a,l,h,u,d,p,f,g,m=this.renderer,v=[];if(e.linearGradient?o="linearGradient":e.radialGradient&&(o="radialGradient"),o){a=e[o],l=m.gradients,u=e.stops,f=n.radialReference,s(a)&&(e[o]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&f&&!c(a.gradientUnits)&&(a=t(a,{cx:f[0]-f[2]/2+a.cx*f[2],cy:f[1]-f[2]/2+a.cy*f[2],r:a.r*f[2],gradientUnits:"userSpaceOnUse"}));for(g in a)"id"!==g&&v.push(g,a[g]);for(g in u)v.push(u[g]);v=v.join(","),l[v]?e=l[v].attr("id"):(a.id=e="highcharts-"+Lt++,l[v]=h=m.createElement(o).attr(a).add(m.defs),h.stops=[],Gt(u,function(t){0===t[1].indexOf("rgba")?(r=ae(t[1]),d=r.get("rgb"),p=r.get("a")):(d=t[1],p=1),t=m.createElement("stop").attr({offset:t[0],"stop-color":d,"stop-opacity":p}).add(h),h.stops.push(t)})),n.setAttribute(i,"url("+m.url+"#"+e+")")}},applyTextShadow:function(t){var i,n=this.element,s=-1!==t.indexOf("contrast"),r={},o=this.renderer.forExport||n.style.textShadow!==P&&!bt;s&&(r.textShadow=t=t.replace(/contrast/g,this.renderer.getContrast(n.style.fill))),xt&&(r.textRendering="geometricPrecision"),o?d(n,r):(this.fakeTS=!0,this.ySetter=this.xSetter,i=[].slice.call(n.getElementsByTagName("tspan")),Gt(t.split(/\s?,\s?/g),function(t){var s,r,o=n.firstChild,t=t.split(" ");s=t[t.length-1],(r=t[t.length-2])&&Gt(i,function(t,i){var a;0===i&&(t.setAttribute("x",n.getAttribute("x")),i=n.getAttribute("y"),t.setAttribute("y",i||0),null===i&&n.setAttribute("y",0)),a=t.cloneNode(1),h(a,{"class":"highcharts-text-shadow",fill:s,stroke:s,"stroke-opacity":1/ht(e(r),3),"stroke-width":r,"stroke-linejoin":"round"}),n.insertBefore(a,o)})}))},attr:function(t,e,i){var n,s,r,o=this.element,a=this;if("string"==typeof t&&e!==P&&(n=t,t={},t[n]=e),"string"==typeof t)a=(this[t+"Getter"]||this._defaultGetter).call(this,t,o);else{for(n in t)e=t[n],r=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)&&(s||(this.symbolAttr(t),s=!0),r=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),r||(this[n+"Setter"]||this._defaultSetter).call(this,e,n,o),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,e);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return i&&i(),a},updateShadows:function(t,e){for(var i=this.shadows,n=i.length;n--;)i[n].setAttribute(t,"height"===t?ht(e-(i[n].cutHeight||0),0):"d"===t?this.d:e)},addClass:function(t){var e=this.element,i=h(e,"class")||"";return-1===i.indexOf(t)&&h(e,"class",i+" "+t),this},symbolAttr:function(t){var e=this;Gt("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(i){e[i]=Ft(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Ot)},crisp:function(t){var e,i,n={},s=t.strokeWidth||this.strokeWidth||0;i=at(s)%2/2,t.x=lt(t.x||this.x||0)+i,t.y=lt(t.y||this.y||0)+i,t.width=lt((t.width||this.width||0)-2*i),t.height=lt((t.height||this.height||0)-2*i),t.strokeWidth=s;for(e in t)this[e]!==t[e]&&(this[e]=n[e]=t[e]);return n},css:function(t){var i,n,s=this.styles,r={},o=this.element,a="";if(i=!s,t&&t.color&&(t.fill=t.color),s)for(n in t)t[n]!==s[n]&&(r[n]=t[n],i=!0);if(i){if(i=this.textWidth=t&&t.width&&"text"===o.nodeName.toLowerCase()&&e(t.width)||this.textWidth,s&&(t=Bt(s,r)),this.styles=t,i&&(At||!Ct&&this.renderer.forExport)&&delete t.width,bt&&!Ct)d(this.element,t);else{s=function(t,e){return"-"+e.toLowerCase()};for(n in t)a+=n.replace(/([A-Z])/g,s)+":"+t[n]+";";h(o,"style",a)}i&&this.added&&this.renderer.buildText(this)}return this},on:function(t,e){var i=this,n=i.element;return O&&"click"===t?(n.ontouchstart=function(t){i.touchEventFired=F.now(),t.preventDefault(),e.call(n,t)},n.onclick=function(t){(-1===vt.indexOf("Android")||F.now()-(i.touchEventFired||0)>1100)&&e.call(n,t)}):n["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var t=this.translateX||0,e=this.translateY||0,i=this.scaleX,n=this.scaleY,s=this.inverted,r=this.rotation,o=this.element;s&&(t+=this.attr("width"),e+=this.attr("height")),t=["translate("+t+","+e+")"],s?t.push("rotate(90) scale(-1,1)"):r&&t.push("rotate("+r+" "+(o.getAttribute("x")||0)+" "+(o.getAttribute("y")||0)+")"),(c(i)||c(n))&&t.push("scale("+Ft(i,1)+" "+Ft(n,1)+")"),t.length&&o.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,n){var s,r,o,a,c={};return r=this.renderer,o=r.alignedObjects,t?(this.alignOptions=t,this.alignByTranslate=e,(!n||i(n))&&(this.alignTo=s=n||"renderer",l(o,this),o.push(this),n=null)):(t=this.alignOptions,e=this.alignByTranslate,s=this.alignTo),n=Ft(n,r[s],r),s=t.align,r=t.verticalAlign,o=(n.x||0)+(t.x||0),a=(n.y||0)+(t.y||0),("right"===s||"center"===s)&&(o+=(n.width-(t.width||0))/{right:1,center:2}[s]),c[e?"translateX":"x"]=at(o),("bottom"===r||"middle"===r)&&(a+=(n.height-(t.height||0))/({bottom:1,middle:2}[r]||1)),c[e?"translateY":"y"]=at(a),this[this.placed?"animate":"attr"](c),this.placed=!0,this.alignAttr=c,this},getBBox:function(t){var e,i,n=this.renderer,s=this.rotation,r=this.element,o=this.styles,a=s*mt;i=this.textStr;var l,c,h,u=r.style;if(i!==P&&(h=["",s||0,o&&o.fontSize,r.style.width].join(","),h=""===i||Mt.test(i)?"num:"+i.toString().length+h:i+h),h&&!t&&(e=n.cache[h]),!e){if(r.namespaceURI===Tt||n.forExport){try{c=this.fakeTS&&function(t){Gt(r.querySelectorAll(".highcharts-text-shadow"),function(e){e.style.display=t})},wt&&u.textShadow?(l=u.textShadow,u.textShadow=""):c&&c(Ot),e=r.getBBox?Bt({},r.getBBox()):{width:r.offsetWidth,height:r.offsetHeight},l?u.textShadow=l:c&&c("")}catch(d){}(!e||e.width<0)&&(e={width:0,height:0})}else e=this.htmlGetBBox();n.isSVG&&(t=e.width,i=e.height,bt&&o&&"11px"===o.fontSize&&"16.9"===i.toPrecision(3)&&(e.height=i=14),s&&(e.width=dt(i*ft(a))+dt(t*pt(a)),e.height=dt(i*pt(a))+dt(t*ft(a)))),h&&(n.cache[h]=e)}return e},show:function(t){return this.attr({visibility:t?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,i=this.renderer,n=this.element;return t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&i.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter()),e||(t?t.element:i.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i=this,n=i.element||{},s=i.shadows,r=i.renderer.isSVG&&"SPAN"===n.nodeName&&i.parentGroup;if(n.onclick=n.onmouseout=n.onmouseover=n.onmousemove=n.point=null,ie(i),i.clipPath&&(i.clipPath=i.clipPath.destroy()),i.stops){for(e=0;e<i.stops.length;e++)i.stops[e]=i.stops[e].destroy();i.stops=null}for(i.safeRemoveChild(n),s&&Gt(s,function(t){i.safeRemoveChild(t)});r&&r.div&&0===r.div.childNodes.length;)n=r.parentGroup,i.safeRemoveChild(r.div),delete r.div,r=n;i.alignTo&&l(i.renderer.alignedObjects,i);for(t in i)delete i[t];return null},shadow:function(t,e,i){var n,s,r,o,a,l,c=[],u=this.element;if(t){for(o=Ft(t.width,3),a=(t.opacity||.15)/o,l=this.parentInverted?"(-1,-1)":"("+Ft(t.offsetX,1)+", "+Ft(t.offsetY,1)+")",n=1;o>=n;n++)s=u.cloneNode(0),r=2*o+1-2*n,h(s,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*n,"stroke-width":r,transform:"translate"+l,fill:Ot}),i&&(h(s,"height",ht(h(s,"height")-r,0)),s.cutHeight=r),e?e.element.appendChild(s):u.parentNode.insertBefore(s,u),c.push(s);this.shadows=c}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){return t=Ft(this[t],this.element?this.element.getAttribute(t):null,0),/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(t,e,i){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),i.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var i;if(t=t&&t.toLowerCase()){for(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),i=t.length;i--;)t[i]=e(t[i])*this["stroke-width"];t=t.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,i){this[e]=t,i.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=st.createElementNS(Tt,"title"),this.element.appendChild(e)),e.appendChild(st.createTextNode(String(Ft(t),"").replace(/<[^>]*>/g,"")))},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.colorGradient(t,e,i)},visibilitySetter:function(t,e,i){"inherit"===t?i.removeAttribute(e):i.setAttribute(e,t)},zIndexSetter:function(t,i){var n,s,r,o=this.renderer,a=this.parentGroup,o=(a||o).element||o.box,l=this.element;n=this.added;var u;if(c(t)&&(l.setAttribute(i,t),t=+t,this[i]===t&&(n=!1),this[i]=t),n){for((t=this.zIndex)&&a&&(a.handleZ=!0),a=o.childNodes,u=0;u<a.length&&!r;u++)n=a[u],s=h(n,"zIndex"),n!==l&&(e(s)>t||!c(t)&&c(s))&&(o.insertBefore(l,n),r=!0);r||o.appendChild(l)}return r},_defaultSetter:function(t,e,i){i.setAttribute(e,t)}},L.prototype.yGetter=L.prototype.xGetter,L.prototype.translateXSetter=L.prototype.translateYSetter=L.prototype.rotationSetter=L.prototype.verticalAlignSetter=L.prototype.scaleXSetter=L.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},L.prototype["stroke-widthSetter"]=L.prototype.strokeSetter=function(t,e,i){this[e]=t,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],L.prototype.fillSetter.call(this,this.stroke,"stroke",i),i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(i.removeAttribute("stroke"),this.hasStroke=!1)};var le=function(){this.init.apply(this,arguments)};if(le.prototype={Element:L,init:function(t,e,i,n,s){var r,o=location,n=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(n));r=n.element,t.appendChild(r),-1===t.innerHTML.indexOf("xmlns")&&h(r,"xmlns",Tt),this.isSVG=!0,this.box=r,this.boxWrapper=n,this.alignedObjects=[],this.url=(wt||xt)&&st.getElementsByTagName("base").length?o.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(st.createTextNode("Created with Highcharts 4.1.8")),this.defs=this.createElement("defs").add(),this.forExport=s,this.gradients={},this.cache={},this.setSize(e,i,!1);var a;wt&&t.getBoundingClientRect&&(this.subPixelFix=e=function(){d(t,{left:0,top:0}),a=t.getBoundingClientRect(),d(t,{left:ct(a.left)-a.left+"px",top:ct(a.top)-a.top+"px"})},e(),Kt(rt,"resize",e))},getStyle:function(t){return this.style=Bt({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),k(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.subPixelFix&&Jt(rt,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var i,n,s=t.element,r=this,o=r.forExport,a=Ft(t.textStr,"").toString(),l=-1!==a.indexOf("<"),c=s.childNodes,u=h(s,"x"),p=t.styles,f=t.textWidth,g=p&&p.lineHeight,m=p&&p.textShadow,v=p&&"ellipsis"===p.textOverflow,y=c.length,b=f&&!t.added&&this.box,_=function(t){return g?e(g):r.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:p&&p.fontSize||r.style.fontSize||12,t).h},x=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")};y--;)s.removeChild(c[y]);l||m||v||-1!==a.indexOf(" ")?(i=/<.*style="([^"]+)".*>/,n=/<.*href="(http[^"]+)".*>/,b&&b.appendChild(s),a=l?a.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[a],""===a[a.length-1]&&a.pop(),Gt(a,function(e,a){var l,c=0,e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");l=e.split("|||"),Gt(l,function(e){if(""!==e||1===l.length){var g,m={},y=st.createElementNS(Tt,"tspan");if(i.test(e)&&(g=e.match(i)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),h(y,"style",g)),n.test(e)&&!o&&(h(y,"onclick",'location.href="'+e.match(n)[1]+'"'),d(y,{cursor:"pointer"})),e=x(e.replace(/<(.|\n)*?>/g,"")||" ")," "!==e){if(y.appendChild(st.createTextNode(e)),c?m.dx=0:a&&null!==u&&(m.x=u),h(y,m),s.appendChild(y),!c&&a&&(!Ct&&o&&d(y,{display:"block"}),h(y,"dy",_(y))),f){for(var b,w,k,m=e.replace(/([^\^])-/g,"$1- ").split(" "),T=l.length>1||a||m.length>1&&"nowrap"!==p.whiteSpace,C=[],S=_(y),A=1,E=t.rotation,L=e,D=L.length;(T||v)&&(m.length||C.length);)t.rotation=0,b=t.getBBox(!0),k=b.width,!Ct&&r.forExport&&(k=r.measureSpanWidth(y.firstChild.data,t.styles)),b=k>f,void 0===w&&(w=b),v&&w?(D/=2,""===L||!b&&.5>D?m=[]:(b&&(w=!0),L=e.substring(0,L.length+(b?-1:1)*ct(D)),m=[L+(f>3?"\u2026":"")],y.removeChild(y.firstChild))):b&&1!==m.length?(y.removeChild(y.firstChild),C.unshift(m.pop())):(m=C,C=[],m.length&&(A++,y=st.createElementNS(Tt,"tspan"),h(y,{dy:S,x:u}),g&&h(y,"style",g),s.appendChild(y)),k>f&&(f=k)),m.length&&y.appendChild(st.createTextNode(m.join(" ").replace(/- /g,"-")));w&&t.attr("title",t.textStr),t.rotation=E}c++}}})}),b&&b.removeChild(s),m&&t.applyTextShadow&&t.applyTextShadow(m)):s.appendChild(st.createTextNode(x(a)))},getContrast:function(t){return t=ae(t).rgba,t[0]+t[1]+t[2]>384?"#000000":"#FFFFFF"},button:function(e,i,n,s,r,o,a,l,c){var h,u,d,p,f,g,m=this.label(e,i,n,c,null,null,null,null,"button"),v=0,e={x1:0,y1:0,x2:0,y2:1},r=t({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:e,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},r);return d=r.style,delete r.style,o=t(r,{stroke:"#68A",fill:{linearGradient:e,stops:[[0,"#FFF"],[1,"#ACF"]]}},o),p=o.style,delete o.style,a=t(r,{stroke:"#68A",fill:{linearGradient:e,stops:[[0,"#9BD"],[1,"#CDF"]]}},a),f=a.style,delete a.style,l=t(r,{style:{color:"#CCC"}},l),g=l.style,delete l.style,Kt(m.element,bt?"mouseover":"mouseenter",function(){3!==v&&m.attr(o).css(p)}),Kt(m.element,bt?"mouseout":"mouseleave",function(){3!==v&&(h=[r,o,a][v],u=[d,p,f][v],m.attr(h).css(u))}),m.setState=function(t){(m.state=v=t)?2===t?m.attr(a).css(f):3===t&&m.attr(l).css(g):m.attr(r).css(d)},m.on("click",function(t){3!==v&&s.call(m,t)}).attr(r).css(Bt({cursor:"default"},d))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=at(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=at(t[2])+e%2/2),t},path:function(t){var e={fill:Ot};return s(t)?e.d=t:n(t)&&Bt(e,t),this.createElement("path").attr(e)},circle:function(t,e,i){return t=n(t)?t:{x:t,y:e,r:i},e=this.createElement("circle"),e.xSetter=function(t){this.element.setAttribute("cx",t)},e.ySetter=function(t){this.element.setAttribute("cy",t)},e.attr(t)},arc:function(t,e,i,s,r,o){return n(t)&&(e=t.y,i=t.r,s=t.innerR,r=t.start,o=t.end,t=t.x),t=this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:s||0,start:r||0,end:o||0}),t.r=i,t},rect:function(t,e,i,s,r,o){var r=n(t)?t.r:r,a=this.createElement("rect"),t=n(t)?t:t===P?{}:{x:t,y:e,width:ht(i,0),height:ht(s,0)};return o!==P&&(t.strokeWidth=o,t=a.crisp(t)),r&&(t.r=r),a.rSetter=function(t){h(this.element,{rx:t,ry:t})},a.attr(t)},setSize:function(t,e,i){var n=this.alignedObjects,s=n.length;for(this.width=t,this.height=e,this.boxWrapper[Ft(i,!0)?"animate":"attr"]({width:t,height:e});s--;)n[s].align()},g:function(t){var e=this.createElement("g");return c(t)?e.attr({"class":"highcharts-"+t}):e},image:function(t,e,i,n,s){var r={preserveAspectRatio:Ot};return arguments.length>1&&Bt(r,{x:e,y:i,width:n,height:s}),r=this.createElement("image").attr(r),r.element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):r.element.setAttribute("hc-svg-href",t),r},symbol:function(t,e,i,n,s,r){var o,a,l,c=this.symbols[t],c=c&&c(at(e),at(i),n,s,r),h=/^url\((.*?)\)$/;return c?(o=this.path(c),Bt(o,{symbolName:t,x:e,y:i,width:n,height:s}),r&&Bt(o,r)):h.test(t)&&(l=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(at((n-e[0])/2),at((s-e[1])/2)))},a=t.match(h)[1],t=Et[a]||r&&r.width&&r.height&&[r.width,r.height],o=this.image(a).attr({x:e,y:i}),o.isImg=!0,t?l(o,t):(o.attr({width:0,height:0}),p("img",{onload:function(){l(o,Et[a]=[this.width,this.height])},src:a}))),o},symbols:{circle:function(t,e,i,n){var s=.166*i;return["M",t+i/2,e,"C",t+i+s,e,t+i+s,e+n,t+i/2,e+n,"C",t-s,e+n,t-s,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,s){var r=s.start,i=s.r||i||n,o=s.end-.001,n=s.innerR,a=s.open,l=pt(r),c=ft(r),h=pt(o),o=ft(o),s=s.end-r<gt?0:1;return["M",t+i*l,e+i*c,"A",i,i,0,s,1,t+i*h,e+i*o,a?"M":"L",t+n*h,e+n*o,"A",n,n,0,s,0,t+n*l,e+n*c,a?"":"Z"]},callout:function(t,e,i,n,s){var r,o=ut(s&&s.r||0,i,n),a=o+6,l=s&&s.anchorX,s=s&&s.anchorY;return r=["M",t+o,e,"L",t+i-o,e,"C",t+i,e,t+i,e,t+i,e+o,"L",t+i,e+n-o,"C",t+i,e+n,t+i,e+n,t+i-o,e+n,"L",t+o,e+n,"C",t,e+n,t,e+n,t,e+n-o,"L",t,e+o,"C",t,e,t,e,t+o,e],l&&l>i&&s>e+a&&e+n-a>s?r.splice(13,3,"L",t+i,s-6,t+i+6,s,t+i,s+6,t+i,e+n-o):l&&0>l&&s>e+a&&e+n-a>s?r.splice(33,3,"L",t,s+6,t-6,s,t,s-6,t,e+o):s&&s>n&&l>t+a&&t+i-a>l?r.splice(23,3,"L",l+6,e+n,l,e+n+6,l-6,e+n,t+o,e+n):s&&0>s&&l>t+a&&t+i-a>l&&r.splice(3,3,"L",l-6,e,l,e-6,l+6,e,i-o,e),r}},clipRect:function(t,e,i,n){var s="highcharts-"+Lt++,r=this.createElement("clipPath").attr({id:s}).add(this.defs),t=this.rect(t,e,i,n,0).add(r);return t.id=s,t.clipPath=r,t.count=0,t},text:function(t,e,i,n){var s=At||!Ct&&this.forExport,r={};return n&&!this.forExport?this.html(t,e,i):(r.x=Math.round(e||0),i&&(r.y=Math.round(i)),(t||0===t)&&(r.text=t),t=this.createElement("text").attr(r),s&&t.css({position:"absolute"}),n||(t.xSetter=function(t,e,i){var n,s,r=i.getElementsByTagName("tspan"),o=i.getAttribute(e);for(s=0;s<r.length;s++)n=r[s],n.getAttribute(e)===o&&n.setAttribute(e,t);i.setAttribute(e,t)}),t)},fontMetrics:function(t,i){var n,s,t=t||this.style.fontSize;return i&&rt.getComputedStyle&&(i=i.element||i,t=(n=rt.getComputedStyle(i,""))&&n.fontSize),t=/px/.test(t)?e(t):/em/.test(t)?12*parseFloat(t):12,n=24>t?t+3:at(1.2*t),s=at(.8*n),{h:n,b:s,f:t}},rotCorr:function(t,e,i){var n=t;return e&&i&&(n=ht(n*pt(e*mt),4)),{x:-t/3*ft(e*mt),y:n}},label:function(e,i,n,s,r,o,a,l,h){function u(){var t,e;t=T.element.style,g=(void 0===m||void 0===v||k.styles.textAlign)&&c(T.textStr)&&T.getBBox(),k.width=(m||g.width||0)+2*S+A,k.height=(v||g.height||0)+2*S,_=S+w.fontMetrics(t&&t.fontSize,T).b,x&&(f||(t=at(-C*S)+E,e=(l?-_:0)+E,k.box=f=s?w.symbol(s,t,e,k.width,k.height,D):w.rect(t,e,k.width,k.height,0,D[$t]),f.isImg||f.attr("fill",Ot),f.add(k)),f.isImg||f.attr(Bt({width:at(k.width),height:at(k.height)},D)),D=null)}function d(){var t,e=k.styles,e=e&&e.textAlign,i=A+S*(1-C);t=l?0:_,c(m)&&g&&("center"===e||"right"===e)&&(i+={center:.5,right:1}[e]*(m-g.width)),(i!==T.x||t!==T.y)&&(T.attr("x",i),t!==P&&T.attr("y",t)),T.x=i,T.y=t}function p(t,e){f?f.attr(t,e):D[t]=e}var f,g,m,v,y,b,_,x,w=this,k=w.g(h),T=w.text("",0,0,a).attr({zIndex:1}),C=0,S=3,A=0,E=0,D={};k.onAdd=function(){T.add(k),k.attr({text:e||0===e?e:"",x:i,y:n}),f&&c(r)&&k.attr({anchorX:r,anchorY:o})},k.widthSetter=function(t){m=t},k.heightSetter=function(t){v=t},k.paddingSetter=function(t){c(t)&&t!==S&&(S=k.padding=t,d())},k.paddingLeftSetter=function(t){c(t)&&t!==A&&(A=t,d())},k.alignSetter=function(t){C={left:0,center:.5,right:1}[t]},k.textSetter=function(t){t!==P&&T.textSetter(t),u(),d()},k["stroke-widthSetter"]=function(t,e){t&&(x=!0),E=t%2/2,p(e,t)},k.strokeSetter=k.fillSetter=k.rSetter=function(t,e){"fill"===e&&t&&(x=!0),p(e,t)},k.anchorXSetter=function(t,e){r=t,p(e,at(t)-E-y)},k.anchorYSetter=function(t,e){o=t,p(e,t-b)},k.xSetter=function(t){k.x=t,C&&(t-=C*((m||g.width)+S)),y=at(t),k.attr("translateX",y)},k.ySetter=function(t){b=k.y=at(t),k.attr("translateY",b)};var I=k.css;return Bt(k,{css:function(e){if(e){var i={},e=t(e);Gt(k.textProps,function(t){e[t]!==P&&(i[t]=e[t],delete e[t])}),T.css(i)}return I.call(k,e)},getBBox:function(){return{width:g.width+2*S,height:g.height+2*S,x:g.x-S,y:g.y-S}},shadow:function(t){return f&&f.shadow(t),k},destroy:function(){Jt(k.element,"mouseenter"),Jt(k.element,"mouseleave"),T&&(T=T.destroy()),f&&(f=f.destroy()),L.prototype.destroy.call(k),k=w=u=d=p=null}})}},N=le,Bt(L.prototype,{htmlCss:function(t){var e=this.element;return(e=t&&"SPAN"===e.tagName&&t.width)&&(delete t.width,this.textWidth=e,this.updateTransform()),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=Bt(this.styles,t),d(this.element,t),this},htmlGetBBox:function(){var t=this.element;return"text"===t.nodeName&&(t.style.position="absolute"),{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,i=this.element,n=this.translateX||0,s=this.translateY||0,r=this.x||0,o=this.y||0,a=this.textAlign||"left",l={left:0,center:.5,right:1}[a],h=this.shadows,u=this.styles;if(d(i,{marginLeft:n,marginTop:s}),h&&Gt(h,function(t){d(t,{marginLeft:n+1,marginTop:s+1})}),this.inverted&&Gt(i.childNodes,function(e){t.invertChild(e,i)}),"SPAN"===i.tagName){var p,f=this.rotation,g=e(this.textWidth),m=[f,a,i.innerHTML,this.textWidth,this.textAlign].join(",");m!==this.cTT&&(p=t.fontMetrics(i.style.fontSize).b,c(f)&&this.setSpanRotation(f,l,p),h=Ft(this.elemWidth,i.offsetWidth),h>g&&/[ \-]/.test(i.textContent||i.innerText)&&(d(i,{width:g+"px",display:"block",whiteSpace:u&&u.whiteSpace||"normal"}),h=g),this.getSpanCorrection(h,p,l,f,a)),d(i,{left:r+(this.xCorr||0)+"px",top:o+(this.yCorr||0)+"px"}),xt&&(p=i.offsetHeight),this.cTT=m}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,i){var n={},s=bt?"-ms-transform":xt?"-webkit-transform":wt?"MozTransform":yt?"-o-transform":"";n[s]=n.transform="rotate("+t+"deg)",n[s+(wt?"Origin":"-origin")]=n.transformOrigin=100*e+"% "+i+"px",d(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),Bt(le.prototype,{html:function(t,e,i){var n=this.createElement("span"),s=n.element,r=n.renderer;return n.textSetter=function(t){t!==s.innerHTML&&delete this.bBox,s.innerHTML=this.textStr=t,n.htmlUpdateTransform()},n.xSetter=n.ySetter=n.alignSetter=n.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),n[e]=t,n.htmlUpdateTransform()},n.attr({text:t,x:at(e),y:at(i)}).css({position:"absolute",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),s.style.whiteSpace="nowrap",n.css=n.htmlCss,r.isSVG&&(n.add=function(t){var e,i=r.box.parentNode,o=[];if(this.parentGroup=t){if(e=t.div,!e){for(;t;)o.push(t),t=t.parentGroup;Gt(o.reverse(),function(t){var n,s=h(t.element,"class");s&&(s={className:s}),e=t.div=t.div||p(Nt,s,{position:"absolute",left:(t.translateX||0)+"px",top:(t.translateY||0)+"px"},e||i),n=e.style,Bt(t,{translateXSetter:function(e,i){n.left=e+"px",t[i]=e,t.doTransform=!0},translateYSetter:function(e,i){n.top=e+"px",t[i]=e,t.doTransform=!0}}),Ht(t,"visibilitySetter",function(t,e,i,s){t.call(this,e,i,s),n[i]=e})})}}else e=i;return e.appendChild(s),n.added=!0,n.alignOnAdd&&n.htmlUpdateTransform(),n}),n}}),!Ct&&!At){zt={init:function(t,e){var i=["<",e,' filled="f" stroked="f"'],n=["position: ","absolute",";"],s=e===Nt;("shape"===e||s)&&n.push("left:0;top:0;width:1px;height:1px;"),n.push("visibility: ",s?"hidden":"visible"),i.push(' style="',n.join(""),'"/>'),e&&(i=s||"span"===e||"img"===e?i.join(""):t.prepVML(i),this.element=p(i)),this.renderer=t},add:function(t){var e=this.renderer,i=this.element,n=e.box,n=t?t.element||t:n;return t&&t.inverted&&e.invertChild(i,n),n.appendChild(i),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:L.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=pt(t*mt),i=ft(t*mt);d(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-i,", M21=",i,", M22=",e,", sizingMethod='auto expand')"].join(""):Ot})},getSpanCorrection:function(t,e,i,n,s){var r,o=n?pt(n*mt):1,a=n?ft(n*mt):0,l=Ft(this.elemHeight,this.element.offsetHeight);this.xCorr=0>o&&-t,this.yCorr=0>a&&-l,r=0>o*a,this.xCorr+=a*e*(r?1-i:i),this.yCorr-=o*e*(n?r?i:1-i:1),s&&"left"!==s&&(this.xCorr-=t*i*(0>o?-1:1),n&&(this.yCorr-=l*i*(0>a?-1:1)),d(this.element,{textAlign:s}))},pathToVML:function(t){for(var e=t.length,i=[];e--;)r(t[e])?i[e]=at(10*t[e])-5:"Z"===t[e]?i[e]="x":(i[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1),i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)));return i.join(" ")||"x"},clip:function(t){var e,i=this;return t?(e=t.members,l(e,i),e.push(i),i.destroyClip=function(){l(e,i)},t=t.getCSS(i)):(i.destroyClip&&i.destroyClip(),t={clip:_t?"inherit":"rect(auto)"}),i.css(t)},css:L.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&T(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),L.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=rt.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,i){var n,t=t.split(/[ ,]/);return n=t.length,(9===n||11===n)&&(t[n-4]=t[n-2]=e(t[n-2])-10*i),t.join(" ")},shadow:function(t,i,n){var s,r,o,a,l,c,h,u=[],d=this.element,f=this.renderer,g=d.style,m=d.path;if(m&&"string"!=typeof m.value&&(m="x"),l=m,t){for(c=Ft(t.width,3),h=(t.opacity||.15)/c,s=1;3>=s;s++)a=2*c+1-2*s,n&&(l=this.cutOffPath(m.value,a+.5)),o=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',l,'" coordsize="10 10" style="',d.style.cssText,'" />'],r=p(f.prepVML(o),null,{left:e(g.left)+Ft(t.offsetX,1),top:e(g.top)+Ft(t.offsetY,1)}),n&&(r.cutOff=a+1),o=['<stroke color="',t.color||"black",'" opacity="',h*s,'"/>'],p(f.prepVML(o),null,null,r),i?i.element.appendChild(r):d.parentNode.insertBefore(r,d),u.push(r);this.shadows=u}return this},updateShadows:Dt,setAttr:function(t,e){_t?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,i){(i.getElementsByTagName("stroke")[0]||p(this.renderer.prepVML(["<stroke/>"]),null,null,i))[e]=t||"solid",this[e]=t},dSetter:function(t,e,i){var n=this.shadows,t=t||[];if(this.d=t.join&&t.join(" "),i.path=t=this.pathToVML(t),n)for(i=n.length;i--;)n[i].path=n[i].cutOff?this.cutOffPath(t,n[i].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,i){var n=i.nodeName;"SPAN"===n?i.style.color=t:"IMG"!==n&&(i.filled=t!==Ot,this.setAttr("fillcolor",this.renderer.color(t,i,e,this)))},opacitySetter:Dt,rotationSetter:function(t,e,i){i=i.style,this[e]=i[e]=t,i.left=-at(ft(t*mt)+1)+"px",i.top=at(pt(t*mt))+"px"},strokeSetter:function(t,e,i){this.setAttr("strokecolor",this.renderer.color(t,i,e))},"stroke-widthSetter":function(t,e,i){i.stroked=!!t,this[e]=t,r(t)&&(t+="px"),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,i){"inherit"===t&&(t="visible"),this.shadows&&Gt(this.shadows,function(i){i.style[e]=t}),"DIV"===i.nodeName&&(t="hidden"===t?"-999em":0,_t||(i.style[e]=t?"visible":"hidden"),e="top"),i.style[e]=t},xSetter:function(t,e,i){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):i.style[e]=t},zIndexSetter:function(t,e,i){i.style[e]=t}},nt.VMLElement=zt=f(L,zt),zt.prototype.ySetter=zt.prototype.widthSetter=zt.prototype.heightSetter=zt.prototype.xSetter;var ce={Element:zt,isIE8:vt.indexOf("MSIE 8.0")>-1,init:function(t,e,i,n){var s;if(this.alignedObjects=[],n=this.createElement(Nt).css(Bt(this.getStyle(n),{position:"relative"})),s=n.element,t.appendChild(n.element),this.isVML=!0,this.box=s,this.boxWrapper=n,this.cache={},this.setSize(e,i,!1),!st.namespaces.hcv){st.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{st.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(r){st.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,e,i,s){var r=this.createElement(),o=n(t);return Bt(r,{members:[],count:0,left:(o?t.x:t)+1,top:(o?t.y:e)+1,width:(o?t.width:i)-1,height:(o?t.height:s)-1,getCSS:function(t){var e=t.element,i=e.nodeName,t=t.inverted,n=this.top-("shape"===i?e.offsetTop:0),s=this.left,e=s+this.width,r=n+this.height,n={clip:"rect("+at(t?s:n)+"px,"+at(t?r:e)+"px,"+at(t?e:r)+"px,"+at(t?n:s)+"px)"};return!t&&_t&&"DIV"===i&&Bt(n,{width:e+"px",height:r+"px"}),n},updateClipping:function(){Gt(r.members,function(t){t.element&&t.css(r.getCSS(t))})}})},color:function(t,e,i,n){var s,r,o,a=this,l=/^rgba/,c=Ot;if(t&&t.linearGradient?o="gradient":t&&t.radialGradient&&(o="pattern"),o){var h,u,d,f,g,m,v,y,b=t.linearGradient||t.radialGradient,_="",t=t.stops,x=[],w=function(){r=['<fill colors="'+x.join(",")+'" opacity="',g,'" o:opacity2="',f,'" type="',o,'" ',_,'focus="100%" method="any" />'],p(a.prepVML(r),null,null,e)};if(d=t[0],y=t[t.length-1],d[0]>0&&t.unshift([0,d[1]]),y[0]<1&&t.push([1,y[1]]),Gt(t,function(t,e){l.test(t[1])?(s=ae(t[1]),h=s.get("rgb"),u=s.get("a")):(h=t[1],u=1),x.push(100*t[0]+"% "+h),e?(g=u,m=h):(f=u,v=h)}),"fill"===i)if("gradient"===o)i=b.x1||b[0]||0,t=b.y1||b[1]||0,d=b.x2||b[2]||0,b=b.y2||b[3]||0,_='angle="'+(90-180*ot.atan((b-t)/(d-i))/gt)+'"',w();else{var k,c=b.r,T=2*c,C=2*c,S=b.cx,A=b.cy,E=e.radialReference,c=function(){E&&(k=n.getBBox(),S+=(E[0]-k.x)/k.width-.5,A+=(E[1]-k.y)/k.height-.5,T*=E[2]/k.width,C*=E[2]/k.height),_='src="'+R.global.VMLRadialGradientURL+'" size="'+T+","+C+'" origin="0.5,0.5" position="'+S+","+A+'" color2="'+v+'" ',w()};n.added?c():n.onAdd=c,c=m}else c=h}else l.test(t)&&"IMG"!==e.tagName?(s=ae(t),r=["<",i,' opacity="',s.get("a"),'"/>'],p(this.prepVML(r),null,null,e),c=s.get("rgb")):(c=e.getElementsByTagName(i),c.length&&(c[0].opacity=1,c[0].type="solid"),c=t);return c},prepVML:function(t){var e=this.isIE8,t=t.join("");return e?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):t.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):t=t.replace("<","<hcv:"),t},text:le.prototype.html,path:function(t){var e={coordsize:"10 10"};return s(t)?e.d=t:n(t)&&Bt(e,t),this.createElement("shape").attr(e)},circle:function(t,e,i){var s=this.symbol("circle");return n(t)&&(i=t.r,e=t.y,t=t.x),s.isCircle=!0,s.r=i,s.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:"highcharts-"+t,"class":"highcharts-"+t}),this.createElement(Nt).attr(e)},image:function(t,e,i,n,s){var r=this.createElement("img").attr({src:t});return arguments.length>1&&r.attr({x:e,y:i,width:n,height:s}),r},createElement:function(t){return"rect"===t?this.symbol(t):le.prototype.createElement.call(this,t)},invertChild:function(t,i){var n=this,s=i.style,r="IMG"===t.tagName&&t.style;
d(t,{flip:"x",left:e(s.width)-(r?e(r.top):1),top:e(s.height)-(r?e(r.left):1),rotation:-90}),Gt(t.childNodes,function(e){n.invertChild(e,t)})},symbols:{arc:function(t,e,i,n,s){var r=s.start,o=s.end,a=s.r||i||n,i=s.innerR,n=pt(r),l=ft(r),c=pt(o),h=ft(o);return o-r===0?["x"]:(r=["wa",t-a,e-a,t+a,e+a,t+a*n,e+a*l,t+a*c,e+a*h],s.open&&!i&&r.push("e","M",t,e),r.push("at",t-i,e-i,t+i,e+i,t+i*c,e+i*h,t+i*n,e+i*l,"x","e"),r.isArc=!0,r)},circle:function(t,e,i,n,s){return s&&(i=n=2*s.r),s&&s.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,s){return le.prototype.symbols[c(s)&&s.r?"callout":"square"].call(0,t,e,i,n,s)}}};nt.VMLRenderer=zt=function(){this.init.apply(this,arguments)},zt.prototype=t(le.prototype,ce),N=zt}le.prototype.measureSpanWidth=function(t,e){var i,n=st.createElement("span");return i=st.createTextNode(t),n.appendChild(i),d(n,e),this.box.appendChild(n),i=n.offsetWidth,T(n),i};var he;At&&(nt.CanVGRenderer=zt=function(){Tt="http://www.w3.org/1999/xhtml"},zt.prototype.symbols={},he=function(){function t(){var t,i=e.length;for(t=0;i>t;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&Wt(n,t),e.push(i)}}}(),N=zt),D.prototype={addLabel:function(){var e,i=this.axis,n=i.options,s=i.chart,r=i.categories,o=i.names,l=this.pos,h=n.labels,u=i.tickPositions,d=l===u[0],p=l===u[u.length-1],o=r?Ft(r[l],o[l],l):l,r=this.label,u=u.info;i.isDatetimeAxis&&u&&(e=n.dateTimeLabelFormats[u.higherRanks[l]||u.unitName]),this.isFirst=d,this.isLast=p,n=i.labelFormatter.call({axis:i,chart:s,isFirst:d,isLast:p,dateTimeLabelFormat:e,value:i.isLog?S(a(o)):o}),c(r)?r&&r.attr({text:n}):(this.labelLength=(this.label=r=c(n)&&h.enabled?s.renderer.text(n,0,0,h.useHTML).css(t(h.style)).add(i.labelGroup):null)&&r.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,i=this.axis,n=t.x,s=i.chart.chartWidth,r=i.chart.spacing,o=Ft(i.labelLeft,ut(i.pos,r[3])),r=Ft(i.labelRight,ht(i.pos+i.len,s-r[1])),a=this.label,l=this.rotation,c={left:0,center:.5,right:1}[i.labelAlign],h=a.getBBox().width,u=i.slotWidth,d=1,p={};l?0>l&&o>n-c*h?e=at(n/pt(l*mt)-o):l>0&&n+c*h>r&&(e=at((s-n)/pt(l*mt))):(s=n+(1-c)*h,o>n-c*h?u=t.x+u*(1-c)-o:s>r&&(u=r-t.x+u*c,d=-1),u=ut(i.slotWidth,u),u<i.slotWidth&&"center"===i.labelAlign&&(t.x+=d*(i.slotWidth-u-c*(i.slotWidth-ut(h,u)))),(h>u||i.autoRotation&&a.styles.width)&&(e=u)),e&&(p.width=e,i.options.labels.style.textOverflow||(p.textOverflow="ellipsis"),a.css(p))},getPosition:function(t,e,i,n){var s=this.axis,r=s.chart,o=n&&r.oldChartHeight||r.chartHeight;return{x:t?s.translate(e+i,null,null,n)+s.transB:s.left+s.offset+(s.opposite?(n&&r.oldChartWidth||r.chartWidth)-s.right-s.left:0),y:t?o-s.bottom+s.offset-(s.opposite?s.height:0):o-s.translate(e+i,null,null,n)-s.transB}},getLabelPosition:function(t,e,i,n,s,r,o,a){var l=this.axis,c=l.transA,h=l.reversed,u=l.staggerLines,d=l.tickRotCorr||{x:0,y:0},i=Ft(s.y,d.y+(2===l.side?8:-(i.getBBox().height/2))),t=t+s.x+d.x-(r&&n?r*c*(h?-1:1):0),e=e+i-(r&&!n?r*c*(h?1:-1):0);return u&&(e+=o/(a||1)%u*(l.labelOffset/u)),{x:t,y:at(e)}},getMarkPath:function(t,e,i,n,s,r){return r.crispLine(["M",t,e,"L",t+(s?0:-i),e+(s?i:0)],n)},render:function(t,e,i){var n=this.axis,s=n.options,r=n.chart.renderer,o=n.horiz,a=this.type,l=this.label,c=this.pos,h=s.labels,u=this.gridLine,d=a?a+"Grid":"grid",p=a?a+"Tick":"tick",f=s[d+"LineWidth"],g=s[d+"LineColor"],m=s[d+"LineDashStyle"],v=s[p+"Length"],d=Ft(s[p+"Width"],!a&&n.isXAxis?1:0),y=s[p+"Color"],b=s[p+"Position"],p=this.mark,_=h.step,x=!0,w=n.tickmarkOffset,k=this.getPosition(o,c,w,e),T=k.x,k=k.y,C=o&&T===n.pos+n.len||!o&&k===n.pos?-1:1,i=Ft(i,1);this.isActive=!0,f&&(c=n.getPlotLinePath(c+w,f*C,e,!0),u===P&&(u={stroke:g,"stroke-width":f},m&&(u.dashstyle=m),a||(u.zIndex=1),e&&(u.opacity=0),this.gridLine=u=f?r.path(c).attr(u).add(n.gridGroup):null),!e&&u&&c&&u[this.isNew?"attr":"animate"]({d:c,opacity:i})),d&&v&&("inside"===b&&(v=-v),n.opposite&&(v=-v),a=this.getMarkPath(T,k,v,d*C,o,r),p?p.animate({d:a,opacity:i}):this.mark=r.path(a).attr({stroke:y,"stroke-width":d,opacity:i}).add(n.axisGroup)),l&&!isNaN(T)&&(l.xy=k=this.getLabelPosition(T,k,l,o,h,w,t,_),this.isFirst&&!this.isLast&&!Ft(s.showFirstLabel,1)||this.isLast&&!this.isFirst&&!Ft(s.showLastLabel,1)?x=!1:o&&!n.isRadial&&!h.step&&!h.rotation&&!e&&0!==i&&this.handleOverflow(k),_&&t%_&&(x=!1),x&&!isNaN(k.y)?(k.opacity=i,l[this.isNew?"attr":"animate"](k),this.isNew=!1):l.attr("y",-9999))},destroy:function(){k(this,this.axis)}},nt.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},nt.PlotLineOrBand.prototype={render:function(){var e,i=this,n=i.axis,s=n.horiz,r=i.options,a=r.label,l=i.label,h=r.width,u=r.to,d=r.from,p=c(d)&&c(u),f=r.value,g=r.dashStyle,m=i.svgElem,v=[],y=r.color,b=r.zIndex,_=r.events,k={},T=n.chart.renderer;if(n.isLog&&(d=o(d),u=o(u),f=o(f)),h)v=n.getPlotLinePath(f,h),k={stroke:y,"stroke-width":h},g&&(k.dashstyle=g);else{if(!p)return;v=n.getPlotBandPath(d,u,r),y&&(k.fill=y),r.borderWidth&&(k.stroke=r.borderColor,k["stroke-width"]=r.borderWidth)}if(c(b)&&(k.zIndex=b),m)v?m.animate({d:v},null,m.onGetPath):(m.hide(),m.onGetPath=function(){m.show()},l&&(i.label=l=l.destroy()));else if(v&&v.length&&(i.svgElem=m=T.path(v).attr(k).add(),_))for(e in r=function(t){m.on(t,function(e){_[t].apply(i,[e])})},_)r(e);return a&&c(a.text)&&v&&v.length&&n.width>0&&n.height>0?(a=t({align:s&&p&&"center",x:s?!p&&4:10,verticalAlign:!s&&p&&"middle",y:s?p?16:10:p?6:-4,rotation:s&&!p&&90},a),l||(k={align:a.textAlign||a.align,rotation:a.rotation},c(b)&&(k.zIndex=b),i.label=l=T.text(a.text,0,0,a.useHTML).attr(k).css(a.style).add()),n=[v[1],v[4],p?v[6]:v[1]],p=[v[2],v[5],p?v[7]:v[2]],v=x(n),s=x(p),l.align(a,!1,{x:v,y:s,width:w(n)-v,height:w(p)-s}),l.show()):l&&l.hide(),i},destroy:function(){l(this.axis.plotLinesAndBands,this),delete this.axis,k(this)}};var ue=nt.Axis=function(){this.init.apply(this,arguments)};ue.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return nt.numberFormat(this.total,-1)},style:t(ne.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(t,e){var i=e.isX;this.chart=t,this.horiz=t.inverted?!i:i,this.coll=(this.isXAxis=i)?"xAxis":"yAxis",this.opposite=e.opposite,this.side=e.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);var n=this.options,s=n.type;this.labelFormatter=n.labels.formatter||this.defaultLabelFormatter,this.userOptions=e,this.minPixelPadding=0,this.reversed=n.reversed,this.zoomEnabled=n.zoomEnabled!==!1,this.categories=n.categories||"category"===s,this.names=this.names||[],this.isLog="logarithmic"===s,this.isDatetimeAxis="datetime"===s,this.isLinked=c(n.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=n.minRange||n.maxZoom,this.range=n.range,this.offset=n.offset||0,this.stacks={},this.oldStacks={},this.stacksTouched=0,this.min=this.max=null,this.crosshair=Ft(n.crosshair,u(t.options.tooltip.crosshairs)[i?0:1],!1);var r,n=this.options.events;-1===Xt(this,t.axes)&&(i&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&i&&this.reversed===P&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(r in n)Kt(this,r,n[r]);this.isLog&&(this.val2lin=o,this.lin2val=a)},setOptions:function(e){this.options=t(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],t(R[this.coll],e))},defaultLabelFormatter:function(){var t,e=this.axis,i=this.value,n=e.categories,s=this.dateTimeLabelFormat,r=R.lang.numericSymbols,o=r&&r.length,a=e.options.labels.format,e=e.isLog?i:e.tickInterval;if(a)t=v(a,this);else if(n)t=i;else if(s)t=$(s,i);else if(o&&e>=1e3)for(;o--&&t===P;)n=Math.pow(1e3,o+1),e>=n&&10*i%n===0&&null!==r[o]&&(t=nt.numberFormat(i/n,-1)+r[o]);return t===P&&(t=dt(i)>=1e4?nt.numberFormat(i,-1):nt.numberFormat(i,-1,P,"")),t},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.ignoreMinPadding=t.ignoreMaxPadding=null,t.buildStacks&&t.buildStacks(),Gt(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var n;n=i.options.threshold;var s;t.hasVisibleSeries=!0,t.isLog&&0>=n&&(n=null),t.isXAxis?(n=i.xData,n.length&&(t.dataMin=ut(Ft(t.dataMin,n[0]),x(n)),t.dataMax=ht(Ft(t.dataMax,n[0]),w(n)))):(i.getExtremes(),s=i.dataMax,i=i.dataMin,c(i)&&c(s)&&(t.dataMin=ut(Ft(t.dataMin,i),i),t.dataMax=ht(Ft(t.dataMax,s),s)),c(n)&&(t.dataMin>=n?(t.dataMin=n,t.ignoreMinPadding=!0):t.dataMax<n&&(t.dataMax=n,t.ignoreMaxPadding=!0)))}})},translate:function(t,e,i,n,s,o){var a=this.linkedParent||this,l=1,c=0,h=n?a.oldTransA:a.transA,n=n?a.oldMin:a.min,u=a.minPixelPadding,s=(a.doPostTranslate||a.isLog&&s)&&a.lin2val;return h||(h=a.transA),i&&(l*=-1,c=a.len),a.reversed&&(l*=-1,c-=l*(a.sector||a.len)),e?(t=t*l+c,t-=u,t=t/h+n,s&&(t=a.lin2val(t))):(s&&(t=a.val2lin(t)),"between"===o&&(o=.5),t=l*(t-n)*h+c+l*u+(r(o)?h*o*a.pointRange:0)),t},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,s){var r,o,a,l=this.chart,c=this.left,h=this.top,u=i&&l.oldChartHeight||l.chartHeight,d=i&&l.oldChartWidth||l.chartWidth;r=this.transB;var p=function(t,e,i){return(e>t||t>i)&&(n?t=ut(ht(e,t),i):a=!0),t},s=Ft(s,this.translate(t,null,null,i)),t=i=at(s+r);return r=o=at(u-s-r),isNaN(s)?a=!0:this.horiz?(r=h,o=u-this.bottom,t=i=p(t,c,c+this.width)):(t=c,i=d-this.right,r=o=p(r,h,h+this.height)),a&&!n?null:l.renderer.crispLine(["M",t,r,"L",i,o],e||1)},getLinearTickPositions:function(t,e,i){var n,s=S(lt(e/t)*t),o=S(ct(i/t)*t),a=[];if(e===i&&r(e))return[e];for(e=s;o>=e&&(a.push(e),e=S(e+t),e!==n);)n=e;return a},getMinorTickPositions:function(){var t,e=this.options,i=this.tickPositions,n=this.minorTickInterval,s=[],r=this.pointRangePadding||0;t=this.min-r;var r=this.max+r,o=r-t;if(o&&o/n<this.len/3)if(this.isLog)for(r=i.length,t=1;r>t;t++)s=s.concat(this.getLogTickPositions(n,i[t-1],i[t],!0));else if(this.isDatetimeAxis&&"auto"===e.minorTickInterval)s=s.concat(this.getTimeTicks(this.normalizeTimeTickInterval(n),t,r,e.startOfWeek));else for(i=t+(i[0]-t)%n;r>=i;i+=n)s.push(i);return 0!==s.length&&this.trimTicks(s,e.startOnTick,e.endOnTick),s},adjustForMinRange:function(){var t,e,i,n,s,r,o=this.options,a=this.min,l=this.max,h=this.dataMax-this.dataMin>=this.minRange;if(this.isXAxis&&this.minRange===P&&!this.isLog&&(c(o.min)||c(o.max)?this.minRange=null:(Gt(this.series,function(t){for(s=t.xData,i=r=t.xIncrement?1:s.length-1;i>0;i--)n=s[i]-s[i-1],(e===P||e>n)&&(e=n)}),this.minRange=ut(5*e,this.dataMax-this.dataMin))),l-a<this.minRange){var u=this.minRange;t=(u-l+a)/2,t=[a-t,Ft(o.min,a-t)],h&&(t[2]=this.dataMin),a=w(t),l=[a+u,Ft(o.max,a+u)],h&&(l[2]=this.dataMax),l=x(l),u>l-a&&(t[0]=l-u,t[1]=Ft(o.min,l-u),a=w(t))}this.min=a,this.max=l},setAxisTranslation:function(t){var e,n=this,s=n.max-n.min,r=n.axisPointRange||0,o=0,a=0,l=n.linkedParent,h=!!n.categories,u=n.transA,d=n.isXAxis;(d||h||r)&&(l?(o=l.minPointOffset,a=l.pointRangePadding):Gt(n.series,function(t){var l=h?1:d?t.pointRange:n.axisPointRange||0,u=t.options.pointPlacement,p=t.closestPointRange;l>s&&(l=0),r=ht(r,l),n.single||(o=ht(o,i(u)?0:l/2),a=ht(a,"on"===u?0:l)),!t.noSharedTooltip&&c(p)&&(e=c(e)?ut(e,p):p)}),l=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=o*=l,n.pointRangePadding=a*=l,n.pointRange=ut(r,s),d&&(n.closestPointRange=e)),t&&(n.oldTransA=u),n.translationSlope=n.transA=u=n.len/(s+a||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=u*o},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var e=this,i=e.chart,n=e.options,s=e.isLog,a=e.isDatetimeAxis,l=e.isXAxis,h=e.isLinked,u=n.maxPadding,d=n.minPadding,p=n.tickInterval,f=n.tickPixelInterval,g=e.categories;!a&&!g&&!h&&this.getTickAmount(),h?(e.linkedParent=i[e.coll][n.linkedTo],i=e.linkedParent.getExtremes(),e.min=Ft(i.min,i.dataMin),e.max=Ft(i.max,i.dataMax),n.type!==e.linkedParent.options.type&&C(11,1)):(e.min=Ft(e.userMin,n.min,e.dataMin),e.max=Ft(e.userMax,n.max,e.dataMax)),s&&(!t&&ut(e.min,Ft(e.dataMin,e.min))<=0&&C(10,1),e.min=S(o(e.min),15),e.max=S(o(e.max),15)),e.range&&c(e.max)&&(e.userMin=e.min=ht(e.min,e.minFromRange()),e.userMax=e.max,e.range=null),e.beforePadding&&e.beforePadding(),e.adjustForMinRange(),g||e.axisPointRange||e.usePercentage||h||!c(e.min)||!c(e.max)||!(i=e.max-e.min)||(c(n.min)||c(e.userMin)||!d||!(e.dataMin<0)&&e.ignoreMinPadding||(e.min-=i*d),c(n.max)||c(e.userMax)||!u||!(e.dataMax>0)&&e.ignoreMaxPadding||(e.max+=i*u)),r(n.floor)&&(e.min=ht(e.min,n.floor)),r(n.ceiling)&&(e.max=ut(e.max,n.ceiling)),e.tickInterval=e.min===e.max||void 0===e.min||void 0===e.max?1:h&&!p&&f===e.linkedParent.options.tickPixelInterval?p=e.linkedParent.tickInterval:Ft(p,this.tickAmount?(e.max-e.min)/ht(this.tickAmount-1,1):void 0,g?1:(e.max-e.min)*f/ht(e.len,f)),l&&!t&&Gt(e.series,function(t){t.processData(e.min!==e.oldMin||e.max!==e.oldMax)}),e.setAxisTranslation(!0),e.beforeSetTickPositions&&e.beforeSetTickPositions(),e.postProcessTickInterval&&(e.tickInterval=e.postProcessTickInterval(e.tickInterval)),e.pointRange&&(e.tickInterval=ht(e.pointRange,e.tickInterval)),t=Ft(n.minTickInterval,e.isDatetimeAxis&&e.closestPointRange),!p&&e.tickInterval<t&&(e.tickInterval=t),a||s||p||(e.tickInterval=b(e.tickInterval,null,y(e.tickInterval),Ft(n.allowDecimals,!(e.tickInterval>.5&&e.tickInterval<5&&e.max>1e3&&e.max<9999)),!!this.tickAmount)),!this.tickAmount&&this.len&&(e.tickInterval=e.unsquish()),this.setTickPositions()},setTickPositions:function(){var t,e,i=this.options,n=i.tickPositions,s=i.tickPositioner,r=i.startOnTick,o=i.endOnTick;this.tickmarkOffset=this.categories&&"between"===i.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===i.minorTickInterval&&this.tickInterval?this.tickInterval/5:i.minorTickInterval,this.tickPositions=t=n&&n.slice(),!t&&(t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,i.units),this.min,this.max,i.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),t.length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,s&&(s=s.apply(this,[this.min,this.max])))&&(this.tickPositions=t=s),this.isLinked||(this.trimTicks(t,r,o),this.min===this.max&&c(this.min)&&!this.tickAmount&&(e=!0,this.min-=.5,this.max+=.5),this.single=e,!n&&!s&&this.adjustTickAmount())},trimTicks:function(t,e,i){var n=t[0],s=t[t.length-1],r=this.minPointOffset||0;e?this.min=n:this.min-r>n&&t.shift(),i?this.max=s:this.max+r<s&&t.pop(),0===t.length&&c(n)&&t.push((s+n)/2)},getTickAmount:function(){var t,e={},i=this.options,n=i.tickAmount,s=i.tickPixelInterval;!c(i.tickInterval)&&this.len<s&&!this.isRadial&&!this.isLog&&i.startOnTick&&i.endOnTick&&(n=2),!n&&this.chart.options.chart.alignTicks!==!1&&i.alignTicks!==!1&&(Gt(this.chart[this.coll],function(i){var n=i.options,s=i.horiz,n=[s?n.left:n.top,s?n.width:n.height,n.pane].join(",");e[n]?i.series.length&&(t=!0):e[n]=1}),t&&(n=ct(this.len/s)+1)),4>n&&(this.finalTickAmt=n,n=5),this.tickAmount=n},adjustTickAmount:function(){var t=this.tickInterval,e=this.tickPositions,i=this.tickAmount,n=this.finalTickAmt,s=e&&e.length;if(i>s){for(;e.length<i;)e.push(S(e[e.length-1]+t));this.transA*=(s-1)/(i-1),this.max=e[e.length-1]}else s>i&&(this.tickInterval*=2,this.setTickPositions());if(c(n)){for(t=i=e.length;t--;)(3===n&&t%2===1||2>=n&&t>0&&i-1>t)&&e.splice(t,1);this.finalTickAmt=P}},setScale:function(){var t,e;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),e=this.len!==this.oldAxisLength,Gt(this.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(t=!0)}),e||t||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(t,e,i,n,s){var r=this,o=r.chart,i=Ft(i,!0);Gt(r.series,function(t){delete t.kdTree}),s=Bt(s,{min:t,max:e}),Zt(r,"setExtremes",s,function(){r.userMin=t,r.userMax=e,r.eventArgs=s,i&&o.redraw(n)})},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,s=this.options,r=ut(i,Ft(s.min,i)),s=ht(n,Ft(s.max,n));return this.allowZoomOutside||(c(i)&&r>=t&&(t=r),c(n)&&e>=s&&(e=s)),this.displayBtn=t!==P||e!==P,this.setExtremes(t,e,!1,P,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,i=e.offsetLeft||0,n=this.horiz,s=Ft(e.width,t.plotWidth-i+(e.offsetRight||0)),r=Ft(e.height,t.plotHeight),o=Ft(e.top,t.plotTop),e=Ft(e.left,t.plotLeft+i),i=/%$/;i.test(r)&&(r=parseFloat(r)/100*t.plotHeight),i.test(o)&&(o=parseFloat(o)/100*t.plotHeight+t.plotTop),this.left=e,this.top=o,this.width=s,this.height=r,this.bottom=t.chartHeight-r-o,this.right=t.chartWidth-s-e,this.len=ht(n?s:r,0),this.pos=n?e:o},getExtremes:function(){var t=this.isLog;return{min:t?S(a(this.min)):this.min,max:t?S(a(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,i=e?a(this.min):this.min,e=e?a(this.max):this.max;return null===t?t=0>e?e:i:i>t?t=i:t>e&&(t=e),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){return t=(Ft(t,0)-90*this.side+720)%360,t>15&&165>t?"right":t>195&&345>t?"left":"center"},unsquish:function(){var t,e,i,n=this.ticks,s=this.options.labels,r=this.horiz,o=this.tickInterval,a=o,l=this.len/(((this.categories?1:0)+this.max-this.min)/o),h=s.rotation,u=this.chart.renderer.fontMetrics(s.style.fontSize,n[0]&&n[0].label),d=Number.MAX_VALUE,p=function(t){return t/=l||1,t=t>1?ct(t):1,t*o};return r?(i=c(h)?[h]:l<Ft(s.autoRotationLimit,80)&&!s.staggerLines&&!s.step&&s.autoRotation)&&Gt(i,function(i){var n;(i===h||i&&i>=-90&&90>=i)&&(e=p(dt(u.h/ft(mt*i))),n=e+dt(i/360),d>n&&(d=n,t=i,a=e))}):s.step||(a=p(u.h)),this.autoRotation=i,this.labelRotation=t,a},renderUnsquish:function(){var e,n=this.chart,s=n.renderer,r=this.tickPositions,o=this.ticks,a=this.options.labels,l=this.horiz,c=n.margin,h=this.categories?r.length:r.length-1,u=this.slotWidth=l&&!a.step&&!a.rotation&&(this.staggerLines||1)*n.plotWidth/h||!l&&(c[3]&&c[3]-n.spacing[3]||.33*n.chartWidth),d=ht(1,at(u-2*(a.padding||5))),p={},c=s.fontMetrics(a.style.fontSize,o[0]&&o[0].label),h=a.style.textOverflow,f=0;if(i(a.rotation)||(p.rotation=a.rotation||0),this.autoRotation)Gt(r,function(t){(t=o[t])&&t.labelLength>f&&(f=t.labelLength)}),f>d&&f>c.h?p.rotation=this.labelRotation:this.labelRotation=0;else if(u&&(e={width:d+"px"},!h))for(e.textOverflow="clip",u=r.length;!l&&u--;)d=r[u],(d=o[d].label)&&("ellipsis"===d.styles.textOverflow&&d.css({textOverflow:"clip"}),d.getBBox().height>this.len/r.length-(c.h-c.f)&&(d.specCss={textOverflow:"ellipsis"}));p.rotation&&(e={width:(f>.5*n.chartHeight?.33*n.chartHeight:n.chartHeight)+"px"},!h)&&(e.textOverflow="ellipsis"),this.labelAlign=p.align=a.align||this.autoLabelAlign(this.labelRotation),Gt(r,function(i){var n=(i=o[i])&&i.label;n&&(e&&n.css(t(e,n.specCss)),delete n.specCss,n.attr(p),i.rotation=p.rotation)}),this.tickRotCorr=s.rotCorr(c.b,this.labelRotation||0,2===this.side)},hasData:function(){return this.hasVisibleSeries||c(this.min)&&c(this.max)&&!!this.tickPositions},getOffset:function(){var t,e,i,n,s=this,r=s.chart,o=r.renderer,a=s.options,l=s.tickPositions,h=s.ticks,u=s.horiz,d=s.side,p=r.inverted?[1,0,3,2][d]:d,f=0,g=0,m=a.title,v=a.labels,y=0,b=r.axisOffset,r=r.clipOffset,_=[-1,1,1,-1][d];if(t=s.hasData(),s.showAxis=e=t||Ft(a.showEmpty,!0),s.staggerLines=s.horiz&&v.staggerLines,s.axisGroup||(s.gridGroup=o.g("grid").attr({zIndex:a.gridZIndex||1}).add(),s.axisGroup=o.g("axis").attr({zIndex:a.zIndex||2}).add(),s.labelGroup=o.g("axis-labels").attr({zIndex:v.zIndex||7}).addClass("highcharts-"+s.coll.toLowerCase()+"-labels").add()),t||s.isLinked)Gt(l,function(t){h[t]?h[t].addLabel():h[t]=new D(s,t)}),s.renderUnsquish(),Gt(l,function(t){(0===d||2===d||{1:"left",3:"right"}[d]===s.labelAlign)&&(y=ht(h[t].getLabelSize(),y))}),s.staggerLines&&(y*=s.staggerLines,s.labelOffset=y);else for(n in h)h[n].destroy(),delete h[n];m&&m.text&&m.enabled!==!1&&(s.axisTitle||(s.axisTitle=o.text(m.text,0,0,m.useHTML).attr({zIndex:7,rotation:m.rotation||0,align:m.textAlign||{low:"left",middle:"center",high:"right"}[m.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(m.style).add(s.axisGroup),s.axisTitle.isNew=!0),e&&(f=s.axisTitle.getBBox()[u?"height":"width"],i=m.offset,g=c(i)?0:Ft(m.margin,u?5:10)),s.axisTitle[e?"show":"hide"]()),s.offset=_*Ft(a.offset,b[d]),s.tickRotCorr=s.tickRotCorr||{x:0,y:0},o=2===d?s.tickRotCorr.y:0,u=y+g+(y&&_*(u?Ft(v.y,s.tickRotCorr.y+8):v.x)-o),s.axisTitleMargin=Ft(i,u),b[d]=ht(b[d],s.axisTitleMargin+f+_*s.offset,u),a=a.offset?0:2*lt(a.lineWidth/2),r[p]=ht(r[p],a)},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,s=this.horiz,r=this.left+(i?this.width:0)+n,n=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine(["M",s?this.left:r,s?n:this.top,"L",s?e.chartWidth-this.right:r,s?n:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,i=this.left,n=this.top,s=this.len,r=this.options.title,o=t?i:n,a=this.opposite,l=this.offset,c=r.x||0,h=r.y||0,u=e(r.style.fontSize||12),s={low:o+(t?0:s),middle:o+s/2,high:o+(t?s:0)}[r.align],i=(t?n+this.height:i)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?u:0);return{x:t?s+c:i+(a?this.width:0)+l+c,y:t?i+h-(a?this.height:0)+l:s+h}},render:function(){var t,e,i,n=this,s=n.chart,r=s.renderer,o=n.options,l=n.isLog,h=n.isLinked,u=n.tickPositions,d=n.axisTitle,p=n.ticks,f=n.minorTicks,g=n.alternateBands,m=o.stackLabels,v=o.alternateGridColor,y=n.tickmarkOffset,b=o.lineWidth,_=s.hasRendered&&c(n.oldMin)&&!isNaN(n.oldMin),x=n.showAxis,w=r.globalAnimation;n.labelEdge.length=0,n.overlap=!1,Gt([p,f,g],function(t){for(var e in t)t[e].isActive=!1}),(n.hasData()||h)&&(n.minorTickInterval&&!n.categories&&Gt(n.getMinorTickPositions(),function(t){f[t]||(f[t]=new D(n,t,"minor")),_&&f[t].isNew&&f[t].render(null,!0),f[t].render(null,!1,1)}),u.length&&(Gt(u,function(t,e){(!h||t>=n.min&&t<=n.max)&&(p[t]||(p[t]=new D(n,t)),_&&p[t].isNew&&p[t].render(e,!0,.1),p[t].render(e))}),y&&(0===n.min||n.single))&&(p[-1]||(p[-1]=new D(n,-1,null,!0)),p[-1].render(-1)),v&&Gt(u,function(t,s){s%2===0&&t<n.max&&(g[t]||(g[t]=new nt.PlotLineOrBand(n)),e=t+y,i=u[s+1]!==P?u[s+1]+y:n.max,g[t].options={from:l?a(e):e,to:l?a(i):i,color:v},g[t].render(),g[t].isActive=!0)}),n._addedPlotLB||(Gt((o.plotLines||[]).concat(o.plotBands||[]),function(t){n.addPlotBandOrLine(t)}),n._addedPlotLB=!0)),Gt([p,f,g],function(t){var e,i,n=[],r=w?w.duration||500:0,o=function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));t!==g&&s.hasRendered&&r?r&&setTimeout(o,r):o()}),b&&(t=n.getLinePath(b),n.axisLine?n.axisLine.animate({d:t}):n.axisLine=r.path(t).attr({stroke:o.lineColor,"stroke-width":b,zIndex:7}).add(n.axisGroup),n.axisLine[x?"show":"hide"]()),d&&x&&(d[d.isNew?"attr":"animate"](n.getTitlePosition()),d.isNew=!1),m&&m.enabled&&n.renderStackTotals(),n.isDirty=!1},redraw:function(){this.render(),Gt(this.plotLinesAndBands,function(t){t.render()}),Gt(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,i=this,n=i.stacks,s=i.plotLinesAndBands;t||Jt(i);for(e in n)k(n[e]),n[e]=null;for(Gt([i.ticks,i.minorTicks,i.alternateBands],function(t){k(t)}),t=s.length;t--;)s[t].destroy();Gt("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(t){i[t]&&(i[t]=i[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){var i,n=this.crosshair,s=n.animation;!this.crosshair||(c(e)||!Ft(this.crosshair.snap,!0))===!1||e&&e.series&&e.series[this.coll]!==this?this.hideCrosshair():(Ft(n.snap,!0)?c(e)&&(i=this.isXAxis?e.plotX:this.len-e.plotY):i=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,i=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:Ft(e.stackY,e.y))||null:this.getPlotLinePath(null,null,null,null,i)||null,null===i?this.hideCrosshair():this.cross?this.cross.attr({visibility:"visible"})[s?"animate":"attr"]({d:i},s):(s=this.categories&&!this.isRadial,s={"stroke-width":n.width||(s?this.transA:1),stroke:n.color||(s?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:n.zIndex||2},n.dashStyle&&(s.dashstyle=n.dashStyle),this.cross=this.chart.renderer.path(i).attr(s).add()))},hideCrosshair:function(){this.cross&&this.cross.hide()}},Bt(ue.prototype,{getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e,null,null,!0),n=this.getPlotLinePath(t,null,null,!0);return n&&i&&n.toString()!==i.toString()?n.push(i[4],i[5],i[1],i[2]):n=null,n},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new nt.PlotLineOrBand(this,t).render(),n=this.userOptions;return i&&(e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=this.options,n=this.userOptions,s=e.length;s--;)e[s].id===t&&e[s].destroy();Gt([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(e){for(s=e.length;s--;)e[s].id===t&&l(e,e[s])})}}),ue.prototype.getTimeTicks=function(t,e,i,n){var s,r=[],o={},a=R.global.useUTC,l=new F(e-m(e)),h=t.unitRange,u=t.count;if(c(e)){l[Q](h>=B.second?0:u*lt(l.getMilliseconds()/u)),h>=B.second&&l[K](h>=B.minute?0:u*lt(l.getSeconds()/u)),h>=B.minute&&l[J](h>=B.hour?0:u*lt(l[U]()/u)),h>=B.hour&&l[Z](h>=B.day?0:u*lt(l[W]()/u)),h>=B.day&&l[tt](h>=B.month?1:u*lt(l[G]()/u)),h>=B.month&&(l[et](h>=B.year?0:u*lt(l[Y]()/u)),s=l[V]()),h>=B.year&&(s-=s%u,l[it](s)),h===B.week&&l[tt](l[G]()-l[X]()+Ft(n,1)),e=1,(q||z)&&(l=l.getTime(),l=new F(l+m(l))),s=l[V]();for(var n=l.getTime(),d=l[Y](),p=l[G](),f=(B.day+(a?m(l):6e4*l.getTimezoneOffset()))%B.day;i>n;)r.push(n),h===B.year?n=H(s+e*u,0):h===B.month?n=H(s,d+e*u):a||h!==B.day&&h!==B.week?n+=h*u:n=H(s,d,p+e*u*(h===B.day?1:7)),e++;r.push(n),Gt(Yt(r,function(t){return h<=B.hour&&t%B.day===f}),function(t){o[t]="day"})}return r.info=Bt(t,{higherRanks:o,totalRange:h*u}),r},ue.prototype.normalizeTimeTickInterval=function(t,e){var i,n=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],s=n[n.length-1],r=B[s[0]],o=s[1];for(i=0;i<n.length&&(s=n[i],r=B[s[0]],o=s[1],!(n[i+1]&&t<=(r*o[o.length-1]+B[n[i+1][0]])/2));i++);return r===B.year&&5*r>t&&(o=[1,2,5]),n=b(t/r,o,"year"===s[0]?ht(y(t/r),1):1),{unitRange:r,count:n,unitName:s[0]}},ue.prototype.getLogTickPositions=function(t,e,i,n){var s=this.options,r=this.len,l=[];if(n||(this._minorAutoInterval=null),t>=.5)t=at(t),l=this.getLinearTickPositions(t,e,i);else if(t>=.08)for(var c,h,u,d,p,r=lt(e),s=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];i+1>r&&!p;r++)for(h=s.length,c=0;h>c&&!p;c++)u=o(a(r)*s[c]),u>e&&(!n||i>=d)&&d!==P&&l.push(d),d>i&&(p=!0),d=u;else e=a(e),i=a(i),t=s[n?"minorTickInterval":"tickInterval"],t=Ft("auto"===t?null:t,this._minorAutoInterval,(i-e)*(s.tickPixelInterval/(n?5:1))/((n?r/this.tickPositions.length:r)||1)),t=b(t,null,y(t)),l=Qt(this.getLinearTickPositions(t,e,i),o),n||(this._minorAutoInterval=t/5);return n||(this.tickInterval=t),l};var de=nt.Tooltip=function(){this.init.apply(this,arguments)};de.prototype={init:function(t,i){var n=i.borderWidth,s=i.style,r=e(s.padding);this.chart=t,this.options=i,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,i.shape||"callout",null,null,i.useHTML,null,"tooltip").attr({padding:r,fill:i.backgroundColor,"stroke-width":n,r:i.borderRadius,zIndex:8}).css(s).css({padding:0}).add().attr({y:-9999}),At||this.label.shadow(i.shadow),this.shared=i.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,e,i,n){var s=this,r=s.now,o=s.options.animation!==!1&&!s.isHidden&&(dt(t-r.x)>1||dt(e-r.y)>1),a=s.followPointer||s.len>1;Bt(r,{x:o?(2*r.x+t)/3:t,y:o?(r.y+e)/2:e,anchorX:a?P:o?(2*r.anchorX+i)/3:i,anchorY:a?P:o?(r.anchorY+n)/2:n}),s.label.attr(r),o&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(t,e,i,n)},32))},hide:function(t){var e=this;clearTimeout(this.hideTimer),this.isHidden||(this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},Ft(t,this.options.hideDelay,500)))},getAnchor:function(t,e){var i,n,s,r=this.chart,o=r.inverted,a=r.plotTop,l=r.plotLeft,c=0,h=0,t=u(t);return i=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===P&&(e=r.pointer.normalize(e)),i=[e.chartX-r.plotLeft,e.chartY-a]),i||(Gt(t,function(t){n=t.series.yAxis,s=t.series.xAxis,c+=t.plotX+(!o&&s?s.left-l:0),h+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!o&&n?n.top-a:0)}),c/=t.length,h/=t.length,i=[o?r.plotWidth-h:c,this.shared&&!o&&t.length>1&&e?e.chartY-a:o?r.plotHeight-c:h]),Qt(i,at)},getPosition:function(t,e,i){var n,s=this.chart,r=this.distance,o={},a=i.h||0,l=["y",s.chartHeight,e,i.plotY+s.plotTop,s.plotTop,s.plotTop+s.plotHeight],c=["x",s.chartWidth,t,i.plotX+s.plotLeft,s.plotLeft,s.plotLeft+s.plotWidth],h=Ft(i.ttBelow,s.inverted&&!i.negative||!s.inverted&&i.negative),u=function(t,e,i,n,s,l){var c=n-r>i,u=e>n+r+i,d=n-r-i;if(n+=r,h&&u)o[t]=n;else if(!h&&c)o[t]=d;else if(c)o[t]=ut(l-i,0>d-a?d:d-a);else{if(!u)return!1;o[t]=ht(s,n+a+i>e?n:n+a)}},d=function(t,e,i,n){return r>n||n>e-r?!1:void(o[t]=i/2>n?1:n>e-i/2?e-i-2:n-i/2)},p=function(t){var e=l;l=c,c=e,n=t},f=function(){u.apply(0,l)!==!1?d.apply(0,c)===!1&&!n&&(p(!0),f()):n?o.x=o.y=0:(p(!0),f())};return(s.inverted||this.len>1)&&p(),f(),o},defaultFormatter:function(t){var e,i=this.points||u(this);return e=[t.tooltipFooterHeaderFormatter(i[0])],e=e.concat(t.bodyFormatter(i)),e.push(t.tooltipFooterHeaderFormatter(i[0],!0)),e.join("")},refresh:function(t,e){var i,n,s,r,o=this.chart,a=this.label,l=this.options,c={},h=[];r=l.formatter||this.defaultFormatter;var d,c=o.hoverPoints,p=this.shared;clearTimeout(this.hideTimer),this.followPointer=u(t)[0].series.tooltipOptions.followPointer,s=this.getAnchor(t,e),i=s[0],n=s[1],!p||t.series&&t.series.noSharedTooltip?c=t.getLabelConfig():(o.hoverPoints=t,c&&Gt(c,function(t){t.setState()}),Gt(t,function(t){t.setState("hover"),h.push(t.getLabelConfig())}),c={x:t[0].category,y:t[0].y},c.points=h,this.len=h.length,t=t[0]),r=r.call(c,this),c=t.series,this.distance=Ft(c.tooltipOptions.distance,16),r===!1?this.hide():(this.isHidden&&(ie(a),a.attr("opacity",1).show()),a.attr({text:r}),d=l.borderColor||t.color||c.color||"#606060",a.attr({stroke:d}),this.updatePosition({plotX:i,plotY:n,negative:t.negative,ttBelow:t.ttBelow,h:s[2]||0}),this.isHidden=!1),Zt(o,"tooltipRefresh",{text:r,x:i+o.plotLeft,y:n+o.plotTop,borderColor:d})},updatePosition:function(t){var e=this.chart,i=this.label,i=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);
this.move(at(i.x),at(i.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getXDateFormat:function(t,e,i){var n,s,r,e=e.dateTimeLabelFormats,o=i&&i.closestPointRange,a={millisecond:15,second:12,minute:9,hour:6,day:3},l="millisecond";if(o){r=$("%m-%d %H:%M:%S.%L",t.x);for(s in B){if(o===B.week&&+$("%w",t.x)===i.options.startOfWeek&&"00:00:00.000"===r.substr(6)){s="week";break}if(B[s]>o){s=l;break}if(a[s]&&r.substr(a[s])!=="01-01 00:00:00.000".substr(a[s]))break;"week"!==s&&(l=s)}s&&(n=e[s])}else n=e.day;return n||e.year},tooltipFooterHeaderFormatter:function(t,e){var i=e?"footer":"header",n=t.series,s=n.tooltipOptions,o=s.xDateFormat,a=n.xAxis,l=a&&"datetime"===a.options.type&&r(t.key),i=s[i+"Format"];return l&&!o&&(o=this.getXDateFormat(t,s,a)),l&&o&&(i=i.replace("{point.key}","{point.key:"+o+"}")),v(i,{point:t,series:n})},bodyFormatter:function(t){return Qt(t,function(t){var e=t.series.tooltipOptions;return(e.pointFormatter||t.point.tooltipFormatter).call(t.point,e.pointFormat)})}};var pe;O=st.documentElement.ontouchstart!==P;var fe=nt.Pointer=function(t,e){this.init(t,e)};if(fe.prototype={init:function(t,e){var i,n=e.chart,s=n.events,r=At?"":n.zoomType,n=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(r),this.zoomY=r=/y/.test(r),this.zoomHor=i&&!n||r&&n,this.zoomVert=r&&!n||i&&n,this.hasZoom=i||r,this.runChartClick=s&&!!s.click,this.pinchDown=[],this.lastValidTouch={},nt.Tooltip&&e.tooltip.enabled&&(t.tooltip=new de(t,e.tooltip),this.followTouchMove=Ft(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(t,e){var i,n,t=t||window.event,t=te(t);return t.target||(t.target=t.srcElement),n=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t,e||(this.chartPosition=e=Vt(this.chart.container)),n.pageX===P?(i=ht(t.x,t.clientX-e.left),n=t.y):(i=n.pageX-e.left,n=n.pageY-e.top),Bt(t,{chartX:at(i),chartY:at(n)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return Gt(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},runPointActions:function(t){var e,i,n,s,r,o=this.chart,a=o.series,l=o.tooltip,c=l?l.shared:!1,h=o.hoverPoint,u=o.hoverSeries,d=o.chartWidth,p=[];if(!c&&!u)for(e=0;e<a.length;e++)(a[e].directTouch||!a[e].options.stickyTracking)&&(a=[]);if(!c&&u&&u.directTouch&&h?s=h:(Gt(a,function(e){i=e.noSharedTooltip&&c,n=!c&&e.directTouch,e.visible&&!i&&!n&&Ft(e.options.enableMouseTracking,!0)&&(r=e.searchPoint(t,!i&&1===e.kdDimensions))&&p.push(r)}),Gt(p,function(t){t&&"number"==typeof t.dist&&t.dist<d&&(d=t.dist,s=t)})),s&&(s!==this.prevKDPoint||l&&l.isHidden)){if(c&&!s.series.noSharedTooltip){for(e=p.length;e--;)(p[e].clientX!==s.clientX||p[e].series.noSharedTooltip)&&p.splice(e,1);p.length&&l&&l.refresh(p,t),Gt(p,function(e){e.onMouseOver(t,e!==(u&&u.directTouch&&h||s))})}else l&&l.refresh(s,t),u&&u.directTouch||s.onMouseOver(t);this.prevKDPoint=s}else a=u&&u.tooltipOptions.followPointer,l&&a&&!l.isHidden&&(a=l.getAnchor([{}],t),l.updatePosition({plotX:a[0],plotY:a[1]}));l&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(t){It[pe]&&It[pe].pointer.onDocumentMouseMove(t)},Kt(st,"mousemove",this._onDocumentMouseMove)),Gt(o.axes,function(e){e.drawCrosshair(t,Ft(s,h))})},reset:function(t,e){var i=this.chart,n=i.hoverSeries,s=i.hoverPoint,r=i.hoverPoints,o=i.tooltip,a=o&&o.shared?r:s;(t=t&&o&&a)&&u(a)[0].plotX===P&&(t=!1),t?(o.refresh(a),s&&(s.setState(s.state,!0),Gt(i.axes,function(t){Ft(t.options.crosshair&&t.options.crosshair.snap,!0)?t.drawCrosshair(null,s):t.hideCrosshair()}))):(s&&s.onMouseOut(),r&&Gt(r,function(t){t.setState()}),n&&n.onMouseOut(),o&&o.hide(e),this._onDocumentMouseMove&&(Jt(st,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),Gt(i.axes,function(t){t.hideCrosshair()}),this.hoverX=i.hoverPoints=i.hoverPoint=null)},scaleGroups:function(t,e){var i,n=this.chart;Gt(n.series,function(s){i=t||s.getPlotBox(),s.xAxis&&s.xAxis.zoomEnabled&&(s.group.attr(i),s.markerGroup&&(s.markerGroup.attr(i),s.markerGroup.clip(e?n.clipRect:null)),s.dataLabelsGroup&&s.dataLabelsGroup.attr(i))}),n.clipRect.attr(e||n.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i=this.chart,n=i.options.chart,s=t.chartX,r=t.chartY,o=this.zoomHor,a=this.zoomVert,l=i.plotLeft,c=i.plotTop,h=i.plotWidth,u=i.plotHeight,d=this.selectionMarker,p=this.mouseDownX,f=this.mouseDownY,g=n.panKey&&t[n.panKey+"Key"];d&&d.touch||(l>s?s=l:s>l+h&&(s=l+h),c>r?r=c:r>c+u&&(r=c+u),this.hasDragged=Math.sqrt(Math.pow(p-s,2)+Math.pow(f-r,2)),this.hasDragged>10&&(e=i.isInsidePlot(p-l,f-c),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!g&&!d&&(this.selectionMarker=d=i.renderer.rect(l,c,o?1:h,a?1:u,0).attr({fill:n.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),d&&o&&(s-=p,d.attr({width:dt(s),x:(s>0?0:s)+p})),d&&a&&(s=r-f,d.attr({height:dt(s),y:(s>0?0:s)+f})),e&&!d&&n.panning&&i.pan(t,n.panning)))},drop:function(t){var e=this,i=this.chart,n=this.hasPinched;if(this.selectionMarker){var s,r={xAxis:[],yAxis:[],originalEvent:t.originalEvent||t},o=this.selectionMarker,a=o.attr?o.attr("x"):o.x,l=o.attr?o.attr("y"):o.y,h=o.attr?o.attr("width"):o.width,u=o.attr?o.attr("height"):o.height;(this.hasDragged||n)&&(Gt(i.axes,function(i){if(i.zoomEnabled&&c(i.min)&&(n||e[{xAxis:"zoomX",yAxis:"zoomY"}[i.coll]])){var o=i.horiz,d="touchend"===t.type?i.minPixelPadding:0,p=i.toValue((o?a:l)+d),o=i.toValue((o?a+h:l+u)-d);r[i.coll].push({axis:i,min:ut(p,o),max:ht(p,o)}),s=!0}}),s&&Zt(i,"selection",r,function(t){i.zoom(Bt(t,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(d(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){It[pe]&&It[pe].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition,t=this.normalize(t,i);i&&!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){var t=It[pe];t&&(t.pointer.reset(),t.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;pe=e.index,t=this.normalize(t),t.returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),(this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop))&&!e.openMenu&&this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=h(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf("highcharts-container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,i=(t=t.relatedTarget||t.toElement)&&t.point&&t.point.series;!e||e.options.stickyTracking||this.inClass(t,"highcharts-tooltip")||i===e||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,i=e.hoverPoint,n=e.plotLeft,s=e.plotTop,t=this.normalize(t);t.originalEvent=t,e.cancelClick||(i&&this.inClass(t.target,"highcharts-tracker")?(Zt(i.series,"click",Bt(t,{point:i})),e.hoverPoint&&i.firePointEvent("click",t)):(Bt(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-n,t.chartY-s)&&Zt(e,"click",t)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},Kt(e,"mouseleave",t.onContainerMouseLeave),1===Pt&&Kt(st,"mouseup",t.onDocumentMouseUp),O&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},1===Pt&&Kt(st,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;Jt(this.chart.container,"mouseleave",this.onContainerMouseLeave),Pt||(Jt(st,"mouseup",this.onDocumentMouseUp),Jt(st,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(t in this)this[t]=null}},Bt(nt.Pointer.prototype,{pinchTranslate:function(t,e,i,n,s,r){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,i,n,s,r),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,i,n,s,r)},pinchTranslateDirection:function(t,e,i,n,s,r,o,a){var l,c,h,u=this.chart,d=t?"x":"y",p=t?"X":"Y",f="chart"+p,g=t?"width":"height",m=u["plot"+(t?"Left":"Top")],v=a||1,y=u.inverted,b=u.bounds[t?"h":"v"],_=1===e.length,x=e[0][f],w=i[0][f],k=!_&&e[1][f],T=!_&&i[1][f],i=function(){!_&&dt(x-k)>20&&(v=a||dt(w-T)/dt(x-k)),c=(m-w)/v+x,l=u["plot"+(t?"Width":"Height")]/v};i(),e=c,e<b.min?(e=b.min,h=!0):e+l>b.max&&(e=b.max-l,h=!0),h?(w-=.8*(w-o[d][0]),_||(T-=.8*(T-o[d][1])),i()):o[d]=[w,T],y||(r[d]=c-m,r[g]=l),r=y?1/v:v,s[g]=l,s[d]=e,n[y?t?"scaleY":"scaleX":"scale"+p]=v,n["translate"+p]=r*m+(w-r*x)},pinch:function(t){var e=this,i=e.chart,n=e.pinchDown,s=t.touches,r=s.length,o=e.lastValidTouch,a=e.hasZoom,l=e.selectionMarker,c={},h=1===r&&(e.inClass(t.target,"highcharts-tracker")&&i.runTrackerClick||e.runChartClick),u={};r>1&&(e.initiated=!0),a&&e.initiated&&!h&&t.preventDefault(),Qt(s,function(t){return e.normalize(t)}),"touchstart"===t.type?(Gt(s,function(t,e){n[e]={chartX:t.chartX,chartY:t.chartY}}),o.x=[n[0].chartX,n[1]&&n[1].chartX],o.y=[n[0].chartY,n[1]&&n[1].chartY],Gt(i.axes,function(t){if(t.zoomEnabled){var e=i.bounds[t.horiz?"h":"v"],n=t.minPixelPadding,s=t.toPixels(Ft(t.options.min,t.dataMin)),r=t.toPixels(Ft(t.options.max,t.dataMax)),o=ut(s,r),s=ht(s,r);e.min=ut(t.pos,o-n),e.max=ht(t.pos+t.len,s+n)}}),e.res=!0):n.length&&(l||(e.selectionMarker=l=Bt({destroy:Dt,touch:!0},i.plotBox)),e.pinchTranslate(n,s,c,l,u,o),e.hasPinched=a,e.scaleGroups(c,u),!a&&e.followTouchMove&&1===r?this.runPointActions(e.normalize(t)):e.res&&(e.res=!1,this.reset(!1,0)))},touch:function(t,e){var i=this.chart;pe=i.index,1===t.touches.length?(t=this.normalize(t),i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop)&&!i.openMenu?(e&&this.runPointActions(t),this.pinch(t)):e&&this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(t){this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(t){It[pe]&&It[pe].pointer.drop(t)}}),rt.PointerEvent||rt.MSPointerEvent){var ge={},me=!!rt.PointerEvent,ve=function(){var t,e=[];e.item=function(t){return this[t]};for(t in ge)ge.hasOwnProperty(t)&&e.push({pageX:ge[t].pageX,pageY:ge[t].pageY,target:ge[t].target});return e},ye=function(t,e,i,n){t=t.originalEvent||t,"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!It[pe]||(n(t),n=It[pe].pointer,n[e]({type:i,target:t.currentTarget,preventDefault:Dt,touches:ve()}))};Bt(fe.prototype,{onContainerPointerDown:function(t){ye(t,"onContainerTouchStart","touchstart",function(t){ge[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){ye(t,"onContainerTouchMove","touchmove",function(t){ge[t.pointerId]={pageX:t.pageX,pageY:t.pageY},ge[t.pointerId].target||(ge[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){ye(t,"onDocumentTouchEnd","touchend",function(t){delete ge[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,me?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,me?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(st,me?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),Ht(fe.prototype,"init",function(t,e,i){t.call(this,e,i),this.hasZoom&&d(e.container,{"-ms-touch-action":Ot,"touch-action":Ot})}),Ht(fe.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(Kt)}),Ht(fe.prototype,"destroy",function(t){this.batchMSEvents(Jt),t.call(this)})}var be=nt.Legend=function(t,e){this.init(t,e)};be.prototype={init:function(e,i){var n=this,s=i.itemStyle,r=i.itemMarginTop||0;this.options=i,i.enabled&&(n.itemStyle=s,n.itemHiddenStyle=t(s,i.itemHiddenStyle),n.itemMarginTop=r,n.padding=s=Ft(i.padding,8),n.initialItemX=s,n.initialItemY=s-5,n.maxItemWidth=0,n.chart=e,n.itemHeight=0,n.symbolWidth=Ft(i.symbolWidth,16),n.pages=[],n.render(),Kt(n.chart,"endResize",function(){n.positionCheckboxes()}))},colorizeItem:function(t,e){var i,n=this.options,s=t.legendItem,r=t.legendLine,o=t.legendSymbol,a=this.itemHiddenStyle.color,n=e?n.itemStyle.color:a,l=e?t.legendColor||t.color||"#CCC":a,a=t.options&&t.options.marker,c={fill:l};if(s&&s.css({fill:n,color:n}),r&&r.attr({stroke:l}),o){if(a&&o.isMarker)for(i in c.stroke=l,a=t.convertAttribs(a))s=a[i],s!==P&&(c[i]=s);o.attr(c)}},positionItem:function(t){var e=this.options,i=e.symbolPadding,e=!e.rtl,n=t._legendItemPos,s=n[0],n=n[1],r=t.checkbox;(t=t.legendGroup)&&t.element&&t.translate(e?s:this.legendWidth-s-2*i-4,n),r&&(r.x=s,r.y=n)},destroyItem:function(t){var e=t.checkbox;Gt(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&T(t.checkbox)},destroy:function(){var t=this.group,e=this.box;e&&(this.box=e.destroy()),t&&(this.group=t.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(e=i.translateY,Gt(this.allItems,function(s){var r,o=s.checkbox;o&&(r=e+o.y+(t||0)+3,d(o,{left:i.translateX+s.checkboxOffset+o.x-20+"px",top:r+"px",display:r>e-6&&e+n-6>r?"":Ot}))}))},renderTitle:function(){var t=this.padding,e=this.options.title,i=0;e.text&&(this.title||(this.title=this.chart.renderer.label(e.text,t-3,t-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(e.style).add(this.group)),t=this.title.getBBox(),i=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:i})),this.titleHeight=i},setText:function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?v(e.labelFormat,t):e.labelFormatter.call(t)})},renderItem:function(e){var i=this.chart,n=i.renderer,s=this.options,r="horizontal"===s.layout,o=this.symbolWidth,a=s.symbolPadding,l=this.itemStyle,c=this.itemHiddenStyle,h=this.padding,u=r?Ft(s.itemDistance,20):0,d=!s.rtl,p=s.width,f=s.itemMarginBottom||0,g=this.itemMarginTop,m=this.initialItemX,v=e.legendItem,y=e.series&&e.series.drawLegendSymbol?e.series:e,b=y.options,b=this.createCheckboxForItem&&b&&b.showCheckbox,_=s.useHTML;v||(e.legendGroup=n.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),e.legendItem=v=n.text("",d?o+a:-a,this.baseline||0,_).css(t(e.visible?l:c)).attr({align:d?"left":"right",zIndex:2}).add(e.legendGroup),this.baseline||(this.fontMetrics=n.fontMetrics(l.fontSize,v),this.baseline=this.fontMetrics.f+3+g,v.attr("y",this.baseline)),y.drawLegendSymbol(this,e),this.setItemEvents&&this.setItemEvents(e,v,_,l,c),this.colorizeItem(e,e.visible),b&&this.createCheckboxForItem(e)),this.setText(e),n=v.getBBox(),o=e.checkboxOffset=s.itemWidth||e.legendItemWidth||o+a+n.width+u+(b?20:0),this.itemHeight=a=at(e.legendItemHeight||n.height),r&&this.itemX-m+o>(p||i.chartWidth-2*h-m-s.x)&&(this.itemX=m,this.itemY+=g+this.lastLineHeight+f,this.lastLineHeight=0),this.maxItemWidth=ht(this.maxItemWidth,o),this.lastItemY=g+this.itemY+f,this.lastLineHeight=ht(a,this.lastLineHeight),e._legendItemPos=[this.itemX,this.itemY],r?this.itemX+=o:(this.itemY+=g+a+f,this.lastLineHeight=a),this.offsetWidth=p||ht((r?this.itemX-m-u:o)+h,this.offsetWidth)},getAllItems:function(){var t=[];return Gt(this.chart.series,function(e){var i=e.options;Ft(i.showInLegend,c(i.linkedTo)?!1:P,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))}),t},adjustMargins:function(t,e){var i=this.chart,n=this.options,s=n.align.charAt(0)+n.verticalAlign.charAt(0)+n.layout.charAt(0);this.display&&!n.floating&&Gt([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(r,o){r.test(s)&&!c(t[o])&&(i[Rt[o]]=ht(i[Rt[o]],i.legend[(o+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][o]*n[o%2?"x":"y"]+Ft(n.margin,12)+e[o]))})},render:function(){var t,e,i,n,s=this,r=s.chart,o=r.renderer,a=s.group,l=s.box,c=s.options,h=s.padding,u=c.borderWidth,d=c.backgroundColor;s.itemX=s.initialItemX,s.itemY=s.initialItemY,s.offsetWidth=0,s.lastItemY=0,a||(s.group=a=o.g("legend").attr({zIndex:7}).add(),s.contentGroup=o.g().attr({zIndex:1}).add(a),s.scrollGroup=o.g().add(s.contentGroup)),s.renderTitle(),t=s.getAllItems(),_(t,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),c.reversed&&t.reverse(),s.allItems=t,s.display=e=!!t.length,s.lastLineHeight=0,Gt(t,function(t){s.renderItem(t)}),i=(c.width||s.offsetWidth)+h,n=s.lastItemY+s.lastLineHeight+s.titleHeight,n=s.handleOverflow(n),n+=h,(u||d)&&(l?i>0&&n>0&&(l[l.isNew?"attr":"animate"](l.crisp({width:i,height:n})),l.isNew=!1):(s.box=l=o.rect(0,0,i,n,c.borderRadius,u||0).attr({stroke:c.borderColor,"stroke-width":u||0,fill:d||Ot}).add(a).shadow(c.shadow),l.isNew=!0),l[e?"show":"hide"]()),s.legendWidth=i,s.legendHeight=n,Gt(t,function(t){s.positionItem(t)}),e&&a.align(Bt({width:i,height:n},c),!0,"spacingBox"),r.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,s=this.chart,r=s.renderer,o=this.options,a=o.y,a=s.spacingBox.height+("top"===o.verticalAlign?-a:a)-this.padding,l=o.maxHeight,c=this.clipRect,h=o.navigation,u=Ft(h.animation,!0),d=h.arrowSize||12,p=this.nav,f=this.pages,g=this.padding,m=this.allItems,v=function(t){c.attr({height:t}),n.contentGroup.div&&(n.contentGroup.div.style.clip="rect("+g+"px,9999px,"+(g+t)+"px,0)")};return"horizontal"===o.layout&&(a/=2),l&&(a=ut(a,l)),f.length=0,t>a?(this.clipHeight=e=ht(a-20-this.titleHeight-g,0),this.currentPage=Ft(this.currentPage,1),this.fullHeight=t,Gt(m,function(t,n){var s=t._legendItemPos[1],r=at(t.legendItem.getBBox().height),o=f.length;(!o||s-f[o-1]>e&&(i||s)!==f[o-1])&&(f.push(i||s),o++),n===m.length-1&&s+r-f[o-1]>e&&f.push(s),s!==i&&(i=s)}),c||(c=n.clipRect=r.clipRect(0,g,9999,0),n.contentGroup.clip(c)),v(e),p||(this.nav=p=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,d,d).on("click",function(){n.scroll(-1,u)}).add(p),this.pager=r.text("",15,10).css(h.style).add(p),this.down=r.symbol("triangle-down",0,0,d,d).on("click",function(){n.scroll(1,u)}).add(p)),n.scroll(0),t=a):p&&(v(s.chartHeight),p.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i=this.pages,n=i.length,s=this.currentPage+t,r=this.clipHeight,o=this.options.navigation,a=o.activeColor,o=o.inactiveColor,l=this.pager,c=this.padding;s>n&&(s=n),s>0&&(e!==P&&A(e,this.chart),this.nav.attr({translateX:c,translateY:r+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===s?o:a}).css({cursor:1===s?"default":"pointer"}),l.attr({text:s+"/"+n}),this.down.attr({x:18+this.pager.getBBox().width,fill:s===n?o:a}).css({cursor:s===n?"default":"pointer"}),i=-i[s-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=s,this.positionCheckboxes(i))}},ce=nt.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options.symbolHeight||t.fontMetrics.f;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-i+1,t.symbolWidth,i,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,i=this.options,n=i.marker;e=t.symbolWidth;var s,r=this.chart.renderer,o=this.legendGroup,t=t.baseline-at(.3*t.fontMetrics.b);i.lineWidth&&(s={"stroke-width":i.lineWidth},i.dashStyle&&(s.dashstyle=i.dashStyle),this.legendLine=r.path(["M",0,t,"L",e,t]).attr(s).add(o)),n&&n.enabled!==!1&&(i=n.radius,this.legendSymbol=e=r.symbol(this.symbol,e/2-i,t-i,2*i,2*i).add(o),e.isMarker=!0)}},(/Trident\/7\.0/.test(vt)||wt)&&Ht(be.prototype,"positionItem",function(t,e){var i=this,n=function(){e._legendItemPos&&t.call(i,e)};n(),setTimeout(n)}),zt=nt.Chart=function(){this.init.apply(this,arguments)},zt.prototype={callbacks:[],init:function(e,i){var n,s=e.series;e.series=null,n=t(R,e),n.series=e.series=s,this.userOptions=e,s=n.chart,this.margin=this.splashArray("margin",s),this.spacing=this.splashArray("spacing",s);var r=s.events;this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=s.showAxes;var o,a=this;if(a.index=It.length,It.push(a),Pt++,s.reflow!==!1&&Kt(a,"load",function(){a.initReflow()}),r)for(o in r)Kt(a,o,r[o]);a.xAxis=[],a.yAxis=[],a.animation=At?!1:Ft(s.animation,!0),a.pointCount=a.colorCounter=a.symbolCounter=0,a.firstRender()},initSeries:function(t){var e=this.options.chart;return(e=jt[t.type||e.type||e.defaultSeriesType])||C(17,!0),e=new e,e.init(this,t),e},isInsidePlot:function(t,e,i){var n=i?e:t,t=i?t:e;return n>=0&&n<=this.plotWidth&&t>=0&&t<=this.plotHeight},redraw:function(t){var e,i,n=this.axes,s=this.series,r=this.pointer,o=this.legend,a=this.isDirtyLegend,l=this.hasCartesianSeries,c=this.isDirtyBox,h=s.length,u=h,d=this.renderer,p=d.isHidden(),f=[];for(A(t,this),p&&this.cloneRenderTo(),this.layOutTitles();u--;)if(t=s[u],t.options.stacking&&(e=!0,t.isDirty)){i=!0;break}if(i)for(u=h;u--;)t=s[u],t.options.stacking&&(t.isDirty=!0);Gt(s,function(t){t.isDirty&&"point"===t.options.legendType&&(t.updateTotals&&t.updateTotals(),a=!0)}),a&&o.options.enabled&&(o.render(),this.isDirtyLegend=!1),e&&this.getStacks(),l&&!this.isResizing&&(this.maxTicks=null,Gt(n,function(t){t.setScale()})),this.getMargins(),l&&(Gt(n,function(t){t.isDirty&&(c=!0)}),Gt(n,function(t){var i=t.min+","+t.max;t.extKey!==i&&(t.extKey=i,f.push(function(){Zt(t,"afterSetExtremes",Bt(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(c||e)&&t.redraw()})),c&&this.drawChartBox(),Gt(s,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),r&&r.reset(!0),d.draw(),Zt(this,"redraw"),p&&this.cloneRenderTo(!0),Gt(f,function(t){t.call()})},get:function(t){var e,i,n=this.axes,s=this.series;for(e=0;e<n.length;e++)if(n[e].options.id===t)return n[e];for(e=0;e<s.length;e++)if(s[e].options.id===t)return s[e];for(e=0;e<s.length;e++)for(i=s[e].points||[],n=0;n<i.length;n++)if(i[n].id===t)return i[n];return null},getAxes:function(){var t=this,e=this.options,i=e.xAxis=u(e.xAxis||{}),e=e.yAxis=u(e.yAxis||{});Gt(i,function(t,e){t.index=e,t.isX=!0}),Gt(e,function(t,e){t.index=e}),i=i.concat(e),Gt(i,function(e){new ue(t,e)})},getSelectedPoints:function(){var t=[];return Gt(this.series,function(e){t=t.concat(Yt(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return Yt(this.series,function(t){return t.selected})},setTitle:function(e,i,n){var s,r,o=this,a=o.options;r=a.title=t(a.title,e),s=a.subtitle=t(a.subtitle,i),a=s,Gt([["title",e,r],["subtitle",i,a]],function(t){var e=t[0],i=o[e],n=t[1],t=t[2];i&&n&&(o[e]=i=i.destroy()),t&&t.text&&!i&&(o[e]=o.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,"class":"highcharts-"+e,zIndex:t.zIndex||4}).css(t.style).add())}),o.layOutTitles(n)},layOutTitles:function(t){var e=0,i=this.title,n=this.subtitle,s=this.options,r=s.title,s=s.subtitle,o=this.renderer,a=this.spacingBox.width-44;!i||(i.css({width:(r.width||a)+"px"}).align(Bt({y:o.fontMetrics(r.style.fontSize,i).b-3},r),!1,"spacingBox"),r.floating||r.verticalAlign)||(e=i.getBBox().height),n&&(n.css({width:(s.width||a)+"px"}).align(Bt({y:e+(r.margin-13)+o.fontMetrics(r.style.fontSize,n).b},s),!1,"spacingBox"),!s.floating&&!s.verticalAlign&&(e=ct(e+n.getBBox().height))),i=this.titleOffset!==e,this.titleOffset=e,!this.isDirtyBox&&i&&(this.isDirtyBox=i,this.hasRendered&&Ft(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,e=t.width,t=t.height,i=this.renderToClone||this.renderTo;c(e)||(this.containerWidth=Ut(i,"width")),c(t)||(this.containerHeight=Ut(i,"height")),this.chartWidth=ht(0,e||this.containerWidth||600),this.chartHeight=ht(0,Ft(t,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),T(e),delete this.renderToClone):(i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),d(e,{position:"absolute",top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),st.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var t,n,s,r,o=this.options.chart;this.renderTo=t=o.renderTo,r="highcharts-"+Lt++,i(t)&&(this.renderTo=t=st.getElementById(t)),t||C(13,!0),n=e(h(t,"data-highcharts-chart")),!isNaN(n)&&It[n]&&It[n].hasRendered&&It[n].destroy(),h(t,"data-highcharts-chart",this.index),t.innerHTML="",!o.skipClone&&!t.offsetWidth&&this.cloneRenderTo(),this.getChartSize(),n=this.chartWidth,s=this.chartHeight,this.container=t=p(Nt,{className:"highcharts-container"+(o.className?" "+o.className:""),id:r},Bt({position:"relative",overflow:"hidden",width:n+"px",height:s+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},o.style),this.renderToClone||t),this._cursor=t.style.cursor,this.renderer=o.forExport?new le(t,n,s,o.style,!0):new N(t,n,s,o.style),At&&this.renderer.create(this,t,n,s),this.renderer.chartIndex=this.index},getMargins:function(t){var e=this.spacing,i=this.margin,n=this.titleOffset;this.resetMargins(),n&&!c(i[0])&&(this.plotTop=ht(this.plotTop,n+this.options.title.margin+e[0])),this.legend.adjustMargins(i,e),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),t||this.getAxisMargins()},getAxisMargins:function(){var t=this,e=t.axisOffset=[0,0,0,0],i=t.margin;t.hasCartesianSeries&&Gt(t.axes,function(t){t.getOffset()}),Gt(Rt,function(n,s){c(i[s])||(t[n]+=e[s])}),t.setChartSize()},reflow:function(t){var e=this,i=e.options.chart,n=e.renderTo,s=i.width||Ut(n,"width"),r=i.height||Ut(n,"height"),i=t?t.target:rt,n=function(){e.container&&(e.setSize(s,r,!1),e.hasUserSize=null)};e.hasUserSize||e.isPrinting||!s||!r||i!==rt&&i!==st||((s!==e.containerWidth||r!==e.containerHeight)&&(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(n,100):n()),e.containerWidth=s,e.containerHeight=r)},initReflow:function(){var t=this,e=function(e){t.reflow(e)};Kt(rt,"resize",e),Kt(t,"destroy",function(){Jt(rt,"resize",e)})},setSize:function(t,e,i){var n,s,r,o=this,a=o.renderer,l=a.globalAnimation;o.isResizing+=1,r=function(){o&&Zt(o,"endResize",null,function(){o.isResizing-=1})},A(i,o),o.oldChartHeight=o.chartHeight,o.oldChartWidth=o.chartWidth,c(t)&&(o.chartWidth=n=ht(0,at(t)),o.hasUserSize=!!n),c(e)&&(o.chartHeight=s=ht(0,at(e))),(l?ee:d)(o.container,{width:n+"px",height:s+"px"},l),o.setChartSize(!0),a.setSize(n,s,i),o.maxTicks=null,Gt(o.axes,function(t){t.isDirty=!0,t.setScale()}),Gt(o.series,function(t){t.isDirty=!0}),o.isDirtyLegend=!0,o.isDirtyBox=!0,o.layOutTitles(),o.getMargins(),o.redraw(i),o.oldChartHeight=null,Zt(o,"resize"),l===!1?r():setTimeout(r,l&&l.duration||500)},setChartSize:function(t){var e,i,n,s,r=this.inverted,o=this.renderer,a=this.chartWidth,l=this.chartHeight,c=this.options.chart,h=this.spacing,u=this.clipOffset;this.plotLeft=e=at(this.plotLeft),this.plotTop=i=at(this.plotTop),this.plotWidth=n=ht(0,at(a-e-this.marginRight)),this.plotHeight=s=ht(0,at(l-i-this.marginBottom)),this.plotSizeX=r?s:n,this.plotSizeY=r?n:s,this.plotBorderWidth=c.plotBorderWidth||0,this.spacingBox=o.spacingBox={x:h[3],y:h[0],width:a-h[3]-h[1],height:l-h[0]-h[2]},this.plotBox=o.plotBox={x:e,y:i,width:n,height:s},a=2*lt(this.plotBorderWidth/2),r=ct(ht(a,u[3])/2),o=ct(ht(a,u[0])/2),this.clipBox={x:r,y:o,width:lt(this.plotSizeX-ht(a,u[1])/2-r),height:ht(0,lt(this.plotSizeY-ht(a,u[2])/2-o))},t||Gt(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this;Gt(Rt,function(e,i){t[e]=Ft(t.margin[i],t.spacing[i])}),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e=this.options.chart,i=this.renderer,n=this.chartWidth,s=this.chartHeight,r=this.chartBackground,o=this.plotBackground,a=this.plotBorder,l=this.plotBGImage,c=e.borderWidth||0,h=e.backgroundColor,u=e.plotBackgroundColor,d=e.plotBackgroundImage,p=e.plotBorderWidth||0,f=this.plotLeft,g=this.plotTop,m=this.plotWidth,v=this.plotHeight,y=this.plotBox,b=this.clipRect,_=this.clipBox;t=c+(e.shadow?8:0),(c||h)&&(r?r.animate(r.crisp({width:n-t,height:s-t})):(r={fill:h||Ot},c&&(r.stroke=e.borderColor,r["stroke-width"]=c),this.chartBackground=i.rect(t/2,t/2,n-t,s-t,e.borderRadius,c).attr(r).addClass("highcharts-background").add().shadow(e.shadow))),u&&(o?o.animate(y):this.plotBackground=i.rect(f,g,m,v,0).attr({fill:u}).add().shadow(e.plotShadow)),d&&(l?l.animate(y):this.plotBGImage=i.image(d,f,g,m,v).add()),b?b.animate({width:_.width,height:_.height}):this.clipRect=i.clipRect(_),p&&(a?a.animate(a.crisp({x:f,y:g,width:m,height:v,strokeWidth:-p})):this.plotBorder=i.rect(f,g,m,v,0,-p).attr({stroke:e.plotBorderColor,"stroke-width":p,fill:Ot,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,s=n.options.chart,r=n.options.series;Gt(["inverted","angular","polar"],function(o){for(t=jt[s.type||s.defaultSeriesType],i=n[o]||s[o]||t&&t.prototype[o],e=r&&r.length;!i&&e--;)(t=jt[r[e].type])&&t.prototype[o]&&(i=!0);n[o]=i})},linkSeries:function(){var t=this,e=t.series;Gt(e,function(t){t.linkedSeries.length=0}),Gt(e,function(e){var n=e.options.linkedTo;i(n)&&(n=":previous"===n?t.series[e.index-1]:t.get(n))&&(n.linkedSeries.push(e),e.linkedParent=n,e.visible=Ft(e.options.visible,n.options.visible,e.visible))})},renderSeries:function(){Gt(this.series,function(t){t.translate(),t.render()})},renderLabels:function(){var t=this,i=t.options.labels;i.items&&Gt(i.items,function(n){var s=Bt(i.style,n.style),r=e(s.left)+t.plotLeft,o=e(s.top)+t.plotTop+12;delete s.left,delete s.top,t.renderer.text(n.html,r,o).attr({zIndex:2}).css(s).add()})},render:function(){var t,e,i,n,s=this.axes,r=this.renderer,o=this.options;this.setTitle(),this.legend=new be(this,o.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),t=this.plotWidth,e=this.plotHeight-=13,Gt(s,function(t){t.setScale()}),this.getAxisMargins(),i=t/this.plotWidth>1.1,n=e/this.plotHeight>1.1,(i||n)&&(this.maxTicks=null,Gt(s,function(t){(t.horiz&&i||!t.horiz&&n)&&t.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries&&Gt(s,function(t){t.render()}),this.seriesGroup||(this.seriesGroup=r.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(o.credits),this.hasRendered=!0},showCredits:function(t){t.enabled&&!this.credits&&(this.credits=this.renderer.text(t.text,0,0).on("click",function(){t.href&&(location.href=t.href)}).attr({align:t.position.align,zIndex:8}).css(t.style).add().align(t.position))},destroy:function(){var t,e=this,i=e.axes,n=e.series,s=e.container,r=s&&s.parentNode;for(Zt(e,"destroy"),It[e.index]=P,Pt--,e.renderTo.removeAttribute("data-highcharts-chart"),Jt(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();Gt("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())}),s&&(s.innerHTML="",Jt(s),r&&T(s));for(t in e)delete e[t]},isReadyToRender:function(){var t=this;return!Ct&&rt==rt.top&&"complete"!==st.readyState||At&&!rt.canvg?(At?he.push(function(){t.firstRender()},t.options.global.canvasToolsURL):st.attachEvent("onreadystatechange",function(){st.detachEvent("onreadystatechange",t.firstRender),"complete"===st.readyState&&t.firstRender()}),!1):!0},firstRender:function(){var t=this,e=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),Zt(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),Gt(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),Zt(t,"beforeRender"),nt.Pointer&&(t.pointer=new fe(t,e)),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),Gt(t.callbacks,function(e){t.index!==P&&e.apply(t,[t])}),Zt(t,"load"),t.cloneRenderTo(!0))},splashArray:function(t,e){var i=e[t],i=n(i)?i:[i,i,i,i];return[Ft(e[t+"Top"],i[0]),Ft(e[t+"Right"],i[1]),Ft(e[t+"Bottom"],i[2]),Ft(e[t+"Left"],i[3])]}};var _e=nt.CenteredSeriesMixin={getCenter:function(){var t,e,i=this.options,n=this.chart,s=2*(i.slicedOffset||0),r=n.plotWidth-2*s,n=n.plotHeight-2*s,o=i.center,o=[Ft(o[0],"50%"),Ft(o[1],"50%"),i.size||"100%",i.innerSize||0],a=ut(r,n);for(t=0;4>t;++t)e=o[t],i=2>t||2===t&&/%$/.test(e),o[t]=(/%$/.test(e)?[r,n,a,o[2]][t]*parseFloat(e)/100:parseFloat(e))+(i?s:0);return o}},xe=function(){};xe.prototype={init:function(t,e,i){return this.series=t,this.color=t.color,this.applyOptions(e,i),this.pointAttr={},t.options.colorByPoint&&(e=t.options.colors||t.chart.options.colors,this.color=this.color||e[t.colorCounter++],t.colorCounter===e.length)&&(t.colorCounter=0),t.chart.pointCount++,
this},applyOptions:function(t,e){var i=this.series,n=i.options.pointValKey||i.pointValKey,t=xe.prototype.optionsToObject.call(this,t);return Bt(this,t),this.options=this.options?Bt(this.options,t):t,n&&(this.y=this[n]),this.x===P&&i&&(this.x=e===P?i.autoIncrement():e),this},optionsToObject:function(t){var e={},i=this.series,n=i.options.keys,r=n||i.pointArrayMap||["y"],o=r.length,a=0,l=0;if("number"==typeof t||null===t)e[r[0]]=t;else if(s(t))for(!n&&t.length>o&&(i=typeof t[0],"string"===i?e.name=t[0]:"number"===i&&(e.x=t[0]),a++);o>l;)e[r[l++]]=t[a++];else"object"==typeof t&&(e=t,t.dataLabels&&(i._hasPointLabels=!0),t.marker&&(i._hasPointMarkers=!0));return e},destroy:function(){var t,e=this.series.chart,i=e.hoverPoints;e.pointCount--,i&&(this.setState(),l(i,this),!i.length)&&(e.hoverPoints=null),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(Jt(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this);for(t in this)this[t]=null},destroyElements:function(){for(var t,e="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),i=6;i--;)t=e[i],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=Ft(i.valueDecimals,""),s=i.valuePrefix||"",r=i.valueSuffix||"";return Gt(e.pointArrayMap||["y"],function(e){e="{point."+e,(s||r)&&(t=t.replace(e+"}",s+e+"}"+r)),t=t.replace(e+"}",e+":,."+n+"f}")}),v(t,{point:this,series:this.series})},firePointEvent:function(t,e,i){var n=this,s=this.series.options;(s.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&s.allowPointSelect&&(i=function(t){n.select&&n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),Zt(this,t,e,i)}};var we=nt.Series=function(){};we.prototype={isCartesian:!0,type:"line",pointClass:xe,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(t,e){var i,n,s=this,r=t.series,o=function(t,e){return Ft(t.options.index,t._i)-Ft(e.options.index,e._i)};s.chart=t,s.options=e=s.setOptions(e),s.linkedSeries=[],s.bindAxes(),Bt(s,{name:e.name,state:"",pointAttr:{},visible:e.visible!==!1,selected:e.selected===!0}),At&&(e.animation=!1),n=e.events;for(i in n)Kt(s,i,n[i]);(n&&n.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0),s.getColor(),s.getSymbol(),Gt(s.parallelArrays,function(t){s[t+"Data"]=[]}),s.setData(e.data,!1),s.isCartesian&&(t.hasCartesianSeries=!0),r.push(s),s._i=r.length-1,_(r,o),this.yAxis&&_(this.yAxis.series,o),Gt(r,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,e=this,i=e.options,n=e.chart;Gt(e.axisTypes||[],function(s){Gt(n[s],function(n){t=n.options,(i[s]===t.index||i[s]!==P&&i[s]===t.id||i[s]===P&&0===t.index)&&(n.series.push(e),e[s]=n,n.isDirty=!0)}),!e[s]&&e.optionalAxis!==s&&C(18,!0)})},updateParallelArrays:function(t,e){var i=t.series,n=arguments;Gt(i.parallelArrays,"number"==typeof e?function(n){var s="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=s}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))})},autoIncrement:function(){var t,e=this.options,i=this.xIncrement,n=e.pointIntervalUnit,i=Ft(i,e.pointStart,0);return this.pointInterval=t=Ft(this.pointInterval,e.pointInterval,1),("month"===n||"year"===n)&&(e=new F(i),e="month"===n?+e[et](e[Y]()+t):+e[it](e[V]()+t),t=e-i),this.xIncrement=i+t,i},getSegments:function(){var t,e=-1,i=[],n=this.points,s=n.length;if(s)if(this.options.connectNulls){for(t=s;t--;)null===n[t].y&&n.splice(t,1);n.length&&(i=[n])}else Gt(n,function(t,r){null===t.y?(r>e+1&&i.push(n.slice(e+1,r)),e=r):r===s-1&&i.push(n.slice(e+1,r+1))});this.segments=i},setOptions:function(e){var i=this.chart,n=i.options.plotOptions,i=i.userOptions||{},s=i.plotOptions||{},r=n[this.type];return this.userOptions=e,n=t(r,n.series,e),this.tooltipOptions=t(R.tooltip,R.plotOptions[this.type].tooltip,i.tooltip,s.series&&s.series.tooltip,s[this.type]&&s[this.type].tooltip,e.tooltip),null===r.marker&&delete n.marker,this.zoneAxis=n.zoneAxis,e=this.zones=(n.zones||[]).slice(),!n.negativeColor&&!n.negativeFillColor||n.zones||e.push({value:n[this.zoneAxis+"Threshold"]||n.threshold||0,color:n.negativeColor,fillColor:n.negativeFillColor}),e.length&&c(e[e.length-1].value)&&e.push({color:this.color,fillColor:this.fillColor}),n},getCyclic:function(t,e,i){var n=this.userOptions,s="_"+t+"Index",r=t+"Counter";e||(c(n[s])?e=n[s]:(n[s]=e=this.chart[r]%i.length,this.chart[r]+=1),e=i[e]),this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||ne[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:ce.drawLineMarker,setData:function(t,e,n,o){var a,l=this,h=l.points,u=h&&h.length||0,d=l.options,p=l.chart,f=null,g=l.xAxis,m=g&&!!g.categories,v=d.turboThreshold,y=this.xData,b=this.yData,_=(a=l.pointArrayMap)&&a.length,t=t||[];if(a=t.length,e=Ft(e,!0),o!==!1&&a&&u===a&&!l.cropped&&!l.hasGroupedData&&l.visible)Gt(t,function(t,e){h[e].update&&h[e].update(t,!1,null,!1)});else{if(l.xIncrement=null,l.pointRange=m?1:d.pointRange,l.colorCounter=0,Gt(this.parallelArrays,function(t){l[t+"Data"].length=0}),v&&a>v){for(n=0;null===f&&a>n;)f=t[n],n++;if(r(f)){for(m=Ft(d.pointStart,0),d=Ft(d.pointInterval,1),n=0;a>n;n++)y[n]=m,b[n]=t[n],m+=d;l.xIncrement=m}else if(s(f))if(_)for(n=0;a>n;n++)d=t[n],y[n]=d[0],b[n]=d.slice(1,_+1);else for(n=0;a>n;n++)d=t[n],y[n]=d[0],b[n]=d[1];else C(12)}else for(n=0;a>n;n++)t[n]!==P&&(d={series:l},l.pointClass.prototype.applyOptions.apply(d,[t[n]]),l.updateParallelArrays(d,n),m&&c(d.name))&&(g.names[d.x]=d.name);for(i(b[0])&&C(14,!0),l.data=[],l.options.data=t,n=u;n--;)h[n]&&h[n].destroy&&h[n].destroy();g&&(g.minRange=g.userMinRange),l.isDirty=l.isDirtyData=p.isDirtyBox=!0,n=!1}e&&p.redraw(n)},processData:function(t){var e,i=this.xData,n=this.yData,s=i.length;e=0;var r,o,a,l=this.xAxis,c=this.options;a=c.cropThreshold;var h,u,d=this.isCartesian;if(d&&!this.isDirty&&!l.isDirty&&!this.yAxis.isDirty&&!t)return!1;for(l&&(t=l.getExtremes(),h=t.min,u=t.max),d&&this.sorted&&(!a||s>a||this.forceCrop)&&(i[s-1]<h||i[0]>u?(i=[],n=[]):(i[0]<h||i[s-1]>u)&&(e=this.cropData(this.xData,this.yData,h,u),i=e.xData,n=e.yData,e=e.start,r=!0)),a=i.length-1;a>=0;a--)s=i[a]-i[a-1],s>0&&(o===P||o>s)?o=s:0>s&&this.requireSorting&&C(15);this.cropped=r,this.cropStart=e,this.processedXData=i,this.processedYData=n,null===c.pointRange&&(this.pointRange=o||1),this.closestPointRange=o},cropData:function(t,e,i,n){var s,r=t.length,o=0,a=r,l=Ft(this.cropShoulder,1);for(s=0;r>s;s++)if(t[s]>=i){o=ht(0,s-l);break}for(;r>s;s++)if(t[s]>n){a=s+l;break}return{xData:t.slice(o,a),yData:e.slice(o,a),start:o,end:a}},generatePoints:function(){var t,e,i,n,s=this.options.data,r=this.data,o=this.processedXData,a=this.processedYData,l=this.pointClass,c=o.length,h=this.cropStart||0,d=this.hasGroupedData,p=[];for(r||d||(r=[],r.length=s.length,r=this.data=r),n=0;c>n;n++)e=h+n,d?p[n]=(new l).init(this,[o[n]].concat(u(a[n]))):(r[e]?i=r[e]:s[e]!==P&&(r[e]=i=(new l).init(this,s[e],o[n])),p[n]=i),p[n].index=e;if(r&&(c!==(t=r.length)||d))for(n=0;t>n;n++)n===h&&!d&&(n+=c),r[n]&&(r[n].destroyElements(),r[n].plotX=P);this.data=r,this.points=p},getExtremes:function(t){var e,i=this.yAxis,n=this.processedXData,s=[],r=0;e=this.xAxis.getExtremes();var o,a,l,c,h=e.min,u=e.max,t=t||this.stackedYData||this.processedYData;for(e=t.length,c=0;e>c;c++)if(a=n[c],l=t[c],o=null!==l&&l!==P&&(!i.isLog||l.length||l>0),a=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(n[c+1]||a)>=h&&(n[c-1]||a)<=u,o&&a)if(o=l.length)for(;o--;)null!==l[o]&&(s[r++]=l[o]);else s[r++]=l;this.dataMin=x(s),this.dataMax=w(s)},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var t,e,i,n=this.options,s=n.stacking,o=this.xAxis,a=o.categories,l=this.yAxis,h=this.points,u=h.length,d=!!this.modifyValue,p=n.pointPlacement,f="between"===p||r(p),g=n.threshold,m=n.startFromThreshold?g:0,v=Number.MAX_VALUE,n=0;u>n;n++){var y=h[n],b=y.x,_=y.y;e=y.low;var x=s&&l.stacks[(this.negStacks&&(m?0:g)>_?"-":"")+this.stackKey];l.isLog&&null!==_&&0>=_&&(y.y=_=null,C(10)),y.plotX=t=ut(ht(-1e5,o.translate(b,0,0,0,1,p,"flags"===this.type)),1e5),s&&this.visible&&x&&x[b]&&(x=x[b],_=x.points[this.index+","+n],e=_[0],_=_[1],e===m&&(e=Ft(g,l.min)),l.isLog&&0>=e&&(e=null),y.total=y.stackTotal=x.total,y.percentage=x.total&&y.y/x.total*100,y.stackY=_,x.setOffset(this.pointXOffset||0,this.barW||0)),y.yBottom=c(e)?l.translate(e,0,1,0,1):null,d&&(_=this.modifyValue(_,y)),y.plotY=e="number"==typeof _&&_!==1/0?ut(ht(-1e5,l.translate(_,0,1,0,1)),1e5):P,y.isInside=e!==P&&e>=0&&e<=l.len&&t>=0&&t<=o.len,y.clientX=f?o.translate(b,0,0,0,1):t,y.negative=y.y<(g||0),y.category=a&&a[y.x]!==P?a[y.x]:y.x,n&&(v=ut(v,dt(t-i))),i=t}this.closestPointRangePx=v,this.getSegments()},setClip:function(t){var e=this.chart,i=e.renderer,n=e.inverted,s=this.clipBox,r=s||e.clipBox,o=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,r.height].join(","),a=e[o],l=e[o+"m"];a||(t&&(r.width=0,e[o+"m"]=l=i.clipRect(-99,n?-e.plotLeft:-e.plotTop,99,n?e.chartWidth:e.chartHeight)),e[o]=a=i.clipRect(r)),t&&(a.count+=1),this.options.clip!==!1&&(this.group.clip(t||s?a:e.clipRect),this.markerGroup.clip(l),this.sharedClipKey=o),t||(a.count-=1,a.count<=0&&o&&e[o]&&(s||(e[o]=e[o].destroy()),e[o+"m"]&&(e[o+"m"]=e[o+"m"].destroy())))},animate:function(t){var e,i=this.chart,s=this.options.animation;s&&!n(s)&&(s=ne[this.type].animation),t?this.setClip(s):(e=this.sharedClipKey,(t=i[e])&&t.animate({width:i.plotSizeX},s),i[e+"m"]&&i[e+"m"].animate({width:i.plotSizeX+99},s),this.animate=null)},afterAnimate:function(){this.setClip(),Zt(this,"afterAnimate")},drawPoints:function(){var t,e,i,n,s,r,o,a,l,c,h,u,d=this.points,p=this.chart,f=this.options.marker,g=this.pointAttr[""],m=this.markerGroup,v=Ft(f.enabled,this.xAxis.isRadial,this.closestPointRangePx>2*f.radius);if(f.enabled!==!1||this._hasPointMarkers)for(n=d.length;n--;)s=d[n],e=lt(s.plotX),i=s.plotY,l=s.graphic,c=s.marker||{},h=!!s.marker,t=v&&c.enabled===P||c.enabled,u=s.isInside,t&&i!==P&&!isNaN(i)&&null!==s.y?(t=s.pointAttr[s.selected?"select":""]||g,r=t.r,o=Ft(c.symbol,this.symbol),a=0===o.indexOf("url"),l?l[u?"show":"hide"](!0).animate(Bt({x:e-r,y:i-r},l.symbolName?{width:2*r,height:2*r}:{})):u&&(r>0||a)&&(s.graphic=p.renderer.symbol(o,e-r,i-r,2*r,2*r,h?c:f).attr(t).add(m))):l&&(s.graphic=l.destroy())},convertAttribs:function(t,e,i,n){var s,r,o=this.pointAttrToOptions,a={},t=t||{},e=e||{},i=i||{},n=n||{};for(s in o)r=o[s],a[s]=Ft(t[r],e[s],i[s],n[s]);return a},getAttribs:function(){var t,e=this,i=e.options,n=ne[e.type].marker?i.marker:i,s=n.states,r=s.hover,o=e.color,a=e.options.negativeColor;t={stroke:o,fill:o};var l,h,u=e.points||[],d=[],p=e.pointAttrToOptions;l=e.hasPointSpecificOptions;var f=n.lineColor,g=n.fillColor;h=i.turboThreshold;var m,v=e.zones,y=e.zoneAxis||"y";if(i.marker?(r.radius=r.radius||n.radius+r.radiusPlus,r.lineWidth=r.lineWidth||n.lineWidth+r.lineWidthPlus):(r.color=r.color||ae(r.color||o).brighten(r.brightness).get(),r.negativeColor=r.negativeColor||ae(r.negativeColor||a).brighten(r.brightness).get()),d[""]=e.convertAttribs(n,t),Gt(["hover","select"],function(t){d[t]=e.convertAttribs(s[t],d[""])}),e.pointAttr=d,o=u.length,!h||h>o||l)for(;o--;){if(h=u[o],(n=h.options&&h.options.marker||h.options)&&n.enabled===!1&&(n.radius=0),v.length){for(l=0,t=v[l];h[y]>=t.value;)t=v[++l];t.color&&(h.color=h.fillColor=t.color)}if(l=i.colorByPoint||h.color,h.options)for(m in p)c(n[p[m]])&&(l=!0);l?(n=n||{},l=[],s=n.states||{},t=s.hover=s.hover||{},i.marker||(t.color=t.color||!h.options.color&&r[h.negative&&a?"negativeColor":"color"]||ae(h.color).brighten(t.brightness||r.brightness).get()),t={color:h.color},g||(t.fillColor=h.color),f||(t.lineColor=h.color),n.hasOwnProperty("color")&&!n.color&&delete n.color,l[""]=e.convertAttribs(Bt(t,n),d[""]),l.hover=e.convertAttribs(s.hover,d.hover,l[""]),l.select=e.convertAttribs(s.select,d.select,l[""])):l=d,h.pointAttr=l}},destroy:function(){var t,e,i,n,s=this,r=s.chart,o=/AppleWebKit\/533/.test(vt),a=s.data||[];for(Zt(s,"destroy"),Jt(s),Gt(s.axisTypes||[],function(t){(n=s[t])&&(l(n.series,s),n.isDirty=n.forceRedraw=!0)}),s.legendItem&&s.chart.legend.destroyItem(s),t=a.length;t--;)(e=a[t])&&e.destroy&&e.destroy();s.points=null,clearTimeout(s.animationTimeout);for(i in s)s[i]instanceof L&&!s[i].survive&&(t=o&&"group"===i?"hide":"destroy",s[i][t]());r.hoverSeries===s&&(r.hoverSeries=null),l(r.series,s);for(i in s)delete s[i]},getSegmentPath:function(t){var e=this,i=[],n=e.options.step;return Gt(t,function(s,r){var o,a=s.plotX,l=s.plotY;e.getPointSpline?i.push.apply(i,e.getPointSpline(t,s,r)):(i.push(r?"L":"M"),n&&r&&(o=t[r-1],"right"===n?i.push(o.plotX,l):"center"===n?i.push((o.plotX+a)/2,o.plotY,(o.plotX+a)/2,l):i.push(a,o.plotY)),i.push(s.plotX,s.plotY))}),i},getGraphPath:function(){var t,e=this,i=[],n=[];return Gt(e.segments,function(s){t=e.getSegmentPath(s),s.length>1?i=i.concat(t):n.push(s[0])}),e.singlePoints=n,e.graphPath=i},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color,e.dashStyle]],n=e.lineWidth,s="square"!==e.linecap,r=this.getGraphPath(),o=this.fillGraph&&this.color||Ot;Gt(this.zones,function(n,s){i.push(["zoneGraph"+s,n.color||t.color,n.dashStyle||e.dashStyle])}),Gt(i,function(i,a){var l=i[0],c=t[l];c?c.animate({d:r}):(n||o)&&r.length&&(c={stroke:i[1],"stroke-width":n,fill:o,zIndex:1},i[2]?c.dashstyle=i[2]:s&&(c["stroke-linecap"]=c["stroke-linejoin"]="round"),t[l]=t.chart.renderer.path(r).attr(c).add(t.group).shadow(2>a&&e.shadow))})},applyZones:function(){var t,e,i,n,s,r,o,a=this,l=this.chart,c=l.renderer,h=this.zones,u=this.clips||[],d=this.graph,p=this.area,f=ht(l.chartWidth,l.chartHeight),g=this[(this.zoneAxis||"y")+"Axis"],m=g.reversed,v=l.inverted,y=g.horiz,b=!1;h.length&&(d||p)&&g.min!==P&&(d&&d.hide(),p&&p.hide(),n=g.getExtremes(),Gt(h,function(h,_){t=m?y?l.plotWidth:0:y?0:g.toPixels(n.min),t=ut(ht(Ft(e,t),0),f),e=ut(ht(at(g.toPixels(Ft(h.value,n.max),!0)),0),f),b&&(t=e=g.toPixels(n.max)),s=Math.abs(t-e),r=ut(t,e),o=ht(t,e),g.isXAxis?(i={x:v?o:r,y:0,width:s,height:f},y||(i.x=l.plotHeight-i.x)):(i={x:0,y:v?o:r,width:f,height:s},y&&(i.y=l.plotWidth-i.y)),l.inverted&&c.isVML&&(i=g.isXAxis?{x:0,y:m?r:o,height:i.width,width:l.chartWidth}:{x:i.y-l.plotLeft-l.spacingBox.x,y:0,width:i.height,height:l.chartHeight}),u[_]?u[_].animate(i):(u[_]=c.clipRect(i),d&&a["zoneGraph"+_].clip(u[_]),p&&a["zoneArea"+_].clip(u[_])),b=h.value>n.max}),this.clips=u)},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};Gt(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;e.xAxis&&(Kt(i,"resize",t),Kt(e,"destroy",function(){Jt(i,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,i,n,s){var r=this[t],o=!r;return o&&(this[t]=r=this.chart.renderer.g(e).attr({visibility:i,zIndex:n||.1}).add(s)),r[o?"attr":"animate"](this.getPlotBox()),r},getPlotBox:function(){var t=this.chart,e=this.xAxis,i=this.yAxis;return t.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:i?i.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,n=e.options,s=(t=n.animation)&&!!e.animate&&i.renderer.isSVG&&Ft(t.duration,500)||0,r=e.visible?"visible":"hidden",o=n.zIndex,a=e.hasRendered,l=i.seriesGroup;t=e.plotGroup("group","series",r,o,l),e.markerGroup=e.plotGroup("markerGroup","markers",r,o,l),s&&e.animate(!0),e.getAttribs(),t.inverted=e.isCartesian?i.inverted:!1,e.drawGraph&&(e.drawGraph(),e.applyZones()),Gt(e.points,function(t){t.redraw&&t.redraw()}),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),i.inverted&&e.invertGroups(),n.clip!==!1&&!e.sharedClipKey&&!a&&t.clip(i.clipRect),s&&e.animate(),a||(s?e.animationTimeout=setTimeout(function(){e.afterAnimate()},s):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirtyData,i=this.isDirty,n=this.group,s=this.xAxis,r=this.yAxis;n&&(t.inverted&&n.attr({width:t.plotWidth,height:t.plotHeight}),n.animate({translateX:Ft(s&&s.left,t.plotLeft),translateY:Ft(r&&r.top,t.plotTop)})),this.translate(),this.render(),e&&Zt(this,"updatedData"),(i||e)&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var i=this.xAxis,n=this.yAxis,s=this.chart.inverted;return this.searchKDTree({clientX:s?i.len-t.chartY+i.pos:t.chartX-i.pos,plotY:s?n.len-t.chartX+n.pos:t.chartY-n.pos},e)},buildKDTree:function(){function t(e,n,s){var r,o;return(o=e&&e.length)?(r=i.kdAxisArray[n%s],e.sort(function(t,e){return t[r]-e[r]}),o=Math.floor(o/2),{point:e[o],left:t(e.slice(0,o),n+1,s),right:t(e.slice(o+1),n+1,s)}):void 0}function e(){var e=Yt(i.points||[],function(t){return null!==t.y});i.kdTree=t(e,n,n)}var i=this,n=i.kdDimensions;delete i.kdTree,i.options.kdSync?e():setTimeout(e)},searchKDTree:function(t,e){function i(t,e,a,l){var h,u,d=e.point,p=n.kdAxisArray[a%l],f=d;return u=c(t[s])&&c(d[s])?Math.pow(t[s]-d[s],2):null,h=c(t[r])&&c(d[r])?Math.pow(t[r]-d[r],2):null,h=(u||0)+(h||0),d.dist=c(h)?Math.sqrt(h):Number.MAX_VALUE,d.distX=c(u)?Math.sqrt(u):Number.MAX_VALUE,p=t[p]-d[p],h=0>p?"left":"right",u=0>p?"right":"left",e[h]&&(h=i(t,e[h],a+1,l),f=h[o]<f[o]?h:d),e[u]&&Math.sqrt(p*p)<f[o]&&(t=i(t,e[u],a+1,l),f=t[o]<f[o]?t:f),f}var n=this,s=this.kdAxisArray[0],r=this.kdAxisArray[1],o=e?"distX":"dist";return this.kdTree||this.buildKDTree(),this.kdTree?i(t,this.kdTree,this.kdDimensions,this.kdDimensions):void 0}},I.prototype={destroy:function(){k(this,this.axis)},render:function(t){var e=this.options,i=e.format,i=i?v(i,this):e.formatter.call(this);this.label?this.label.attr({text:i,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(i,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var i=this.axis,n=i.chart,s=n.inverted,r=i.reversed,r=this.isNegative&&!r||!this.isNegative&&r,o=i.translate(i.usePercentage?100:this.total,0,0,0,1),i=i.translate(0),i=dt(o-i),a=n.xAxis[0].translate(this.x)+t,l=n.plotHeight,r={x:s?r?o:o-i:a,y:s?l-a-e:r?l-o-i:l-o,width:s?i:e,height:s?e:i};(s=this.label)&&(s.align(this.alignOptions,null,r),r=s.alignAttr,s[this.options.crop===!1||n.isInsidePlot(r.x,r.y)?"show":"hide"](!0))}},zt.prototype.getStacks=function(){var t=this;Gt(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),Gt(t.series,function(e){!e.options.stacking||e.visible!==!0&&t.options.chart.ignoreHiddenSeries!==!1||(e.stackKey=e.type+Ft(e.options.stack,""))})},ue.prototype.buildStacks=function(){var t=this.series,e=Ft(this.options.reversedStacks,!0),i=t.length;if(!this.isXAxis){for(this.usePercentage=!1;i--;)t[e?i:t.length-i-1].setStackedPoints();if(this.usePercentage)for(i=0;i<t.length;i++)t[i].setPercentStacks()}},ue.prototype.renderStackTotals=function(){var t,e,i=this.chart,n=i.renderer,s=this.stacks,r=this.stackTotalGroup;r||(this.stackTotalGroup=r=n.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),r.translate(i.plotLeft,i.plotTop);for(t in s)for(e in i=s[t])i[e].render(r)},ue.prototype.resetStacks=function(){var t,e,i=this.stacks;if(!this.isXAxis)for(t in i)for(e in i[t])i[t][e].touched<this.stacksTouched?(i[t][e].destroy(),delete i[t][e]):(i[t][e].total=null,i[t][e].cum=0)},ue.prototype.cleanStacks=function(){var t,e,i;if(!this.isXAxis){this.oldStacks&&(t=this.stacks=this.oldStacks);for(e in t)for(i in t[e])t[e][i].cum=t[e][i].total}},we.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var t,e,i,n,s,r,o=this.processedXData,a=this.processedYData,l=[],c=a.length,h=this.options,u=h.threshold,d=h.startFromThreshold?u:0,p=h.stack,h=h.stacking,f=this.stackKey,g="-"+f,m=this.negStacks,v=this.yAxis,y=v.stacks,b=v.oldStacks;for(v.stacksTouched+=1,n=0;c>n;n++)s=o[n],r=a[n],i=this.index+","+n,e=(t=m&&(d?0:u)>r)?g:f,y[e]||(y[e]={}),y[e][s]||(b[e]&&b[e][s]?(y[e][s]=b[e][s],y[e][s].total=null):y[e][s]=new I(v,v.options.stackLabels,t,s,p)),e=y[e][s],e.points[i]=[Ft(e.cum,d)],e.touched=v.stacksTouched,"percent"===h?(t=t?f:g,m&&y[t]&&y[t][s]?(t=y[t][s],e.total=t.total=ht(t.total,e.total)+dt(r)||0):e.total=S(e.total+(dt(r)||0))):e.total=S(e.total+(r||0)),e.cum=Ft(e.cum,d)+(r||0),e.points[i].push(e.cum),l[n]=e.cum;"percent"===h&&(v.usePercentage=!0),this.stackedYData=l,v.oldStacks={}}},we.prototype.setPercentStacks=function(){var t=this,e=t.stackKey,i=t.yAxis.stacks,n=t.processedXData;Gt([e,"-"+e],function(e){for(var s,r,o,a=n.length;a--;)r=n[a],s=(o=i[e]&&i[e][r])&&o.points[t.index+","+a],(r=s)&&(o=o.total?100/o.total:0,r[0]=S(r[0]*o),r[1]=S(r[1]*o),t.stackedYData[a]=r[1])})},Bt(zt.prototype,{addSeries:function(t,e,i){var n,s=this;return t&&(e=Ft(e,!0),Zt(s,"addSeries",{options:t},function(){n=s.initSeries(t),s.isDirtyLegend=!0,s.linkSeries(),e&&s.redraw(i)})),n},addAxis:function(e,i,n,s){var r=i?"xAxis":"yAxis",o=this.options;new ue(this,t(e,{index:this[r].length,isX:i})),o[r]=u(o[r]||{}),o[r].push(e),Ft(n,!0)&&this.redraw(s)},showLoading:function(t){var e=this,i=e.options,n=e.loadingDiv,s=i.loading,r=function(){n&&d(n,{left:e.plotLeft+"px",top:e.plotTop+"px",width:e.plotWidth+"px",height:e.plotHeight+"px"})};n||(e.loadingDiv=n=p(Nt,{className:"highcharts-loading"},Bt(s.style,{zIndex:10,display:Ot}),e.container),e.loadingSpan=p("span",null,s.labelStyle,n),Kt(e,"redraw",r)),e.loadingSpan.innerHTML=t||i.lang.loading,e.loadingShown||(d(n,{opacity:0,display:""}),ee(n,{opacity:s.style.opacity},{duration:s.showDuration||0}),e.loadingShown=!0),r()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&ee(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){d(e,{display:Ot})}}),this.loadingShown=!1}}),Bt(xe.prototype,{update:function(t,e,i,r){function o(){l.applyOptions(t),null===l.y&&h&&(l.graphic=h.destroy()),n(t)&&!s(t)&&(l.redraw=function(){h&&h.element&&t&&t.marker&&t.marker.symbol&&(l.graphic=h.destroy()),t&&t.dataLabels&&l.dataLabel&&(l.dataLabel=l.dataLabel.destroy()),l.redraw=null}),a=l.index,c.updateParallelArrays(l,a),p&&l.name&&(p[l.x]=l.name),d.data[a]=l.options,c.isDirty=c.isDirtyData=!0,!c.fixedBox&&c.hasCartesianSeries&&(u.isDirtyBox=!0),"point"===d.legendType&&(u.isDirtyLegend=!0),e&&u.redraw(i)}var a,l=this,c=l.series,h=l.graphic,u=c.chart,d=c.options,p=c.xAxis&&c.xAxis.names,e=Ft(e,!0);r===!1?o():l.firePointEvent("update",{options:t},o)},remove:function(t,e){this.series.removePoint(Xt(this,this.series.data),t,e)}}),Bt(we.prototype,{addPoint:function(t,e,i,n){var s,r=this,o=r.options,a=r.data,l=r.graph,c=r.area,h=r.chart,u=r.xAxis&&r.xAxis.names,d=l&&l.shift||0,p=["graph","area"],l=o.data,f=r.xData;if(A(n,h),i){for(n=r.zones.length;n--;)p.push("zoneGraph"+n,"zoneArea"+n);Gt(p,function(t){r[t]&&(r[t].shift=d+1)})}if(c&&(c.isArea=!0),e=Ft(e,!0),c={series:r},r.pointClass.prototype.applyOptions.apply(c,[t]),p=c.x,n=f.length,r.requireSorting&&p<f[n-1])for(s=!0;n&&f[n-1]>p;)n--;r.updateParallelArrays(c,"splice",n,0,0),r.updateParallelArrays(c,n),u&&c.name&&(u[p]=c.name),l.splice(n,0,t),s&&(r.data.splice(n,0,null),r.processData()),"point"===o.legendType&&r.generatePoints(),i&&(a[0]&&a[0].remove?a[0].remove(!1):(a.shift(),r.updateParallelArrays(c,"shift"),l.shift())),r.isDirty=!0,r.isDirtyData=!0,e&&(r.getAttribs(),h.redraw())},removePoint:function(t,e,i){var n=this,s=n.data,r=s[t],o=n.points,a=n.chart,l=function(){s.length===o.length&&o.splice(t,1),s.splice(t,1),n.options.data.splice(t,1),n.updateParallelArrays(r||{series:n},"splice",t,1),r&&r.destroy(),n.isDirty=!0,n.isDirtyData=!0,e&&a.redraw()};A(i,a),e=Ft(e,!0),r?r.firePointEvent("remove",null,l):l()},remove:function(t,e){var i=this,n=i.chart,t=Ft(t,!0);i.isRemoving||(i.isRemoving=!0,Zt(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(),t&&n.redraw(e)})),i.isRemoving=!1},update:function(e,i){var n,s=this,r=this.chart,o=this.userOptions,a=this.type,l=jt[a].prototype,c=["group","markerGroup","dataLabelsGroup"];(e.type&&e.type!==a||void 0!==e.zIndex)&&(c.length=0),Gt(c,function(t){c[t]=s[t],delete s[t]}),e=t(o,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},e),this.remove(!1);for(n in l)this[n]=P;Bt(this,jt[e.type||a].prototype),Gt(c,function(t){s[t]=c[t]}),this.init(r,e),r.linkSeries(),Ft(i,!0)&&r.redraw(!1)}}),Bt(ue.prototype,{update:function(e,i){var n=this.chart,e=n.options[this.coll][this.options.index]=t(this.userOptions,e);this.destroy(!0),this._addedPlotLB=this.chart._labelPanes=P,this.init(n,Bt(e,{events:P})),n.isDirtyBox=!0,Ft(i,!0)&&n.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,s=n.length;s--;)n[s]&&n[s].remove(!1);l(e.axes,this),l(e[i],this),e.options[i].splice(this.options.index,1),Gt(e[i],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,Ft(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var ke=f(we);jt.line=ke,ne.area=t(qt,{threshold:0});var Te=f(we,{type:"area",getSegments:function(){var t,e,i,n,s=this,r=[],o=[],a=[],l=this.xAxis,c=this.yAxis,h=c.stacks[this.stackKey],u={},d=this.points,p=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(i=0;i<d.length;i++)u[d[i].x]=d[i];for(n in h)null!==h[n].total&&a.push(+n);a.sort(function(t,e){return t-e}),Gt(a,function(n){var r,a=0;if(!p||u[n]&&null!==u[n].y)if(u[n])o.push(u[n]);else{for(i=s.index;i<=c.series.length;i++)if(r=h[n].points[i+","+n]){a=r[1];break}t=l.translate(n),e=c.toPixels(a,!0),o.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:Dt})}}),o.length&&r.push(o)}else we.prototype.getSegments.call(this),r=this.segments;this.segments=r},getSegmentPath:function(t){var e,i=we.prototype.getSegmentPath.call(this,t),n=[].concat(i),s=this.options;e=i.length;var r,o=this.yAxis.getThreshold(s.threshold);if(3===e&&n.push("L",i[1],i[2]),s.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)r=Ft(t[e].yBottom,o),e<t.length-1&&s.step&&n.push(t[e+1].plotX,r),n.push(t[e].plotX,r);else this.closeSegment(n,t,o);return this.areaPath=this.areaPath.concat(n),i},closeSegment:function(t,e,i){t.push("L",e[e.length-1].plotX,i,"L",e[0].plotX,i)},drawGraph:function(){this.areaPath=[],we.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=[["area",this.color,i.fillColor]];Gt(this.zones,function(e,s){n.push(["zoneArea"+s,e.color||t.color,e.fillColor||i.fillColor])}),Gt(n,function(n){var s=n[0],r=t[s];r?r.animate({d:e}):t[s]=t.chart.renderer.path(e).attr({fill:Ft(n[2],ae(n[1]).setOpacity(Ft(i.fillOpacity,.75)).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:ce.drawRectangle});jt.area=Te,ne.spline=t(qt),ke=f(we,{type:"spline",getPointSpline:function(t,e,i){var n,s,r,o,a=e.plotX,l=e.plotY,c=t[i-1],h=t[i+1];if(c&&h){t=c.plotY,r=h.plotX;var u,h=h.plotY;n=(1.5*a+c.plotX)/2.5,s=(1.5*l+t)/2.5,r=(1.5*a+r)/2.5,o=(1.5*l+h)/2.5,u=(o-s)*(r-a)/(r-n)+l-o,s+=u,o+=u,s>t&&s>l?(s=ht(t,l),o=2*l-s):t>s&&l>s&&(s=ut(t,l),o=2*l-s),o>h&&o>l?(o=ht(h,l),s=2*l-o):h>o&&l>o&&(o=ut(h,l),s=2*l-o),e.rightContX=r,e.rightContY=o}return i?(e=["C",c.rightContX||c.plotX,c.rightContY||c.plotY,n||a,s||l,a,l],c.rightContX=c.rightContY=null):e=["M",a,l],e}}),jt.spline=ke,ne.areaspline=t(ne.area),Te=Te.prototype,ke=f(ke,{type:"areaspline",closedStacks:!0,getSegmentPath:Te.getSegmentPath,closeSegment:Te.closeSegment,drawGraph:Te.drawGraph,drawLegendSymbol:ce.drawRectangle}),jt.areaspline=ke,ne.column=t(qt,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0}),ke=f(we,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){we.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&Gt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,i=this,n=i.options,s=i.xAxis,r=i.yAxis,o=s.reversed,a={},l=0;n.grouping===!1?l=1:Gt(i.chart.series,function(n){var s=n.options,o=n.yAxis;n.type===i.type&&n.visible&&r.len===o.len&&r.pos===o.pos&&(s.stacking?(t=n.stackKey,a[t]===P&&(a[t]=l++),e=a[t]):s.grouping!==!1&&(e=l++),n.columnIndex=e)});var c=ut(dt(s.transA)*(s.ordinalSlope||n.pointRange||s.closestPointRange||s.tickInterval||1),s.len),h=c*n.groupPadding,u=(c-2*h)/l,n=ut(n.maxPointWidth||s.len,Ft(n.pointWidth,u*(1-2*n.pointPadding)));return i.columnMetrics={width:n,offset:(u-n)/2+(h+((o?l-(i.columnIndex||0):i.columnIndex)||0)*u-c/2)*(o?-1:1)}},translate:function(){var t=this,e=t.chart,i=t.options,n=t.borderWidth=Ft(i.borderWidth,t.closestPointRange*t.xAxis.transA<2?0:1),s=t.yAxis,r=t.translatedThreshold=s.getThreshold(i.threshold),o=Ft(i.minPointLength,5),a=t.getColumnMetrics(),l=a.width,c=t.barW=ht(l,1+2*n),h=t.pointXOffset=a.offset,u=-(n%2?.5:0),d=n%2?.5:1;e.inverted&&(r-=.5,e.renderer.isVML&&(d+=1)),i.pointPadding&&(c=ct(c)),we.prototype.translate.apply(t),Gt(t.points,function(i){var n,a,p=Ft(i.yBottom,r),f=999+dt(p),f=ut(ht(-f,i.plotY),s.len+f),g=i.plotX+h,m=c,v=ut(f,p);n=ht(f,p)-v,dt(n)<o&&o&&(n=o,a=!s.reversed&&!i.negative||s.reversed&&i.negative,v=at(dt(v-r)>o?p-o:r-(a?o:0))),i.barX=g,i.pointWidth=l,m=at(g+m)+u,g=at(g)+u,m-=g,p=dt(v)<.5,n=ut(at(v+n)+d,9e4),v=at(v)+d,n-=v,p&&(v-=1,n+=1),i.tooltipPos=e.inverted?[s.len+s.pos-e.plotLeft-f,t.xAxis.len-g-m/2,n]:[g+m/2,f+s.pos-e.plotTop,n],i.shapeType="rect",i.shapeArgs={x:g,y:v,width:m,height:n}})},getSymbol:Dt,drawLegendSymbol:ce.drawRectangle,drawGraph:Dt,drawPoints:function(){var e,i,n=this,s=this.chart,r=n.options,o=s.renderer,a=r.animationLimit||250;Gt(n.points,function(l){var h=l.plotY,u=l.graphic;h===P||isNaN(h)||null===l.y?u&&(l.graphic=u.destroy()):(e=l.shapeArgs,h=c(n.borderWidth)?{"stroke-width":n.borderWidth}:{},i=l.pointAttr[l.selected?"select":""]||n.pointAttr[""],u?(ie(u),u.attr(h)[s.pointCount<a?"animate":"attr"](t(e))):l.graphic=o[l.shapeType](e).attr(h).attr(i).add(n.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius))})},animate:function(t){var e=this.yAxis,i=this.options,n=this.chart.inverted,s={};Ct&&(t?(s.scaleY=.001,t=ut(e.pos+e.len,ht(e.pos,e.toPixels(i.threshold))),n?s.translateX=t-e.len:s.translateY=t,this.group.attr(s)):(s.scaleY=1,s[n?"translateX":"translateY"]=e.pos,this.group.animate(s,this.options.animation),this.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&Gt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),we.prototype.remove.apply(t,arguments)}}),jt.column=ke,ne.bar=t(ne.column),Te=f(ke,{type:"bar",inverted:!0}),jt.bar=Te,ne.scatter=t(qt,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),Te=f(we,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&we.prototype.drawGraph.call(this)}}),jt.scatter=Te,ne.pie=t(qt,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),qt={type:"pie",isCartesian:!1,pointClass:f(xe,{init:function(){xe.prototype.init.apply(this,arguments);var t,e=this;return Bt(e,{visible:e.visible!==!1,name:Ft(e.name,"Slice")}),t=function(t){e.slice("select"===t.type)},Kt(e,"select",t),Kt(e,"unselect",t),e},setVisible:function(t,e){var i=this,n=i.series,s=n.chart,r=n.options.ignoreHiddenPoint,e=Ft(e,r);t!==i.visible&&(i.visible=i.options.visible=t=t===P?!i.visible:t,
n.options.data[Xt(i,n.data)]=i.options,Gt(["graphic","dataLabel","connector","shadowGroup"],function(e){i[e]&&i[e][t?"show":"hide"](!0)}),i.legendItem&&s.legend.colorizeItem(i,t),!t&&"hover"===i.state&&i.setState(""),r&&(n.isDirty=!0),e&&s.redraw())},slice:function(t,e,i){var n=this.series;A(i,n.chart),Ft(e,!0),this.sliced=this.options.sliced=t=c(t)?t:!this.sliced,n.options.data[Xt(this,n.data)]=this.options,t=t?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(t),this.shadowGroup&&this.shadowGroup.animate(t)},haloPath:function(t){var e=this.shapeArgs,i=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(i.plotLeft+e.x,i.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(Gt(i,function(t){var i=t.graphic,s=t.shapeArgs;i&&(i.attr({r:t.startR||e.center[3]/2,start:n,end:n}),i.animate({r:s.r,start:s.start,end:s.end},e.options.animation))}),e.animate=null)},setData:function(t,e,i,n){we.prototype.setData.call(this,t,!1,i,n),this.processData(),this.generatePoints(),Ft(e,!0)&&this.chart.redraw(i)},updateTotals:function(){var t,e,i=0,n=this.points,s=n.length,r=this.options.ignoreHiddenPoint;for(t=0;s>t;t++)e=n[t],i+=r&&!e.visible?0:e.y;for(this.total=i,t=0;s>t;t++)e=n[t],e.percentage=i>0&&(e.visible||!r)?e.y/i*100:0,e.total=i},generatePoints:function(){we.prototype.generatePoints.call(this),this.updateTotals()},translate:function(t){this.generatePoints();var e,i,n,s,r,o=0,a=this.options,l=a.slicedOffset,c=l+a.borderWidth,h=a.startAngle||0,u=this.startAngleRad=gt/180*(h-90),h=(this.endAngleRad=gt/180*(Ft(a.endAngle,h+360)-90))-u,d=this.points,p=a.dataLabels.distance,a=a.ignoreHiddenPoint,f=d.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,i){return n=ot.asin(ut((e-t[1])/(t[2]/2+p),1)),t[0]+(i?-1:1)*pt(n)*(t[2]/2+p)},s=0;f>s;s++)r=d[s],e=u+o*h,(!a||r.visible)&&(o+=r.percentage/100),i=u+o*h,r.shapeType="arc",r.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:at(1e3*e)/1e3,end:at(1e3*i)/1e3},n=(i+e)/2,n>1.5*gt?n-=2*gt:-gt/2>n&&(n+=2*gt),r.slicedTranslation={translateX:at(pt(n)*l),translateY:at(ft(n)*l)},e=pt(n)*t[2]/2,i=ft(n)*t[2]/2,r.tooltipPos=[t[0]+.7*e,t[1]+.7*i],r.half=-gt/2>n||n>gt/2?1:0,r.angle=n,c=ut(c,p/2),r.labelPos=[t[0]+e+pt(n)*p,t[1]+i+ft(n)*p,t[0]+e+pt(n)*c,t[1]+i+ft(n)*c,t[0]+e,t[1]+i,0>p?"center":r.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var t,e,i,n,s,r=this,o=r.chart.renderer,a=r.options.shadow;a&&!r.shadowGroup&&(r.shadowGroup=o.g("shadow").add(r.group)),Gt(r.points,function(l){null!==l.y&&(e=l.graphic,n=l.shapeArgs,i=l.shadowGroup,a&&!i&&(i=l.shadowGroup=o.g("shadow").add(r.shadowGroup)),t=l.sliced?l.slicedTranslation:{translateX:0,translateY:0},i&&i.attr(t),e?e.animate(Bt(n,t)):(s={"stroke-linejoin":"round"},l.visible||(s.visibility="hidden"),l.graphic=e=o[l.shapeType](n).setRadialReference(r.center).attr(l.pointAttr[l.selected?"select":""]).attr(s).attr(t).add(r.group).shadow(a,i)))})},searchPoint:Dt,sortByAngle:function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})},drawLegendSymbol:ce.drawRectangle,getCenter:_e.getCenter,getSymbol:Dt},qt=f(we,qt),jt.pie=qt,we.prototype.drawDataLabels=function(){var e,i,n,s,r=this,o=r.options,a=o.cursor,l=o.dataLabels,h=r.points,u=r.hasRendered||0,d=r.chart.renderer;(l.enabled||r._hasPointLabels)&&(r.dlProcessOptions&&r.dlProcessOptions(l),s=r.plotGroup("dataLabelsGroup","data-labels",l.defer?"hidden":"visible",l.zIndex||6),Ft(l.defer,!0)&&(s.attr({opacity:+u}),u||Kt(r,"afterAnimate",function(){r.visible&&s.show(),s[o.animation?"animate":"attr"]({opacity:1},{duration:200})})),i=l,Gt(h,function(h){var u,p,f,g,m=h.dataLabel,y=h.connector,b=!0,_={};if(e=h.dlOptions||h.options&&h.options.dataLabels,u=Ft(e&&e.enabled,i.enabled),m&&!u)h.dataLabel=m.destroy();else if(u){if(l=t(i,e),g=l.style,u=l.rotation,p=h.getLabelConfig(),n=l.format?v(l.format,p):l.formatter.call(p,l),g.color=Ft(l.color,g.color,r.color,"black"),m)c(n)?(m.attr({text:n}),b=!1):(h.dataLabel=m=m.destroy(),y&&(h.connector=y.destroy()));else if(c(n)){m={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":l.borderWidth,r:l.borderRadius||0,rotation:u,padding:l.padding,zIndex:1},"contrast"===g.color&&(_.color=l.inside||l.distance<0||o.stacking?d.getContrast(h.color||r.color):"#000000"),a&&(_.cursor=a);for(f in m)m[f]===P&&delete m[f];m=h.dataLabel=d[u?"text":"label"](n,0,-999,l.shape,null,null,l.useHTML).attr(m).css(Bt(g,_)).add(s).shadow(l.shadow)}m&&r.alignDataLabel(h,m,l,null,b)}}))},we.prototype.alignDataLabel=function(t,e,i,n,s){var r=this.chart,o=r.inverted,a=Ft(t.plotX,-999),l=Ft(t.plotY,-999),c=e.getBBox(),h=r.renderer.fontMetrics(i.style.fontSize).b,u=this.visible&&(t.series.forceDL||r.isInsidePlot(a,at(l),o)||n&&r.isInsidePlot(a,o?n.x+1:n.y+n.height-1,o));u&&(n=Bt({x:o?r.plotWidth-l:a,y:at(o?r.plotHeight-a:l),width:0,height:0},n),Bt(i,{width:c.width,height:c.height}),i.rotation?(t=r.renderer.rotCorr(h,i.rotation),e[s?"attr":"animate"]({x:n.x+i.x+n.width/2+t.x,y:n.y+i.y+n.height/2}).attr({align:i.align})):(e.align(i,null,n),o=e.alignAttr,"justify"===Ft(i.overflow,"justify")?this.justifyDataLabel(e,i,o,c,n,s):Ft(i.crop,!0)&&(u=r.isInsidePlot(o.x,o.y)&&r.isInsidePlot(o.x+c.width,o.y+c.height)),i.shape&&e.attr({anchorX:t.plotX,anchorY:t.plotY}))),u||(e.attr({y:-999}),e.placed=!1)},we.prototype.justifyDataLabel=function(t,e,i,n,s,r){var o,a,l=this.chart,c=e.align,h=e.verticalAlign,u=t.box?0:t.padding||0;o=i.x+u,0>o&&("right"===c?e.align="left":e.x=-o,a=!0),o=i.x+n.width-u,o>l.plotWidth&&("left"===c?e.align="right":e.x=l.plotWidth-o,a=!0),o=i.y+u,0>o&&("bottom"===h?e.verticalAlign="top":e.y=-o,a=!0),o=i.y+n.height-u,o>l.plotHeight&&("top"===h?e.verticalAlign="bottom":e.y=l.plotHeight-o,a=!0),a&&(t.placed=!r,t.align(e,null,s))},jt.pie&&(jt.pie.prototype.drawDataLabels=function(){var t,e,i,n,s,r,o,a,l,c,h,u=this,d=u.data,p=u.chart,f=u.options.dataLabels,g=Ft(f.connectorPadding,10),m=Ft(f.connectorWidth,1),v=p.plotWidth,y=p.plotHeight,b=Ft(f.softConnector,!0),_=f.distance,x=u.center,k=x[2]/2,T=x[1],C=_>0,S=[[],[]],A=[0,0,0,0],E=function(t,e){return e.y-t.y};if(u.visible&&(f.enabled||u._hasPointLabels)){for(we.prototype.drawDataLabels.apply(u),Gt(d,function(t){t.dataLabel&&t.visible&&S[t.half].push(t)}),c=2;c--;){var L,D=[],I=[],P=S[c],N=P.length;if(N){for(u.sortByAngle(P,c-.5),h=d=0;!d&&P[h];)d=P[h]&&P[h].dataLabel&&(P[h].dataLabel.getBBox().height||21),h++;if(_>0){for(s=ut(T+k+_,p.plotHeight),h=ht(0,T-k-_);s>=h;h+=d)D.push(h);if(s=D.length,N>s){for(t=[].concat(P),t.sort(E),h=N;h--;)t[h].rank=h;for(h=N;h--;)P[h].rank>=s&&P.splice(h,1);N=P.length}for(h=0;N>h;h++){t=P[h],r=t.labelPos,t=9999;var O,M;for(M=0;s>M;M++)O=dt(D[M]-r[1]),t>O&&(t=O,L=M);if(h>L&&null!==D[h])L=h;else for(N-h+L>s&&null!==D[h]&&(L=s-N+h);null===D[L];)L++;I.push({i:L,y:D[L]}),D[L]=null}I.sort(E)}for(h=0;N>h;h++)t=P[h],r=t.labelPos,n=t.dataLabel,l=t.visible===!1?"hidden":"inherit",t=r[1],_>0?(s=I.pop(),L=s.i,a=s.y,(t>a&&null!==D[L+1]||a>t&&null!==D[L-1])&&(a=ut(ht(0,t),p.plotHeight))):a=t,o=f.justify?x[0]+(c?-1:1)*(k+_):u.getX(a===T-k-_||a===T+k+_?t:a,c),n._attr={visibility:l,align:r[6]},n._pos={x:o+f.x+({left:g,right:-g}[r[6]]||0),y:a+f.y-10},n.connX=o,n.connY=a,null===this.options.size&&(s=n.width,g>o-s?A[3]=ht(at(s-o+g),A[3]):o+s>v-g&&(A[1]=ht(at(o+s-v+g),A[1])),0>a-d/2?A[0]=ht(at(-a+d/2),A[0]):a+d/2>y&&(A[2]=ht(at(a+d/2-y),A[2])))}}(0===w(A)||this.verifyDataLabelOverflow(A))&&(this.placeDataLabels(),C&&m&&Gt(this.points,function(t){e=t.connector,r=t.labelPos,(n=t.dataLabel)&&n._pos&&t.visible?(l=n._attr.visibility,o=n.connX,a=n.connY,i=b?["M",o+("left"===r[6]?5:-5),a,"C",o,a,2*r[2]-r[4],2*r[3]-r[5],r[2],r[3],"L",r[4],r[5]]:["M",o+("left"===r[6]?5:-5),a,"L",r[2],r[3],"L",r[4],r[5]],e?(e.animate({d:i}),e.attr("visibility",l)):t.connector=e=u.chart.renderer.path(i).attr({"stroke-width":m,stroke:f.connectorColor||t.color||"#606060",visibility:l}).add(u.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},jt.pie.prototype.placeDataLabels=function(){Gt(this.points,function(t){var e=t.dataLabel;e&&t.visible&&((t=e._pos)?(e.attr(e._attr),e[e.moved?"animate":"attr"](t),e.moved=!0):e&&e.attr({y:-999}))})},jt.pie.prototype.alignDataLabel=Dt,jt.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,s=n.center,r=n.minSize||80,o=r;return null!==s[0]?o=ht(i[2]-ht(t[1],t[3]),r):(o=ht(i[2]-t[1]-t[3],r),i[0]+=(t[3]-t[1])/2),null!==s[1]?o=ht(ut(o,i[2]-ht(t[0],t[2])),r):(o=ht(ut(o,i[2]-t[0]-t[2]),r),i[1]+=(t[0]-t[2])/2),o<i[2]?(i[2]=o,i[3]=/%$/.test(n.innerSize||0)?o*parseFloat(n.innerSize||0)/100:parseFloat(n.innerSize||0),this.translate(i),Gt(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),jt.column&&(jt.column.prototype.alignDataLabel=function(e,i,n,s,r){var o=this.chart.inverted,a=e.series,l=e.dlBox||e.shapeArgs,c=Ft(e.below,e.plotY>Ft(this.translatedThreshold,a.yAxis.len)),h=Ft(n.inside,!!this.options.stacking);l&&(s=t(l),o&&(s={x:a.yAxis.len-s.y-s.height,y:a.xAxis.len-s.x-s.width,width:s.height,height:s.width}),!h)&&(o?(s.x+=c?0:s.width,s.width=0):(s.y+=c?s.height:0,s.height=0)),n.align=Ft(n.align,!o||h?"center":c?"right":"left"),n.verticalAlign=Ft(n.verticalAlign,o||h?"middle":c?"top":"bottom"),we.prototype.alignDataLabel.call(this,e,i,n,s,r)}),function(t){var e=t.Chart,i=t.each,n=t.pick,s=HighchartsAdapter.addEvent;e.prototype.callbacks.push(function(t){function e(){var e=[];i(t.series,function(t){var s=t.options.dataLabels,r=t.dataLabelCollections||["dataLabel"];(s.enabled||t._hasPointLabels)&&!s.allowOverlap&&t.visible&&i(r,function(s){i(t.points,function(t){t[s]&&(t[s].labelrank=n(t.labelrank,t.shapeArgs&&t.shapeArgs.height),e.push(t[s]))})})}),t.hideOverlappingLabels(e)}e(),s(t,"redraw",e)}),e.prototype.hideOverlappingLabels=function(t){var e,n,s,r,o,a,l,c=t.length;for(n=0;c>n;n++)(e=t[n])&&(e.oldOpacity=e.opacity,e.newOpacity=1);for(t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)}),n=0;c>n;n++)for(s=t[n],e=n+1;c>e;++e)r=t[e],s&&r&&s.placed&&r.placed&&0!==s.newOpacity&&0!==r.newOpacity&&(o=s.alignAttr,a=r.alignAttr,l=2*(s.box?0:s.padding),o=!(a.x>o.x+(s.width-l)||a.x+(r.width-l)<o.x||a.y>o.y+(s.height-l)||a.y+(r.height-l)<o.y))&&((s.labelrank<r.labelrank?s:r).newOpacity=0);i(t,function(t){var e,i;t&&(i=t.newOpacity,t.oldOpacity!==i&&t.placed&&(i?t.show(!0):e=function(){t.hide()},t.alignAttr.opacity=i,t[t.isOld?"animate":"attr"](t.alignAttr,null,e)),t.isOld=!0)})}}(nt),qt=nt.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,i=e.pointer,n=t.options.cursor,s=n&&{cursor:n},r=function(t){for(var i,n=t.target;n&&!i;)i=n.point,n=n.parentNode;i!==P&&i!==e.hoverPoint&&i.onMouseOver(t)};Gt(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(Gt(t.trackerGroups,function(e){t[e]&&(t[e].addClass("highcharts-tracker").on("mouseover",r).on("mouseout",function(t){i.onTrackerMouseOut(t)}).css(s),O)&&t[e].on("touchstart",r)}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e=this,i=e.options,n=i.trackByArea,s=[].concat(n?e.areaPath:e.graphPath),r=s.length,o=e.chart,a=o.pointer,l=o.renderer,c=o.options.tooltip.snap,h=e.tracker,u=i.cursor,d=u&&{cursor:u},u=e.singlePoints,p=function(){o.hoverSeries!==e&&e.onMouseOver()},f="rgba(192,192,192,"+(Ct?1e-4:.002)+")";if(r&&!n)for(t=r+1;t--;)"M"===s[t]&&s.splice(t+1,0,s[t+1]-c,s[t+2],"L"),(t&&"M"===s[t]||t===r)&&s.splice(t,0,"L",s[t-2]+c,s[t-1]);for(t=0;t<u.length;t++)r=u[t],s.push("M",r.plotX-c,r.plotY,"L",r.plotX+c,r.plotY);h?h.attr({d:s}):(e.tracker=l.path(s).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:f,fill:n?f:Ot,"stroke-width":i.lineWidth+(n?0:2*c),zIndex:2}).add(e.group),Gt([e.tracker,e.markerGroup],function(t){t.addClass("highcharts-tracker").on("mouseover",p).on("mouseout",function(t){a.onTrackerMouseOut(t)}).css(d),O&&t.on("touchstart",p)}))}},jt.column&&(ke.prototype.drawTracker=qt.drawTrackerPoint),jt.pie&&(jt.pie.prototype.drawTracker=qt.drawTrackerPoint),jt.scatter&&(Te.prototype.drawTracker=qt.drawTrackerPoint),Bt(be.prototype,{setItemEvents:function(t,e,i,n,s){var r=this;(i?e:t.legendGroup).on("mouseover",function(){t.setState("hover"),e.css(r.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?n:s),t.setState()}).on("click",function(e){var i=function(){t.setVisible()},e={browserEvent:e};t.firePointEvent?t.firePointEvent("legendItemClick",e,i):Zt(t,"legendItemClick",e,i)})},createCheckboxForItem:function(t){t.checkbox=p("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),Kt(t.checkbox,"click",function(e){Zt(t.series||t,"checkboxClick",{checked:e.target.checked,item:t},function(){t.select()})})}}),R.legend.itemStyle.cursor="pointer",Bt(zt.prototype,{showResetZoom:function(){var t=this,e=R.lang,i=t.options.chart.resetZoomButton,n=i.theme,s=n.states,r="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},n,s&&s.hover).attr({align:i.position.align,title:e.resetZoomTitle}).add().align(i.position,!1,r)},zoomOut:function(){var t=this;Zt(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,s=this.pointer,r=!1;!t||t.resetSelection?Gt(this.axes,function(t){e=t.zoom()}):Gt(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,n=i.isXAxis;(s[n?"zoomX":"zoomY"]||s[n?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(r=!0))}),i=this.resetZoomButton,r&&!i?this.showResetZoom():!r&&n(i)&&(this.resetZoomButton=i.destroy()),e&&this.redraw(Ft(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(t,e){var i,n=this,s=n.hoverPoints;s&&Gt(s,function(t){t.setState()}),Gt("xy"===e?[1,0]:[1],function(e){var s=t[e?"chartX":"chartY"],r=n[e?"xAxis":"yAxis"][0],o=n[e?"mouseDownX":"mouseDownY"],a=(r.pointRange||0)/2,l=r.getExtremes(),c=r.toValue(o-s,!0)+a,a=r.toValue(o+n[e?"plotWidth":"plotHeight"]-s,!0)-a,o=o>s;r.series.length&&(o||c>ut(l.dataMin,l.min))&&(!o||a<ht(l.dataMax,l.max))&&(r.setExtremes(c,a,!1,!1,{trigger:"pan"}),i=!0),n[e?"mouseDownX":"mouseDownY"]=s}),i&&n.redraw(!1),d(n.container,{cursor:"move"})}}),Bt(xe.prototype,{select:function(t,e){var i=this,n=i.series,s=n.chart,t=Ft(t,!i.selected);i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[Xt(i,n.data)]=i.options,i.setState(t&&"select"),e||Gt(s.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[Xt(t,n.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t,e){var i=this.series,n=i.chart,s=n.tooltip,r=n.hoverPoint;n.hoverSeries!==i&&i.onMouseOver(),r&&r!==this&&r.onMouseOut(),this.series&&(this.firePointEvent("mouseOver"),s&&(!s.shared||i.noSharedTooltip)&&s.refresh(this,t),this.setState("hover"),!e)&&(n.hoverPoint=this)},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut"),e&&-1!==Xt(this,e)||(this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var e,i=t(this.series.options.point,this.options).events;this.events=i;for(e in i)Kt(this,e,i[e]);this.hasImportedEvents=!0}},setState:function(e,i){var n,s=this.plotX,r=this.plotY,o=this.series,a=o.options.states,l=ne[o.type].marker&&o.options.marker,c=l&&!l.enabled,h=l&&l.states[e],u=h&&h.enabled===!1,d=o.stateMarkerGraphic,p=this.marker||{},f=o.chart,g=o.halo,e=e||"";n=this.pointAttr[e]||o.pointAttr[e],e===this.state&&!i||this.selected&&"select"!==e||a[e]&&a[e].enabled===!1||e&&(u||c&&h.enabled===!1)||e&&p.states&&p.states[e]&&p.states[e].enabled===!1||(this.graphic?(l=l&&this.graphic.symbolName&&n.r,this.graphic.attr(t(n,l?{x:s-l,y:r-l,width:2*l,height:2*l}:{})),d&&d.hide()):(e&&h&&(l=h.radius,p=p.symbol||o.symbol,d&&d.currentSymbol!==p&&(d=d.destroy()),d?d[i?"animate":"attr"]({x:s-l,y:r-l}):p&&(o.stateMarkerGraphic=d=f.renderer.symbol(p,s-l,r-l,2*l,2*l).attr(n).add(o.markerGroup),d.currentSymbol=p)),d&&(d[e&&f.isInsidePlot(s,r,f.inverted)?"show":"hide"](),d.element.point=this)),(s=a[e]&&a[e].halo)&&s.size?(g||(o.halo=g=f.renderer.path().add(f.seriesGroup)),g.attr(Bt({fill:ae(this.color||o.color).setOpacity(s.opacity).get()},s.attributes))[i?"animate":"attr"]({d:this.haloPath(s.size)})):g&&g.attr({d:[]}),this.state=e)},haloPath:function(t){var e=this.series,i=e.chart,n=e.getPlotBox(),s=i.inverted;return i.renderer.symbols.circle(n.translateX+(s?e.yAxis.len-this.plotY:this.plotX)-t,n.translateY+(s?e.xAxis.len-this.plotX:this.plotY)-t,2*t,2*t)}}),Bt(we.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&Zt(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,i=e.tooltip,n=e.hoverPoint;e.hoverSeries=null,n&&n.onMouseOut(),this&&t.events.mouseOut&&Zt(this,"mouseOut"),i&&!t.stickyTracking&&(!i.shared||this.noSharedTooltip)&&i.hide(),this.setState()},setState:function(t){var e=this.options,i=this.graph,n=e.states,s=e.lineWidth,e=0,t=t||"";if(this.state!==t&&(this.state=t,!(n[t]&&n[t].enabled===!1)&&(t&&(s=n[t].lineWidth||s+(n[t].lineWidthPlus||0)),i&&!i.dashstyle)))for(t={"stroke-width":s},i.attr(t);this["zoneGraph"+e];)this["zoneGraph"+e].attr(t),e+=1},setVisible:function(t,e){var i,n=this,s=n.chart,r=n.legendItem,o=s.options.chart.ignoreHiddenSeries,a=n.visible;i=(n.visible=t=n.userOptions.visible=t===P?!a:t)?"show":"hide",Gt(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()}),(s.hoverSeries===n||(s.hoverPoint&&s.hoverPoint.series)===n)&&n.onMouseOut(),r&&s.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&Gt(s.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),Gt(n.linkedSeries,function(e){e.setVisible(t,!1)}),o&&(s.isDirtyBox=!0),e!==!1&&s.redraw(),Zt(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=t===P?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),Zt(this,t?"select":"unselect")},drawTracker:qt.drawTrackerGraph}),Bt(nt,{Color:ae,Point:xe,Tick:D,Renderer:N,SVGElement:L,SVGRenderer:le,arrayMin:x,arrayMax:w,charts:It,dateFormat:$,error:C,format:v,pathAnim:j,getOptions:function(){return R},hasBidiBug:St,isTouchDevice:kt,setOptions:function(e){return R=t(!0,R,e),E(),R},addEvent:Kt,removeEvent:Jt,createElement:p,discardElement:T,css:d,each:Gt,map:Qt,merge:t,splat:u,extendClass:f,pInt:e,svg:Ct,canvas:At,vml:!Ct&&!At,product:"Highcharts",version:"4.1.8"})}(),function(t,e){function i(t,e,i){this.init.call(this,t,e,i)}var n=t.arrayMin,s=t.arrayMax,r=t.each,o=t.extend,a=t.merge,l=t.map,c=t.pick,h=t.pInt,u=t.getOptions().plotOptions,d=t.seriesTypes,p=t.extendClass,f=t.splat,g=t.wrap,m=t.Axis,v=t.Tick,y=t.Point,b=t.Pointer,_=t.CenteredSeriesMixin,x=t.TrackerMixin,w=t.Series,k=Math,T=k.round,C=k.floor,S=k.max,A=t.Color,E=function(){};o(i.prototype,{init:function(t,e,i){var n=this,s=n.defaultOptions;n.chart=e,n.options=t=a(s,e.angular?{background:{}}:void 0,t),(t=t.background)&&r([].concat(f(t)).reverse(),function(t){var e=t.backgroundColor,s=i.userOptions,t=a(n.defaultBackgroundOptions,t);e&&(t.backgroundColor=e),t.color=t.backgroundColor,i.options.plotBands.unshift(t),s.plotBands=s.plotBands||[],s.plotBands.unshift(t)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var L=m.prototype,v=v.prototype,D={getOffset:E,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:E,setCategories:E,setTitle:E},I={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(t){t=this.options=a(this.defaultOptions,this.defaultRadialOptions,t),t.plotBands||(t.plotBands=[])},getOffset:function(){L.getOffset.call(this),this.chart.axisOffset[this.side]=0,this.center=this.pane.center=_.getCenter.call(this.pane)},getLinePath:function(t,e){var i=this.center,e=c(e,i[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+i[0],this.top+i[1],e,e,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){L.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)},setAxisSize:function(){L.setAxisSize.call(this),this.isRadial&&(this.center=this.pane.center=t.CenteredSeriesMixin.getCenter.call(this.pane),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*c(this.sector,1)/2)},getPosition:function(t,e){return this.postTranslate(this.isCircular?this.translate(t):0,c(this.isCircular?e:this.translate(t),this.center[2]/2)-this.offset)},postTranslate:function(t,e){var i=this.chart,n=this.center,t=this.startAngleRad+t;return{x:i.plotLeft+n[0]+Math.cos(t)*e,y:i.plotTop+n[1]+Math.sin(t)*e}},getPlotBandPath:function(t,e,i){var n,s=this.center,r=this.startAngleRad,o=s[2]/2,a=[c(i.outerRadius,"100%"),i.innerRadius,c(i.thickness,10)],u=/%$/,d=this.isCircular;return"polygon"===this.options.gridLineInterpolation?s=this.getPlotLinePath(t).concat(this.getPlotLinePath(e,!0)):(t=Math.max(t,this.min),e=Math.min(e,this.max),d||(a[0]=this.translate(t),a[1]=this.translate(e)),a=l(a,function(t){return u.test(t)&&(t=h(t,10)*o/100),t}),"circle"!==i.shape&&d?(t=r+this.translate(t),e=r+this.translate(e)):(t=-Math.PI/2,e=1.5*Math.PI,n=!0),s=this.chart.renderer.symbols.arc(this.left+s[0],this.top+s[1],a[0],a[0],{start:Math.min(t,e),end:Math.max(t,e),innerR:c(a[1],a[0]-a[2]),open:n})),s},getPlotLinePath:function(t,e){var i,n,s,o=this,a=o.center,l=o.chart,c=o.getPosition(t);return o.isCircular?s=["M",a[0]+l.plotLeft,a[1]+l.plotTop,"L",c.x,c.y]:"circle"===o.options.gridLineInterpolation?(t=o.translate(t))&&(s=o.getLinePath(0,t)):(r(l.xAxis,function(t){t.pane===o.pane&&(i=t)}),s=[],t=o.translate(t),a=i.tickPositions,i.autoConnect&&(a=a.concat([a[0]])),e&&(a=[].concat(a).reverse()),r(a,function(e,r){n=i.getPosition(e,t),s.push(r?"L":"M",n.x,n.y)})),s},getTitlePosition:function(){var t=this.center,e=this.chart,i=this.options.title;return{x:e.plotLeft+t[0]+(i.x||0),y:e.plotTop+t[1]-{high:.5,middle:.25,low:0}[i.align]*t[2]+(i.y||0)}}};g(L,"init",function(t,n,s){var r,l,h,u=n.angular,d=n.polar,p=s.isX,g=u&&p;h=n.options;var m=s.pane||0;u?(o(this,g?D:I),(l=!p)&&(this.defaultRadialOptions=this.defaultRadialGaugeOptions)):d&&(o(this,I),this.defaultRadialOptions=(l=p)?this.defaultRadialXOptions:a(this.defaultYAxisOptions,this.defaultRadialYOptions)),t.call(this,n,s),g||!u&&!d||(t=this.options,n.panes||(n.panes=[]),this.pane=(r=n.panes[m]=n.panes[m]||new i(f(h.pane)[m],n,this),m=r),m=m.options,n.inverted=!1,h.chart.zoomType=null,this.startAngleRad=n=(m.startAngle-90)*Math.PI/180,this.endAngleRad=h=(c(m.endAngle,m.startAngle+360)-90)*Math.PI/180,this.offset=t.offset||0,(this.isCircular=l)&&s.max===e&&h-n===2*Math.PI&&(this.autoConnect=!0))}),g(v,"getPosition",function(t,e,i,n,s){var r=this.axis;return r.getPosition?r.getPosition(i):t.call(this,e,i,n,s)}),g(v,"getLabelPosition",function(t,e,i,n,s,r,o,a,l){var h=this.axis,u=r.y,d=20,p=r.align,f=(h.translate(this.pos)+h.startAngleRad+Math.PI/2)/Math.PI*180%360;return h.isRadial?(t=h.getPosition(this.pos,h.center[2]/2+c(r.distance,-25)),"auto"===r.rotation?n.attr({rotation:f}):null===u&&(u=h.chart.renderer.fontMetrics(n.styles.fontSize).b-n.getBBox().height/2),null===p&&(h.isCircular?(this.label.getBBox().width>h.len*h.tickInterval/(h.max-h.min)&&(d=0),p=f>d&&180-d>f?"left":f>180+d&&360-d>f?"right":"center"):p="center",n.attr({align:p})),t.x+=r.x,t.y+=u):t=t.call(this,e,i,n,s,r,o,a,l),t}),g(v,"getMarkPath",function(t,e,i,n,s,r,o){var a=this.axis;return a.isRadial?(t=a.getPosition(this.pos,a.center[2]/2+n),e=["M",e,i,"L",t.x,t.y]):e=t.call(this,e,i,n,s,r,o),e}),u.arearange=a(u.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}}),d.arearange=p(d.area,{type:"arearange",pointArrayMap:["low","high"],dataLabelCollections:["dataLabel","dataLabelUpper"],toYData:function(t){return[t.low,t.high]},pointValKey:"low",deferTranslatePolar:!0,highToXY:function(t){var e=this.chart,i=this.xAxis.postTranslate(t.rectPlotX,this.yAxis.len-t.plotHigh);t.plotHighX=i.x-e.plotLeft,t.plotHigh=i.y-e.plotTop},getSegments:function(){var t=this;r(t.points,function(e){t.options.connectNulls||null!==e.low&&null!==e.high?null===e.low&&null!==e.high&&(e.y=e.high):e.y=null}),w.prototype.getSegments.call(this)},translate:function(){var t=this,e=t.yAxis;d.area.prototype.translate.apply(t),r(t.points,function(t){var i=t.low,n=t.high,s=t.plotY;null===n&&null===i?t.y=null:null===i?(t.plotLow=t.plotY=null,t.plotHigh=e.translate(n,0,1,0,1)):null===n?(t.plotLow=s,t.plotHigh=null):(t.plotLow=s,t.plotHigh=e.translate(n,0,1,0,1))}),this.chart.polar&&r(this.points,function(e){t.highToXY(e)})},getSegmentPath:function(t){var e,i,n,s=[],r=t.length,o=w.prototype.getSegmentPath;n=this.options;var a=n.step;for(e=HighchartsAdapter.grep(t,function(t){return null!==t.plotLow});r--;)i=t[r],null!==i.plotHigh&&s.push({plotX:i.plotHighX||i.plotX,plotY:i.plotHigh});return t=o.call(this,e),a&&(a===!0&&(a="left"),n.step={left:"right",center:"center",right:"left"}[a]),s=o.call(this,s),n.step=a,n=[].concat(t,s),this.chart.polar||(s[0]="L"),this.areaPath=this.areaPath.concat(t,s),n},drawDataLabels:function(){var t,e,i,n=this.data,s=n.length,r=[],o=w.prototype,a=this.options.dataLabels,l=a.align,c=this.chart.inverted;if(a.enabled||this._hasPointLabels){for(t=s;t--;)(e=n[t])&&(i=e.plotHigh>e.plotLow,e.y=e.high,e._plotY=e.plotY,e.plotY=e.plotHigh,r[t]=e.dataLabel,e.dataLabel=e.dataLabelUpper,e.below=i,c?(l||(a.align=i?"right":"left"),a.x=a.xHigh):a.y=a.yHigh);for(o.drawDataLabels&&o.drawDataLabels.apply(this,arguments),t=s;t--;)(e=n[t])&&(i=e.plotHigh>e.plotLow,e.dataLabelUpper=e.dataLabel,e.dataLabel=r[t],e.y=e.low,e.plotY=e._plotY,e.below=!i,c?(l||(a.align=i?"left":"right"),a.x=a.xLow):a.y=a.yLow);o.drawDataLabels&&o.drawDataLabels.apply(this,arguments)}a.align=l},alignDataLabel:function(){d.column.prototype.alignDataLabel.apply(this,arguments)},setStackedPoints:E,getSymbol:E,drawPoints:E}),u.areasplinerange=a(u.arearange),d.areasplinerange=p(d.arearange,{type:"areasplinerange",getPointSpline:d.spline.prototype.getPointSpline}),function(){var t=d.column.prototype;u.columnrange=a(u.column,u.arearange,{lineWidth:1,pointRange:null}),d.columnrange=p(d.arearange,{type:"columnrange",translate:function(){var e,i=this,n=i.yAxis;t.translate.apply(i),r(i.points,function(t){var s,r=t.shapeArgs,o=i.options.minPointLength;t.tooltipPos=null,t.plotHigh=e=n.translate(t.high,0,1,0,1),t.plotLow=t.plotY,s=e,t=t.plotY-e,Math.abs(t)<o?(o-=t,t+=o,s-=o/2):0>t&&(t*=-1,s-=t),r.height=t,r.y=s})},directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:E,pointAttrToOptions:t.pointAttrToOptions,drawPoints:t.drawPoints,drawTracker:t.drawTracker,animate:t.animate,getColumnMetrics:t.getColumnMetrics})}(),u.gauge=a(u.line,{dataLabels:{enabled:!0,defer:!1,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1}),x={type:"gauge",pointClass:p(y,{setState:function(t){this.state=t}}),angular:!0,drawGraph:E,fixedBox:!0,forceDL:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var t=this.yAxis,e=this.options,i=t.center;this.generatePoints(),r(this.points,function(n){var s=a(e.dial,n.dial),r=h(c(s.radius,80))*i[2]/200,o=h(c(s.baseLength,70))*r/100,l=h(c(s.rearLength,10))*r/100,u=s.baseWidth||3,d=s.topWidth||1,p=e.overshoot,f=t.startAngleRad+t.translate(n.y,null,null,null,!0);p&&"number"==typeof p?(p=p/180*Math.PI,f=Math.max(t.startAngleRad-p,Math.min(t.endAngleRad+p,f))):e.wrap===!1&&(f=Math.max(t.startAngleRad,Math.min(t.endAngleRad,f))),f=180*f/Math.PI,n.shapeType="path",n.shapeArgs={d:s.path||["M",-l,-u/2,"L",o,-u/2,r,-d/2,r,d/2,o,u/2,-l,u/2,"z"],translateX:i[0],translateY:i[1],rotation:f},n.plotX=i[0],n.plotY=i[1]})},drawPoints:function(){var t=this,e=t.yAxis.center,i=t.pivot,n=t.options,s=n.pivot,o=t.chart.renderer;r(t.points,function(e){var i=e.graphic,s=e.shapeArgs,r=s.d,l=a(n.dial,e.dial);i?(i.animate(s),s.d=r):e.graphic=o[e.shapeType](s).attr({stroke:l.borderColor||"none","stroke-width":l.borderWidth||0,fill:l.backgroundColor||"black",rotation:s.rotation}).add(t.group)}),i?i.animate({translateX:e[0],translateY:e[1]}):t.pivot=o.circle(0,0,c(s.radius,5)).attr({"stroke-width":s.borderWidth||0,stroke:s.borderColor||"silver",fill:s.backgroundColor||"black"}).translate(e[0],e[1]).add(t.group)},animate:function(t){var e=this;t||(r(e.points,function(t){var i=t.graphic;i&&(i.attr({rotation:180*e.yAxis.startAngleRad/Math.PI}),i.animate({rotation:t.shapeArgs.rotation},e.options.animation))}),e.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),w.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(t,e){w.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),c(e,!0)&&this.chart.redraw()},drawTracker:x&&x.drawTrackerPoint},d.gauge=p(d.line,x),u.boxplot=a(u.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",whiskerWidth:2}),d.boxplot=p(d.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(t){return[t.low,t.q1,t.median,t.q3,t.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:E,translate:function(){var t=this.yAxis,e=this.pointArrayMap;d.column.prototype.translate.apply(this),r(this.points,function(i){r(e,function(e){null!==i[e]&&(i[e+"Plot"]=t.translate(i[e],0,1,0,1))})})},drawPoints:function(){var t,i,n,s,o,a,l,h,u,d,p,f,g,m,v,y,b,_,x,w,k,S,A=this,E=A.points,L=A.options,D=A.chart.renderer,I=A.doQuartiles!==!1,P=parseInt(A.options.whiskerLength,10)/100;r(E,function(r){u=r.graphic,k=r.shapeArgs,p={},m={},y={},S=r.color||A.color,r.plotY!==e&&(t=r.pointAttr[r.selected?"selected":""],b=k.width,_=C(k.x),x=_+b,w=T(b/2),i=C(I?r.q1Plot:r.lowPlot),n=C(I?r.q3Plot:r.lowPlot),s=C(r.highPlot),o=C(r.lowPlot),p.stroke=r.stemColor||L.stemColor||S,p["stroke-width"]=c(r.stemWidth,L.stemWidth,L.lineWidth),p.dashstyle=r.stemDashStyle||L.stemDashStyle,m.stroke=r.whiskerColor||L.whiskerColor||S,m["stroke-width"]=c(r.whiskerWidth,L.whiskerWidth,L.lineWidth),y.stroke=r.medianColor||L.medianColor||S,y["stroke-width"]=c(r.medianWidth,L.medianWidth,L.lineWidth),l=p["stroke-width"]%2/2,h=_+w+l,d=["M",h,n,"L",h,s,"M",h,i,"L",h,o],I&&(l=t["stroke-width"]%2/2,h=C(h)+l,i=C(i)+l,n=C(n)+l,_+=l,x+=l,f=["M",_,n,"L",_,i,"L",x,i,"L",x,n,"L",_,n,"z"]),P&&(l=m["stroke-width"]%2/2,s+=l,o+=l,g=["M",h-w*P,s,"L",h+w*P,s,"M",h-w*P,o,"L",h+w*P,o]),l=y["stroke-width"]%2/2,a=T(r.medianPlot)+l,v=["M",_,a,"L",x,a],u?(r.stem.animate({d:d}),P&&r.whiskers.animate({d:g}),I&&r.box.animate({d:f}),r.medianShape.animate({d:v})):(r.graphic=u=D.g().add(A.group),
r.stem=D.path(d).attr(p).add(u),P&&(r.whiskers=D.path(g).attr(m).add(u)),I&&(r.box=D.path(f).attr(t).add(u)),r.medianShape=D.path(v).attr(y).add(u)))})},setStackedPoints:E}),u.errorbar=a(u.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),d.errorbar=p(d.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:d.arearange?d.arearange.prototype.drawDataLabels:E,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||d.column.prototype.getColumnMetrics.call(this)}}),u.waterfall=a(u.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333",dataLabels:{inside:!0},states:{hover:{lineWidthPlus:0}}}),d.waterfall=p(d.column,{type:"waterfall",upColorProp:"fill",pointValKey:"y",translate:function(){var t,e,i,n,s,r,o,a,l,c=this.options,h=this.yAxis,u=c.threshold,p=c.stacking;for(d.column.prototype.translate.apply(this),o=a=u,e=this.points,t=0,c=e.length;c>t;t++)i=e[t],r=this.processedYData[t],n=i.shapeArgs,l=(s=p&&h.stacks[(this.negStacks&&u>r?"-":"")+this.stackKey])?s[i.x].points[this.index+","+t]:[0,r],i.isSum?i.y=r:i.isIntermediateSum&&(i.y=r-a),s=S(o,o+i.y)+l[0],n.y=h.translate(s,0,1),i.isSum?(n.y=h.translate(l[1],0,1),n.height=Math.min(h.translate(l[0],0,1),h.len)-n.y):i.isIntermediateSum?(n.y=h.translate(l[1],0,1),n.height=Math.min(h.translate(a,0,1),h.len)-n.y,a=l[1]):(0!==o&&(n.height=r>0?h.translate(o,0,1)-n.y:h.translate(o,0,1)-h.translate(o-r,0,1)),o+=r),n.height<0&&(n.y+=n.height,n.height*=-1),i.plotY=n.y=T(n.y)-this.borderWidth%2/2,n.height=S(T(n.height),.001),i.yBottom=n.y+n.height,n=i.plotY+(i.negative?n.height:0),this.chart.inverted?i.tooltipPos[0]=h.len-n:i.tooltipPos[1]=n},processData:function(t){var e,i,n,s,r,o,a,l=this.yData,c=this.options.data,h=l.length;for(n=i=s=r=this.options.threshold||0,a=0;h>a;a++)o=l[a],e=c&&c[a]?c[a]:{},"sum"===o||e.isSum?l[a]=n:"intermediateSum"===o||e.isIntermediateSum?l[a]=i:(n+=o,i+=o),s=Math.min(n,s),r=Math.max(n,r);w.prototype.processData.call(this,t),this.dataMin=s,this.dataMax=r},toYData:function(t){return t.isSum?0===t.x?null:"sum":t.isIntermediateSum?0===t.x?null:"intermediateSum":t.y},getAttribs:function(){d.column.prototype.getAttribs.apply(this,arguments);var e=this,i=e.options,n=i.states,s=i.upColor||e.color,i=t.Color(s).brighten(.1).get(),o=a(e.pointAttr),l=e.upColorProp;o[""][l]=s,o.hover[l]=n.hover.upColor||i,o.select[l]=n.select.upColor||s,r(e.points,function(t){t.options.color||(t.y>0?(t.pointAttr=o,t.color=s):t.pointAttr=e.pointAttr)})},getGraphPath:function(){var t,e,i,n=this.data,s=n.length,r=T(this.options.lineWidth+this.borderWidth)%2/2,o=[];for(i=1;s>i;i++)e=n[i].shapeArgs,t=n[i-1].shapeArgs,e=["M",t.x+t.width,t.y+r,"L",e.x,t.y+r],n[i-1].y<0&&(e[2]+=t.height,e[5]+=t.height),o=o.concat(e);return o},getExtremes:E,drawGraph:w.prototype.drawGraph}),u.polygon=a(u.scatter,{marker:{enabled:!1}}),d.polygon=p(d.scatter,{type:"polygon",fillGraph:!0,getSegmentPath:function(t){return w.prototype.getSegmentPath.call(this,t).concat("z")},drawGraph:w.prototype.drawGraph,drawLegendSymbol:t.LegendSymbolMixin.drawRectangle}),u.bubble=a(u.scatter,{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),x=p(y,{haloPath:function(){return y.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size)},ttBelow:!1}),d.bubble=p(d.scatter,{type:"bubble",pointClass:x,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],bubblePadding:!0,zoneAxis:"z",pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(t){var e=this.options.marker,i=c(e.fillOpacity,.5),t=t||e.fillColor||this.color;return 1!==i&&(t=A(t).setOpacity(i).get("rgba")),t},convertAttribs:function(){var t=w.prototype.convertAttribs.apply(this,arguments);return t.fill=this.applyOpacity(t.fill),t},getRadii:function(t,e,i,n){var s,r,o=this.zData,a=[],l="width"!==this.options.sizeBy,c=e-t;for(s=0,e=o.length;e>s;s++)o[s]<t?a.push(i/2-1):(r=c>0?(o[s]-t)/c:.5,l&&r>=0&&(r=Math.sqrt(r)),a.push(k.ceil(i+r*(n-i))/2));this.radii=a},animate:function(t){var e=this.options.animation;t||(r(this.points,function(t){var i=t.graphic,t=t.shapeArgs;i&&t&&(i.attr("r",1),i.animate({r:t.r},e))}),this.animate=null)},translate:function(){var t,i,n,s=this.data,r=this.radii;for(d.scatter.prototype.translate.call(this),t=s.length;t--;)i=s[t],n=r?r[t]:0,n>=this.minPxSize/2?(i.shapeType="circle",i.shapeArgs={x:i.plotX,y:i.plotY,r:n},i.dlBox={x:i.plotX-n,y:i.plotY-n,width:2*n,height:2*n}):i.shapeArgs=i.plotY=i.dlBox=e},drawLegendSymbol:function(t,e){var i=h(t.itemStyle.fontSize)/2;e.legendSymbol=this.chart.renderer.circle(i,t.baseline-i,i).attr({zIndex:3}).add(e.legendGroup),e.legendSymbol.isMarker=!0},drawPoints:d.column.prototype.drawPoints,alignDataLabel:d.column.prototype.alignDataLabel,buildKDTree:E,applyZones:E}),m.prototype.beforePadding=function(){var t=this,i=this.len,o=this.chart,a=0,l=i,u=this.isXAxis,d=u?"xData":"yData",p=this.min,f={},g=k.min(o.plotWidth,o.plotHeight),m=Number.MAX_VALUE,v=-Number.MAX_VALUE,y=this.max-p,b=i/y,_=[];r(this.series,function(e){var i=e.options;!e.bubblePadding||!e.visible&&o.options.chart.ignoreHiddenSeries||(t.allowZoomOutside=!0,_.push(e),u&&(r(["minSize","maxSize"],function(t){var e=i[t],n=/%$/.test(e),e=h(e);f[t]=n?g*e/100:e}),e.minPxSize=f.minSize,e.maxPxSize=f.maxSize,e=e.zData,e.length&&(m=c(i.zMin,k.min(m,k.max(n(e),i.displayNegative===!1?i.zThreshold:-Number.MAX_VALUE))),v=c(i.zMax,k.max(v,s(e))))))}),r(_,function(t){var e,i=t[d],n=i.length;if(u&&t.getRadii(m,v,t.minPxSize,t.maxPxSize),y>0)for(;n--;)"number"==typeof i[n]&&(e=t.radii[n],a=Math.min((i[n]-p)*b-e,a),l=Math.max((i[n]-p)*b+e,l))}),_.length&&y>0&&!this.isLog&&(l-=i,b*=(i+a-l)/i,r([["min","userMin",a],["max","userMax",l]],function(i){c(t.options[i[0]],t[i[1]])===e&&(t[i[0]]+=i[2]/b)}))},function(){function t(t,e,i){t.call(this,e,i),this.chart.polar&&(this.closeSegment=function(t){var e=this.xAxis.center;t.push("L",e[0],e[1])},this.closedStacks=!0)}function e(t,e){var i=this.chart,n=this.options.animation,s=this.group,r=this.markerGroup,o=this.xAxis.center,a=i.plotLeft,l=i.plotTop;i.polar?i.renderer.isSVG&&(n===!0&&(n={}),e?(i={translateX:o[0]+a,translateY:o[1]+l,scaleX:.001,scaleY:.001},s.attr(i),r&&r.attr(i)):(i={translateX:a,translateY:l,scaleX:1,scaleY:1},s.animate(i,n),r&&r.animate(i,n),this.animate=null)):t.call(this,e)}var i,n=w.prototype,s=b.prototype;n.searchPointByAngle=function(t){var e=this.chart,i=this.xAxis.pane.center;return this.searchKDTree({clientX:180+Math.atan2(t.chartX-i[0]-e.plotLeft,t.chartY-i[1]-e.plotTop)*(-180/Math.PI)})},g(n,"buildKDTree",function(t){this.chart.polar&&(this.kdByAngle?this.searchPoint=this.searchPointByAngle:this.kdDimensions=2),t.apply(this)}),n.toXY=function(t){var e,i=this.chart,n=t.plotX;e=t.plotY,t.rectPlotX=n,t.rectPlotY=e,e=this.xAxis.postTranslate(t.plotX,this.yAxis.len-e),t.plotX=t.polarPlotX=e.x-i.plotLeft,t.plotY=t.polarPlotY=e.y-i.plotTop,this.kdByAngle?(i=(n/Math.PI*180+this.xAxis.pane.options.startAngle)%360,0>i&&(i+=360),t.clientX=i):t.clientX=t.plotX},d.area&&g(d.area.prototype,"init",t),d.areaspline&&g(d.areaspline.prototype,"init",t),d.spline&&g(d.spline.prototype,"getPointSpline",function(t,e,i,n){var s,r,o,a,l,c,h;return this.chart.polar?(s=i.plotX,r=i.plotY,t=e[n-1],o=e[n+1],this.connectEnds&&(t||(t=e[e.length-2]),o||(o=e[1])),t&&o&&(a=t.plotX,l=t.plotY,e=o.plotX,c=o.plotY,a=(1.5*s+a)/2.5,l=(1.5*r+l)/2.5,o=(1.5*s+e)/2.5,h=(1.5*r+c)/2.5,e=Math.sqrt(Math.pow(a-s,2)+Math.pow(l-r,2)),c=Math.sqrt(Math.pow(o-s,2)+Math.pow(h-r,2)),a=Math.atan2(l-r,a-s),l=Math.atan2(h-r,o-s),h=Math.PI/2+(a+l)/2,Math.abs(a-h)>Math.PI/2&&(h-=Math.PI),a=s+Math.cos(h)*e,l=r+Math.sin(h)*e,o=s+Math.cos(Math.PI+h)*c,h=r+Math.sin(Math.PI+h)*c,i.rightContX=o,i.rightContY=h),n?(i=["C",t.rightContX||t.plotX,t.rightContY||t.plotY,a||s,l||r,s,r],t.rightContX=t.rightContY=null):i=["M",s,r]):i=t.call(this,e,i,n),i}),g(n,"translate",function(t){var e=this.chart;if(t.call(this),e.polar&&(this.kdByAngle=e.tooltip&&e.tooltip.shared,!this.preventPostTranslate))for(t=this.points,e=t.length;e--;)this.toXY(t[e])}),g(n,"getSegmentPath",function(t,e){var i=this.points;return this.chart.polar&&this.options.connectEnds!==!1&&e[e.length-1]===i[i.length-1]&&null!==i[0].y&&(this.connectEnds=!0,e=[].concat(e,[i[0]])),t.call(this,e)}),g(n,"animate",e),d.column&&(i=d.column.prototype,g(i,"animate",e),g(i,"translate",function(t){var e,i,n=this.xAxis,s=this.yAxis.len,r=n.center,o=n.startAngleRad,a=this.chart.renderer;if(this.preventPostTranslate=!0,t.call(this),n.isRadial)for(n=this.points,i=n.length;i--;)e=n[i],t=e.barX+o,e.shapeType="path",e.shapeArgs={d:a.symbols.arc(r[0],r[1],s-e.plotY,null,{start:t,end:t+e.pointWidth,innerR:s-c(e.yBottom,s)})},this.toXY(e),e.tooltipPos=[e.plotX,e.plotY],e.ttBelow=e.plotY>r[1]}),g(i,"alignDataLabel",function(t,e,i,s,r,o){this.chart.polar?(t=e.rectPlotX/Math.PI*180,null===s.align&&(s.align=t>20&&160>t?"left":t>200&&340>t?"right":"center"),null===s.verticalAlign&&(s.verticalAlign=45>t||t>315?"bottom":t>135&&225>t?"top":"middle"),n.alignDataLabel.call(this,e,i,s,r,o)):t.call(this,e,i,s,r,o)})),g(s,"getCoordinates",function(t,e){var i=this.chart,n={xAxis:[],yAxis:[]};return i.polar?r(i.axes,function(t){var s=t.isXAxis,r=t.center,o=e.chartX-r[0]-i.plotLeft,r=e.chartY-r[1]-i.plotTop;n[s?"xAxis":"yAxis"].push({axis:t,value:t.translate(s?Math.PI-Math.atan2(o,r):Math.sqrt(Math.pow(o,2)+Math.pow(r,2)),!0)})}):n=t.call(this,e),n})}()}(Highcharts),function(t){var e,i=t.Chart,n=t.addEvent,s=t.removeEvent,r=HighchartsAdapter.fireEvent,o=t.createElement,a=t.discardElement,l=t.css,c=t.merge,h=t.each,u=t.extend,d=t.splat,p=Math.max,f=document,g=window,m=t.isTouchDevice,v=t.Renderer.prototype.symbols,y=t.getOptions();u(y.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),y.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:m?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},y.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},t.post=function(t,e,i){var n,t=o("form",c({method:"post",action:t,enctype:"multipart/form-data"},i),{display:"none"},f.body);for(n in e)o("input",{type:"hidden",name:n,value:e[n]},null,t);t.submit(),a(t)},u(i.prototype,{sanitizeSVG:function(t){return t.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xa0").replace(/&shy;/g,"\xad").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(t){return t.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(e){var i,n,s,r,l,p=this,g=c(p.options,e),m=g.exporting.allowHTML;return f.createElementNS||(f.createElementNS=function(t,e){return f.createElement(e)}),n=o("div",null,{position:"absolute",top:"-9999em",width:p.chartWidth+"px",height:p.chartHeight+"px"},f.body),s=p.renderTo.style.width,l=p.renderTo.style.height,s=g.exporting.sourceWidth||g.chart.width||/px$/.test(s)&&parseInt(s,10)||600,l=g.exporting.sourceHeight||g.chart.height||/px$/.test(l)&&parseInt(l,10)||400,u(g.chart,{animation:!1,renderTo:n,forExport:!m,width:s,height:l}),g.exporting.enabled=!1,delete g.data,g.series=[],h(p.series,function(t){r=c(t.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:t.visible}),r.isInternal||g.series.push(r)}),e&&h(["xAxis","yAxis"],function(t){h(d(e[t]),function(e,i){g[t][i]=c(g[t][i],e)})}),i=new t.Chart(g,p.callback),h(["xAxis","yAxis"],function(t){h(p[t],function(e,n){var s=i[t][n],r=e.getExtremes(),o=r.userMin,r=r.userMax;s&&(void 0!==o||void 0!==r)&&s.setExtremes(o,r,!0,!1)})}),s=i.getChartHTML(),g=null,i.destroy(),a(n),m&&(n=s.match(/<\/svg>(.*?$)/))&&(n='<foreignObject x="0" y="0 width="200" height="200"><body xmlns="http://www.w3.org/1999/xhtml">'+n[1]+"</body></foreignObject>",s=s.replace("</svg>",n+"</svg>")),s=this.sanitizeSVG(s),s=s.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},getSVGForExport:function(t,e){var i=this.options.exporting;return this.getSVG(c({chart:{borderRadius:0}},i.chartOptions,e,{exporting:{sourceWidth:t&&t.sourceWidth||i.sourceWidth,sourceHeight:t&&t.sourceHeight||i.sourceHeight}}))},exportChart:function(e,i){var n=this.getSVGForExport(e,i),e=c(this.options.exporting,e);t.post(e.url,{filename:e.filename||"chart",type:e.type,width:e.width||0,scale:e.scale||2,svg:n},e.formAttributes)},print:function(){var t=this,e=t.container,i=[],n=e.parentNode,s=f.body,o=s.childNodes;t.isPrinting||(t.isPrinting=!0,r(t,"beforePrint"),h(o,function(t,e){1===t.nodeType&&(i[e]=t.style.display,t.style.display="none")}),s.appendChild(e),g.focus(),g.print(),setTimeout(function(){n.appendChild(e),h(o,function(t,e){1===t.nodeType&&(t.style.display=i[e])}),t.isPrinting=!1,r(t,"afterPrint")},1e3))},contextMenu:function(t,e,i,r,a,c,d){var f,g,m,v=this,y=v.options.navigation,b=y.menuItemStyle,_=v.chartWidth,x=v.chartHeight,w="cache-"+t,k=v[w],T=p(a,c),C=function(e){v.pointer.inClass(e.target,t)||g()};k||(v[w]=k=o("div",{className:t},{position:"absolute",zIndex:1e3,padding:T+"px"},v.container),f=o("div",null,u({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},y.menuStyle),k),g=function(){l(k,{display:"none"}),d&&d.setState(0),v.openMenu=!1},n(k,"mouseleave",function(){m=setTimeout(g,500)}),n(k,"mouseenter",function(){clearTimeout(m)}),n(document,"mouseup",C),n(v,"destroy",function(){s(document,"mouseup",C)}),h(e,function(t){if(t){var e=t.separator?o("hr",null,null,f):o("div",{onmouseover:function(){l(this,y.menuItemHoverStyle)},onmouseout:function(){l(this,b)},onclick:function(e){e.stopPropagation(),g(),t.onclick&&t.onclick.apply(v,arguments)},innerHTML:t.text||v.options.lang[t.textKey]},u({cursor:"pointer"},b),f);v.exportDivElements.push(e)}}),v.exportDivElements.push(f,k),v.exportMenuWidth=k.offsetWidth,v.exportMenuHeight=k.offsetHeight),e={display:"block"},i+v.exportMenuWidth>_?e.right=_-i-a-T+"px":e.left=i-T+"px",r+c+v.exportMenuHeight>x&&"top"!==d.alignOptions.verticalAlign?e.bottom=x-r-T+"px":e.top=r+c-T+"px",l(k,e),v.openMenu=!0},addButton:function(i){var n,s,r=this,o=r.renderer,a=c(r.options.navigation.buttonOptions,i),l=a.onclick,h=a.menuItems,d={stroke:a.symbolStroke,fill:a.symbolFill},p=a.symbolSize||12;if(r.btnCount||(r.btnCount=0),r.exportDivElements||(r.exportDivElements=[],r.exportSVGElements=[]),a.enabled!==!1){var f,g=a.theme,m=g.states,v=m&&m.hover,m=m&&m.select;delete g.states,l?f=function(t){t.stopPropagation(),l.call(r,t)}:h&&(f=function(){r.contextMenu(s.menuClassName,h,s.translateX,s.translateY,s.width,s.height,s),s.setState(2)}),a.text&&a.symbol?g.paddingLeft=t.pick(g.paddingLeft,25):a.text||u(g,{width:a.width,height:a.height,padding:0}),s=o.button(a.text,0,0,f,g,v,m).attr({title:r.options.lang[a._titleKey],"stroke-linecap":"round"}),s.menuClassName=i.menuClassName||"highcharts-menu-"+r.btnCount++,a.symbol&&(n=o.symbol(a.symbol,a.symbolX-p/2,a.symbolY-p/2,p,p).attr(u(d,{"stroke-width":a.symbolStrokeWidth||1,zIndex:1})).add(s)),s.add().align(u(a,{width:s.width,x:t.pick(a.x,e)}),!0,"spacingBox"),e+=(s.width+a.buttonSpacing)*("right"===a.align?-1:1),r.exportSVGElements.push(s,n)}},destroyExport:function(t){var e,i,t=t.target;for(e=0;e<t.exportSVGElements.length;e++)(i=t.exportSVGElements[e])&&(i.onclick=i.ontouchstart=null,t.exportSVGElements[e]=i.destroy());for(e=0;e<t.exportDivElements.length;e++)i=t.exportDivElements[e],s(i,"mouseleave"),t.exportDivElements[e]=i.onmouseout=i.onmouseover=i.ontouchstart=i.onclick=null,a(i)}}),v.menu=function(t,e,i,n){return["M",t,e+2.5,"L",t+i,e+2.5,"M",t,e+n/2+.5,"L",t+i,e+n/2+.5,"M",t,e+n-1.5,"L",t+i,e+n-1.5]},i.prototype.callbacks.push(function(t){var i,s=t.options.exporting,r=s.buttons;if(e=0,s.enabled!==!1){for(i in r)t.addButton(r[i]);n(t,"destroy",t.destroyExport)}})}(Highcharts),Highcharts.createElement("link",{href:"//fonts.googleapis.com/css?family=Signika:400,700",rel:"stylesheet",type:"text/css"},null,document.getElementsByTagName("head")[0]),Highcharts.wrap(Highcharts.Chart.prototype,"getContainer",function(t){t.call(this),this.container.style.background="url(http://www.highcharts.com/samples/graphics/sand.png)"}),Highcharts.theme={colors:["#f45b5b","#8085e9","#8d4654","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:null,style:{fontFamily:"Signika, serif"}},title:{style:{color:"black",fontSize:"16px",fontWeight:"bold"}},subtitle:{style:{color:"black"}},tooltip:{borderWidth:0},legend:{itemStyle:{fontWeight:"bold",fontSize:"13px"}},xAxis:{labels:{style:{color:"#6e6e70"}}},yAxis:{labels:{style:{color:"#6e6e70"}}},plotOptions:{series:{shadow:!0},candlestick:{lineColor:"#404048"},map:{shadow:!1}},navigator:{xAxis:{gridLineColor:"#D0D0D8"}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"},background2:"#E0E0E8"},Highcharts.setOptions(Highcharts.theme),/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(i){return t.Bloodhound=e(i)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var r,o,a=this,l=arguments;return r=function(){n=null,i||(s=t.apply(a,l))},o=i&&!n,clearTimeout(n),n=setTimeout(r,e),o&&(s=t.apply(a,l)),s}},throttle:function(t,e){var i,n,s,r,o,a;return o=0,a=function(){o=new Date,s=null,r=t.apply(i,n)},function(){var l=new Date,c=e-(l-o);return i=this,n=arguments,0>=c?(clearTimeout(s),s=null,o=l,r=t.apply(i,n)):s||(s=setTimeout(a,c)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i="0.11.1",n=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function n(t){return function(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function(n){var s=[];return e.each(i,function(i){s=s.concat(t(e.toStr(n[i])))}),s}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),s=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function n(){this.head=this.tail=null}function s(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new s(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new n}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),r=function(){"use strict";function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||a,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function s(t){return JSON.stringify(e.isUndefined(t)?null:t)}function r(e){return t.parseJSON(e)}function o(t){var e,i,n=[],s=a.length;for(e=0;s>e;e++)(i=a.key(e)).match(t)&&n.push(i.replace(t,""));return n}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(l){a=null}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(i){"QuotaExceededError"===i.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),r(this.ls.getItem(this._prefix(t)))},set:function(t,i,r){return e.isNumber(r)?this._safeSet(this._ttlKey(t),s(n()+r)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),s(i))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=o(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var i=r(this.ls.getItem(this._ttlKey(t)));return e.isNumber(i)&&n()>i?!0:!1}}),i}(),o=function(){"use strict";function i(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new s(0):a}var n=0,r={},o=6,a=new s(10);return i.setMaxPendingRequests=function(t){o=t},i.resetCache=function(){a.reset()},e.mixin(i.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),h._cache.set(l,t)}function s(){e(!0)}function a(){n--,delete r[l],h.onDeckRequestArgs&&(h._get.apply(h,h.onDeckRequestArgs),h.onDeckRequestArgs=null)}var l,c,h=this;l=this._fingerprint(t),this.cancelled||l!==this.lastReq||((c=r[l])?c.done(i).fail(s):o>n?(n++,r[l]=this._send(t).done(i).fail(s).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(i,n){var s,r;n=n||t.noop,i=e.isString(i)?{url:i}:i||{},r=this._fingerprint(i),this.cancelled=!1,this.lastReq=r,(s=this._cache.get(r))?n(null,s):this._get(i,n)},cancel:function(){this.cancelled=!0}}),i}(),a=window.SearchIndex=function(){"use strict";function i(i){i=i||{},i.datumTokenizer&&i.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=i.identify||e.stringify,this.datumTokenizer=i.datumTokenizer,this.queryTokenizer=i.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function s(){var t={};return t[l]=[],t[a]={},t}function r(t){for(var e={},i=[],n=0,s=t.length;s>n;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function o(t,e){var i=0,n=0,s=[];t=t.sort(),e=e.sort();for(var r=t.length,o=e.length;r>i&&o>n;)t[i]<e[n]?i++:t[i]>e[n]?n++:(s.push(t[i]),i++,n++);return s}var a="c",l="i";return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var r,o;i.datums[r=i.identify(t)]=t,o=n(i.datumTokenizer(t)),e.each(o,function(t){var e,n,o;for(e=i.trie,n=t.split("");o=n.shift();)e=e[a][o]||(e[a][o]=s()),e[l].push(r)})})},get:function(t){var i=this;return e.map(t,function(t){return i.datums[t]})},search:function(t){var i,s,c=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,r;if(s&&0===s.length)return!1;for(e=c.trie,i=t.split("");e&&(n=i.shift());)e=e[a][n];return e&&0===i.length?(r=e[l].slice(0),void(s=s?o(s,r):r)):(s=[],!1)}),s?e.map(r(s),function(t){return c.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=s()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new r(t.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(i.data,t,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(i.data),e.protocol=this.storage.get(i.protocol),e.thumbprint=this.storage.get(i.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,s.transform(e))}var n,s=this;t&&(n=this.prepare(this._settings()),this.transport(n).fail(e).done(i))},clear:function(){return this.storage.clear(),this}}),t}(),c=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new o({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function i(t,i){e(t?[]:s.transform(i))}var n,s=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,i)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),h=function(){"use strict";function n(n){var s;return n?(s={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(s,n),!n.url&&t.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=i+n.thumbprint,n.transport=n.transport?a(n.transport):t.ajax,n):null}function s(i){var n;if(i)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(n,i),!i.url&&t.error("remote requires url to be set"),i.transform=i.filter||i.transform,i.prepare=r(i),i.limiter=o(i),i.transport=i.transport?a(i.transport):t.ajax,delete i.replace,delete i.wildcard,delete i.rateLimitBy,delete i.rateLimitWait,i}function r(t){function e(t,e){return e.url=r(e.url,t),e}function i(t,e){return e.url=e.url.replace(o,encodeURIComponent(t)),e}function n(t,e){return e}var s,r,o;return s=t.prepare,r=t.replace,o=t.wildcard,s?s:s=r?e:t.wildcard?i:n}function o(t){function i(t){return function(i){return e.debounce(i,t)}}function n(t){return function(i){return e.throttle(i,t)}}var s,r,o;return s=t.limiter,r=t.rateLimitBy,o=t.rateLimitWait,s||(s=/^throttle$/i.test(r)?n(o):i(o)),s}function a(i){return function(n){function s(t){e.defer(function(){o.resolve(t)})}function r(t){e.defer(function(){o.reject(t)})}var o=t.Deferred();return i(n,s,r),o}}return function(i){var r,o;return r={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},i=e.mixin(r,i||{}),!i.datumTokenizer&&t.error("datumTokenizer is required"),!i.queryTokenizer&&t.error("queryTokenizer is required"),o=i.sorter,i.sorter=o?function(t){return t.sort(o)}:e.identity,i.local=e.isFunction(i.local)?i.local():i.local,i.prefetch=n(i.prefetch),i.remote=s(i.remote),i}}(),u=function(){"use strict";function i(t){t=h(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new c(t.remote):null,this.prefetch=t.prefetch?new l(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var s;return s=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=s),i},i.tokenizers=n,e.mixin(i.prototype,{__ttAdapter:function(){function t(t,e,n){return i.search(t,e,n)}function e(t,e){return i.search(t,e)}var i=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?i.reject():(s.add(e),s.prefetch.store(s.index.serialize()),void i.resolve())}var i,n,s=this;return i=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,i,n){function s(t){var i=[];e.each(t,function(t){!e.some(r,function(e){return o.identify(t)===o.identify(e)})&&i.push(t)}),n&&n(i)}var r,o=this;return r=this.sorter(this.index.search(t)),i(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(t,s):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}();return u}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var r,o,a=this,l=arguments;return r=function(){n=null,i||(s=t.apply(a,l))},o=i&&!n,clearTimeout(n),n=setTimeout(r,e),o&&(s=t.apply(a,l)),s}},throttle:function(t,e){var i,n,s,r,o,a;return o=0,a=function(){o=new Date,s=null,r=t.apply(i,n)},function(){var l=new Date,c=e-(l-o);return i=this,n=arguments,0>=c?(clearTimeout(s),s=null,o=l,r=t.apply(i,n)):s||(s=setTimeout(a,c)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i=function(){"use strict";function t(t){var o,a;return a=e.mixin({},r,t),o={css:s(),classes:a,html:i(a),selectors:n(a)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(t){e.mixin(t,o)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function n(t){var i={};return e.each(t,function(t,e){i[e]="."+t}),i}function s(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var r={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),n=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n,s;return n="typeahead:",s={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(i.prototype,{_trigger:function(e,i){var s;return s=t.Event(n+e),(i=i||[]).unshift(s),this.$el.trigger.apply(this.$el,i),s},before:function(t){var e,i;return e=[].slice.call(arguments,1),i=this._trigger("before"+t,e),i.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=s[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),s=function(){"use strict";function t(t,e,i,n){var s;if(!i)return this;for(e=e.split(l),i=n?a(i,n):i,this._callbacks=this._callbacks||{};s=e.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function s(t){var e,i,n,s,o;if(!this._callbacks)return this;for(t=t.split(l),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)s=r(i.sync,this,[e].concat(n)),o=r(i.async,this,[e].concat(n)),s()&&c(o);return this}function r(t,e,i){function n(){for(var n,s=0,r=t.length;!n&&r>s;s+=1)n=t[s].apply(e,i)===!1;return!n}return n}function o(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,c=o();return{onSync:i,onAsync:e,off:n,trigger:s}}(),r=function(t){"use strict";function i(t,i,n){for(var s,r=[],o=0,a=t.length;a>o;o++)r.push(e.escapeRegExChars(t[o]));return s=n?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",i?new RegExp(s):new RegExp(s,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function r(e){var i,n,r;return(i=a.exec(e.data))&&(r=t.createElement(s.tagName),s.className&&(r.className=s.className),n=e.splitText(i.index),n.splitText(i[0].length),r.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(r,n)),!!i}function o(t,e){for(var i,n=3,s=0;s<t.childNodes.length;s++)i=t.childNodes[s],i.nodeType===n?s+=e(i)?1:0:o(i,e)}var a;s=e.mixin({},n,s),s.node&&s.pattern&&(s.pattern=e.isArray(s.pattern)?s.pattern:[s.pattern],a=i(s.pattern,s.caseSensitive,s.wordsOnly),o(s.node,r))}}(window.document),o=function(){"use strict";function i(i,s){i=i||{},i.input||t.error("input is missing"),s.mixin(this),this.$hint=t(i.hint),this.$input=t(i.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var i;switch(t){case"up":case"down":i=!o(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!o(e);break;default:i=!0}return i},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,n;i=r(t,this.query),n=i?this.query.length!==t.length:!1,this.query=t,e||i?!e&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,i,n,s,r=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),n=e.bind(this._onKeydown,this),s=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",n),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",s):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(r._onInput,r,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i}(),a=function(){"use strict";function i(i,s){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||t.error("missing source"),i.node||t.error("missing node"),i.name&&!a(i.name)&&t.error("invalid dataset name: "+i.name),s.mixin(this),this.highlight=!!i.highlight,this.name=i.name||c(),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=o(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=e.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=t(i.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(t){function i(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:i}function o(i,n){function s(e){return t("<div>").text(n(e))}return{notFound:i.notFound&&e.templatify(i.notFound),pending:i.pending&&e.templatify(i.pending),header:i.header&&e.templatify(i.header),footer:i.footer&&e.templatify(i.footer),suggestion:i.suggestion||s}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var l,c;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},c=e.getIdGenerator(),i.extractData=function(e){var i=t(e);return i.data(l.obj)?{val:i.data(l.val)||"",obj:i.data(l.obj)||null}:null},e.mixin(i.prototype,s,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var i;i=this._getSuggestionsFragment(t,e),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var i,n;i=this._getSuggestionsFragment(t,e),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var s,o=this;return s=document.createDocumentFragment(),e.each(n,function(e){var n,r;r=o._injectQuery(i,e),n=t(o.templates.suggestion(r)).data(l.obj,e).data(l.val,o.displayFn(e)).addClass(o.classes.suggestion+" "+o.classes.selectable),s.appendChild(n[0])}),this.highlight&&r({className:this.classes.highlight,node:s,pattern:i}),t(s)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,i){return e.isObject(i)?e.mixin({_query:t},i):i},update:function(e){function i(t){o||(o=!0,t=(t||[]).slice(0,s.limit),a=t.length,s._overwrite(e,t),a<s.limit&&s.async&&s.trigger("asyncRequested",e))}function n(i){i=i||[],!r&&a<s.limit&&(s.cancel=t.noop,a+=i.length,s._append(e,i.slice(0,s.limit-a)),s.async&&s.trigger("asyncReceived",e))}var s=this,r=!1,o=!1,a=0;this.cancel(),this.cancel=function(){r=!0,s.cancel=t.noop,s.async&&s.trigger("asyncCanceled",e)},this.source(e,i,n),!o&&i([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),i}(),l=function(){"use strict";function i(i,n){function s(e){var i=r.$node.find(e.node).first();return e.node=i.length?i:t("<div>").appendTo(r.$node),new a(e,n)}var r=this;i=i||{},i.node||t.error("node is required"),n.mixin(this),this.$node=t(i.node),this.query=null,this.datasets=e.map(i.datasets,s)}return e.mixin(i.prototype,s,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,i,n)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,i,n,s;e=t.position().top,i=e+t.outerHeight(!0),n=this.$node.scrollTop(),s=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(n+e):i>s&&this.$node.scrollTop(n+(i-s))},bind:function(){var t,i=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,i,n,s;return i=this.getActiveSelectable(),e=this._getSelectables(),n=i?e.index(i):-1,s=n+t,s=(s+1)%(e.length+1)-1,s=-1>s?e.length-1:s,-1===s?null:e.eq(s)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function i(e){e.update(t)}var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),i}(),c=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}var i=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),h=function(){"use strict";function i(i,s){var r,o,a,l,c,h,u,d,p,f,g;i=i||{},i.input||t.error("missing input"),i.menu||t.error("missing menu"),i.eventBus||t.error("missing event bus"),s.mixin(this),this.eventBus=i.eventBus,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=n(this,"activate","open","_onFocused"),o=n(this,"deactivate","_onBlurred"),a=n(this,"isActive","isOpen","_onEnterKeyed"),l=n(this,"isActive","isOpen","_onTabKeyed"),c=n(this,"isActive","_onEscKeyed"),h=n(this,"isActive","open","_onUpKeyed"),u=n(this,"isActive","open","_onDownKeyed"),d=n(this,"isActive","isOpen","_onLeftKeyed"),p=n(this,"isActive","isOpen","_onRightKeyed"),f=n(this,"_openIfActive","_onQueryChanged"),g=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",o,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",h,this).onSync("downKeyed",u,this).onSync("leftKeyed",d,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(t){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);e.each(i,function(e){return t[e].apply(t,n)})}}return e.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||t("<div>"),n=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var s,r,o;s=document.activeElement,r=n.is(s),o=n.has(s).length>0,e.isMsie()&&(r||o)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,i,n){this._updateHint(),this.eventBus.trigger("render",i,n,e)},_onAsyncRequested:function(t,e,i){this.eventBus.trigger("asyncrequest",i,e)},_onAsyncCanceled:function(t,e,i){this.eventBus.trigger("asynccancel",i,e)},_onAsyncReceived:function(t,e,i){this.eventBus.trigger("asyncreceive",i,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery());
},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&e.preventDefault()},_onTabKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&e.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,i,n,s,r,a,l;t=this.menu.getTopSelectable(),i=this.menu.getSelectableData(t),n=this.input.getInputValue(),!i||e.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(s=o.normalizeQuery(n),r=e.escapeRegExChars(s),a=new RegExp("^(?:"+r+")(.+$)","i"),l=a.exec(i.val),l&&this.input.setHint(n+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function(t){var e,i,n;return e=this.input.getQuery(),i=this.menu.getSelectableData(t),n=i&&e!==i.val,n&&!this.eventBus.before("autocomplete",i.obj)?(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0):!1},moveCursor:function(t){var e,i,n,s,r;return e=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(t),n=this.menu.getSelectableData(i),s=n?n.obj:null,r=this._minLengthMet()&&this.menu.update(e),r||this.eventBus.before("cursorchange",s)?!1:(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",s),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function s(e,i){e.each(function(){var e,n=t(this);(e=n.data(g.typeahead))&&i(e,n)})}function r(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(u(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(g.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(i){}return t}function u(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function d(t){var i,n;i=t.data(g.www),n=t.parent().filter(i.selectors.wrapper),e.each(t.data(g.attrs),function(i,n){e.isUndefined(i)?t.removeAttr(n):t.attr(n,i)}),t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(i.classes.input),n.length&&(t.detach().insertAfter(n),n.remove())}function p(i){var n,s;return n=e.isJQuery(i)||e.isElement(i),s=n?t(i).first():[],s.length?s:null}var f,g,m;f=t.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},m={initialize:function(s,u){function d(){var i,d,m,v,y,b,_,x,w,k,T;e.each(u,function(t){t.highlight=!!s.highlight}),i=t(this),d=t(f.html.wrapper),m=p(s.hint),v=p(s.menu),y=s.hint!==!1&&!m,b=s.menu!==!1&&!v,y&&(m=r(i,f)),b&&(v=t(f.html.menu).css(f.css.menu)),m&&m.val(""),i=a(i,f),(y||b)&&(d.css(f.css.wrapper),i.css(y?f.css.input:f.css.inputWithNoHint),i.wrap(d).parent().prepend(y?m:null).append(b?v:null)),T=b?c:l,_=new n({el:i}),x=new o({hint:m,input:i},f),w=new T({node:v,datasets:u},f),k=new h({input:x,menu:w,eventBus:_,minLength:s.minLength},f),i.data(g.www,f),i.data(g.typeahead,k)}var f;return u=e.isArray(u)?u:[].slice.call(arguments,1),s=s||{},f=i(s.classNames),this.each(d)},isEnabled:function(){var t;return s(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return s(this,function(t){t.enable()}),this},disable:function(){return s(this,function(t){t.disable()}),this},isActive:function(){var t;return s(this.first(),function(e){t=e.isActive()}),t},activate:function(){return s(this,function(t){t.activate()}),this},deactivate:function(){return s(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return s(this.first(),function(e){t=e.isOpen()}),t},open:function(){return s(this,function(t){t.open()}),this},close:function(){return s(this,function(t){t.close()}),this},select:function(e){var i=!1,n=t(e);return s(this.first(),function(t){i=t.select(n)}),i},autocomplete:function(e){var i=!1,n=t(e);return s(this.first(),function(t){i=t.autocomplete(n)}),i},moveCursor:function(t){var e=!1;return s(this.first(),function(i){e=i.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(s(this,function(e){e.setVal(t)}),this):(s(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return s(this,function(t,e){d(e),t.destroy()}),this}},t.fn.typeahead=function(t){return m[t]?m[t].apply(this,[].slice.call(arguments,1)):m.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=f,this}}()}),/*!
 Chosen, a Select Box Enhancer for jQuery and Prototype
 by Patrick Filler for Harvest, http://getharvest.com

 Version 1.1.0
 Full source at https://github.com/harvesthq/chosen
 Copyright (c) 2011 Harvest http://getharvest.com

 MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
 This file is generated by `grunt build`, do not edit it by hand.
 */
function(){var t,e,i,n,s,r={}.hasOwnProperty,o=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,n,s,r,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),r=t.childNodes,o=[],n=0,s=r.length;s>n;n++)i=r[n],o.push(this.add_option(i,e,t.disabled));return o},t.prototype.add_option=function(t,e,i){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:i===!0?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,i;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},t}(),n.select_to_array=function(t){var e,i,s,r,o;for(i=new n,o=t.childNodes,s=0,r=o.length;r>s;s++)e=o[s],i.add_node(e);return i.parsed},e=function(){function t(e,i){this.form_field=e,this.options=null!=i?i:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(t){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(t){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},t.prototype.results_option_build=function(t){var e,i,n,s,r;for(e="",r=this.results_data,n=0,s=r.length;s>n;n++)i=r[n],e+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return e},t.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=document.createElement("li"),i.className=e.join(" "),i.style.cssText=t.style,i.setAttribute("data-option-array-index",t.array_index),i.innerHTML=t.search_text,this.outerHTML(i)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,i,n,s;for(n=this.results_data,s=[],e=0,i=n.length;i>e;e++)t=n[e],t.selected?s.push(t.selected=!1):s.push(void 0);return s},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,i,n,s,r,o,a,l,c,h,u,d;for(this.no_results_clear(),s=0,o=this.get_search_text(),t=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),n=this.search_contains?"":"^",i=new RegExp(n+t,"i"),c=new RegExp(t,"i"),d=this.results_data,h=0,u=d.length;u>h;h++)e=d[h],e.search_match=!1,r=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(r=this.results_data[e.group_array_index],0===r.active_options&&r.search_match&&(s+=1),r.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,i),e.search_match&&!e.group&&(s+=1),e.search_match?(o.length&&(a=e.search_text.search(c),l=e.search_text.substr(0,a+o.length)+"</em>"+e.search_text.substr(a+o.length),e.search_text=l.substr(0,a)+"<em>"+l.substr(a)),null!=r&&(r.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>s&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var i,n,s,r;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(n=t.replace(/\[|\]/g,"").split(" "),n.length))for(s=0,r=n.length;r>s;s++)if(i=n[s],e.test(i))return!0},t.prototype.choices_count=function(){var t,e,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,e=0,i=n.length;i>e;e++)t=n[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(t){var e=this;return setTimeout(function(){return e.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return this.is_multiple&&!this.display_selected_options&&t.selected?!1:!this.display_disabled_options&&t.disabled?!1:t.empty?!1:!0},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(n){return e.browser_is_supported()?this.each(function(e){var s,r;s=t(this),r=s.data("chosen"),"destroy"===n&&r?r.destroy():r||s.data("chosen",new i(this,n))}):this}}),i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments)}return o(i,e),i.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var e,i;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),i={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(t){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(e){var i;return i=t(e.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t){var e,i,n,s,r;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),s=n+r,i=this.result_highlight.position().top+this.search_results.scrollTop(),e=i+this.result_highlight.outerHeight(),e>=s)return this.search_results.scrollTop(e-n>0?e-n:0);if(r>i)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(t){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},i.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(e),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},i.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(e){var i,n,s=this;return i=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?i.addClass("search-choice-disabled"):(n=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),n.bind("click.chosen",function(t){return s.choice_destroy_link_click(t)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},i.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,i;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[e[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],this.form_field.options[e.options_index].disabled?!1:(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},i.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,i,n,s,r,o,a,l,c;if(this.is_multiple){for(n=0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=o.length;c>l;l++)s=o[l],r+=s+":"+this.search_field.css(s)+";";return e=t("<div />",{style:r}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(e)}.call(this),/* ========================================================================
 * Bootstrap: affix.js v3.3.5
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.affix"),r="object"==typeof e&&e;s||n.data("bs.affix",s=new i(this,r)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var s=this.$target.scrollTop(),r=this.$element.offset(),o=this.$target.height();if(null!=i&&"top"==this.affixed)return i>s?"top":!1;if("bottom"==this.affixed)return null!=i?s+this.unpin<=r.top?!1:"bottom":t-n>=s+o?!1:"bottom";var a=null==this.affixed,l=a?s:r.top,c=a?o:e;return null!=i&&i>=s?"top":null!=n&&l+c>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,s=n.top,r=n.bottom,o=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(r=s=n),"function"==typeof s&&(s=n.top(this.$element)),"function"==typeof r&&(r=n.bottom(this.$element));var a=this.getState(o,e,s,r);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:o-e-r})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),/* ========================================================================
 * Bootstrap: alert.js v3.3.5
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new n(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){o.detach().trigger("closed.bs.alert").remove()}var s=t(this),r=s.attr("data-target");r||(r=s.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=s.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),/* ========================================================================
 * Bootstrap: button.js v3.3.5
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.button"),r="object"==typeof e&&e;s||n.data("bs.button",s=new i(this,r)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",r=n.data();e+="Text",null==r.resetText&&n.data("resetText",n[s]()),setTimeout(t.proxy(function(){n[s](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),/* ========================================================================
 * Bootstrap: carousel.js v3.3.5
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.carousel"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),o="string"==typeof e?e:r.slide;s||n.data("bs.carousel",s=new i(this,r)),"number"==typeof e?s.to(e):o?s[o]():r.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var s="prev"==t?-1:1,r=(i+s)%this.$items.length;return this.$items.eq(r)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var s=this.$element.find(".item.active"),r=n||this.getItemForDirection(e,s),o=this.interval,a="next"==e?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var c=r[0],h=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(r)]);u&&u.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,s.addClass(a),r.addClass(a),s.one("bsTransitionEnd",function(){r.removeClass([e,a].join(" ")).addClass("active"),s.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var s=function(i){var n,s=t(this),r=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var o=t.extend({},r.data(),s.data()),a=s.attr("data-slide-to");a&&(o.interval=!1),e.call(r,o),a&&r.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.3.5
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!s&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),s||i.data("bs.collapse",s=new n(this,r)),"string"==typeof e&&s[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),e||s.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[o](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION):s.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var s=t(n);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var s=t(this);s.attr("data-target")||n.preventDefault();var r=e(s),o=r.data("bs.collapse"),a=o?"toggle":s.data();i.call(r,a)})}(jQuery),/* ========================================================================
 * Bootstrap: dropdown.js v3.3.5
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(s).remove(),t(r).each(function(){var n=t(this),s=e(n),r={relatedTarget:this};s.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(s[0],i.target)||(s.trigger(i=t.Event("hide.bs.dropdown",r)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),s.removeClass("open").trigger("hidden.bs.dropdown",r))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var s=".dropdown-backdrop",r='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.5",o.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var r=e(s),o=r.hasClass("open");if(i(),!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(r.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},o.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var s=e(n),o=s.hasClass("open");if(!o&&27!=i.which||o&&27==i.which)return 27==i.which&&s.find(r).trigger("focus"),n.trigger("click");var a=" li:not(.disabled):visible a",l=s.find(".dropdown-menu"+a);if(l.length){var c=l.index(i.target);38==i.which&&c>0&&c--,40==i.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),/* ========================================================================
 * Bootstrap: tab.js v3.3.5
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),o=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(r),e.trigger(o),!o.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,n,s){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var o=n.find("> .active"),a=s&&t.support.transition&&(o.length&&o.hasClass("fade")||!!n.find("> .fade").length);o.length&&a?o.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),/* ========================================================================
 * Bootstrap: transition.js v3.3.5
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.5
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),s=n.data("bs.scrollspy"),r="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new e(this,r)),"string"==typeof i&&s[i]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),s=e.data("target")||e.attr("href"),r=/^#./.test(s)&&t(s);return r&&r.length&&r.is(":visible")&&[[r[i]().top+n,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,r=this.targets,o=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return o!=(t=r[r.length-1])&&this.activate(t);if(o&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)o!=r[t]&&e>=s[t]&&(void 0===s[t+1]||e<s[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: modal.js v3.3.5
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),r=s.data("bs.modal"),o=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);r||s.data("bs.modal",r=new i(this,o)),"string"==typeof e?r[e](n):o.show&&r.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var s=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),s&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});s?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&s;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):o()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),r=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(r,o,this)})}(jQuery),/* ========================================================================
 * Bootstrap: tooltip.js v3.3.5
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tooltip"),r="object"==typeof e&&e;(s||!/destroy|hide/.test(e))&&(s||n.data("bs.tooltip",s=new i(this,r)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var s=this.options.trigger.split(" "),r=s.length;r--;){var o=s[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var s=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),u=r[0].offsetWidth,d=r[0].offsetHeight;if(c){var p=a,f=this.getPosition(this.$viewport);a="bottom"==a&&h.bottom+d>f.bottom?"top":"top"==a&&h.top-d<f.top?"bottom":"right"==a&&h.right+u>f.width?"left":"left"==a&&h.left-u<f.left?"right":a,r.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,h,u,d);this.applyPlacement(g,a);var m=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,r=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top+=o,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=r&&(e.top=e.top+r-c);var h=this.getViewportAdjustedDelta(i,e,l,c);h.left?e.left+=h.left:e.top+=h.top;var u=/top|bottom/.test(i),d=u?2*h.left-s+l:2*h.top-r+c,p=u?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(d,n[0][p],u)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=s.hoverState&&r.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),e&&e()}var s=this,r=t(this.$tip),o=t.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var r=n?{top:0,left:0}:e.offset(),o={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,o,a,r)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var r=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-o.scroll,l=e.top+r-o.scroll+n;a<o.top?s.top=o.top-a:l>o.top+o.height&&(s.top=o.top+o.height-l)}else{var c=e.left-r,h=e.left+r+i;c<o.left?s.left=o.left-c:h>o.right&&(s.left=o.left+o.width-h)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),/* ========================================================================
 * Bootstrap: popover.js v3.3.5
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.popover"),r="object"==typeof e&&e;(s||!/destroy|hide/.test(e))&&(s||n.data("bs.popover",s=new i(this,r)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.QB=t()}}(function(){var t;return function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[o]={exports:{}};t[o][0].call(h.exports,function(e){var i=t[o][1][e];return s(i?i:e)},h,h.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){function n(t){this.service=t}function s(t){var e={application_id:o.creds.appId,auth_key:o.creds.authKey,nonce:a.randomNonce(),timestamp:a.unixTime()};return t.login&&t.password?e.user={login:t.login,password:t.password}:t.email&&t.password?e.user={email:t.email,password:t.password}:t.provider&&(e.provider=t.provider,t.scope&&(e.scope=t.scope),t.keys&&t.keys.token&&(e.keys={token:t.keys.token}),t.keys&&t.keys.secret&&(e.keys.secret=t.keys.secret)),e}function r(t,e){var i=Object.keys(t).map(function(e){return"object"==typeof t[e]?Object.keys(t[e]).map(function(i){return e+"["+i+"]="+t[e][i]}).sort().join("&"):e+"="+t[e]}).sort().join("&");return l(i,e).toString()}var o=t("../qbConfig"),a=t("../qbUtils"),l=t("crypto-js/hmac-sha1");n.prototype={getSession:function(t){a.QBLog("[AuthProxy]","getSession"),this.service.ajax({url:a.getUrl(o.urls.session)},function(e,i){e?t(e,null):t(e,i)})},createSession:function(t,e){if(""===o.creds.appId||""===o.creds.authKey||""===o.creds.authSecret)throw new Error("Cannot create a new session without app credentials (app ID, auth key and auth secret)");var i,n=this;"function"==typeof t&&"undefined"==typeof e&&(e=t,t={}),i=s(t),i.signature=r(i,o.creds.authSecret),a.QBLog("[AuthProxy]","createSession",i),this.service.ajax({url:a.getUrl(o.urls.session),type:"POST",data:i},function(t,i){t?e(t,null):(n.service.setSession(i.session),e(null,i.session))})},destroySession:function(t){var e=this;a.QBLog("[AuthProxy]","destroySession"),this.service.ajax({url:a.getUrl(o.urls.session),type:"DELETE",dataType:"text"},function(i,n){i?t(i,null):(e.service.setSession(null),t(null,n))})},login:function(t,e){a.QBLog("[AuthProxy]","login",t),this.service.ajax({url:a.getUrl(o.urls.login),type:"POST",data:t},function(t,i){t?e(t,null):e(null,i.user)})},logout:function(t){a.QBLog("[AuthProxy]","logout"),this.service.ajax({url:a.getUrl(o.urls.login),type:"DELETE",dataType:"text"},t)}},e.exports=n},{"../qbConfig":9,"../qbUtils":13,"crypto-js/hmac-sha1":17}],2:[function(t,e,i){function n(t,e,i){var n=this;m=e,g=i,this.service=t,p&&(this.roster=new s(t),this.muc=new r(t),this._isLogout=!1,this._isDisconnected=!1),this.dialog=new o(t),this.message=new a(t),this.helpers=new l,this._onMessage=function(t){var e=t.getAttribute("from"),i=(t.getAttribute("to"),t.getAttribute("type")),s=t.querySelector("body"),r=t.querySelector("markable"),o=t.querySelector("received"),a=t.querySelector("displayed"),l=t.querySelector("composing"),c=t.querySelector("paused"),h=t.querySelector("invite"),u=t.querySelector("extraParams"),p=t.querySelector("delay"),f=t.getAttribute("id"),m="groupchat"===i?n.helpers.getDialogIdFromNode(e):null,v="groupchat"===i?n.helpers.getIdFromResource(e):n.helpers.getIdFromNode(e),y=o||a||null;if(h)return!0;var b;if(u&&(b=n._parseExtraParams(u),b.dialogId&&(m=b.dialogId)),l||c)return"function"!=typeof n.onMessageTypingListener||"chat"!==i&&"groupchat"!==i&&p||d.safeCallbackCall(n.onMessageTypingListener,null!=l,v,m),!0;if(y)return o?"function"==typeof n.onDeliveredStatusListener&&"chat"===i&&d.safeCallbackCall(n.onDeliveredStatusListener,o.getAttribute("id"),m,v):"function"==typeof n.onReadStatusListener&&"chat"===i&&d.safeCallbackCall(n.onReadStatusListener,a.getAttribute("id"),m,v),!0;if(r&&v!=n.helpers.getIdFromNode(g.jid)){var _={messageId:f,userId:v,dialogId:m};n.sendDeliveredStatus(_)}var x={id:f,dialog_id:m,type:i,body:s&&s.textContent||null,extension:b?b.extension:null,delay:p};return r&&(x.markable=1),"function"!=typeof n.onMessageListener||"chat"!==i&&"groupchat"!==i||d.safeCallbackCall(n.onMessageListener,v,x),!0},this._onPresence=function(t){var e=t.getAttribute("from"),i=t.getAttribute("type"),s=n.helpers.getIdFromNode(e);if(i)switch(i){case"subscribe":b[s]&&"to"===b[s].subscription?(b[s]={subscription:"both",ask:null},n.roster._sendSubscriptionPresence({jid:e,type:"subscribed"})):"function"==typeof n.onSubscribeListener&&d.safeCallbackCall(n.onSubscribeListener,s);break;case"subscribed":b[s]&&"from"===b[s].subscription?b[s]={subscription:"both",ask:null}:(b[s]={subscription:"to",ask:null},"function"==typeof n.onConfirmSubscribeListener&&d.safeCallbackCall(n.onConfirmSubscribeListener,s));break;case"unsubscribed":b[s]={subscription:"none",ask:null},"function"==typeof n.onRejectSubscribeListener&&d.safeCallbackCall(n.onRejectSubscribeListener,s);break;case"unsubscribe":b[s]={subscription:"to",ask:null};break;case"unavailable":"function"==typeof n.onContactListListener&&b[s]&&"none"!==b[s].subscription&&d.safeCallbackCall(n.onContactListListener,s,i)}else"function"==typeof n.onContactListListener&&b[s]&&"none"!==b[s].subscription&&d.safeCallbackCall(n.onContactListListener,s);return!0},this._onIQ=function(t){return!0},this._onSystemMessageListener=function(t){var e,i=t.getAttribute("from"),s=(t.getAttribute("to"),t.querySelector("extraParams")),r=s.querySelector("moduleIdentifier").textContent,o=(t.querySelector("delay"),t.getAttribute("id"));if("SystemNotifications"===r&&"function"==typeof n.onSystemMessageListener){var a=n._parseExtraParams(s);e={id:o,userId:n.helpers.getIdFromNode(i),extension:a.extension},d.safeCallbackCall(n.onSystemMessageListener,e)}return!0}}function s(t){this.service=t,this.helpers=new l}function r(t){this.service=t,this.helpers=new l}function o(t){this.service=t,this.helpers=new l}function a(t){this.service=t,this.helpers=new l}function l(){}function c(t,e){var i,n={code:t,status:"error",detail:e};switch(t){case 401:i="Unauthorized";break;case 422:i="Unprocessable Entity";break;case 408:i="Timeout";break;default:i="Bad request"}return n.message=i,n}function h(){return(new Date).toTimeString().split(" ")[0]}var u=t("../qbConfig"),d=t("../qbUtils"),p="undefined"!=typeof window,f="This function isn't supported outside of the browser (...yet)";p&&(t("../../lib/strophe/strophe.min"),Strophe.addNamespace("CARBONS","urn:xmpp:carbons:2"),Strophe.addNamespace("CHAT_MARKERS","urn:xmpp:chat-markers:0"),Strophe.addNamespace("BLOCKING_COMMAND","urn:xmpp:blocking"),Strophe.addNamespace("CHAT_STATES","http://jabber.org/protocol/chatstates"));var g,m,v=u.urls.chat+"/Dialog",y=u.urls.chat+"/Message",b={},_={};n.prototype={connect:function(t,e){if(!p)throw f;d.QBLog("[ChatProxy]","connect",t);var i,n,s,r=this;"userId"in t?(s=t.userId+"-"+u.creds.appId+"@"+u.endpoints.chat,"resource"in t&&(s=s+"/"+t.resource)):"jid"in t&&(s=t.jid),g.connect(s,t.password,function(s){switch(s){case Strophe.Status.ERROR:i=c(422,"Status.ERROR - An error has occurred"),"function"==typeof e&&e(i,null);break;case Strophe.Status.CONNECTING:d.QBLog("[ChatProxy]","Status.CONNECTING"),d.QBLog("[ChatProxy]","Chat Protocol - "+(1===u.chatProtocol.active?"BOSH":"WebSocket"));break;case Strophe.Status.CONNFAIL:i=c(422,"Status.CONNFAIL - The connection attempt failed"),"function"==typeof e&&e(i,null);break;case Strophe.Status.AUTHENTICATING:d.QBLog("[ChatProxy]","Status.AUTHENTICATING");break;case Strophe.Status.AUTHFAIL:i=c(401,"Status.AUTHFAIL - The authentication attempt failed"),"function"==typeof e&&e(i,null);break;case Strophe.Status.CONNECTED:d.QBLog("[ChatProxy]","Status.CONNECTED at "+h()),r._isDisconnected=!1,g.addHandler(r._onMessage,null,"message","chat"),g.addHandler(r._onMessage,null,"message","groupchat"),g.addHandler(r._onPresence,null,"presence"),g.addHandler(r._onIQ,null,"iq"),g.addHandler(r._onSystemMessageListener,null,"message","headline"),g.addHandler(m._onMessage,null,"message","headline"),r._enableCarbons(function(){r.roster.get(function(t){if(b=t,g.send($pres().tree()),g.addTimedHandler(55e3,r._autoSendPresence),"function"==typeof e)e(null,b);else{r._isLogout=!1,n=Object.keys(_);for(var i=0,s=n.length;s>i;i++)r.muc.join(n[i]);"function"==typeof r.onReconnectListener&&d.safeCallbackCall(r.onReconnectListener)}})});break;case Strophe.Status.DISCONNECTING:d.QBLog("[ChatProxy]","Status.DISCONNECTING");break;case Strophe.Status.DISCONNECTED:d.QBLog("[ChatProxy]","Status.DISCONNECTED at "+h()),g.reset(),r._isDisconnected||"function"!=typeof r.onDisconnectedListener||d.safeCallbackCall(r.onDisconnectedListener),r._isDisconnected=!0,r._isLogout||r.connect(t);break;case Strophe.Status.ATTACHED:d.QBLog("[ChatProxy]","Status.ATTACHED")}})},send:function(t,e){if(!p)throw f;e.id||(e.id=d.getBsonObjectId());var i=this,n=$msg({from:g.jid,to:this.helpers.jidOrUserId(t),type:e.type,id:e.id});e.body&&n.c("body",{xmlns:Strophe.NS.CLIENT}).t(e.body).up(),e.extension&&(n.c("extraParams",{xmlns:Strophe.NS.CLIENT}),Object.keys(e.extension).forEach(function(t){"attachments"===t?e.extension[t].forEach(function(t){n.c("attachment",t).up()}):"object"==typeof e.extension[t]?i._JStoXML(t,e.extension[t],n):n.c(t).t(e.extension[t]).up()}),n.up()),e.markable&&n.c("markable",{xmlns:Strophe.NS.CHAT_MARKERS}),g.send(n)},sendSystemMessage:function(t,e){if(!p)throw f;e.id||(e.id=d.getBsonObjectId());var i=this,n=$msg({id:e.id,type:"headline",to:this.helpers.jidOrUserId(t)});e.extension&&(n.c("extraParams",{xmlns:Strophe.NS.CLIENT}).c("moduleIdentifier").t("SystemNotifications").up(),Object.keys(e.extension).forEach(function(t){"object"==typeof e.extension[t]?i._JStoXML(t,e.extension[t],n):n.c(t).t(e.extension[t]).up()}),n.up()),g.send(n)},sendIsTypingStatus:function(t){if(!p)throw f;var e=$msg({from:g.jid,to:this.helpers.jidOrUserId(t),type:this.helpers.typeChat(t)});e.c("composing",{xmlns:Strophe.NS.CHAT_STATES}),g.send(e)},sendIsStopTypingStatus:function(t){if(!p)throw f;var e=$msg({from:g.jid,to:this.helpers.jidOrUserId(t),type:this.helpers.typeChat(t)});e.c("paused",{xmlns:Strophe.NS.CHAT_STATES}),g.send(e)},sendPres:function(t){if(!p)throw f;g.send($pres({from:g.jid,type:t}))},sendDeliveredStatus:function(t){if(!p)throw f;var e=$msg({from:g.jid,to:this.helpers.jidOrUserId(t.userId),type:"chat",id:d.getBsonObjectId()});e.c("received",{xmlns:Strophe.NS.CHAT_MARKERS,id:t.messageId}).up(),e.c("extraParams",{xmlns:Strophe.NS.CLIENT}).c("dialog_id").t(t.dialogId),g.send(e)},sendReadStatus:function(t){if(!p)throw f;var e=$msg({from:g.jid,to:this.helpers.jidOrUserId(t.userId),type:"chat",id:d.getBsonObjectId()});e.c("displayed",{xmlns:Strophe.NS.CHAT_MARKERS,id:t.messageId}).up(),e.c("extraParams",{xmlns:Strophe.NS.CLIENT}).c("dialog_id").t(t.dialogId),g.send(e)},disconnect:function(){if(!p)throw f;_={},this._isLogout=!0,g.flush(),g.disconnect()},addListener:function(t,e){function i(){return e(),t.live!==!1}if(!p)throw f;return g.addHandler(i,null,t.name||null,t.type||null,t.id||null,t.from||null)},deleteListener:function(t){if(!p)throw f;g.deleteHandler(t)},_JStoXML:function(t,e,i){var n=this;i.c(t),Object.keys(e).forEach(function(t){"object"==typeof e[t]?n._JStoXML(t,e[t],i):i.c(t).t(e[t]).up()}),i.up()},_XMLtoJS:function(t,e,i){var n=this;t[e]={};for(var s=0,r=i.childNodes.length;r>s;s++)i.childNodes[s].childNodes.length>1?t[e]=n._XMLtoJS(t[e],i.childNodes[s].tagName,i.childNodes[s]):t[e][i.childNodes[s].tagName]=i.childNodes[s].textContent;return t},_parseExtraParams:function(t){if(!t)return null;for(var e,i={},n=[],s=0,r=t.childNodes.length;r>s;s++)if("attachment"===t.childNodes[s].tagName){for(var o={},a=t.childNodes[s].attributes,l=0,c=a.length;c>l;l++)"id"===a[l].name||"size"===a[l].name?o[a[l].name]=parseInt(a[l].value):o[a[l].name]=a[l].value;n.push(o)}else if("dialog_id"===t.childNodes[s].tagName)e=t.childNodes[s].textContent,i.dialog_id=e;else if(t.childNodes[s].childNodes.length>1){var h=t.childNodes[s].textContent.length;if(h>4096){for(var u="",l=0;l<t.childNodes[s].childNodes.length;++l)u+=t.childNodes[s].childNodes[l].textContent;i[t.childNodes[s].tagName]=u}else i=self._XMLtoJS(i,t.childNodes[s].tagName,t.childNodes[s])}else i[t.childNodes[s].tagName]=t.childNodes[s].textContent;return n.length>0&&(i.attachments=n),i.moduleIdentifier&&delete i.moduleIdentifier,{extension:i,dialogId:e}},_autoSendPresence:function(){if(!p)throw f;return g.send($pres().tree()),!0},_enableCarbons:function(t){if(!p)throw f;var e;e=$iq({from:g.jid,type:"set",id:g.getUniqueId("enableCarbons")}).c("enable",{xmlns:Strophe.NS.CARBONS}),g.sendIQ(e,function(e){t()})}},s.prototype={get:function(t){var e,i,n,s=this,r={};e=$iq({from:g.jid,type:"get",id:g.getUniqueId("getRoster")}).c("query",{xmlns:Strophe.NS.ROSTER}),g.sendIQ(e,function(e){i=e.getElementsByTagName("item");for(var o=0,a=i.length;a>o;o++)n=s.helpers.getIdFromNode(i[o].getAttribute("jid")).toString(),r[n]={subscription:i[o].getAttribute("subscription"),ask:i[o].getAttribute("ask")||null};t(r)})},add:function(t,e){var i=this,n=this.helpers.jidOrUserId(t),s=this.helpers.getIdFromNode(n).toString();b[s]={subscription:"none",ask:"subscribe"},i._sendSubscriptionPresence({jid:n,type:"subscribe"}),"function"==typeof e&&e()},confirm:function(t,e){var i=this,n=this.helpers.jidOrUserId(t),s=this.helpers.getIdFromNode(n).toString();b[s]={subscription:"from",ask:"subscribe"},i._sendSubscriptionPresence({jid:n,type:"subscribed"}),i._sendSubscriptionPresence({jid:n,type:"subscribe"}),"function"==typeof e&&e()},reject:function(t,e){var i=this,n=this.helpers.jidOrUserId(t),s=this.helpers.getIdFromNode(n).toString();b[s]={subscription:"none",ask:null},i._sendSubscriptionPresence({jid:n,type:"unsubscribed"}),"function"==typeof e&&e()},remove:function(t,e){var i,n=this.helpers.jidOrUserId(t),s=this.helpers.getIdFromNode(n).toString();i=$iq({from:g.jid,type:"set",id:g.getUniqueId("removeRosterItem")}).c("query",{xmlns:Strophe.NS.ROSTER}).c("item",{jid:n,subscription:"remove"}),g.sendIQ(i,function(){delete b[s],"function"==typeof e&&e()})},_sendSubscriptionPresence:function(t){var e;e=$pres({to:t.jid,type:t.type}),g.send(e)}},r.prototype={join:function(t,e){var i,n=this,s=g.getUniqueId("join");_[t]=!0,i=$pres({from:g.jid,to:n.helpers.getRoomJid(t),id:s}).c("x",{xmlns:Strophe.NS.MUC}).c("history",{maxstanzas:0}),"function"==typeof e&&g.addHandler(e,null,"presence",null,s),g.send(i)},leave:function(t,e){var i,n=this,s=n.helpers.getRoomJid(t);delete _[t],i=$pres({from:g.jid,to:s,type:"unavailable"}),"function"==typeof e&&g.addHandler(e,null,"presence","unavailable",null,s),g.send(i)},listOnlineUsers:function(t,e){var i,n=this,s=[];i=$iq({from:g.jid,id:g.getUniqueId("muc_disco_items"),to:t,type:"get"}).c("query",{xmlns:"http://jabber.org/protocol/disco#items"}),g.sendIQ(i,function(t){for(var i,r=t.getElementsByTagName("item"),o=0,a=r.length;a>o;o++)i=n.helpers.getUserIdFromRoomJid(r[o].getAttribute("jid")),s.push(i);e(s)})}},o.prototype={list:function(t,e){"function"==typeof t&&"undefined"==typeof e&&(e=t,t={}),d.QBLog("[DialogProxy]","list",t),this.service.ajax({url:d.getUrl(v),data:t},e)},create:function(t,e){t.occupants_ids instanceof Array&&(t.occupants_ids=t.occupants_ids.join(", ")),d.QBLog("[DialogProxy]","create",t),this.service.ajax({url:d.getUrl(v),type:"POST",data:t},e)},update:function(t,e,i){d.QBLog("[DialogProxy]","update",e),this.service.ajax({url:d.getUrl(v,t),type:"PUT",data:e},i)},"delete":function(t,e,i){d.QBLog("[DialogProxy]","delete",t),2==arguments.length?this.service.ajax({url:d.getUrl(v,t),type:"DELETE"},e):3==arguments.length&&this.service.ajax({url:d.getUrl(v,t),type:"DELETE",data:e},i)}},a.prototype={list:function(t,e){d.QBLog("[MessageProxy]","list",t),this.service.ajax({url:d.getUrl(y),data:t},e)},create:function(t,e){d.QBLog("[MessageProxy]","create",t),this.service.ajax({url:d.getUrl(y),type:"POST",data:t},e)},update:function(t,e,i){d.QBLog("[MessageProxy]","update",t,e),this.service.ajax({url:d.getUrl(y,t),type:"PUT",data:e},i)},"delete":function(t,e,i){d.QBLog("[DialogProxy]","delete",t),2==arguments.length?this.service.ajax({url:d.getUrl(y,t),type:"DELETE",dataType:"text"},e):3==arguments.length&&this.service.ajax({url:d.getUrl(y,t),type:"DELETE",data:e,dataType:"text"},i)},unreadCount:function(t,e){d.QBLog("[MessageProxy]","unreadCount",t),this.service.ajax({url:d.getUrl(y+"/unread"),data:t},e)}},l.prototype={jidOrUserId:function(t){var e;if("string"==typeof t)e=t;else{if("number"!=typeof t)throw f;e=t+"-"+u.creds.appId+"@"+u.endpoints.chat}return e},typeChat:function(t){var e;if("string"==typeof t)e=t.indexOf("muc")>-1?"groupchat":"chat";else{if("number"!=typeof t)throw f;e="chat"}return e},getRecipientId:function(t,e){var i=null;return t.forEach(function(t,n,s){t!=e&&(i=t)}),i},getUserJid:function(t,e){return e?t+"-"+e+"@"+u.endpoints.chat:t+"-"+u.creds.appId+"@"+u.endpoints.chat},getUserNickWithMucDomain:function(t){return u.endpoints.muc+"/"+t},getIdFromNode:function(t){return t.indexOf("@")<0?null:parseInt(t.split("@")[0].split("-")[0])},getDialogIdFromNode:function(t){return t.indexOf("@")<0?null:t.split("@")[0].split("_")[1]},getRoomJid:function(t){if(!p)throw f;return t+"/"+this.getIdFromNode(g.jid)},getIdFromResource:function(t){var e=t.split("/");return e.length<2?null:(e.splice(0,1),parseInt(e.join("/")))},getUniqueId:function(t){if(!p)throw f;return g.getUniqueId(t)},getBsonObjectId:function(){return d.getBsonObjectId()},getUserIdFromRoomJid:function(t){var e=t.toString().split("/");return 0==e.length?null:e[e.length-1]}},e.exports=n},{"../../lib/strophe/strophe.min":15,"../qbConfig":9,"../qbUtils":13}],3:[function(t,e,i){function n(t){this.service=t}function s(t){for(var e=s.options,i=e.parser[e.strictMode?"strict":"loose"].exec(t),n={},r=14;r--;)n[e.key[r]]=i[r]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(t,i,s){i&&(n[e.q.name][i]=s)}),n}var r=t("../qbConfig"),o=t("../qbUtils"),a="undefined"!=typeof window;if(!a)var l=t("xml2js");var c=r.urls.blobs+"/tagged";n.prototype={create:function(t,e){o.QBLog("[ContentProxy]","create",t),this.service.ajax({url:o.getUrl(r.urls.blobs),data:{blob:t},type:"POST"},function(t,i){t?e(t,null):e(t,i.blob)})},list:function(t,e){"function"==typeof t&&"undefined"==typeof e&&(e=t,t=null),o.QBLog("[ContentProxy]","list",t),this.service.ajax({url:o.getUrl(r.urls.blobs),data:t,type:"GET"},function(t,i){t?e(t,null):e(t,i)})},"delete":function(t,e){o.QBLog("[ContentProxy]","delete"),this.service.ajax({url:o.getUrl(r.urls.blobs,t),type:"DELETE",dataType:"text"},function(t,i){t?e(t,null):e(null,!0)})},createAndUpload:function(t,e){var i,n,r,l,c,h={},u=this,d=JSON.parse(JSON.stringify(t));d.file.data="...",o.QBLog("[ContentProxy]","createAndUpload",d),i=t.file,n=t.name||i.name,r=t.type||i.type,l=t.size||i.size,h.name=n,h.content_type=r,t["public"]&&(h["public"]=t["public"]),t.tag_list&&(h.tag_list=t.tag_list),this.create(h,function(t,n){if(t)e(t,null);else{var r,o=s(n.blob_object_access.params),h={url:"https://"+o.host};r=a?new FormData:{},c=n.id,Object.keys(o.queryKey).forEach(function(t){a?r.append(t,decodeURIComponent(o.queryKey[t])):r[t]=decodeURIComponent(o.queryKey[t])}),a?r.append("file",i,n.name):r.file=i,h.data=r,u.upload(h,function(t,i){t?e(t,null):(a?n.path=i.Location.replace("http://","https://"):n.path=i.PostResponse.Location,u.markUploaded({id:c,size:l},function(t,i){t?e(t,null):e(null,n)}))})}})},upload:function(t,e){o.QBLog("[ContentProxy]","upload"),this.service.ajax({url:t.url,data:t.data,dataType:"xml",contentType:!1,processData:!1,type:"POST"},function(t,i){if(t)e(t,null);else if(a){var n,s,r={},o=i.documentElement,c=o.childNodes;for(n=0,s=c.length;s>n;n++)r[c[n].nodeName]=c[n].childNodes[0].nodeValue;e(null,r)}else{var h=l.parseString;h(i,function(t,i){i&&e(null,i)})}})},taggedForCurrentUser:function(t){o.QBLog("[ContentProxy]","taggedForCurrentUser"),this.service.ajax({url:o.getUrl(c)},function(e,i){e?t(e,null):t(null,i)})},markUploaded:function(t,e){o.QBLog("[ContentProxy]","markUploaded",t),this.service.ajax({url:o.getUrl(r.urls.blobs,t.id+"/complete"),type:"PUT",data:{size:t.size},dataType:"text"},function(t,i){t?e(t,null):e(null,i)})},getInfo:function(t,e){o.QBLog("[ContentProxy]","getInfo",t),this.service.ajax({url:o.getUrl(r.urls.blobs,t)},function(t,i){t?e(t,null):e(null,i)})},getFile:function(t,e){o.QBLog("[ContentProxy]","getFile",t),this.service.ajax({url:o.getUrl(r.urls.blobs,t)},function(t,i){t?e(t,null):e(null,i)})},getFileUrl:function(t,e){o.QBLog("[ContentProxy]","getFileUrl",t),this.service.ajax({url:o.getUrl(r.urls.blobs,t+"/getblobobjectbyid"),type:"POST"},function(t,i){t?e(t,null):e(null,i.blob_object_access.params)})},update:function(t,e){o.QBLog("[ContentProxy]","update",t);var i={};i.blob={},"undefined"!=typeof t.name&&(i.blob.name=t.name),this.service.ajax({url:o.getUrl(r.urls.blobs,t.id),data:i},function(t,i){t?e(t,null):e(null,i)})},privateUrl:function(t){return"https://"+r.endpoints.api+"/blobs/"+t+"?token="+this.service.getSession().token},publicUrl:function(t){return"https://"+r.endpoints.api+"/blobs/"+t}},e.exports=n,s.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}}},{"../qbConfig":9,"../qbUtils":13,xml2js:47}],4:[function(t,e,i){function n(t){this.service=t}var s=t("../qbConfig"),r=t("../qbUtils");n.prototype={create:function(t,e,i){r.QBLog("[DataProxy]","create",t,e),this.service.ajax({url:r.getUrl(s.urls.data,t),data:e,type:"POST"},function(t,e){t?i(t,null):i(t,e)})},list:function(t,e,i){"undefined"==typeof i&&"function"==typeof e&&(i=e,e=null),r.QBLog("[DataProxy]","list",t,e),this.service.ajax({url:r.getUrl(s.urls.data,t),data:e},function(t,e){t?i(t,null):i(t,e)})},update:function(t,e,i){r.QBLog("[DataProxy]","update",t,e),this.service.ajax({url:r.getUrl(s.urls.data,t+"/"+e._id),data:e,type:"PUT"},function(t,e){t?i(t,null):i(t,e)})},"delete":function(t,e,i){r.QBLog("[DataProxy]","delete",t,e),this.service.ajax({url:r.getUrl(s.urls.data,t+"/"+e),type:"DELETE",dataType:"text"},function(t,e){t?i(t,null):i(t,!0)})},uploadFile:function(t,e,i){r.QBLog("[DataProxy]","uploadFile",t,e);var n;n=new FormData,n.append("field_name",e.field_name),n.append("file",e.file),this.service.ajax({url:r.getUrl(s.urls.data,t+"/"+e.id+"/file"),data:n,contentType:!1,processData:!1,type:"POST"},function(t,e){t?i(t,null):i(t,e)})},updateFile:function(t,e,i){r.QBLog("[DataProxy]","updateFile",t,e);var n;n=new FormData,n.append("field_name",e.field_name),n.append("file",e.file),this.service.ajax({url:r.getUrl(s.urls.data,t+"/"+e.id+"/file"),data:n,contentType:!1,processData:!1,type:"POST"},function(t,e){t?i(t,null):i(t,e)})},downloadFile:function(t,e,i){r.QBLog("[DataProxy]","downloadFile",t,e);var n=r.getUrl(s.urls.data,t+"/"+e.id+"/file");n+="?field_name="+e.field_name+"&token="+this.service.getSession().token,i(null,n)},deleteFile:function(t,e,i){r.QBLog("[DataProxy]","deleteFile",t,e),this.service.ajax({url:r.getUrl(s.urls.data,t+"/"+e.id+"/file"),data:{field_name:e.field_name},dataType:"text",type:"DELETE"},function(t,e){t?i(t,null):i(t,!0)})}},e.exports=n},{"../qbConfig":9,"../qbUtils":13}],5:[function(t,e,i){function n(t){this.service=t,this.geodata=new s(t)}function s(t){this.service=t}var r=t("../qbConfig"),o=t("../qbUtils"),a=r.urls.geodata+"/find";s.prototype={create:function(t,e){o.QBLog("[GeoProxy]","create",t),this.service.ajax({url:o.getUrl(r.urls.geodata),data:{geo_data:t},type:"POST"},function(t,i){t?e(t,null):e(t,i.geo_datum)})},update:function(t,e){var i,n=["longitude","latitude","status"],s={};for(i in t)t.hasOwnProperty(i)&&n.indexOf(i)>0&&(s[i]=t[i]);o.QBLog("[GeoProxy]","update",t),this.service.ajax({url:o.getUrl(r.urls.geodata,t.id),data:{geo_data:s},type:"PUT"},function(t,i){t?e(t,null):e(t,i.geo_datum)})},get:function(t,e){o.QBLog("[GeoProxy]","get",t),this.service.ajax({url:o.getUrl(r.urls.geodata,t)},function(t,i){t?e(t,null):e(null,i.geo_datum)})},list:function(t,e){"function"==typeof t&&(e=t,t=void 0),o.QBLog("[GeoProxy]","find",t),this.service.ajax({url:o.getUrl(a),data:t},e)},"delete":function(t,e){o.QBLog("[GeoProxy]","delete",t),this.service.ajax({url:o.getUrl(r.urls.geodata,t),type:"DELETE",dataType:"text"},function(t,i){t?e(t,null):e(null,!0)})},purge:function(t,e){o.QBLog("[GeoProxy]","purge",t),this.service.ajax({url:o.getUrl(r.urls.geodata),data:{days:t},type:"DELETE",dataType:"text"},function(t,i){t?e(t,null):e(null,!0)})}},e.exports=n},{"../qbConfig":9,"../qbUtils":13}],6:[function(t,e,i){function n(t){this.service=t,this.subscriptions=new s(t),this.events=new r(t),this.base64Encode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}))}}function s(t){this.service=t}function r(t){this.service=t}var o=t("../qbConfig"),a=t("../qbUtils");s.prototype={create:function(t,e){a.QBLog("[SubscriptionsProxy]","create",t),this.service.ajax({url:a.getUrl(o.urls.subscriptions),type:"POST",data:t},e)},list:function(t){a.QBLog("[SubscriptionsProxy]","list"),this.service.ajax({url:a.getUrl(o.urls.subscriptions)},t)},"delete":function(t,e){a.QBLog("[SubscriptionsProxy]","delete",t),this.service.ajax({url:a.getUrl(o.urls.subscriptions,t),type:"DELETE",dataType:"text"},function(t,i){t?e(t,null):e(null,!0)})}},r.prototype={create:function(t,e){a.QBLog("[EventsProxy]","create",t);var i={event:t};this.service.ajax({url:a.getUrl(o.urls.events),type:"POST",data:i},e)},list:function(t){a.QBLog("[EventsProxy]","list"),this.service.ajax({url:a.getUrl(o.urls.events)},t)},get:function(t,e){a.QBLog("[EventsProxy]","get",t),this.service.ajax({url:a.getUrl(o.urls.events,t)},e)},status:function(t,e){a.QBLog("[EventsProxy]","status",t),this.service.ajax({url:a.getUrl(o.urls.events,t+"/status")},e)},update:function(t,e){a.QBLog("[EventsProxy]","update",t);var i={event:t};this.service.ajax({url:a.getUrl(o.urls.events,t.id),type:"PUT",data:i},e)},"delete":function(t,e){a.QBLog("[EventsProxy]","delete",t),this.service.ajax({url:a.getUrl(o.urls.events,t),type:"DELETE"},e)}},e.exports=n},{"../qbConfig":9,"../qbUtils":13}],7:[function(t,e,i){function n(t){this.service=t}function s(t){var e=t.field in l?"date":typeof t.value;return t.value instanceof Array&&("object"==e&&(e=typeof t.value[0]),t.value=t.value.toString()),[e,t.field,t.param,t.value].join(" ")}function r(t){var e=t.field in l?"date":t.field in c?"number":"string";return[t.sort,e,t.field].join(" ")}var o=t("../qbConfig"),a=t("../qbUtils"),l=["created_at","updated_at","last_request_at"],c=["id","external_user_id"],h=o.urls.users+"/password/reset";n.prototype={listUsers:function(t,e){a.QBLog("[UsersProxy]","listUsers",arguments.length>1?t:"");var i,n={},l=[];"function"==typeof t&&"undefined"==typeof e&&(e=t,t={}),t.filter&&(t.filter instanceof Array?t.filter.forEach(function(t){i=s(t),l.push(i)}):(i=s(t.filter),l.push(i)),n.filter=l),t.order&&(n.order=r(t.order)),t.page&&(n.page=t.page),t.per_page&&(n.per_page=t.per_page),this.service.ajax({url:a.getUrl(o.urls.users),data:n},e)},get:function(t,e){a.QBLog("[UsersProxy]","get",t);var i;"number"==typeof t?(i=t,t={}):t.login?i="by_login":t.full_name?i="by_full_name":t.facebook_id?i="by_facebook_id":t.twitter_id?i="by_twitter_id":t.email?i="by_email":t.tags?i="by_tags":t.external&&(i="external/"+t.external,t={}),this.service.ajax({url:a.getUrl(o.urls.users,i),data:t},function(t,i){t?e(t,null):e(null,i.user||i)})},create:function(t,e){a.QBLog("[UsersProxy]","create",t),this.service.ajax({url:a.getUrl(o.urls.users),type:"POST",data:{user:t}},function(t,i){t?e(t,null):e(null,i.user)})},update:function(t,e,i){a.QBLog("[UsersProxy]","update",t,e),this.service.ajax({url:a.getUrl(o.urls.users,t),type:"PUT",data:{user:e}},function(t,e){t?i(t,null):i(null,e.user)})},"delete":function(t,e){a.QBLog("[UsersProxy]","delete",t);var i;"number"==typeof t?i=t:t.external&&(i="external/"+t.external),this.service.ajax({url:a.getUrl(o.urls.users,i),type:"DELETE",dataType:"text"},e)},resetPassword:function(t,e){a.QBLog("[UsersProxy]","resetPassword",t),this.service.ajax({url:a.getUrl(h),data:{email:t}},e)}},e.exports=n},{"../qbConfig":9,"../qbUtils":13}],8:[function(t,e,i){function n(t,e){var i=this;g=e,this.service=t,this.helpers=new s,this._onMessage=function(t){var e=t.getAttribute("from"),n=t.querySelector("extraParams"),s=t.querySelector("delay"),o=i.helpers.getIdFromNode(e),u=i._getExtension(n);if(u.sessionID,s||u.moduleIdentifier!==S)return!0;switch(delete u.moduleIdentifier,u.signalType){case C.CALL:if(r("onCall from "+o),A[o])return r("skip onCallListener, a user already got it"),!0;l(o),null==m&&c(o,i._answerTimeoutCallback),A[o]={sessionID:u.sessionID,sdp:u.sdp},u.callType="1"===u.callType?"video":"audio",delete u.sdp,"function"==typeof i.onCallListener&&i.onCallListener(o,u);break;case C.ACCEPT:r("onAccept from "+o),h(o),d(o),"object"==typeof m&&m.onRemoteSessionCallback(u.sdp,"answer"),delete u.sdp,"function"==typeof i.onAcceptCallListener&&i.onAcceptCallListener(o,u);break;case C.REJECT:r("onReject from "+o),h(o),d(o),i._close(),"function"==typeof i.onRejectCallListener&&i.onRejectCallListener(o,u);break;case C.STOP:r("onStop from "+o),h(o),d(o),a(o),i._close(),"function"==typeof i.onStopCallListener&&i.onStopCallListener(o,u);break;case C.CANDIDATE:"object"==typeof m&&(m.addCandidates(u.iceCandidates),"answer"===m.type&&i._sendCandidate(m.opponentId,m.iceCandidates));break;case C.PARAMETERS_CHANGED:r("onUpdateCall from "+o),"function"==typeof i.onUpdateCallListener&&i.onUpdateCallListener(o,u)}return!0},this._getExtension=function(t){var e,n,s,r,o={},a=[],l=[];if(t){for(var c=0,h=t.childNodes.length;h>c;c++)if("iceCandidates"===t.childNodes[c].tagName){s=t.childNodes[c].childNodes;for(var u=0,d=s.length;d>u;u++){e={},r=s[u].childNodes;for(var p=0,f=r.length;f>p;p++)e[r[p].tagName]=r[p].textContent;a.push(e)}}else if("opponentsIDs"===t.childNodes[c].tagName){s=t.childNodes[c].childNodes;for(var u=0,d=s.length;d>u;u++)n=s[u].textContent,l.push(n)}else t.childNodes[c].childNodes.length>1?o=i._XMLtoJS(o,t.childNodes[c].tagName,t.childNodes[c]):o[t.childNodes[c].tagName]=t.childNodes[c].textContent;a.length>0&&(o.iceCandidates=a),l.length>0&&(o.opponents=l)}return o},this._answerTimeoutCallback=function(t){a(t),i._close(),"function"==typeof i.onSessionStateChangedListener&&i.onSessionStateChangedListener(i.SessionState.CLOSED,t)},this._callTimeoutCallback=function(t){r("User "+t+" not asnwer"),h(t),a(t),i._close(),"function"==typeof i.onUserNotAnswerListener&&i.onUserNotAnswerListener(t);
}}function s(){}function r(t){y.debug&&b.QBLog("[QBWebRTC]",t)}function o(){var t=(new Date).toString().split(" ");return t.slice(1,5).join("-")}function a(t){var e=A[t];e&&delete A[t]}function l(t){var e=E[t];e&&(clearTimeout(e),delete E[t])}function c(t,e){var i=1e3*y.webrtc.answerTimeInterval,n=setTimeout(e,i,t);E[t]=n}function h(t){var e=L[t];e&&(clearInterval(e),delete L[t])}function u(t,e){var i=1e3*y.webrtc.dialingTimeInterval,n=setInterval(e,i);L[t]=n}function d(t){var e=D[t];e&&(clearTimeout(e),delete D[t])}function p(t,e){var i=1e3*y.webrtc.answerTimeInterval;r("startCallTimer, answerTimeInterval: "+i);var n=setTimeout(e,i,t);D[t]=n}function f(t,e){for(var i=[],n=window.atob(t.split(",")[1]),s=0,r=n.length;r>s;s++)i.push(n.charCodeAt(s));return new Blob([new Uint8Array(i)],{type:e})}t("../../lib/strophe/strophe.min");var g,m,v=t("../../lib/download/download.min"),y=t("../qbConfig"),b=t("../qbUtils"),_=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,x=window.RTCSessionDescription||window.mozRTCSessionDescription,w=window.RTCIceCandidate||window.mozRTCIceCandidate,k=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,T=window.URL||window.webkitURL,C={CALL:"call",ACCEPT:"accept",REJECT:"reject",STOP:"hangUp",CANDIDATE:"iceCandidates",PARAMETERS_CHANGED:"update"},S="WebRTCVideoChat",A={},E={},L={},D={};n.prototype.SessionState={UNDEFINED:0,CONNECTING:1,CONNECTED:2,FAILED:3,DISCONNECTED:4,CLOSED:5},n.prototype.getUserMedia=function(t,e){if(!k)throw new Error("getUserMedia() is not supported in your browser");k=k.bind(navigator);var i=this;k({audio:t.audio||!1,video:t.video||!1},function(n){i.localStream=n,t.elemId&&i.attachMediaStream(t.elemId,n,t.options),e(null,n)},function(t){e(t,null)})},n.prototype.attachMediaStream=function(t,e,i){var n=document.getElementById(t);n&&(n.src=T.createObjectURL(e),i&&i.muted&&(n.muted=!0),i&&i.mirror&&(n.style.webkitTransform="scaleX(-1)",n.style.transform="scaleX(-1)"),n.play())},n.prototype.snapshot=function(t){var e,i,n=document.getElementById(t),s=document.createElement("canvas"),r=s.getContext("2d");return n?(s.width=n.clientWidth,s.height=n.clientHeight,"scaleX(-1)"===n.style.transform&&(r.translate(s.width,0),r.scale(-1,1)),r.drawImage(n,0,0,n.clientWidth,n.clientHeight),e=s.toDataURL(),i=f(e,"image/png"),i.name="snapshot_"+o()+".png",i.url=e,i):void 0},n.prototype.filter=function(t,e){var i=document.getElementById(t);i&&(i.style.webkitFilter=e,i.style.filter=e)},n.prototype.mute=function(t){this._switchOffDevice(0,t)},n.prototype.unmute=function(t){this._switchOffDevice(1,t)},n.prototype._switchOffDevice=function(t,e){"audio"===e&&this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks().forEach(function(e){e.enabled=!!t}),"video"===e&&this.localStream.getVideoTracks().length>0&&this.localStream.getVideoTracks().forEach(function(e){e.enabled=!!t})},n.prototype._createPeer=function(t){if(!_)throw new Error("RTCPeerConnection() is not supported in your browser");if(!this.localStream)throw new Error("You don't have an access to the local stream");var e={iceServers:y.iceServers};m=new _(e),m.init(this,t),r("Peer._createPeer: "+m+", sessionID: "+m.sessionID)},n.prototype.call=function(t,e,i){r("Call. userId: "+t+", callType: "+e+", extension: "+JSON.stringify(i)),this._createPeer();var n=this,s=t instanceof Array?t:[t],o=s[0];m.opponentId=o,m.getSessionDescription(function(t,a){if(t)r("getSessionDescription error: "+t);else{h(o);var l=function(){n._sendMessage(o,i,"CALL",e,s)};l(),u(o,l),d(o),p(o,n._callTimeoutCallback)}})},n.prototype.accept=function(t,e){var e=e||{};r("Accept. userId: "+t+", extension: "+JSON.stringify(e)),l(t);var i=A[t];i&&this._createPeer({sessionID:i.sessionID,description:i.sdp});var n=this;m.opponentId=t,m.getSessionDescription(function(i,s){i?r(i):n._sendMessage(t,e,"ACCEPT")})},n.prototype.reject=function(t,e){var e=e||{};r("Reject. userId: "+t+", extension: "+JSON.stringify(e)),l(t),A[t]&&(e.sessionID=A[t].sessionID,delete A[t]),this._sendMessage(t,e,"REJECT")},n.prototype.stop=function(t,e){var e=e||{};r("Stop. userId: "+t+", extension: "+JSON.stringify(e)),l(t),h(t),d(t),this._sendMessage(t,e,"STOP"),this._close(),a(t)},n.prototype.update=function(t,e){var e=e||{};r("Update. userId: "+t+", extension: "+JSON.stringify(e)),this._sendMessage(t,e,"PARAMETERS_CHANGED")},n.prototype.close=function(){Object.keys(E).forEach(function(t){l(t)}),Object.keys(L).forEach(function(t){h(t)}),Object.keys(D).forEach(function(t){d(t)}),this._close(),Object.keys(A).forEach(function(t){a(t)})},n.prototype._close=function(){r("Peer._close"),m&&m.close(),this.localStream&&(this.localStream.getAudioTracks().forEach(function(t){t.stop()}),this.localStream.getVideoTracks().forEach(function(t){t.stop()}),this.localStream=null)},n.prototype._sendCandidate=function(t,e){var i={iceCandidates:e};this._sendMessage(t,i,"CANDIDATE")},n.prototype._sendMessage=function(t,e,i,n,s){var r,o,e=e||{},a=this;e.moduleIdentifier=S,e.signalType=C[i],e.sessionID=m&&m.sessionID||e.sessionID,n&&(e.callType="video"===n?"1":"2"),("CALL"===i||"ACCEPT"===i)&&(e.sdp=m.localDescription.sdp,e.platform="web"),"CALL"===i&&(e.callerID=this.helpers.getIdFromNode(g.jid),e.opponentsIDs=s),o={from:g.jid,to:this.helpers.getUserJid(t,this.service.getSession().application_id),type:"headline",id:b.getBsonObjectId()},r=$msg(o).c("extraParams",{xmlns:Strophe.NS.CLIENT}),Object.keys(e).forEach(function(t){"iceCandidates"===t?(r=r.c("iceCandidates"),e[t].forEach(function(t){r=r.c("iceCandidate"),Object.keys(t).forEach(function(e){r.c(e).t(t[e]).up()}),r.up()}),r.up()):"opponentsIDs"===t?(r=r.c("opponentsIDs"),e[t].forEach(function(t){r=r.c("opponentID").t(t).up()}),r.up()):"object"==typeof e[t]?a._JStoXML(t,e[t],r):r.c(t).t(e[t]).up()}),g.send(r)},n.prototype._JStoXML=function(t,e,i){var n=this;i.c(t),Object.keys(e).forEach(function(t){"object"==typeof e[t]?n._JStoXML(t,e[t],i):i.c(t).t(e[t]).up()}),i.up()},n.prototype._XMLtoJS=function(t,e,i){var n=this;t[e]={};for(var s=0,r=i.childNodes.length;r>s;s++)i.childNodes[s].childNodes.length>1?t[e]=n._XMLtoJS(t[e],i.childNodes[s].tagName,i.childNodes[s]):t[e][i.childNodes[s].tagName]=i.childNodes[s].textContent;return t},_&&(_.prototype.init=function(t,e){this.service=t,this.sessionID=e&&e.sessionID||Date.now(),this.type=e&&e.description?"answer":"offer",this.addStream(this.service.localStream),this.onicecandidate=this.onIceCandidateCallback,this.onaddstream=this.onRemoteStreamCallback,this.onsignalingstatechange=this.onSignalingStateCallback,this.oniceconnectionstatechange=this.onIceConnectionStateCallback,"answer"===this.type&&this.onRemoteSessionCallback(e.description,"offer")},_.prototype.getSessionDescription=function(t){function e(e){m.setLocalDescription(e,function(){t(null,e)},i)}function i(e){t(e,null)}"offer"===m.type?m.createOffer(e,i):m.createAnswer(e,i)},_.prototype.onIceCandidateCallback=function(t){var e=t.candidate;e&&(r("onICECandidate: "+JSON.stringify(e)),m.iceCandidates=m.iceCandidates||[],m.iceCandidates.push({sdpMLineIndex:e.sdpMLineIndex,sdpMid:e.sdpMid,candidate:e.candidate}))},_.prototype.onRemoteSessionCallback=function(t,e){var i=new x({sdp:t,type:e});this.setRemoteDescription(i)},_.prototype.onRemoteStreamCallback=function(t){"function"==typeof m.service.onRemoteStreamListener&&m.service.onRemoteStreamListener(t.stream)},_.prototype.addCandidates=function(t){for(var e,i=0,n=t.length;n>i;i++)e={sdpMLineIndex:t[i].sdpMLineIndex,sdpMid:t[i].sdpMid,candidate:t[i].candidate},this.addIceCandidate(new w(e))},_.prototype.onSignalingStateCallback=function(){m&&"stable"===m.signalingState&&"offer"===m.type&&m.service._sendCandidate(m.opponentId,m.iceCandidates)},_.prototype.onIceConnectionStateCallback=function(){r("onIceConnectionStateCallback: "+m.iceConnectionState);var t=m.iceConnectionState;if("function"==typeof m.service.onSessionStateChangedListener){var e=null;"checking"===t?e=m.service.SessionState.CONNECTING:"connected"===t?e=m.service.SessionState.CONNECTED:"failed"===t?e=m.service.SessionState.FAILED:"disconnected"===t?e=m.service.SessionState.DISCONNECTED:"closed"===t&&(e=m.service.SessionState.CLOSED),null!=e&&m.service.onSessionStateChangedListener(e)}"closed"===t&&(m=null)}),s.prototype={getUserJid:function(t,e){return t+"-"+e+"@"+y.endpoints.chat},getIdFromNode:function(t){return t.indexOf("@")<0?null:parseInt(t.split("@")[0].split("-")[0])}},e.exports=n,Blob.prototype.download=function(){v(this,this.name,this.type)}},{"../../lib/download/download.min":14,"../../lib/strophe/strophe.min":15,"../qbConfig":9,"../qbUtils":13}],9:[function(t,e,i){var n={version:"1.16.1",creds:{appId:"",authKey:"",authSecret:""},endpoints:{api:"api.quickblox.com",chat:"chat.quickblox.com",muc:"muc.chat.quickblox.com"},chatProtocol:{bosh:"https://chat.quickblox.com:5281",websocket:"wss://chat.quickblox.com:5291",active:2},iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:turn.quickblox.com",username:"quickblox",credential:"baccb97ba2d92d71e26eb9886da5f1e0"},{url:"turn:turn.quickblox.com:3478?transport=udp",username:"quickblox",credential:"baccb97ba2d92d71e26eb9886da5f1e0"},{url:"turn:turn.quickblox.com:3478?transport=tcp",username:"quickblox",credential:"baccb97ba2d92d71e26eb9886da5f1e0"}],webrtc:{answerTimeInterval:60,dialingTimeInterval:5},urls:{session:"session",login:"login",users:"users",chat:"chat",blobs:"blobs",geodata:"geodata",pushtokens:"push_tokens",subscriptions:"subscriptions",events:"events",data:"data",type:".json"},on:{sessionExpired:null},timeout:null,debug:{mode:0,file:null},addISOTime:!1};n.set=function(t){"object"==typeof t.endpoints&&t.endpoints.chat&&(n.endpoints.muc="muc."+t.endpoints.chat,n.chatProtocol.bosh="https://"+t.endpoints.chat+":5281",n.chatProtocol.websocket="wss://"+t.endpoints.chat+":5291"),Object.keys(t).forEach(function(e){"set"!==e&&n.hasOwnProperty(e)&&("object"!=typeof t[e]?n[e]=t[e]:Object.keys(t[e]).forEach(function(i){n[e].hasOwnProperty(i)&&(n[e][i]=t[e][i])}))})},e.exports=n},{}],10:[function(t,e,i){function n(){}var s=t("./qbConfig"),r=(t("./qbUtils"),"undefined"!=typeof window);n.prototype={init:function(e,i,n,o){o&&"object"==typeof o&&s.set(o);var a=t("./qbProxy");this.service=new a;var l=t("./modules/qbAuth"),c=t("./modules/qbUsers"),h=t("./modules/qbChat"),u=t("./modules/qbContent"),d=t("./modules/qbLocation"),p=t("./modules/qbPushNotifications"),f=t("./modules/qbData");if(r){var g=t("./qbStrophe"),m=new g,v=t("./modules/qbWebRTC");this.webrtc=new v(this.service,m||null)}this.auth=new l(this.service),this.users=new c(this.service),this.chat=new h(this.service,this.webrtc||null,m||null),this.content=new u(this.service),this.location=new d(this.service),this.pushnotifications=new p(this.service),this.data=new f(this.service),"string"!=typeof e||i||n?(s.creds.appId=e,s.creds.authKey=i,s.creds.authSecret=n):this.service.setSession({token:e})},getSession:function(t){this.auth.getSession(t)},createSession:function(t,e){this.auth.createSession(t,e)},destroySession:function(t){this.auth.destroySession(t)},login:function(t,e){this.auth.login(t,e)},logout:function(t){this.auth.logout(t)}};var o=new n;o.QuickBlox=n,e.exports=o},{"./modules/qbAuth":1,"./modules/qbChat":2,"./modules/qbContent":3,"./modules/qbData":4,"./modules/qbLocation":5,"./modules/qbPushNotifications":6,"./modules/qbUsers":7,"./modules/qbWebRTC":8,"./qbConfig":9,"./qbProxy":11,"./qbStrophe":12,"./qbUtils":13}],11:[function(t,e,i){function n(){this.qbInst={config:s,session:null}}var s=t("./qbConfig"),r=t("./qbUtils"),o=s.version,a="undefined"!=typeof window;if(!a)var l=t("request");var c=a&&window.jQuery&&window.jQuery.ajax||a&&window.Zepto&&window.Zepto.ajax;if(a&&!c)throw new Error("Quickblox requires jQuery or Zepto");n.prototype={setSession:function(t){this.qbInst.session=t},getSession:function(){return this.qbInst.session},handleResponse:function(t,e,i,n){!t||"function"!=typeof s.on.sessionExpired||"Unauthorized"!==t.message&&"401 Unauthorized"!==t.status?t?i(t,null):(s.addISOTime&&(e=r.injectISOTimes(e)),i(null,e)):s.on.sessionExpired(function(){i(t,e)},n)},ajax:function(t,e){var i;t.data&&t.data.file?(i=JSON.parse(JSON.stringify(t)),i.data.file="..."):i=t,r.QBLog("[ServiceProxy]","Request: ",t.type||"GET",{data:JSON.stringify(i)});var n=this,h=function(i){i&&n.setSession(i),n.ajax(t,e)},u={url:t.url,type:t.type||"GET",dataType:t.dataType||"json",data:t.data||" ",timeout:s.timeout,beforeSend:function(t,e){-1===e.url.indexOf("s3.amazonaws.com")&&n.qbInst.session&&n.qbInst.session.token&&(t.setRequestHeader("QB-Token",n.qbInst.session.token),t.setRequestHeader("QB-SDK","JS "+o+" - Client"))},success:function(i,o,a){r.QBLog("[ServiceProxy]","Response: ",{data:JSON.stringify(i)}),-1===t.url.indexOf(s.urls.session)?n.handleResponse(null,i,e,h):e(null,i)},error:function(i,o,a){r.QBLog("[ServiceProxy]","ajax error",i.status,a,i.responseText);var l={code:i.status,status:o,message:a,detail:i.responseText};-1===t.url.indexOf(s.urls.session)?n.handleResponse(l,null,e,h):e(l,null)}};if(!a)var d="json"===u.dataType,p=-1===t.url.indexOf("s3.amazonaws.com")&&n.qbInst&&n.qbInst.session&&n.qbInst.session.token||!1,f={url:u.url,method:u.type,timeout:s.timeout,json:d?u.data:null,headers:p?{"QB-Token":n.qbInst.session.token,"QB-SDK":"JS "+o+" - Server"}:null},g=function(t,i,r){if(t||200!==i.statusCode&&201!==i.statusCode&&202!==i.statusCode){var o;try{o={code:i&&i.statusCode||t&&t.code,status:i&&i.headers&&i.headers.status||"error",message:r||t&&t.errno,detail:r&&r.errors||t&&t.syscall}}catch(a){o=t}-1===f.url.indexOf(s.urls.session)?n.handleResponse(o,null,e,h):e(o,null)}else-1===f.url.indexOf(s.urls.session)?n.handleResponse(null,r,e,h):e(null,r)};if(("boolean"==typeof t.contentType||"string"==typeof t.contentType)&&(u.contentType=t.contentType),"boolean"==typeof t.processData&&(u.processData=t.processData),a)c(u);else{var m=l(f,g);if(!d){var v=m.form();Object.keys(u.data).forEach(function(t,e,i){v.append(t,u.data[t])})}}}},e.exports=n},{"./qbConfig":9,"./qbUtils":13,request:20}],12:[function(t,e,i){function n(){var t=1===s.chatProtocol.active?s.chatProtocol.bosh:s.chatProtocol.websocket,e=new Strophe.Connection(t);return 1===s.chatProtocol.active?(e.xmlInput=function(t){if(t.childNodes[0])for(var e=0,i=t.childNodes.length;i>e;e++)r.QBLog("[QBChat]","RECV:",t.childNodes[e])},e.xmlOutput=function(t){if(t.childNodes[0])for(var e=0,i=t.childNodes.length;i>e;e++)r.QBLog("[QBChat]","SENT:",t.childNodes[e])}):(e.xmlInput=function(t){r.QBLog("[QBChat]","RECV:",t)},e.xmlOutput=function(t){r.QBLog("[QBChat]","SENT:",t)}),e}t("../lib/strophe/strophe.min");var s=t("./qbConfig"),r=t("./qbUtils");e.exports=n},{"../lib/strophe/strophe.min":15,"./qbConfig":9,"./qbUtils":13}],13:[function(t,e,i){var n=t("./qbConfig"),s="undefined"!=typeof window,r="This function isn't supported outside of the browser (...yet)";if(!s)var o=t("fs");var a={machine:Math.floor(16777216*Math.random()).toString(16),pid:Math.floor(32767*Math.random()).toString(16),increment:0},l={safeCallbackCall:function(){if(!s)throw r;for(var t,e=arguments[0].toString(),i=e.split("(")[0].split(" ")[1],n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);t=n.shift();try{t.apply(null,n)}catch(a){""===i?console.error("Error: "+a):console.error("Error in listener "+i+": "+a)}},randomNonce:function(){return Math.floor(1e4*Math.random())},unixTime:function(){return Math.floor(Date.now()/1e3)},getUrl:function(t,e){var i=e?"/"+e:"";return"https://"+n.endpoints.api+"/"+t+i+n.urls.type},getBsonObjectId:function(){var t=this.unixTime().toString(16),e=(a.increment++).toString(16);return e>16777215&&(a.increment=0),"00000000".substr(0,8-t.length)+t+"000000".substr(0,6-a.machine.length)+a.machine+"0000".substr(0,4-a.pid.length)+a.pid+"000000".substr(0,6-e.length)+e},injectISOTimes:function(t){if(t.created_at)"number"==typeof t.created_at&&(t.iso_created_at=new Date(1e3*t.created_at).toISOString()),"number"==typeof t.updated_at&&(t.iso_updated_at=new Date(1e3*t.updated_at).toISOString());else if(t.items)for(var e=0,i=t.items.length;i>e;++e)"number"==typeof t.items[e].created_at&&(t.items[e].iso_created_at=new Date(1e3*t.items[e].created_at).toISOString()),"number"==typeof t.items[e].updated_at&&(t.items[e].iso_updated_at=new Date(1e3*t.items[e].updated_at).toISOString());return t},QBLog:function(){if(this.loggers)for(var t=0;t<this.loggers.length;++t)this.loggers[t](arguments);else{this.loggers=[];var e=function(){var t=function(t){console.log.apply(console,Array.prototype.slice.call(t))};return t},i=function(){var t=function(t){if(s)throw r;for(var e=[],i=0;i<t.length;i++)e.push(JSON.stringify(t[i]));e=e.join(" ");var a="\n"+new Date+". "+e;o.appendFile(n.debug.file,a,function(t){return t?console.error("Error while writing log to file. Error: "+t):void 0})};return t};if("object"==typeof n.debug){if("number"==typeof n.debug.mode){if(1==n.debug.mode){var a=e();this.loggers.push(a)}else if(2==n.debug.mode){var a=i();this.loggers.push(a)}}else if("object"==typeof n.debug.mode){var l=this;n.debug.mode.forEach(function(t,n,s){if(1===t){var r=e();l.loggers.push(r)}else if(2===t){var r=i();l.loggers.push(r)}})}}else if("boolean"==typeof n.debug&&n.debug){var a=e();this.loggers.push(a)}if(this.loggers)for(var t=0;t<this.loggers.length;++t)this.loggers[t](arguments)}}};e.exports=l},{"./qbConfig":9,fs:20}],14:[function(t,e,i){function n(t,e,i){function n(t){var e=t.split(/[:;,]/),i=e[1],n="base64"==e[2]?atob:decodeURIComponent,s=n(e.pop()),r=s.length,o=0,a=new Uint8Array(r);for(o;r>o;++o)a[o]=s.charCodeAt(o);return new d([a],{type:i})}function s(t,e){if("download"in h)return h.href=t,h.setAttribute("download",g),h.innerHTML="downloading...",c.body.appendChild(h),setTimeout(function(){h.click(),c.body.removeChild(h),e===!0&&setTimeout(function(){r.URL.revokeObjectURL(h.href)},250)},66),!0;if("undefined"!=typeof safari)return t="data:"+t.replace(/^data:([\w\/\-\+]+)/,o),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var i=c.createElement("iframe");c.body.appendChild(i),e||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,o)),i.src=t,setTimeout(function(){c.body.removeChild(i)},333)}var r=window,o="application/octet-stream",a=i||o,l=t,c=document,h=c.createElement("a"),u=function(t){return String(t)},d=r.Blob||r.MozBlob||r.WebKitBlob||u;d=d.call?d.bind(r):Blob;var p,f,g=e||"download";if("true"===String(this)&&(l=[l,a],a=l[0],l=l[1]),String(l).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(n(l),g):s(l);if(p=l instanceof d?l:new d([l],{type:a}),navigator.msSaveBlob)return navigator.msSaveBlob(p,g);if(r.URL)s(r.URL.createObjectURL(p),!0);else{if("string"==typeof p||p.constructor===u)try{return s("data:"+a+";base64,"+r.btoa(p))}catch(m){return s("data:"+a+","+encodeURIComponent(p))}f=new FileReader,f.onload=function(){s(this.result)},f.readAsDataURL(p)}return!0}e.exports=n},{}],15:[function(e,i,n){!function(e){return function(e,i){"function"==typeof t&&t.amd?t("strophe-base64",function(){return i()}):e.Base64=i()}(this,function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e={encode:function(e){var i,n,s,r,o,a,l,c="",h=0;do i=e.charCodeAt(h++),n=e.charCodeAt(h++),s=e.charCodeAt(h++),r=i>>2,o=(3&i)<<4|n>>4,a=(15&n)<<2|s>>6,l=63&s,isNaN(n)?(o=(3&i)<<4,a=l=64):isNaN(s)&&(l=64),c=c+t.charAt(r)+t.charAt(o)+t.charAt(a)+t.charAt(l);while(h<e.length);return c},decode:function(e){var i,n,s,r,o,a,l,c="",h=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=t.indexOf(e.charAt(h++)),o=t.indexOf(e.charAt(h++)),a=t.indexOf(e.charAt(h++)),l=t.indexOf(e.charAt(h++)),i=r<<2|o>>4,n=(15&o)<<4|a>>2,s=(3&a)<<6|l,c+=String.fromCharCode(i),64!=a&&(c+=String.fromCharCode(n)),64!=l&&(c+=String.fromCharCode(s));while(h<e.length);return c}};return e}),function(e,i){"function"==typeof t&&t.amd?t("strophe-sha1",function(){return i()}):e.SHA1=i()}(this,function(){function t(t,n){t[n>>5]|=128<<24-n%32,t[(n+64>>9<<4)+15]=n;var o,a,l,c,h,u,d,p,f=new Array(80),g=1732584193,m=-271733879,v=-1732584194,y=271733878,b=-1009589776;for(o=0;o<t.length;o+=16){for(c=g,h=m,u=v,d=y,p=b,a=0;80>a;a++)16>a?f[a]=t[o+a]:f[a]=r(f[a-3]^f[a-8]^f[a-14]^f[a-16],1),l=s(s(r(g,5),e(a,m,v,y)),s(s(b,f[a]),i(a))),b=y,y=v,v=r(m,30),m=g,g=l;g=s(g,c),m=s(m,h),v=s(v,u),y=s(y,d),b=s(b,p)}return[g,m,v,y,b]}function e(t,e,i,n){return 20>t?e&i|~e&n:40>t?e^i^n:60>t?e&i|e&n|i&n:e^i^n}function i(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function n(e,i){var n=o(e);n.length>16&&(n=t(n,8*e.length));for(var s=new Array(16),r=new Array(16),a=0;16>a;a++)s[a]=909522486^n[a],r[a]=1549556828^n[a];var l=t(s.concat(o(i)),512+8*i.length);return t(r.concat(l),672)}function s(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i}function r(t,e){return t<<e|t>>>32-e}function o(t){for(var e=[],i=255,n=0;n<8*t.length;n+=8)e[n>>5]|=(t.charCodeAt(n/8)&i)<<24-n%32;return e}function a(t){for(var e="",i=255,n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>24-n%32&i);return e}function l(t){for(var e,i,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",r=0;r<4*t.length;r+=3)for(e=(t[r>>2]>>8*(3-r%4)&255)<<16|(t[r+1>>2]>>8*(3-(r+1)%4)&255)<<8|t[r+2>>2]>>8*(3-(r+2)%4)&255,i=0;4>i;i++)s+=8*r+6*i>32*t.length?"=":n.charAt(e>>6*(3-i)&63);return s}return{b64_hmac_sha1:function(t,e){return l(n(t,e))},b64_sha1:function(e){return l(t(o(e),8*e.length))},binb2str:a,core_hmac_sha1:n,str_hmac_sha1:function(t,e){return a(n(t,e))},str_sha1:function(e){return a(t(o(e),8*e.length))}}}),function(e,i){"function"==typeof t&&t.amd?t("strophe-md5",function(){return i()}):e.MD5=i()}(this,function(t){var e=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},i=function(t,e){return t<<e|t>>>32-e},n=function(t){for(var e=[],i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},s=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},r=function(t){for(var e="0123456789abcdef",i="",n=0;n<4*t.length;n++)i+=e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15);return i},o=function(t,n,s,r,o,a){return e(i(e(e(n,t),e(r,a)),o),s)},a=function(t,e,i,n,s,r,a){return o(e&i|~e&n,t,e,s,r,a)},l=function(t,e,i,n,s,r,a){return o(e&n|i&~n,t,e,s,r,a)},c=function(t,e,i,n,s,r,a){return o(e^i^n,t,e,s,r,a)},h=function(t,e,i,n,s,r,a){return o(i^(e|~n),t,e,s,r,a)},u=function(t,i){t[i>>5]|=128<<i%32,t[(i+64>>>9<<4)+14]=i;for(var n,s,r,o,u=1732584193,d=-271733879,p=-1732584194,f=271733878,g=0;g<t.length;g+=16)n=u,s=d,r=p,o=f,u=a(u,d,p,f,t[g+0],7,-680876936),f=a(f,u,d,p,t[g+1],12,-389564586),p=a(p,f,u,d,t[g+2],17,606105819),d=a(d,p,f,u,t[g+3],22,-1044525330),u=a(u,d,p,f,t[g+4],7,-176418897),f=a(f,u,d,p,t[g+5],12,1200080426),p=a(p,f,u,d,t[g+6],17,-1473231341),d=a(d,p,f,u,t[g+7],22,-45705983),u=a(u,d,p,f,t[g+8],7,1770035416),f=a(f,u,d,p,t[g+9],12,-1958414417),p=a(p,f,u,d,t[g+10],17,-42063),d=a(d,p,f,u,t[g+11],22,-1990404162),u=a(u,d,p,f,t[g+12],7,1804603682),f=a(f,u,d,p,t[g+13],12,-40341101),p=a(p,f,u,d,t[g+14],17,-1502002290),d=a(d,p,f,u,t[g+15],22,1236535329),u=l(u,d,p,f,t[g+1],5,-165796510),f=l(f,u,d,p,t[g+6],9,-1069501632),p=l(p,f,u,d,t[g+11],14,643717713),d=l(d,p,f,u,t[g+0],20,-373897302),u=l(u,d,p,f,t[g+5],5,-701558691),f=l(f,u,d,p,t[g+10],9,38016083),p=l(p,f,u,d,t[g+15],14,-660478335),d=l(d,p,f,u,t[g+4],20,-405537848),u=l(u,d,p,f,t[g+9],5,568446438),f=l(f,u,d,p,t[g+14],9,-1019803690),p=l(p,f,u,d,t[g+3],14,-187363961),d=l(d,p,f,u,t[g+8],20,1163531501),u=l(u,d,p,f,t[g+13],5,-1444681467),f=l(f,u,d,p,t[g+2],9,-51403784),p=l(p,f,u,d,t[g+7],14,1735328473),d=l(d,p,f,u,t[g+12],20,-1926607734),u=c(u,d,p,f,t[g+5],4,-378558),f=c(f,u,d,p,t[g+8],11,-2022574463),p=c(p,f,u,d,t[g+11],16,1839030562),d=c(d,p,f,u,t[g+14],23,-35309556),u=c(u,d,p,f,t[g+1],4,-1530992060),f=c(f,u,d,p,t[g+4],11,1272893353),p=c(p,f,u,d,t[g+7],16,-155497632),d=c(d,p,f,u,t[g+10],23,-1094730640),u=c(u,d,p,f,t[g+13],4,681279174),f=c(f,u,d,p,t[g+0],11,-358537222),p=c(p,f,u,d,t[g+3],16,-722521979),d=c(d,p,f,u,t[g+6],23,76029189),u=c(u,d,p,f,t[g+9],4,-640364487),f=c(f,u,d,p,t[g+12],11,-421815835),p=c(p,f,u,d,t[g+15],16,530742520),d=c(d,p,f,u,t[g+2],23,-995338651),u=h(u,d,p,f,t[g+0],6,-198630844),f=h(f,u,d,p,t[g+7],10,1126891415),p=h(p,f,u,d,t[g+14],15,-1416354905),d=h(d,p,f,u,t[g+5],21,-57434055),u=h(u,d,p,f,t[g+12],6,1700485571),f=h(f,u,d,p,t[g+3],10,-1894986606),p=h(p,f,u,d,t[g+10],15,-1051523),d=h(d,p,f,u,t[g+1],21,-2054922799),u=h(u,d,p,f,t[g+8],6,1873313359),f=h(f,u,d,p,t[g+15],10,-30611744),p=h(p,f,u,d,t[g+6],15,-1560198380),d=h(d,p,f,u,t[g+13],21,1309151649),u=h(u,d,p,f,t[g+4],6,-145523070),f=h(f,u,d,p,t[g+11],10,-1120210379),p=h(p,f,u,d,t[g+2],15,718787259),d=h(d,p,f,u,t[g+9],21,-343485551),u=e(u,n),d=e(d,s),p=e(p,r),f=e(f,o);return[u,d,p,f]},d={hexdigest:function(t){return r(u(n(t),8*t.length))},hash:function(t){return s(u(n(t),8*t.length))}};return d}),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,i=Array.prototype.slice,n=Array.prototype.concat,s=i.call(arguments,1);return function(){return e.apply(t?t:this,n.call(s,i.call(arguments,0)))}}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=e);e>i;i++)if(i in this&&this[i]===t)return i;return-1}),function(e,i){if("function"==typeof t&&t.amd)t("strophe-core",["strophe-sha1","strophe-base64","strophe-md5","strophe-polyfill"],function(){return i.apply(this,arguments)});else{var n=i(e.SHA1,e.Base64,e.MD5);window.Strophe=n.Strophe,window.$build=n.$build,window.$iq=n.$iq,window.$msg=n.$msg,window.$pres=n.$pres,window.SHA1=n.SHA1,window.Base64=n.Base64,window.MD5=n.MD5,window.b64_hmac_sha1=n.SHA1.b64_hmac_sha1,window.b64_sha1=n.SHA1.b64_sha1,window.str_hmac_sha1=n.SHA1.str_hmac_sha1,window.str_sha1=n.SHA1.str_sha1}}(this,function(t,e,i){function n(t,e){return new a.Builder(t,e)}function s(t){return new a.Builder("message",t)}function r(t){return new a.Builder("iq",t)}function o(t){return new a.Builder("presence",t)}var a;return a={VERSION:"1.2.2",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(t){for(var e=0;e<a.XHTML.tags.length;e++)if(t==a.XHTML.tags[e])return!0;return!1},validAttribute:function(t,e){if("undefined"!=typeof a.XHTML.attributes[t]&&a.XHTML.attributes[t].length>0)for(var i=0;i<a.XHTML.attributes[t].length;i++)if(e==a.XHTML.attributes[t][i])return!0;return!1},validCSS:function(t){for(var e=0;e<a.XHTML.css.length;e++)if(t==a.XHTML.css[e])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(t,e){a.NS[t]=e},forEachChild:function(t,e,i){var n,s;for(n=0;n<t.childNodes.length;n++)s=t.childNodes[n],s.nodeType!=a.ElementType.NORMAL||e&&!this.isTagEqual(s,e)||i(s)},isTagEqual:function(t,e){return t.tagName==e},_xmlGenerator:null,_makeGenerator:function(){var t;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(t=this._getIEXmlDom(),t.appendChild(t.createElement("strophe"))):t=document.implementation.createDocument("jabber:client","strophe",null),t},xmlGenerator:function(){return a._xmlGenerator||(a._xmlGenerator=a._makeGenerator()),a._xmlGenerator},_getIEXmlDom:function(){for(var t=null,e=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],i=0;i<e.length&&null===t;i++)try{t=new ActiveXObject(e[i])}catch(n){t=null}return t},xmlElement:function(t){if(!t)return null;var e,i,n,s=a.xmlGenerator().createElement(t);for(e=1;e<arguments.length;e++){var r=arguments[e];if(r)if("string"==typeof r||"number"==typeof r)s.appendChild(a.xmlTextNode(r));else if("object"==typeof r&&"function"==typeof r.sort)for(i=0;i<r.length;i++){var o=r[i];"object"==typeof o&&"function"==typeof o.sort&&void 0!==o[1]&&s.setAttribute(o[0],o[1])}else if("object"==typeof r)for(n in r)r.hasOwnProperty(n)&&void 0!==r[n]&&s.setAttribute(n,r[n])}return s},xmlescape:function(t){return t=t.replace(/\&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/'/g,"&apos;"),t=t.replace(/"/g,"&quot;")},xmlunescape:function(t){return t=t.replace(/\&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&apos;/g,"'"),t=t.replace(/&quot;/g,'"')},xmlTextNode:function(t){return a.xmlGenerator().createTextNode(t)},xmlHtmlNode:function(t){var e;if(window.DOMParser){var i=new DOMParser;e=i.parseFromString(t,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t);return e},getText:function(t){if(!t)return null;var e="";0===t.childNodes.length&&t.nodeType==a.ElementType.TEXT&&(e+=t.nodeValue);for(var i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType==a.ElementType.TEXT&&(e+=t.childNodes[i].nodeValue);return a.xmlescape(e)},copyElement:function(t){var e,i;if(t.nodeType==a.ElementType.NORMAL){for(i=a.xmlElement(t.tagName),e=0;e<t.attributes.length;e++)i.setAttribute(t.attributes[e].nodeName,t.attributes[e].value);for(e=0;e<t.childNodes.length;e++)i.appendChild(a.copyElement(t.childNodes[e]))}else t.nodeType==a.ElementType.TEXT&&(i=a.xmlGenerator().createTextNode(t.nodeValue));return i},createHtml:function(t){var e,i,n,s,r,o,l,c,h,u,d;if(t.nodeType==a.ElementType.NORMAL)if(s=t.nodeName.toLowerCase(),a.XHTML.validTag(s))try{for(i=a.xmlElement(s),e=0;e<a.XHTML.attributes[s].length;e++)if(r=a.XHTML.attributes[s][e],o=t.getAttribute(r),"undefined"!=typeof o&&null!==o&&""!==o&&o!==!1&&0!==o)if("style"==r&&"object"==typeof o&&"undefined"!=typeof o.cssText&&(o=o.cssText),"style"==r){for(l=[],c=o.split(";"),n=0;n<c.length;n++)h=c[n].split(":"),u=h[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),a.XHTML.validCSS(u)&&(d=h[1].replace(/^\s*/,"").replace(/\s*$/,""),l.push(u+": "+d));l.length>0&&(o=l.join("; "),i.setAttribute(r,o))}else i.setAttribute(r,o);for(e=0;e<t.childNodes.length;e++)i.appendChild(a.createHtml(t.childNodes[e]))}catch(p){i=a.xmlTextNode("")}else for(i=a.xmlGenerator().createDocumentFragment(),e=0;e<t.childNodes.length;e++)i.appendChild(a.createHtml(t.childNodes[e]));else if(t.nodeType==a.ElementType.FRAGMENT)for(i=a.xmlGenerator().createDocumentFragment(),e=0;e<t.childNodes.length;e++)i.appendChild(a.createHtml(t.childNodes[e]));else t.nodeType==a.ElementType.TEXT&&(i=a.xmlTextNode(t.nodeValue));return i},escapeNode:function(t){return"string"!=typeof t?t:t.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(t){return"string"!=typeof t?t:t.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(t){return t.indexOf("@")<0?null:t.split("@")[0]},getDomainFromJid:function(t){var e=a.getBareJidFromJid(t);if(e.indexOf("@")<0)return e;var i=e.split("@");return i.splice(0,1),i.join("@")},getResourceFromJid:function(t){
var e=t.split("/");return e.length<2?null:(e.splice(0,1),e.join("/"))},getBareJidFromJid:function(t){return t?t.split("/")[0]:null},log:function(t,e){},debug:function(t){this.log(this.LogLevel.DEBUG,t)},info:function(t){this.log(this.LogLevel.INFO,t)},warn:function(t){this.log(this.LogLevel.WARN,t)},error:function(t){this.log(this.LogLevel.ERROR,t)},fatal:function(t){this.log(this.LogLevel.FATAL,t)},serialize:function(t){var e;if(!t)return null;"function"==typeof t.tree&&(t=t.tree());var i,n,s=t.nodeName;for(t.getAttribute("_realname")&&(s=t.getAttribute("_realname")),e="<"+s,i=0;i<t.attributes.length;i++)"_realname"!=t.attributes[i].nodeName&&(e+=" "+t.attributes[i].nodeName+"='"+t.attributes[i].value.replace(/&/g,"&amp;").replace(/\'/g,"&apos;").replace(/>/g,"&gt;").replace(/</g,"&lt;")+"'");if(t.childNodes.length>0){for(e+=">",i=0;i<t.childNodes.length;i++)switch(n=t.childNodes[i],n.nodeType){case a.ElementType.NORMAL:e+=a.serialize(n);break;case a.ElementType.TEXT:e+=a.xmlescape(n.nodeValue);break;case a.ElementType.CDATA:e+="<![CDATA["+n.nodeValue+"]]>"}e+="</"+s+">"}else e+="/>";return e},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(t,e){a._connectionPlugins[t]=e}},a.Builder=function(t,e){("presence"==t||"message"==t||"iq"==t)&&(e&&!e.xmlns?e.xmlns=a.NS.CLIENT:e||(e={xmlns:a.NS.CLIENT})),this.nodeTree=a.xmlElement(t,e),this.node=this.nodeTree},a.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return a.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(t){for(var e in t)t.hasOwnProperty(e)&&(void 0===t[e]?this.node.removeAttribute(e):this.node.setAttribute(e,t[e]));return this},c:function(t,e,i){var n=a.xmlElement(t,e,i);return this.node.appendChild(n),"string"!=typeof i&&(this.node=n),this},cnode:function(t){var e,i=a.xmlGenerator();try{e=void 0!==i.importNode}catch(n){e=!1}var s=e?i.importNode(t,!0):a.copyElement(t);return this.node.appendChild(s),this.node=s,this},t:function(t){var e=a.xmlTextNode(t);return this.node.appendChild(e),this},h:function(t){var e=document.createElement("body");e.innerHTML=t;for(var i=a.createHtml(e);i.childNodes.length>0;)this.node.appendChild(i.childNodes[0]);return this}},a.Handler=function(t,e,i,n,s,r,o){this.handler=t,this.ns=e,this.name=i,this.type=n,this.id=s,this.options=o||{matchBare:!1},this.options.matchBare||(this.options.matchBare=!1),this.options.matchBare?this.from=r?a.getBareJidFromJid(r):null:this.from=r,this.user=!0},a.Handler.prototype={isMatch:function(t){var e,i=null;if(i=this.options.matchBare?a.getBareJidFromJid(t.getAttribute("from")):t.getAttribute("from"),e=!1,this.ns){var n=this;a.forEachChild(t,null,function(t){t.getAttribute("xmlns")==n.ns&&(e=!0)}),e=e||t.getAttribute("xmlns")==this.ns}else e=!0;var s=t.getAttribute("type");return!e||this.name&&!a.isTagEqual(t,this.name)||this.type&&(Array.isArray(this.type)?-1==this.type.indexOf(s):s!=this.type)||this.id&&t.getAttribute("id")!=this.id||this.from&&i!=this.from?!1:!0},run:function(t){var e=null;try{e=this.handler(t)}catch(i){throw i.sourceURL?a.fatal("error: "+this.handler+" "+i.sourceURL+":"+i.line+" - "+i.name+": "+i.message):i.fileName?("undefined"!=typeof console&&(console.trace(),console.error(this.handler," - error - ",i,i.message)),a.fatal("error: "+this.handler+" "+i.fileName+":"+i.lineNumber+" - "+i.name+": "+i.message)):a.fatal("error: "+i.message+"\n"+i.stack),i}return e},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},a.TimedHandler=function(t,e){this.period=t,this.handler=e,this.lastCalled=(new Date).getTime(),this.user=!0},a.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},a.Connection=function(t,e){this.service=t,this.options=e||{};var i=this.options.protocol||"";0===t.indexOf("ws:")||0===t.indexOf("wss:")||0===i.indexOf("ws")?this._proto=new a.Websocket(this):this._proto=new a.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._authentication={},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var n in a._connectionPlugins)if(a._connectionPlugins.hasOwnProperty(n)){var s=a._connectionPlugins[n],r=function(){};r.prototype=s,this[n]=new r,this[n].init(this)}},a.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._authentication={},this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(t){return"string"==typeof t||"number"==typeof t?++this._uniqueId+":"+t:++this._uniqueId+""},connect:function(t,e,i,n,s,r,o){this.jid=t,this.authzid=a.getBareJidFromJid(this.jid),this.authcid=o||a.getNodeFromJid(this.jid),this.pass=e,this.servtype="xmpp",this.connect_callback=i,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=a.getDomainFromJid(this.jid),this._changeConnectStatus(a.Status.CONNECTING,null),this._proto._connect(n,s,r)},attach:function(t,e,i,n,s,r,o){if(!(this._proto instanceof a.Bosh))throw{name:"StropheSessionError",message:'The "attach" method can only be used with a BOSH connection.'};this._proto._attach(t,e,i,n,s,r,o)},restore:function(t,e,i,n,s){if(!this._sessionCachingSupported())throw{name:"StropheSessionError",message:'The "restore" method can only be used with a BOSH connection.'};this._proto._restore(t,e,i,n,s)},_sessionCachingSupported:function(){if(this._proto instanceof a.Bosh){if(!JSON)return!1;try{window.sessionStorage.setItem("_strophe_","_strophe_"),window.sessionStorage.removeItem("_strophe_")}catch(t){return!1}return!0}return!1},xmlInput:function(t){},xmlOutput:function(t){},rawInput:function(t){},rawOutput:function(t){},send:function(t){if(null!==t){if("function"==typeof t.sort)for(var e=0;e<t.length;e++)this._queueData(t[e]);else this._queueData("function"==typeof t.tree?t.tree():t);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(t,e,i,n){var s=null,r=this;"function"==typeof t.tree&&(t=t.tree());var o=t.getAttribute("id");o||(o=this.getUniqueId("sendIQ"),t.setAttribute("id",o));var l=t.getAttribute("to"),c=this.jid,h=this.addHandler(function(t){s&&r.deleteTimedHandler(s);var n=!1,o=t.getAttribute("from");if((o===l||null===l&&(o===a.getBareJidFromJid(c)||o===a.getDomainFromJid(c)||o===c))&&(n=!0),!n)throw{name:"StropheError",message:"Got answer to IQ from wrong jid:"+o+"\nExpected jid: "+l};var h=t.getAttribute("type");if("result"==h)e&&e(t);else{if("error"!=h)throw{name:"StropheError",message:"Got bad IQ type of "+h};i&&i(t)}},null,"iq",["error","result"],o);return n&&(s=this.addTimedHandler(n,function(){return r.deleteHandler(h),i&&i(null),!1})),this.send(t),o},_queueData:function(t){if(null===t||!t.tagName||!t.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(t)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(t,e){var i=new a.TimedHandler(t,e);return this.addTimeds.push(i),i},deleteTimedHandler:function(t){this.removeTimeds.push(t)},addHandler:function(t,e,i,n,s,r,o){var l=new a.Handler(t,e,i,n,s,r,o);return this.addHandlers.push(l),l},deleteHandler:function(t){this.removeHandlers.push(t);var e=this.addHandlers.indexOf(t);e>=0&&this.addHandlers.splice(e,1)},disconnect:function(t){if(this._changeConnectStatus(a.Status.DISCONNECTING,t),a.info("Disconnect was called because: "+t),this.connected){var e=!1;this.disconnecting=!0,this.authenticated&&(e=o({xmlns:a.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(e)}else a.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests()},_changeConnectStatus:function(t,e){for(var i in a._connectionPlugins)if(a._connectionPlugins.hasOwnProperty(i)){var n=this[i];if(n.statusChanged)try{n.statusChanged(t,e)}catch(s){a.error(""+i+" plugin caused an exception changing status: "+s)}}if(this.connect_callback)try{this.connect_callback(t,e)}catch(r){a.error("User connection callback caused an exception: "+r)}},_doDisconnect:function(t){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),a.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(a.Status.DISCONNECTED,t),this.connected=!1},_dataRecv:function(t,e){a.info("_dataRecv called");var i=this._proto._reqToData(t);if(null!==i){this.xmlInput!==a.Connection.prototype.xmlInput&&this.xmlInput(i.nodeName===this._proto.strip&&i.childNodes.length?i.childNodes[0]:i),this.rawInput!==a.Connection.prototype.rawInput&&this.rawInput(e?e:a.serialize(i));for(var n,s;this.removeHandlers.length>0;)s=this.removeHandlers.pop(),n=this.handlers.indexOf(s),n>=0&&this.handlers.splice(n,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();var r,o,l=i.getAttribute("type");if(null!==l&&"terminate"==l){if(this.disconnecting)return;return r=i.getAttribute("condition"),o=i.getElementsByTagName("conflict"),null!==r?("remote-stream-error"==r&&o.length>0&&(r="conflict"),this._changeConnectStatus(a.Status.CONNFAIL,r)):this._changeConnectStatus(a.Status.CONNFAIL,"unknown"),void this._doDisconnect(r)}var c=this;a.forEachChild(i,null,function(t){var e,i;for(i=c.handlers,c.handlers=[],e=0;e<i.length;e++){var n=i[e];try{!n.isMatch(t)||!c.authenticated&&n.user?c.handlers.push(n):n.run(t)&&c.handlers.push(n)}catch(s){a.warn("Removing Strophe handlers due to uncaught exception: "+s.message)}}})}},mechanisms:{},_connect_cb:function(t,e,i){a.info("_connect_cb was called"),this.connected=!0;var n=this._proto._reqToData(t);if(n){this.xmlInput!==a.Connection.prototype.xmlInput&&this.xmlInput(n.nodeName===this._proto.strip&&n.childNodes.length?n.childNodes[0]:n),this.rawInput!==a.Connection.prototype.rawInput&&this.rawInput(i?i:a.serialize(n));var s=this._proto._connect_cb(n);if(s!==a.Status.CONNFAIL){this._authentication.sasl_scram_sha1=!1,this._authentication.sasl_plain=!1,this._authentication.sasl_digest_md5=!1,this._authentication.sasl_anonymous=!1,this._authentication.legacy_auth=!1;var r;r=n.getElementsByTagNameNS?n.getElementsByTagNameNS(a.NS.STREAM,"features").length>0:n.getElementsByTagName("stream:features").length>0||n.getElementsByTagName("features").length>0;var o,l,c=n.getElementsByTagName("mechanism"),h=[],u=!1;if(!r)return void this._proto._no_auth_received(e);if(c.length>0)for(o=0;o<c.length;o++)l=a.getText(c[o]),this.mechanisms[l]&&h.push(this.mechanisms[l]);return this._authentication.legacy_auth=n.getElementsByTagName("auth").length>0,(u=this._authentication.legacy_auth||h.length>0)?void(this.do_authentication!==!1&&this.authenticate(h)):void this._proto._no_auth_received(e)}}},authenticate:function(t){var i;for(i=0;i<t.length-1;++i){for(var s=i,o=i+1;o<t.length;++o)t[o].prototype.priority>t[s].prototype.priority&&(s=o);if(s!=i){var l=t[i];t[i]=t[s],t[s]=l}}var c=!1;for(i=0;i<t.length;++i)if(t[i].test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new t[i],this._sasl_mechanism.onStart(this);var h=n("auth",{xmlns:a.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var u=this._sasl_mechanism.onChallenge(this,null);h.t(e.encode(u))}this.send(h.tree()),c=!0;break}c||(null===a.getNodeFromJid(this.jid)?(this._changeConnectStatus(a.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect("x-strophe-bad-non-anon-jid")):(this._changeConnectStatus(a.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(r({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:a.NS.AUTH}).c("username",{}).t(a.getNodeFromJid(this.jid)).tree())))},_sasl_challenge_cb:function(t){var i=e.decode(a.getText(t)),s=this._sasl_mechanism.onChallenge(this,i),r=n("response",{xmlns:a.NS.SASL});return""!==s&&r.t(e.encode(s)),this.send(r.tree()),!0},_auth1_cb:function(t){var e=r({type:"set",id:"_auth_2"}).c("query",{xmlns:a.NS.AUTH}).c("username",{}).t(a.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return a.getResourceFromJid(this.jid)||(this.jid=a.getBareJidFromJid(this.jid)+"/strophe"),e.up().c("resource",{}).t(a.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(e.tree()),!1},_sasl_success_cb:function(t){if(this._sasl_data["server-signature"]){var i,n=e.decode(a.getText(t)),s=/([a-z]+)=([^,]+)(,|$)/,r=n.match(s);if("v"==r[1]&&(i=r[2]),i!=this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}a.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var o=[],l=function(t,e){for(;t.length;)this.deleteHandler(t.pop());return this._sasl_auth1_cb.bind(this)(e),!1};return o.push(this._addSysHandler(function(t){l.bind(this)(o,t)}.bind(this),null,"stream:features",null,null)),o.push(this._addSysHandler(function(t){l.bind(this)(o,t)}.bind(this),a.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(t){this.features=t;var e,i;for(e=0;e<t.childNodes.length;e++)i=t.childNodes[e],"bind"==i.nodeName&&(this.do_bind=!0),"session"==i.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(a.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var n=a.getResourceFromJid(this.jid);return this.send(n?r({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:a.NS.BIND}).c("resource",{}).t(n).tree():r({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:a.NS.BIND}).tree()),!1},_sasl_bind_cb:function(t){if("error"==t.getAttribute("type")){a.info("SASL binding failed.");var e,i=t.getElementsByTagName("conflict");return i.length>0&&(e="conflict"),this._changeConnectStatus(a.Status.AUTHFAIL,e),!1}var n,s=t.getElementsByTagName("bind");return s.length>0?(n=s[0].getElementsByTagName("jid"),void(n.length>0&&(this.jid=a.getText(n[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(r({type:"set",id:"_session_auth_2"}).c("session",{xmlns:a.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(a.Status.CONNECTED,null))))):(a.info("SASL binding failed."),this._changeConnectStatus(a.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(t){if("result"==t.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(a.Status.CONNECTED,null);else if("error"==t.getAttribute("type"))return a.info("Session creation failed."),this._changeConnectStatus(a.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(t){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(a.Status.AUTHFAIL,null),!1},_auth2_cb:function(t){return"result"==t.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(a.Status.CONNECTED,null)):"error"==t.getAttribute("type")&&(this._changeConnectStatus(a.Status.AUTHFAIL,null),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(t,e){var i=new a.TimedHandler(t,e);return i.user=!1,this.addTimeds.push(i),i},_addSysHandler:function(t,e,i,n,s){var r=new a.Handler(t,e,i,n,s);return r.user=!1,this.addHandlers.push(r),r},_onDisconnectTimeout:function(){return a.info("_onDisconnectTimeout was called"),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var t,e,i,n;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)e=this.removeTimeds.pop(),t=this.timedHandlers.indexOf(e),t>=0&&this.timedHandlers.splice(t,1);var s=(new Date).getTime();for(n=[],t=0;t<this.timedHandlers.length;t++)e=this.timedHandlers[t],(this.authenticated||!e.user)&&(i=e.lastCalled+e.period,0>=i-s?e.run()&&n.push(e):n.push(e));this.timedHandlers=n,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(this._onIdle.bind(this),100))}},a.SASLMechanism=function(t,e,i){this.name=t,this.isClientFirst=e,this.priority=i},a.SASLMechanism.prototype={test:function(t){return!0},onStart:function(t){this._connection=t},onChallenge:function(t,e){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},a.SASLAnonymous=function(){},a.SASLAnonymous.prototype=new a.SASLMechanism("ANONYMOUS",!1,10),a.SASLAnonymous.test=function(t){return null===t.authcid},a.Connection.prototype.mechanisms[a.SASLAnonymous.prototype.name]=a.SASLAnonymous,a.SASLPlain=function(){},a.SASLPlain.prototype=new a.SASLMechanism("PLAIN",!0,20),a.SASLPlain.test=function(t){return null!==t.authcid},a.SASLPlain.prototype.onChallenge=function(t){var e=t.authzid;return e+="\x00",e+=t.authcid,e+="\x00",e+=t.pass},a.Connection.prototype.mechanisms[a.SASLPlain.prototype.name]=a.SASLPlain,a.SASLSHA1=function(){},a.SASLSHA1.prototype=new a.SASLMechanism("SCRAM-SHA-1",!0,40),a.SASLSHA1.test=function(t){return null!==t.authcid},a.SASLSHA1.prototype.onChallenge=function(n,s,r){var o=r||i.hexdigest(1234567890*Math.random()),a="n="+n.authcid;return a+=",r=",a+=o,n._sasl_data.cnonce=o,n._sasl_data["client-first-message-bare"]=a,a="n,,"+a,this.onChallenge=function(i,n){for(var s,r,o,a,l,c,h,u,d,p,f,g="c=biws,",m=i._sasl_data["client-first-message-bare"]+","+n+",",v=i._sasl_data.cnonce,y=/([a-z]+)=([^,]+)(,|$)/;n.match(y);){var b=n.match(y);switch(n=n.replace(b[0],""),b[1]){case"r":s=b[2];break;case"s":r=b[2];break;case"i":o=b[2]}}if(s.substr(0,v.length)!==v)return i._sasl_data={},i._sasl_failure_cb();for(g+="r="+s,m+=g,r=e.decode(r),r+="\x00\x00\x00",a=c=t.core_hmac_sha1(i.pass,r),h=1;o>h;h++){for(l=t.core_hmac_sha1(i.pass,t.binb2str(c)),u=0;5>u;u++)a[u]^=l[u];c=l}for(a=t.binb2str(a),d=t.core_hmac_sha1(a,"Client Key"),p=t.str_hmac_sha1(a,"Server Key"),f=t.core_hmac_sha1(t.str_sha1(t.binb2str(d)),m),i._sasl_data["server-signature"]=t.b64_hmac_sha1(p,m),u=0;5>u;u++)d[u]^=f[u];return g+=",p="+e.encode(t.binb2str(d))}.bind(this),a},a.Connection.prototype.mechanisms[a.SASLSHA1.prototype.name]=a.SASLSHA1,a.SASLMD5=function(){},a.SASLMD5.prototype=new a.SASLMechanism("DIGEST-MD5",!1,30),a.SASLMD5.test=function(t){return null!==t.authcid},a.SASLMD5.prototype._quote=function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},a.SASLMD5.prototype.onChallenge=function(t,e,n){for(var s,r=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,o=n||i.hexdigest(""+1234567890*Math.random()),a="",l=null,c="",h="";e.match(r);)switch(s=e.match(r),e=e.replace(s[0],""),s[2]=s[2].replace(/^"(.+)"$/,"$1"),s[1]){case"realm":a=s[2];break;case"nonce":c=s[2];break;case"qop":h=s[2];break;case"host":l=s[2]}var u=t.servtype+"/"+t.domain;null!==l&&(u=u+"/"+l);var d=i.hash(t.authcid+":"+a+":"+this._connection.pass)+":"+c+":"+o,p="AUTHENTICATE:"+u,f="";return f+="charset=utf-8,",f+="username="+this._quote(t.authcid)+",",f+="realm="+this._quote(a)+",",f+="nonce="+this._quote(c)+",",f+="nc=00000001,",f+="cnonce="+this._quote(o)+",",f+="digest-uri="+this._quote(u)+",",f+="response="+i.hexdigest(i.hexdigest(d)+":"+c+":00000001:"+o+":auth:"+i.hexdigest(p))+",",f+="qop=auth",this.onChallenge=function(){return""}.bind(this),f},a.Connection.prototype.mechanisms[a.SASLMD5.prototype.name]=a.SASLMD5,{Strophe:a,$build:n,$msg:s,$iq:r,$pres:o,SHA1:t,Base64:e,MD5:i}}),function(e,i){return"function"==typeof t&&t.amd?void t("strophe-bosh",["strophe-core"],function(t){return i(t.Strophe,t.$build)}):i(Strophe,$build)}(this,function(t,e){return t.Request=function(e,i,n,s){this.id=++t._requestId,this.xmlData=e,this.data=t.serialize(e),this.origFunc=i,this.func=i,this.rid=n,this.date=NaN,this.sends=s||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var t=new Date;return(t-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var t=new Date;return(t-this.dead)/1e3},this.xhr=this._newXHR()},t.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(e=this.xhr.responseXML.documentElement,"parsererror"==e.tagName)throw t.error("invalid response received"),t.error("responseText: "+this.xhr.responseText),t.error("responseXML: "+t.serialize(this.xhr.responseXML)),"parsererror"}else this.xhr.responseText&&(t.error("invalid response received"),t.error("responseText: "+this.xhr.responseText),t.error("responseXML: "+t.serialize(this.xhr.responseXML)));return e},_newXHR:function(){var t=null;return window.XMLHttpRequest?(t=new XMLHttpRequest,t.overrideMimeType&&t.overrideMimeType("text/xml; charset=utf-8")):window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t.onreadystatechange=this.func.bind(null,this),t}},t.Bosh=function(t){this._conn=t,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this._requests=[]},t.Bosh.prototype={strip:null,_buildBody:function(){var i=e("body",{rid:this.rid++,xmlns:t.NS.HTTPBIND});return null!==this.sid&&i.attrs({sid:this.sid}),this._conn.options.keepalive&&this._cacheSession(),i},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,window.sessionStorage.removeItem("strophe-bosh-session")},_connect:function(e,i,n){this.wait=e||this.wait,this.hold=i||this.hold,this.errors=0;var s=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":t.NS.BOSH});n&&s.attrs({route:n});var r=this._conn._connect_cb;this._requests.push(new t.Request(s.tree(),this._onRequestStateChange.bind(this,r.bind(this._conn)),s.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(e,i,n,s,r,o,a){this._conn.jid=e,this.sid=i,this.rid=n,this._conn.connect_callback=s,this._conn.domain=t.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=r||this.wait,this.hold=o||this.hold,this.window=a||this.window,this._conn._changeConnectStatus(t.Status.ATTACHED,null)},_restore:function(e,i,n,s,r){var o=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!("undefined"!=typeof o&&null!==o&&o.rid&&o.sid&&o.jid)||"undefined"!=typeof e&&t.getBareJidFromJid(o.jid)!=t.getBareJidFromJid(e))throw{name:"StropheSessionError",message:"_restore: no restoreable session."};this._conn.restored=!0,this._attach(o.jid,o.sid,o.rid,i,n,s,r)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(e){var i,n,s=e.getAttribute("type");if(null!==s&&"terminate"==s)return i=e.getAttribute("condition"),t.error("BOSH-Connection failed: "+i),n=e.getElementsByTagName("conflict"),null!==i?("remote-stream-error"==i&&n.length>0&&(i="conflict"),this._conn._changeConnectStatus(t.Status.CONNFAIL,i)):this._conn._changeConnectStatus(t.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(i),t.Status.CONNFAIL;this.sid||(this.sid=e.getAttribute("sid"));var r=e.getAttribute("requests");r&&(this.window=parseInt(r,10));var o=e.getAttribute("hold");o&&(this.hold=parseInt(o,10));var a=e.getAttribute("wait");a&&(this.wait=parseInt(a,10))},_disconnect:function(t){this._sendTerminate(t)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),window.sessionStorage.removeItem("strophe-bosh-session")},_emptyQueue:function(){return 0===this._requests.length},_hitError:function(e){this.errors++,t.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(e){e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);var i=this._buildBody();this._requests.push(new t.Request(i.tree(),this._onRequestStateChange.bind(this,e.bind(this._conn)),i.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(var t;this._requests.length>0;)t=this._requests.pop(),t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){}},_onIdle:function(){var e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(t.info("no requests during idle cycle, sending blank request"),e.push(null)),!this._conn.paused){if(this._requests.length<2&&e.length>0){for(var i=this._buildBody(),n=0;n<e.length;n++)null!==e[n]&&("restart"===e[n]?i.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":t.NS.BOSH}):i.cnode(e[n]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new t.Request(i.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),i.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var s=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(t.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),s>Math.floor(t.TIMEOUT*this.wait)&&(t.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(t.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_onRequestStateChange:function(e,i){if(t.debug("request id "+i.id+"."+i.sends+" state changed to "+i.xhr.readyState),i.abort)return void(i.abort=!1);var n;if(4==i.xhr.readyState){n=0;try{n=i.xhr.status}catch(s){}if("undefined"==typeof n&&(n=0),this.disconnecting&&n>=400)return void this._hitError(n);var r=this._requests[0]==i,o=this._requests[1]==i;(n>0&&500>n||i.sends>5)&&(this._removeRequest(i),t.debug("request id "+i.id+" should now be removed")),200==n?((o||r&&this._requests.length>0&&this._requests[0].age()>Math.floor(t.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),t.debug("request id "+i.id+"."+i.sends+" got 200"),e(i),this.errors=0):(t.error("request id "+i.id+"."+i.sends+" error "+n+" happened"),(0===n||n>=400&&600>n||n>=12e3)&&(this._hitError(n),n>=400&&500>n&&(this._conn._changeConnectStatus(t.Status.DISCONNECTING,null),this._conn._doDisconnect()))),n>0&&500>n||i.sends>5||this._throttledRequestHandler()}},_processRequest:function(e){var i=this,n=this._requests[e],s=-1;try{4==n.xhr.readyState&&(s=n.xhr.status)}catch(r){t.error("caught an error in _requests["+e+"], reqStatus: "+s)}if("undefined"==typeof s&&(s=-1),n.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();var o=n.age(),a=!isNaN(o)&&o>Math.floor(t.TIMEOUT*this.wait),l=null!==n.dead&&n.timeDead()>Math.floor(t.SECONDARY_TIMEOUT*this.wait),c=4==n.xhr.readyState&&(1>s||s>=500);if((a||l||c)&&(l&&t.error("Request "+this._requests[e].id+" timed out (secondary), restarting"),n.abort=!0,n.xhr.abort(),n.xhr.onreadystatechange=function(){},this._requests[e]=new t.Request(n.xmlData,n.origFunc,n.rid,n.sends),n=this._requests[e]),0===n.xhr.readyState){t.debug("request id "+n.id+"."+n.sends+" posting");try{n.xhr.open("POST",this._conn.service,this._conn.options.sync?!1:!0),n.xhr.setRequestHeader("Content-Type","text/xml; charset=utf-8")}catch(h){return t.error("XHR open failed."),this._conn.connected||this._conn._changeConnectStatus(t.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var u=function(){if(n.date=new Date,i._conn.options.customHeaders){var t=i._conn.options.customHeaders;for(var e in t)t.hasOwnProperty(e)&&n.xhr.setRequestHeader(e,t[e])}n.xhr.send(n.data)};if(n.sends>1){var d=1e3*Math.min(Math.floor(t.TIMEOUT*this.wait),Math.pow(n.sends,3));setTimeout(u,d)}else u();n.sends++,this._conn.xmlOutput!==t.Connection.prototype.xmlOutput&&this._conn.xmlOutput(n.xmlData.nodeName===this.strip&&n.xmlData.childNodes.length?n.xmlData.childNodes[0]:n.xmlData),this._conn.rawOutput!==t.Connection.prototype.rawOutput&&this._conn.rawOutput(n.data)}else t.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+n.xhr.readyState)},_removeRequest:function(e){t.debug("removing request");var i;for(i=this._requests.length-1;i>=0;i--)e==this._requests[i]&&this._requests.splice(i,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(t){var e=this._requests[t];null===e.dead&&(e.dead=new Date),this._processRequest(t)},_reqToData:function(t){try{return t.getResponse()}catch(e){if("parsererror"!=e)throw e;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(e){t.info("_sendTerminate was called");var i=this._buildBody().attrs({type:"terminate"});e&&i.cnode(e.tree());var n=new t.Request(i.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),i.tree().getAttribute("rid"));this._requests.push(n),this._throttledRequestHandler()},_send:function(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(this._conn._onIdle.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){t.debug(this._requests?"_throttledRequestHandler called with "+this._requests.length+" requests":"_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},t}),function(e,i){return"function"==typeof t&&t.amd?void t("strophe-websocket",["strophe-core"],function(t){return i(t.Strophe,t.$build)}):i(Strophe,$build)}(this,function(t,e){return t.Websocket=function(t){this._conn=t,this.strip="wrapper";var e=t.service;if(0!==e.indexOf("ws:")&&0!==e.indexOf("wss:")){var i="";i+="ws"===t.options.protocol&&"https:"!==window.location.protocol?"ws":"wss",i+="://"+window.location.host,i+=0!==e.indexOf("/")?window.location.pathname+e:e,t.service=i}},t.Websocket.prototype={_buildStream:function(){return e("open",{xmlns:t.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(e,i){var n;if(n=e.getElementsByTagNameNS?e.getElementsByTagNameNS(t.NS.STREAM,"error"):e.getElementsByTagName("stream:error"),0===n.length)return!1;for(var s=n[0],r="",o="",a="urn:ietf:params:xml:ns:xmpp-streams",l=0;l<s.childNodes.length;l++){var c=s.childNodes[l];if(c.getAttribute("xmlns")!==a)break;"text"===c.nodeName?o=c.textContent:r=c.nodeName}var h="WebSocket stream error: ";return h+=r?r:"unknown",o&&(h+=" - "+r),t.error(h),this._conn._changeConnectStatus(i,r),this._conn._doDisconnect(),
!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(e){var i=this._check_streamerror(e,t.Status.CONNFAIL);return i?t.Status.CONNFAIL:void 0},_handleStreamStart:function(e){var i=!1,n=e.getAttribute("xmlns");"string"!=typeof n?i="Missing xmlns in <open />":n!==t.NS.FRAMING&&(i="Wrong xmlns in <open />: "+n);var s=e.getAttribute("version");return"string"!=typeof s?i="Missing version in <open />":"1.0"!==s&&(i="Wrong version in <open />: "+s),i?(this._conn._changeConnectStatus(t.Status.CONNFAIL,i),this._conn._doDisconnect(),!1):!0},_connect_cb_wrapper:function(e){if(0===e.data.indexOf("<open ")||0===e.data.indexOf("<?xml")){var i=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===i)return;var n=(new DOMParser).parseFromString(i,"text/xml").documentElement;this._conn.xmlInput(n),this._conn.rawInput(e.data),this._handleStreamStart(n)&&this._connect_cb(n)}else if(0===e.data.indexOf("<close ")){this._conn.rawInput(e.data),this._conn.xmlInput(e);var s=e.getAttribute("see-other-uri");s?(this._conn._changeConnectStatus(t.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=s,this._connect()):(this._conn._changeConnectStatus(t.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect())}else{var r=this._streamWrap(e.data),o=(new DOMParser).parseFromString(r,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(o,null,e.data)}},_disconnect:function(i){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){i&&this._conn.send(i);var n=e("close",{xmlns:t.NS.FRAMING});this._conn.xmlOutput(n);var s=t.serialize(n);this._conn.rawOutput(s);try{this.socket.send(s)}catch(r){t.info("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){t.info("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(t){return"<wrapper>"+t+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.close()}catch(t){}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(){this._conn.connected&&!this._conn.disconnecting?(t.error("Websocket closed unexcectedly"),this._conn._doDisconnect()):t.info("Websocket closed")},_no_auth_received:function(e){t.error("Server did not send any auth methods"),this._conn._changeConnectStatus(t.Status.CONNFAIL,"Server did not send any auth methods"),e&&(e=e.bind(this._conn))(),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(e){t.error("Websocket error "+e),this._conn._changeConnectStatus(t.Status.CONNFAIL,"The WebSocket connection could not be established was disconnected."),this._disconnect()},_onIdle:function(){var e=this._conn._data;if(e.length>0&&!this._conn.paused){for(var i=0;i<e.length;i++)if(null!==e[i]){var n,s;n="restart"===e[i]?this._buildStream().tree():e[i],s=t.serialize(n),this._conn.xmlOutput(n),this._conn.rawOutput(s),this.socket.send(s)}this._conn._data=[]}},_onMessage:function(e){var i,n,s='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(e.data===s)return this._conn.rawInput(s),this._conn.xmlInput(e),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===e.data.search("<open ")){if(i=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(i))return}else n=this._streamWrap(e.data),i=(new DOMParser).parseFromString(n,"text/xml").documentElement;return this._check_streamerror(i,t.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===i.firstChild.nodeName&&"unavailable"===i.firstChild.getAttribute("type")?(this._conn.xmlInput(i),void this._conn.rawInput(t.serialize(i))):void this._conn._dataRecv(i,e.data)},_onOpen:function(){t.info("Websocket open");var e=this._buildStream();this._conn.xmlOutput(e.tree());var i=t.serialize(e);this._conn.rawOutput(i),this.socket.send(i)},_reqToData:function(t){return t},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},t}),e?e(Strophe,$build,$msg,$iq,$pres):void 0}(function(t,e,i,n,s){window.Strophe=t,window.$build=e,window.$msg=i,window.$iq=n,window.$pres=s})},{}],16:[function(e,i,n){!function(e,s){"object"==typeof n?i.exports=n=s():"function"==typeof t&&t.amd?t([],s):e.CryptoJS=s()}(this,function(){var t=t||function(t,e){var i={},n=i.lib={},s=n.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var i=new t;return e&&i.mixIn(e),i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),r=n.WordArray=s.extend({init:function(t,i){t=this.words=t||[],this.sigBytes=i!=e?i:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes,s=t.sigBytes;if(this.clamp(),n%4)for(var r=0;s>r;r++){var o=255&i[r>>>2]>>>24-8*(r%4);e[n+r>>>2]|=o<<24-8*((n+r)%4)}else if(i.length>65535)for(var r=0;s>r;r+=4)e[n+r>>>2]=i[r>>>2];else e.push.apply(e,i);return this.sigBytes+=s,this},clamp:function(){var e=this.words,i=this.sigBytes;e[i>>>2]&=4294967295<<32-8*(i%4),e.length=t.ceil(i/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var i=[],n=0;e>n;n+=4)i.push(0|4294967296*t.random());return new r.init(i,e)}}),o=i.enc={},a=o.Hex={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],s=0;i>s;s++){var r=255&e[s>>>2]>>>24-8*(s%4);n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;e>n;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-4*(n%8);return new r.init(i,e/2)}},l=o.Latin1={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],s=0;i>s;s++){var r=255&e[s>>>2]>>>24-8*(s%4);n.push(String.fromCharCode(r))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;e>n;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-8*(n%4);return new r.init(i,e)}},c=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},h=n.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var i=this._data,n=i.words,s=i.sigBytes,o=this.blockSize,a=4*o,l=s/a;l=e?t.ceil(l):t.max((0|l)-this._minBufferSize,0);var c=l*o,h=t.min(4*c,s);if(c){for(var u=0;c>u;u+=o)this._doProcessBlock(n,u);var d=n.splice(0,c);i.sigBytes-=h}return new r.init(d,h)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=h.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,i){return new t.init(i).finalize(e)}},_createHmacHelper:function(t){return function(e,i){return new u.HMAC.init(t,i).finalize(e)}}});var u=i.algo={};return i}(Math);return t})},{}],17:[function(e,i,n){!function(s,r){"object"==typeof n?i.exports=n=r(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof t&&t.amd?t(["./core","./sha1","./hmac"],r):r(s.CryptoJS)}(this,function(t){return t.HmacSHA1})},{"./core":16,"./hmac":18,"./sha1":19}],18:[function(e,i,n){!function(s,r){"object"==typeof n?i.exports=n=r(e("./core")):"function"==typeof t&&t.amd?t(["./core"],r):r(s.CryptoJS)}(this,function(t){!function(){var e=t,i=e.lib,n=i.Base,s=e.enc,r=s.Utf8,o=e.algo;o.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=r.parse(e));var i=t.blockSize,n=4*i;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var s=this._oKey=e.clone(),o=this._iKey=e.clone(),a=s.words,l=o.words,c=0;i>c;c++)a[c]^=1549556828,l[c]^=909522486;s.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,i=e.finalize(t);e.reset();var n=e.finalize(this._oKey.clone().concat(i));return n}})}()})},{"./core":16}],19:[function(e,i,n){!function(s,r){"object"==typeof n?i.exports=n=r(e("./core")):"function"==typeof t&&t.amd?t(["./core"],r):r(s.CryptoJS)}(this,function(t){return function(){var e=t,i=e.lib,n=i.WordArray,s=i.Hasher,r=e.algo,o=[],a=r.SHA1=s.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],s=i[1],r=i[2],a=i[3],l=i[4],c=0;80>c;c++){if(16>c)o[c]=0|t[e+c];else{var h=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=h<<1|h>>>31}var u=(n<<5|n>>>27)+l+o[c];u+=20>c?(s&r|~s&a)+1518500249:40>c?(s^r^a)+1859775393:60>c?(s&r|s&a|r&a)-1894007588:(s^r^a)-899497514,l=a,a=r,r=s<<30|s>>>2,s=n,n=u}i[0]=0|i[0]+n,i[1]=0|i[1]+s,i[2]=0|i[2]+r,i[3]=0|i[3]+a,i[4]=0|i[4]+l},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[(n+64>>>9<<4)+14]=Math.floor(i/4294967296),e[(n+64>>>9<<4)+15]=i,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=s._createHelper(a),e.HmacSHA1=s._createHmacHelper(a)}(),t.SHA1})},{"./core":16}],20:[function(t,e,i){},{}],21:[function(t,e,i){arguments[4][20][0].apply(i,arguments)},{dup:20}],22:[function(t,e,i){(function(e){function n(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(i){return!1}}function s(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t){return this instanceof r?(this.length=0,this.parent=void 0,"number"==typeof t?o(this,t):"string"==typeof t?a(this,t,arguments.length>1?arguments[1]:"utf8"):l(this,t)):arguments.length>1?new r(t,arguments[1]):new r(t)}function o(t,e){if(t=g(t,0>e?0:0|m(e)),!r.TYPED_ARRAY_SUPPORT)for(var i=0;e>i;i++)t[i]=0;return t}function a(t,e,i){("string"!=typeof i||""===i)&&(i="utf8");var n=0|y(e,i);return t=g(t,n),t.write(e,i),t}function l(t,e){if(r.isBuffer(e))return c(t,e);if(Q(e))return h(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return u(t,e);if(e instanceof ArrayBuffer)return d(t,e)}return e.length?p(t,e):f(t,e)}function c(t,e){var i=0|m(e.length);return t=g(t,i),e.copy(t,0,0,i),t}function h(t,e){var i=0|m(e.length);t=g(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function u(t,e){var i=0|m(e.length);t=g(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function d(t,e){return r.TYPED_ARRAY_SUPPORT?(e.byteLength,t=r._augment(new Uint8Array(e))):t=u(t,new Uint8Array(e)),t}function p(t,e){var i=0|m(e.length);t=g(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function f(t,e){var i,n=0;"Buffer"===e.type&&Q(e.data)&&(i=e.data,n=0|m(i.length)),t=g(t,n);for(var s=0;n>s;s+=1)t[s]=255&i[s];return t}function g(t,e){r.TYPED_ARRAY_SUPPORT?(t=r._augment(new Uint8Array(e)),t.__proto__=r.prototype):(t.length=e,t._isBuffer=!0);var i=0!==e&&e<=r.poolSize>>>1;return i&&(t.parent=K),t}function m(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function v(t,e){if(!(this instanceof v))return new v(t,e);var i=new r(t,e);return delete i.parent,i}function y(t,e){"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return i;case"utf8":case"utf-8":return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return X(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function b(t,e,i){var n=!1;if(e=0|e,i=void 0===i||i===1/0?this.length:0|i,t||(t="utf8"),0>e&&(e=0),i>this.length&&(i=this.length),e>=i)return"";for(;;)switch(t){case"hex":return I(this,e,i);case"utf8":case"utf-8":return A(this,e,i);case"ascii":return L(this,e,i);case"binary":return D(this,e,i);case"base64":return S(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,i,n){i=Number(i)||0;var s=t.length-i;n?(n=Number(n),n>s&&(n=s)):n=s;var r=e.length;if(r%2!==0)throw new Error("Invalid hex string");n>r/2&&(n=r/2);for(var o=0;n>o;o++){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[i+o]=a}return o}function x(t,e,i,n){return G(z(e,t.length-i),t,i,n)}function w(t,e,i,n){return G(U(e),t,i,n)}function k(t,e,i,n){return w(t,e,i,n)}function T(t,e,i,n){return G(X(e),t,i,n)}function C(t,e,i,n){return G(W(e,t.length-i),t,i,n)}function S(t,e,i){return 0===e&&i===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,i))}function A(t,e,i){i=Math.min(t.length,i);for(var n=[],s=e;i>s;){var r=t[s],o=null,a=r>239?4:r>223?3:r>191?2:1;if(i>=s+a){var l,c,h,u;switch(a){case 1:128>r&&(o=r);break;case 2:l=t[s+1],128===(192&l)&&(u=(31&r)<<6|63&l,u>127&&(o=u));break;case 3:l=t[s+1],c=t[s+2],128===(192&l)&&128===(192&c)&&(u=(15&r)<<12|(63&l)<<6|63&c,u>2047&&(55296>u||u>57343)&&(o=u));break;case 4:l=t[s+1],c=t[s+2],h=t[s+3],128===(192&l)&&128===(192&c)&&128===(192&h)&&(u=(15&r)<<18|(63&l)<<12|(63&c)<<6|63&h,u>65535&&1114112>u&&(o=u))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),s+=a}return E(n)}function E(t){var e=t.length;if(J>=e)return String.fromCharCode.apply(String,t);for(var i="",n=0;e>n;)i+=String.fromCharCode.apply(String,t.slice(n,n+=J));return i}function L(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;i>s;s++)n+=String.fromCharCode(127&t[s]);return n}function D(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;i>s;s++)n+=String.fromCharCode(t[s]);return n}function I(t,e,i){var n=t.length;(!e||0>e)&&(e=0),(!i||0>i||i>n)&&(i=n);for(var s="",r=e;i>r;r++)s+=q(t[r]);return s}function P(t,e,i){for(var n=t.slice(e,i),s="",r=0;r<n.length;r+=2)s+=String.fromCharCode(n[r]+256*n[r+1]);return s}function N(t,e,i){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,n,s,o){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>s||o>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range")}function M(t,e,i,n){0>e&&(e=65535+e+1);for(var s=0,r=Math.min(t.length-i,2);r>s;s++)t[i+s]=(e&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function R(t,e,i,n){0>e&&(e=4294967295+e+1);for(var s=0,r=Math.min(t.length-i,4);r>s;s++)t[i+s]=e>>>8*(n?s:3-s)&255}function $(t,e,i,n,s,r){if(e>s||r>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range");if(0>i)throw new RangeError("index out of range")}function j(t,e,i,n,s){return s||$(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(t,e,i,n,23,4),i+4}function B(t,e,i,n,s){return s||$(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(t,e,i,n,52,8),i+8}function F(t){if(t=H(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function H(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function q(t){return 16>t?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var i,n=t.length,s=null,r=[],o=0;n>o;o++){if(i=t.charCodeAt(o),i>55295&&57344>i){if(!s){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&r.push(239,191,189);continue}s=i;continue}if(56320>i){(e-=3)>-1&&r.push(239,191,189),s=i;continue}i=s-55296<<10|i-56320|65536}else s&&(e-=3)>-1&&r.push(239,191,189);if(s=null,128>i){if((e-=1)<0)break;r.push(i)}else if(2048>i){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(65536>i){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function U(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e}function W(t,e){for(var i,n,s,r=[],o=0;o<t.length&&!((e-=2)<0);o++)i=t.charCodeAt(o),n=i>>8,s=i%256,r.push(s),r.push(n);return r}function X(t){return Y.toByteArray(F(t))}function G(t,e,i,n){for(var s=0;n>s&&!(s+i>=e.length||s>=t.length);s++)e[s+i]=t[s];return s}var Y=t("base64-js"),V=t("ieee754"),Q=t("is-array");i.Buffer=r,i.SlowBuffer=v,i.INSPECT_MAX_BYTES=50,r.poolSize=8192;var K={};r.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,s=0,o=Math.min(i,n);o>s&&t[s]===e[s];)++s;return s!==o&&(i=t[s],n=e[s]),n>i?-1:i>n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!Q(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new r(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;i++)e+=t[i].length;var n=new r(e),s=0;for(i=0;i<t.length;i++){var o=t[i];o.copy(n,s),s+=o.length}return n},r.byteLength=y,r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):b.apply(this,arguments)},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:r.compare(this,t)},r.prototype.indexOf=function(t,e){function i(t,e,i){for(var n=-1,s=0;i+s<t.length;s++)if(t[i+s]===e[-1===n?0:s-n]){if(-1===n&&(n=s),s-n+1===e.length)return i+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(r.isBuffer(t))return i(this,t,e);if("number"==typeof t)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):i(this,[t],e);throw new TypeError("val must be string, number or Buffer")},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0);else{var s=n;n=e,e=0|i,i=s}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(0>i||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,i);case"utf8":case"utf-8":return x(this,t,e,i);case"ascii":return w(this,t,e,i);case"binary":return k(this,t,e,i);case"base64":return T(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;r.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),t>e&&(e=t);var n;if(r.TYPED_ARRAY_SUPPORT)n=r._augment(this.subarray(t,e));else{var s=e-t;n=new r(s,void 0);for(var o=0;s>o;o++)n[o]=this[o+t]}return n.length&&(n.parent=this.parent||this),n},r.prototype.readUIntLE=function(t,e,i){t=0|t,e=0|e,i||N(t,e,this.length);for(var n=this[t],s=1,r=0;++r<e&&(s*=256);)n+=this[t+r]*s;return n},r.prototype.readUIntBE=function(t,e,i){t=0|t,e=0|e,i||N(t,e,this.length);for(var n=this[t+--e],s=1;e>0&&(s*=256);)n+=this[t+--e]*s;return n},r.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,i){t=0|t,e=0|e,i||N(t,e,this.length);for(var n=this[t],s=1,r=0;++r<e&&(s*=256);)n+=this[t+r]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*e)),n},r.prototype.readIntBE=function(t,e,i){t=0|t,e=0|e,i||N(t,e,this.length);for(var n=e,s=1,r=this[t+--n];n>0&&(s*=256);)r+=this[t+--n]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*e)),r},r.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),V.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),V.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),V.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),V.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||O(this,t,e,i,Math.pow(2,8*i),0);var s=1,r=0;for(this[e]=255&t;++r<i&&(s*=256);)this[e+r]=t/s&255;return e+i},r.prototype.writeUIntBE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||O(this,t,e,i,Math.pow(2,8*i),0);var s=i-1,r=1;for(this[e+s]=255&t;--s>=0&&(r*=256);)this[e+s]=t/r&255;return e+i},r.prototype.writeUInt8=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},r.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e=0|e,!n){var s=Math.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}var r=0,o=1,a=0>t?1:0;for(this[e]=255&t;++r<i&&(o*=256);)this[e+r]=(t/o>>0)-a&255;return e+i},r.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e=0|e,!n){var s=Math.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}var r=i-1,o=1,a=0>t?1:0;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=(t/o>>0)-a&255;return e+i},r.prototype.writeInt8=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},r.prototype.writeInt16LE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,i){return t=+t,e=0|e,i||O(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,i){return j(this,t,e,!0,i)},r.prototype.writeFloatBE=function(t,e,i){return j(this,t,e,!1,i)},r.prototype.writeDoubleLE=function(t,e,i){return B(this,t,e,!0,i)},r.prototype.writeDoubleBE=function(t,e,i){return B(this,t,e,!1,i)},r.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&i>n&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var s,o=n-i;if(this===t&&e>i&&n>e)for(s=o-1;s>=0;s--)t[s+e]=this[s+i];else if(1e3>o||!r.TYPED_ARRAY_SUPPORT)for(s=0;o>s;s++)t[s+e]=this[s+i];else t._set(this.subarray(i,i+o),e);return o},r.prototype.fill=function(t,e,i){if(t||(t=0),e||(e=0),i||(i=this.length),e>i)throw new RangeError("end < start");if(i!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>i||i>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;i>n;n++)this[n]=t;else{var s=z(t.toString()),r=s.length;for(n=e;i>n;n++)this[n]=s[n%r]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,i=t.length;i>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=r.prototype;r._augment=function(t){return t.constructor=r,t._isBuffer=!0,t._set=t.set,t.get=Z.get,t.set=Z.set,t.write=Z.write,t.toString=Z.toString,t.toLocaleString=Z.toString,t.toJSON=Z.toJSON,t.equals=Z.equals,t.compare=Z.compare,t.indexOf=Z.indexOf,t.copy=Z.copy,t.slice=Z.slice,t.readUIntLE=Z.readUIntLE,t.readUIntBE=Z.readUIntBE,t.readUInt8=Z.readUInt8,t.readUInt16LE=Z.readUInt16LE,t.readUInt16BE=Z.readUInt16BE,t.readUInt32LE=Z.readUInt32LE,t.readUInt32BE=Z.readUInt32BE,t.readIntLE=Z.readIntLE,t.readIntBE=Z.readIntBE,t.readInt8=Z.readInt8,t.readInt16LE=Z.readInt16LE,t.readInt16BE=Z.readInt16BE,t.readInt32LE=Z.readInt32LE,t.readInt32BE=Z.readInt32BE,t.readFloatLE=Z.readFloatLE,t.readFloatBE=Z.readFloatBE,t.readDoubleLE=Z.readDoubleLE,t.readDoubleBE=Z.readDoubleBE,t.writeUInt8=Z.writeUInt8,t.writeUIntLE=Z.writeUIntLE,t.writeUIntBE=Z.writeUIntBE,t.writeUInt16LE=Z.writeUInt16LE,t.writeUInt16BE=Z.writeUInt16BE,t.writeUInt32LE=Z.writeUInt32LE,t.writeUInt32BE=Z.writeUInt32BE,t.writeIntLE=Z.writeIntLE,t.writeIntBE=Z.writeIntBE,t.writeInt8=Z.writeInt8,t.writeInt16LE=Z.writeInt16LE,t.writeInt16BE=Z.writeInt16BE,t.writeInt32LE=Z.writeInt32LE,t.writeInt32BE=Z.writeInt32BE,t.writeFloatLE=Z.writeFloatLE,t.writeFloatBE=Z.writeFloatBE,t.writeDoubleLE=Z.writeDoubleLE,t.writeDoubleBE=Z.writeDoubleBE,t.fill=Z.fill,t.inspect=Z.inspect,t.toArrayBuffer=Z.toArrayBuffer,t};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":23,ieee754:24,"is-array":25}],23:[function(t,e,i){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===o||e===u?62:e===a||e===d?63:l>e?-1:l+10>e?e-l+26+26:h+26>e?e-h:c+26>e?e-c+26:void 0}function i(t){function i(t){c[u++]=t}var n,s,o,a,l,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=t.length;l="="===t.charAt(h-2)?2:"="===t.charAt(h-1)?1:0,c=new r(3*t.length/4-l),o=l>0?t.length-4:t.length;var u=0;for(n=0,s=0;o>n;n+=4,s+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),i((16711680&a)>>16),i((65280&a)>>8),i(255&a);return 2===l?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,i(255&a)):1===l&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,i(a>>8&255),i(255&a)),c}function s(t){function e(t){return n.charAt(t)}function i(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var s,r,o,a=t.length%3,l="";for(s=0,o=t.length-a;o>s;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],l+=i(r);switch(a){case 1:r=t[t.length-1],l+=e(r>>2),l+=e(r<<4&63),l+="==";break;case 2:r=(t[t.length-2]<<8)+t[t.length-1],l+=e(r>>10),l+=e(r>>4&63),l+=e(r<<2&63),l+="="}return l}var r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),a="/".charCodeAt(0),l="0".charCodeAt(0),c="a".charCodeAt(0),h="A".charCodeAt(0),u="-".charCodeAt(0),d="_".charCodeAt(0);t.toByteArray=i,t.fromByteArray=s}("undefined"==typeof i?this.base64js={}:i)},{}],24:[function(t,e,i){i.read=function(t,e,i,n,s){var r,o,a=8*s-n-1,l=(1<<a)-1,c=l>>1,h=-7,u=i?s-1:0,d=i?-1:1,p=t[e+u];for(u+=d,r=p&(1<<-h)-1,p>>=-h,h+=a;h>0;r=256*r+t[e+u],u+=d,h-=8);for(o=r&(1<<-h)-1,r>>=-h,h+=n;h>0;o=256*o+t[e+u],u+=d,h-=8);if(0===r)r=1-c;else{if(r===l)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,n),r-=c}return(p?-1:1)*o*Math.pow(2,r-n)},i.write=function(t,e,i,n,s,r){var o,a,l,c=8*r-s-1,h=(1<<c)-1,u=h>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:r-1,f=n?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),e+=o+u>=1?d/l:d*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(e*l-1)*Math.pow(2,s),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,s),o=0));s>=8;t[i+p]=255&a,p+=f,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[i+p]=255&o,p+=f,o/=256,c-=8);t[i+p-f]|=128*g}},{}],25:[function(t,e,i){var n=Array.isArray,s=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==s.call(t)}},{}],26:[function(t,e,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,i,n,r,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[t],a(i))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,r=new Array(n-1),l=1;n>l;l++)r[l-1]=arguments[l];i.apply(this,r)}else if(o(i)){for(n=arguments.length,r=new Array(n-1),l=1;n>l;l++)r[l-1]=arguments[l];for(c=i.slice(),n=c.length,l=0;n>l;l++)c[l].apply(this,r)}return!0},n.prototype.addListener=function(t,e){var i;if(!s(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,s(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,
o(this._events[t])&&!this._events[t].warned){var i;i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}if(!s(e))throw TypeError("listener must be a function");var n=!1;return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var i,n,r,a;if(!s(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],r=i.length,n=-1,i===e||s(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(a=r;a-->0;)if(i[a]===e||i[a].listener&&i[a].listener===e){n=a;break}if(0>n)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],s(i))this.removeListener(t,i);else for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?s(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var i;return i=t._events&&t._events[e]?s(t._events[e])?1:t._events[e].length:0}},{}],27:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],28:[function(t,e,i){e.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],29:[function(t,e,i){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],30:[function(t,e,i){function n(){h=!1,a.length?c=a.concat(c):u=-1,c.length&&s()}function s(){if(!h){var t=setTimeout(n);h=!0;for(var e=c.length;e;){for(a=c,c=[];++u<e;)a&&a[u].run();u=-1,e=c.length}a=null,h=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function o(){}var a,l=e.exports={},c=[],h=!1,u=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new r(t,e)),1!==c.length||h||setTimeout(s,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=o,l.addListener=o,l.once=o,l.off=o,l.removeListener=o,l.removeAllListeners=o,l.emit=o,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],31:[function(t,e,i){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":32}],32:[function(t,e,i){(function(i){function n(t){return this instanceof n?(l.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",s)):new n(t)}function s(){this.allowHalfOpen||this._writableState.ended||i.nextTick(this.end.bind(this))}function r(t,e){for(var i=0,n=t.length;n>i;i++)e(t[i],i)}e.exports=n;var o=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e},a=t("core-util-is");a.inherits=t("inherits");var l=t("./_stream_readable"),c=t("./_stream_writable");a.inherits(n,l),r(o(c.prototype),function(t){n.prototype[t]||(n.prototype[t]=c.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":34,"./_stream_writable":36,_process:30,"core-util-is":37,inherits:27}],33:[function(t,e,i){function n(t){return this instanceof n?void s.call(this,t):new n(t)}e.exports=n;var s=t("./_stream_transform"),r=t("core-util-is");r.inherits=t("inherits"),r.inherits(n,s),n.prototype._transform=function(t,e,i){i(null,t)}},{"./_stream_transform":35,"core-util-is":37,inherits:27}],34:[function(t,e,i){(function(i){function n(e,i){var n=t("./_stream_duplex");e=e||{};var s=e.highWaterMark,r=e.objectMode?16:16384;this.highWaterMark=s||0===s?s:r,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,i instanceof n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(E||(E=t("string_decoder/").StringDecoder),this.decoder=new E(e.encoding),this.encoding=e.encoding)}function s(e){return t("./_stream_duplex"),this instanceof s?(this._readableState=new n(e,this),this.readable=!0,void S.call(this)):new s(e)}function r(t,e,i,n,s){var r=c(e,i);if(r)t.emit("error",r);else if(A.isNullOrUndefined(i))e.reading=!1,e.ended||h(t,e);else if(e.objectMode||i&&i.length>0)if(e.ended&&!s){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&s){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||s||n||(i=e.decoder.write(i)),s||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,s?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&u(t)),p(t,e);else s||(e.reading=!1);return o(e)}function o(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=D)t=D;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function l(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||A.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var i=null;return A.isBuffer(e)||A.isString(e)||A.isNullOrUndefined(e)||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}function h(t,e){if(e.decoder&&!e.ended){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,u(t)}function u(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(L("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(function(){d(t)}):d(t))}function d(t){L("emit readable"),t.emit("readable"),y(t)}function p(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(function(){f(t,e)}))}function f(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(L("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;L("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&C.listenerCount(t,"data")&&(e.flowing=!0,y(t))}}function m(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(function(){v(t,e)}))}function v(t,e){e.resumeScheduled=!1,t.emit("resume"),y(t),e.flowing&&!e.reading&&t.read(0)}function y(t){var e=t._readableState;if(L("flow",e.flowing),e.flowing)do var i=t.read();while(null!==i&&e.flowing)}function b(t,e){var i,n=e.buffer,s=e.length,r=!!e.decoder,o=!!e.objectMode;if(0===n.length)return null;if(0===s)i=null;else if(o)i=n.shift();else if(!t||t>=s)i=r?n.join(""):T.concat(n,s),n.length=0;else if(t<n[0].length){var a=n[0];i=a.slice(0,t),n[0]=a.slice(t)}else if(t===n[0].length)i=n.shift();else{i=r?"":new T(t);for(var l=0,c=0,h=n.length;h>c&&t>l;c++){var a=n[0],u=Math.min(t-l,a.length);r?i+=a.slice(0,u):a.copy(i,l,0,u),u<a.length?n[0]=a.slice(u):n.shift(),l+=u}}return i}function _(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,i.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function x(t,e){for(var i=0,n=t.length;n>i;i++)e(t[i],i)}function w(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1}e.exports=s;var k=t("isarray"),T=t("buffer").Buffer;s.ReadableState=n;var C=t("events").EventEmitter;C.listenerCount||(C.listenerCount=function(t,e){return t.listeners(e).length});var S=t("stream"),A=t("core-util-is");A.inherits=t("inherits");var E,L=t("util");L=L&&L.debuglog?L.debuglog("stream"):function(){},A.inherits(s,S),s.prototype.push=function(t,e){var i=this._readableState;return A.isString(t)&&!i.objectMode&&(e=e||i.defaultEncoding,e!==i.encoding&&(t=new T(t,e),e="")),r(this,i,t,e,!1)},s.prototype.unshift=function(t){var e=this._readableState;return r(this,e,t,"",!0)},s.prototype.setEncoding=function(e){return E||(E=t("string_decoder/").StringDecoder),this._readableState.decoder=new E(e),this._readableState.encoding=e,this};var D=8388608;s.prototype.read=function(t){L("read",t);var e=this._readableState,i=t;if((!A.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return L("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?_(this):u(this),null;if(t=l(t,e),0===t&&e.ended)return 0===e.length&&_(this),null;var n=e.needReadable;L("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,L("length less than watermark",n)),(e.ended||e.reading)&&(n=!1,L("reading or ended",n)),n&&(L("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),n&&!e.reading&&(t=l(i,e));var s;return s=t>0?b(t,e):null,A.isNull(s)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),i!==t&&e.ended&&0===e.length&&_(this),A.isNull(s)||this.emit("data",s),s},s.prototype._read=function(t){this.emit("error",new Error("not implemented"))},s.prototype.pipe=function(t,e){function n(t){L("onunpipe"),t===u&&r()}function s(){L("onend"),t.end()}function r(){L("cleanup"),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("drain",m),t.removeListener("error",a),t.removeListener("unpipe",n),u.removeListener("end",s),u.removeListener("end",r),u.removeListener("data",o),!d.awaitDrain||t._writableState&&!t._writableState.needDrain||m()}function o(e){L("ondata");var i=t.write(e);!1===i&&(L("false write response, pause",u._readableState.awaitDrain),u._readableState.awaitDrain++,u.pause())}function a(e){L("onerror",e),h(),t.removeListener("error",a),0===C.listenerCount(t,"error")&&t.emit("error",e)}function l(){t.removeListener("finish",c),h()}function c(){L("onfinish"),t.removeListener("close",l),h()}function h(){L("unpipe"),u.unpipe(t)}var u=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=t;break;case 1:d.pipes=[d.pipes,t];break;default:d.pipes.push(t)}d.pipesCount+=1,L("pipe count=%d opts=%j",d.pipesCount,e);var p=(!e||e.end!==!1)&&t!==i.stdout&&t!==i.stderr,f=p?s:r;d.endEmitted?i.nextTick(f):u.once("end",f),t.on("unpipe",n);var m=g(u);return t.on("drain",m),u.on("data",o),t._events&&t._events.error?k(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",l),t.once("finish",c),t.emit("pipe",u),d.flowing||(L("pipe resume"),u.resume()),t},s.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;n>s;s++)i[s].emit("unpipe",this);return this}var s=w(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},s.prototype.on=function(t,e){var n=S.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var s=this._readableState;if(!s.readableListening)if(s.readableListening=!0,s.emittedReadable=!1,s.needReadable=!0,s.reading)s.length&&u(this,s);else{var r=this;i.nextTick(function(){L("readable nexttick read 0"),r.read(0)})}}return n},s.prototype.addListener=s.prototype.on,s.prototype.resume=function(){var t=this._readableState;return t.flowing||(L("resume"),t.flowing=!0,t.reading||(L("resume read 0"),this.read(0)),m(this,t)),this},s.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this},s.prototype.wrap=function(t){var e=this._readableState,i=!1,n=this;t.on("end",function(){if(L("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(s){if(L("wrapped data"),e.decoder&&(s=e.decoder.write(s)),s&&(e.objectMode||s.length)){var r=n.push(s);r||(i=!0,t.pause())}});for(var s in t)A.isFunction(t[s])&&A.isUndefined(this[s])&&(this[s]=function(e){return function(){return t[e].apply(t,arguments)}}(s));var r=["error","close","destroy","pause","resume"];return x(r,function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(e){L("wrapped _read",e),i&&(i=!1,t.resume())},n},s._fromList=b}).call(this,t("_process"))},{"./_stream_duplex":32,_process:30,buffer:22,"core-util-is":37,events:26,inherits:27,isarray:29,stream:42,"string_decoder/":43,util:21}],35:[function(t,e,i){function n(t,e){this.afterTransform=function(t,i){return s(e,t,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function s(t,e,i){var n=t._transformState;n.transforming=!1;var s=n.writecb;if(!s)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,l.isNullOrUndefined(i)||t.push(i),s&&s(e);var r=t._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&t._read(r.highWaterMark)}function r(t){if(!(this instanceof r))return new r(t);a.call(this,t),this._transformState=new n(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){l.isFunction(this._flush)?this._flush(function(t){o(e,t)}):o(e)})}function o(t,e){if(e)return t.emit("error",e);var i=t._writableState,n=t._transformState;if(i.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=r;var a=t("./_stream_duplex"),l=t("core-util-is");l.inherits=t("inherits"),l.inherits(r,a),r.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},r.prototype._transform=function(t,e,i){throw new Error("not implemented")},r.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},r.prototype._read=function(t){var e=this._transformState;l.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":32,"core-util-is":37,inherits:27}],36:[function(t,e,i){(function(i){function n(t,e,i){this.chunk=t,this.encoding=e,this.callback=i}function s(e,i){var n=t("./_stream_duplex");e=e||{};var s=e.highWaterMark,r=e.objectMode?16:16384;this.highWaterMark=s||0===s?s:r,this.objectMode=!!e.objectMode,i instanceof n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(i,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function r(e){var i=t("./_stream_duplex");return this instanceof r||this instanceof i?(this._writableState=new s(e,this),this.writable=!0,void k.call(this)):new r(e)}function o(t,e,n){var s=new Error("write after end");t.emit("error",s),i.nextTick(function(){n(s)})}function a(t,e,n,s){var r=!0;if(!(w.isBuffer(n)||w.isString(n)||w.isNullOrUndefined(n)||e.objectMode)){var o=new TypeError("Invalid non-string/buffer chunk");t.emit("error",o),i.nextTick(function(){s(o)}),r=!1}return r}function l(t,e,i){return!t.objectMode&&t.decodeStrings!==!1&&w.isString(e)&&(e=new x(e,i)),e}function c(t,e,i,s,r){i=l(e,i,s),w.isBuffer(i)&&(s="buffer");var o=e.objectMode?1:i.length;e.length+=o;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new n(i,s,r)):h(t,e,!1,o,i,s,r),a}function h(t,e,i,n,s,r,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,i?t._writev(s,e.onwrite):t._write(s,r,e.onwrite),e.sync=!1}function u(t,e,n,s,r){n?i.nextTick(function(){e.pendingcb--,r(s)}):(e.pendingcb--,r(s)),t._writableState.errorEmitted=!0,t.emit("error",s)}function d(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var n=t._writableState,s=n.sync,r=n.writecb;if(d(n),e)u(t,n,s,e,r);else{var o=v(t,n);o||n.corked||n.bufferProcessing||!n.buffer.length||m(t,n),s?i.nextTick(function(){f(t,n,o,r)}):f(t,n,o,r)}}function f(t,e,i,n){i||g(t,e),e.pendingcb--,n(),b(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var i=[],n=0;n<e.buffer.length;n++)i.push(e.buffer[n].callback);e.pendingcb++,h(t,e,!0,e.length,e.buffer,"",function(t){for(var n=0;n<i.length;n++)e.pendingcb--,i[n](t)}),e.buffer=[]}else{for(var n=0;n<e.buffer.length;n++){var s=e.buffer[n],r=s.chunk,o=s.encoding,a=s.callback,l=e.objectMode?1:r.length;if(h(t,e,!1,l,r,o,a),e.writing){n++;break}}n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}e.bufferProcessing=!1}function v(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var i=v(t,e);return i&&(0===e.pendingcb?(y(t,e),e.finished=!0,t.emit("finish")):y(t,e)),i}function _(t,e,n){e.ending=!0,b(t,e),n&&(e.finished?i.nextTick(n):t.once("finish",n)),e.ended=!0}e.exports=r;var x=t("buffer").Buffer;r.WritableState=s;var w=t("core-util-is");w.inherits=t("inherits");var k=t("stream");w.inherits(r,k),r.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},r.prototype.write=function(t,e,i){var n=this._writableState,s=!1;return w.isFunction(e)&&(i=e,e=null),w.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),w.isFunction(i)||(i=function(){}),n.ended?o(this,n,i):a(this,n,t,i)&&(n.pendingcb++,s=c(this,n,t,e,i)),s},r.prototype.cork=function(){var t=this._writableState;t.corked++},r.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||m(this,t))},r.prototype._write=function(t,e,i){i(new Error("not implemented"))},r.prototype._writev=null,r.prototype.end=function(t,e,i){var n=this._writableState;w.isFunction(t)?(i=t,t=null,e=null):w.isFunction(e)&&(i=e,e=null),w.isNullOrUndefined(t)||this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||_(this,n,i)}}).call(this,t("_process"))},{"./_stream_duplex":32,_process:30,buffer:22,"core-util-is":37,inherits:27,stream:42}],37:[function(t,e,i){(function(t){function e(t){return Array.isArray(t)}function n(t){return"boolean"==typeof t}function s(t){return null===t}function r(t){return null==t}function o(t){return"number"==typeof t}function a(t){return"string"==typeof t}function l(t){return"symbol"==typeof t}function c(t){return void 0===t}function h(t){return u(t)&&"[object RegExp]"===v(t)}function u(t){return"object"==typeof t&&null!==t}function d(t){return u(t)&&"[object Date]"===v(t)}function p(t){return u(t)&&("[object Error]"===v(t)||t instanceof Error)}function f(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function m(e){return t.isBuffer(e)}function v(t){return Object.prototype.toString.call(t)}i.isArray=e,i.isBoolean=n,i.isNull=s,i.isNullOrUndefined=r,i.isNumber=o,i.isString=a,i.isSymbol=l,i.isUndefined=c,i.isRegExp=h,i.isObject=u,i.isDate=d,i.isError=p,i.isFunction=f,i.isPrimitive=g,i.isBuffer=m}).call(this,{isBuffer:t("/Users/igorkhomenko/workspace/quickblox-javascript-sdk/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")})},{"/Users/igorkhomenko/workspace/quickblox-javascript-sdk/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":28}],38:[function(t,e,i){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":33}],39:[function(t,e,i){i=e.exports=t("./lib/_stream_readable.js"),i.Stream=t("stream"),i.Readable=i,i.Writable=t("./lib/_stream_writable.js"),i.Duplex=t("./lib/_stream_duplex.js"),i.Transform=t("./lib/_stream_transform.js"),i.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":32,"./lib/_stream_passthrough.js":33,"./lib/_stream_readable.js":34,"./lib/_stream_transform.js":35,"./lib/_stream_writable.js":36,stream:42}],40:[function(t,e,i){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":35}],41:[function(t,e,i){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":36}],42:[function(t,e,i){function n(){s.call(this)}e.exports=n;var s=t("events").EventEmitter,r=t("inherits");r(n,s),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){function i(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function r(){h||(h=!0,t.end())}function o(){h||(h=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(l(),0===s.listenerCount(this,"error"))throw t}function l(){c.removeListener("data",i),t.removeListener("drain",n),c.removeListener("end",r),c.removeListener("close",o),c.removeListener("error",a),t.removeListener("error",a),c.removeListener("end",l),c.removeListener("close",l),t.removeListener("close",l)}var c=this;c.on("data",i),t.on("drain",n),t._isStdio||e&&e.end===!1||(c.on("end",r),c.on("close",o));var h=!1;return c.on("error",a),t.on("error",a),c.on("end",l),c.on("close",l),t.on("close",l),t.emit("pipe",c),t}},{events:26,inherits:27,"readable-stream/duplex.js":31,"readable-stream/passthrough.js":38,"readable-stream/readable.js":39,"readable-stream/transform.js":40,"readable-stream/writable.js":41}],43:[function(t,e,i){function n(t){if(t&&!l(t))throw new Error("Unknown encoding: "+t)}function s(t){return t.toString(this.encoding)}function r(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function o(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=t("buffer").Buffer,l=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=i.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=r;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=s)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var i=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,i),this.charReceived+=i,this.charReceived<this.charLength)return"";t=t.slice(i,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var s=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,s),s-=this.charReceived),e+=t.toString(this.encoding,0,s);var s=e.length-1,n=e.charCodeAt(s);if(n>=55296&&56319>=n){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),t.copy(this.charBuffer,0,0,r),e.substring(0,s)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var i=t[t.length-e];if(1==e&&i>>5==6){this.charLength=2;break}if(2>=e&&i>>4==14){this.charLength=3;break}if(3>=e&&i>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var i=this.charReceived,n=this.charBuffer,s=this.encoding;e+=n.slice(0,i).toString(s)}return e}},{buffer:22}],44:[function(t,e,i){function n(t,e){this._id=t,this._clearFn=e}var s=t("process/browser.js").nextTick,r=Function.prototype.apply,o=Array.prototype.slice,a={},l=0;i.setTimeout=function(){return new n(r.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new n(r.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(t){t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},i.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i.setImmediate="function"==typeof setImmediate?setImmediate:function(t){var e=l++,n=arguments.length<2?!1:o.call(arguments,1);return a[e]=!0,s(function(){a[e]&&(n?t.apply(null,n):t.call(null),i.clearImmediate(e))}),e},i.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(t){delete a[t]}},{"process/browser.js":30}],45:[function(t,e,i){(function(){"use strict";var e;e=t("../lib/xml2js"),i.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this)},{"../lib/xml2js":47}],46:[function(t,e,i){(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),i.normalize=function(t){return t.toLowerCase()},i.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},i.stripPrefix=function(e){return e.replace(t,"")},i.parseNumbers=function(t){return isNaN(t)||(t=t%1===0?parseInt(t,10):parseFloat(t)),t},i.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},{}],47:[function(t,e,i){(function(){"use strict";var e,n,s,r,o,a,l,c,h,u,d,p=function(t,e){function i(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},f={}.hasOwnProperty,g=function(t,e){return function(){return t.apply(e,arguments)}};h=t("sax"),r=t("events"),n=t("xmlbuilder"),e=t("./bom"),l=t("./processors"),u=t("timers").setImmediate,o=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},a=function(t,e){var i,n,s;for(i=0,n=t.length;n>i;i++)s=t[i],e=s(e);return e},c=function(t){return t.indexOf("&")>=0||t.indexOf(">")>=0||t.indexOf("<")>=0},d=function(t){return"<![CDATA["+s(t)+"]]>"},s=function(t){return t.replace("]]>","]]]]><![CDATA[>")},i.processors=l,i.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}},i.ValidationError=function(t){function e(t){this.message=t}return p(e,t),e}(Error),i.Builder=function(){function t(t){var e,n,s;this.options={},n=i.defaults[.2];for(e in n)f.call(n,e)&&(s=n[e],this.options[e]=s);for(e in t)f.call(t,e)&&(s=t[e],this.options[e]=s)}return t.prototype.buildObject=function(t){var e,s,r,o,a;return e=this.options.attrkey,s=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===i.defaults[.2].rootName?(a=Object.keys(t)[0],t=t[a]):a=this.options.rootName,r=function(t){return function(i,n){var o,a,l,h,u,p;if("object"!=typeof n)t.options.cdata&&c(n)?i.raw(d(n)):i.txt(n);else for(u in n)if(f.call(n,u))if(a=n[u],u===e){if("object"==typeof a)for(o in a)p=a[o],i=i.att(o,p)}else if(u===s)i=t.options.cdata&&c(a)?i.raw(d(a)):i.txt(a);else if(Array.isArray(a))for(h in a)f.call(a,h)&&(l=a[h],i="string"==typeof l?t.options.cdata&&c(l)?i.ele(u).raw(d(l)).up():i.ele(u,l).up():r(i.ele(u),l).up());else i="object"==typeof a?r(i.ele(u),a).up():"string"==typeof a&&t.options.cdata&&c(a)?i.ele(u).raw(d(a)).up():i.ele(u,a.toString()).up();return i}}(this),o=n.create(a,this.options.xmldec,this.options.doctype,{headless:this.options.headless}),r(o,t).end(this.options.renderOpts)},t}(),i.Parser=function(t){function n(t){this.parseString=g(this.parseString,this),this.reset=g(this.reset,this),this.assignOrPush=g(this.assignOrPush,this),this.processAsync=g(this.processAsync,this);var e,n,s;if(!(this instanceof i.Parser))return new i.Parser(t);this.options={},n=i.defaults[.2];for(e in n)f.call(n,e)&&(s=n[e],this.options[e]=s);for(e in t)f.call(t,e)&&(s=t[e],this.options[e]=s);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(l.normalize)),this.reset()}return p(n,t),n.prototype.processAsync=function(){var t;return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),u(this.processAsync))},n.prototype.assignOrPush=function(t,e,i){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(i)):this.options.explicitArray?t[e]=[i]:t[e]=i},n.prototype.reset=function(){var t,e,i,n;return this.removeAllListeners(),this.saxParser=h.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(t){return function(e){return t.saxParser.resume(),t.saxParser.errThrown?void 0:(t.saxParser.errThrown=!0,t.emit("error",e))}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,n=[],t=this.options.attrkey,e=this.options.charkey,this.saxParser.onopentag=function(i){return function(s){var r,o,l,c,h;if(l={},l[e]="",!i.options.ignoreAttrs){h=s.attributes;for(r in h)f.call(h,r)&&(t in l||i.options.mergeAttrs||(l[t]={}),o=s.attributes[r],c=i.options.attrNameProcessors?a(i.options.attrNameProcessors,r):r,i.options.mergeAttrs?i.assignOrPush(l,c,o):l[t][c]=o)}return l["#name"]=i.options.tagNameProcessors?a(i.options.tagNameProcessors,s.name):s.name,i.options.xmlns&&(l[i.options.xmlnskey]={uri:s.uri,local:s.local}),n.push(l)}}(this),this.saxParser.onclosetag=function(t){return function(){var i,s,r,l,c,h,u,d,p,g,m;if(u=n.pop(),h=u["#name"],
t.options.explicitChildren&&t.options.preserveChildrenOrder||delete u["#name"],u.cdata===!0&&(i=u.cdata,delete u.cdata),g=n[n.length-1],u[e].match(/^\s*$/)&&!i?(s=u[e],delete u[e]):(t.options.trim&&(u[e]=u[e].trim()),t.options.normalize&&(u[e]=u[e].replace(/\s{2,}/g," ").trim()),u[e]=t.options.valueProcessors?a(t.options.valueProcessors,u[e]):u[e],1===Object.keys(u).length&&e in u&&!t.EXPLICIT_CHARKEY&&(u=u[e])),o(u)&&(u=""!==t.options.emptyTag?t.options.emptyTag:s),null!=t.options.validator){m="/"+function(){var t,e,i;for(i=[],t=0,e=n.length;e>t;t++)c=n[t],i.push(c["#name"]);return i}().concat(h).join("/");try{u=t.options.validator(m,g&&g[h],u)}catch(v){r=v,t.emit("error",r)}}if(t.options.explicitChildren&&!t.options.mergeAttrs&&"object"==typeof u)if(t.options.preserveChildrenOrder){if(g){g[t.options.childkey]=g[t.options.childkey]||[],d={};for(l in u)f.call(u,l)&&(d[l]=u[l]);g[t.options.childkey].push(d),delete u["#name"],1===Object.keys(u).length&&e in u&&!t.EXPLICIT_CHARKEY&&(u=u[e])}}else c={},t.options.attrkey in u&&(c[t.options.attrkey]=u[t.options.attrkey],delete u[t.options.attrkey]),!t.options.charsAsChildren&&t.options.charkey in u&&(c[t.options.charkey]=u[t.options.charkey],delete u[t.options.charkey]),Object.getOwnPropertyNames(u).length>0&&(c[t.options.childkey]=u),u=c;return n.length>0?t.assignOrPush(g,h,u):(t.options.explicitRoot&&(p=u,u={},u[h]=p),t.resultObject=u,t.saxParser.ended=!0,t.emit("end",t.resultObject))}}(this),i=function(t){return function(i){var s,r;return r=n[n.length-1],r?(r[e]+=i,t.options.explicitChildren&&t.options.preserveChildrenOrder&&t.options.charsAsChildren&&""!==i.replace(/\\n/g,"").trim()&&(r[t.options.childkey]=r[t.options.childkey]||[],s={"#name":"__text__"},s[e]=i,r[t.options.childkey].push(s)),r):void 0}}(this),this.saxParser.ontext=i,this.saxParser.oncdata=function(t){return function(t){var e;return e=i(t),e?e.cdata=!0:void 0}}(this)},n.prototype.parseString=function(t,i){var n;if(null!=i&&"function"==typeof i&&(this.on("end",function(t){return this.reset(),i(null,t)}),this.on("error",function(t){return this.reset(),i(t)})),t=t.toString(),""===t.trim())return this.emit("end",null),!0;try{return t=e.stripBOM(t),this.options.async?(this.remaining=t,u(this.processAsync),this.saxParser):this.saxParser.write(t).close()}catch(s){if(n=s,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},n}(r.EventEmitter),i.parseString=function(t,e,n){var s,r,o;return null!=n?("function"==typeof n&&(s=n),"object"==typeof e&&(r=e)):("function"==typeof e&&(s=e),r={}),o=new i.Parser(r),o.parseString(t,s)}}).call(this)},{"./bom":45,"./processors":46,events:26,sax:48,timers:44,xmlbuilder:65}],48:[function(t,e,i){(function(e){!function(i){function n(t,e){if(!(this instanceof n))return new n(t,e);var s=this;r(s),s.q=s.c="",s.bufferCheckPosition=i.MAX_BUFFER_LENGTH,s.opt=e||{},s.opt.lowercase=s.opt.lowercase||s.opt.lowercasetags,s.looseCase=s.opt.lowercase?"toLowerCase":"toUpperCase",s.tags=[],s.closed=s.closedRoot=s.sawRoot=!1,s.tag=s.error=null,s.strict=!!t,s.noscript=!(!t&&!s.opt.noscript),s.state=U.BEGIN,s.strictEntities=s.opt.strictEntities,s.ENTITIES=s.strictEntities?Object.create(i.XML_ENTITIES):Object.create(i.ENTITIES),s.attribList=[],s.opt.xmlns&&(s.ns=Object.create(H)),s.trackPosition=s.opt.position!==!1,s.trackPosition&&(s.position=s.line=s.column=0),p(s,"onready")}function s(t){for(var e=Math.max(i.MAX_BUFFER_LENGTH,10),n=0,s=0,r=A.length;r>s;s++){var o=t[A[s]].length;if(o>e)switch(A[s]){case"textNode":g(t);break;case"cdata":f(t,"oncdata",t.cdata),t.cdata="";break;case"script":f(t,"onscript",t.script),t.script="";break;default:v(t,"Max buffer length exceeded: "+A[s])}n=Math.max(n,o)}t.bufferCheckPosition=i.MAX_BUFFER_LENGTH-n+t.position}function r(t){for(var e=0,i=A.length;i>e;e++)t[A[e]]=""}function o(t){g(t),""!==t.cdata&&(f(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(f(t,"onscript",t.script),t.script="")}function a(t,e){return new l(t,e)}function l(t,e){if(!(this instanceof l))return new l(t,e);E.apply(this),this._parser=new n(t,e),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(t){i.emit("error",t),i._parser.error=null},this._decoder=null,D.forEach(function(t){Object.defineProperty(i,"on"+t,{get:function(){return i._parser["on"+t]},set:function(e){return e?void i.on(t,e):(i.removeAllListeners(t),i._parser["on"+t]=e)},enumerable:!0,configurable:!1})})}function c(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function h(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function u(t,e){return h(t)?!!e.match(t):t[e]}function d(t,e){return!u(t,e)}function p(t,e,i){t[e]&&t[e](i)}function f(t,e,i){t.textNode&&g(t),p(t,e,i)}function g(t){t.textNode=m(t.opt,t.textNode),t.textNode&&p(t,"ontext",t.textNode),t.textNode=""}function m(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function v(t,e){return g(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,p(t,"onerror",e),t}function y(t){return t.sawRoot&&!t.closedRoot&&b(t,"Unclosed root tag"),t.state!==U.BEGIN&&t.state!==U.BEGIN_WHITESPACE&&t.state!==U.TEXT&&v(t,"Unexpected end"),g(t),t.c="",t.closed=!0,p(t,"onend"),n.call(t,t.strict,t.opt),t}function b(t,e){if("object"!=typeof t||!(t instanceof n))throw new Error("bad call to strictFail");t.strict&&v(t,e)}function _(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,i=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(i.ns=e.ns),t.attribList.length=0}function x(t,e){var i=t.indexOf(":"),n=0>i?["",t]:t.split(":"),s=n[0],r=n[1];return e&&"xmlns"===t&&(s="xmlns",r=""),{prefix:s,local:r}}function w(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))return t.attribName=t.attribValue="";if(t.opt.xmlns){var e=x(t.attribName,!0),i=e.prefix,n=e.local;if("xmlns"===i)if("xml"===n&&t.attribValue!==B)b(t,"xml: prefix must be bound to "+B+"\nActual: "+t.attribValue);else if("xmlns"===n&&t.attribValue!==F)b(t,"xmlns: prefix must be bound to "+F+"\nActual: "+t.attribValue);else{var s=t.tag,r=t.tags[t.tags.length-1]||t;s.ns===r.ns&&(s.ns=Object.create(r.ns)),s.ns[n]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,f(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}function k(t,e){if(t.opt.xmlns){var i=t.tag,n=x(t.tagName);i.prefix=n.prefix,i.local=n.local,i.uri=i.ns[n.prefix]||"",i.prefix&&!i.uri&&(b(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),i.uri=n.prefix);var s=t.tags[t.tags.length-1]||t;i.ns&&s.ns!==i.ns&&Object.keys(i.ns).forEach(function(e){f(t,"onopennamespace",{prefix:e,uri:i.ns[e]})});for(var r=0,o=t.attribList.length;o>r;r++){var a=t.attribList[r],l=a[0],c=a[1],h=x(l,!0),u=h.prefix,d=h.local,p=""==u?"":i.ns[u]||"",g={name:l,value:c,prefix:u,local:d,uri:p};u&&"xmlns"!=u&&!p&&(b(t,"Unbound namespace prefix: "+JSON.stringify(u)),g.uri=u),t.tag.attributes[l]=g,f(t,"onattribute",g)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),f(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=U.TEXT:t.state=U.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function T(t){if(!t.tagName)return b(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=U.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=U.SCRIPT);f(t,"onscript",t.script),t.script=""}var e=t.tags.length,i=t.tagName;t.strict||(i=i[t.looseCase]());for(var n=i;e--;){var s=t.tags[e];if(s.name===n)break;b(t,"Unexpected close tag")}if(0>e)return b(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=U.TEXT);t.tagName=i;for(var r=t.tags.length;r-->e;){var o=t.tag=t.tags.pop();t.tagName=t.tag.name,f(t,"onclosetag",t.tagName);var a={};for(var l in o.ns)a[l]=o.ns[l];var c=t.tags[t.tags.length-1]||t;t.opt.xmlns&&o.ns!==c.ns&&Object.keys(o.ns).forEach(function(e){var i=o.ns[e];f(t,"onclosenamespace",{prefix:e,uri:i})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=U.TEXT}function C(t){var e,i=t.entity,n=i.toLowerCase(),s="";return t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[n]?t.ENTITIES[n]:(i=n,"#"===i.charAt(0)&&("x"===i.charAt(1)?(i=i.slice(2),e=parseInt(i,16),s=e.toString(16)):(i=i.slice(1),e=parseInt(i,10),s=e.toString(10))),i=i.replace(/^0+/,""),s.toLowerCase()!==i?(b(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function S(t){var e=this;if(this.error)throw this.error;if(e.closed)return v(e,"Cannot write after close. Assign an onready handler.");if(null===t)return y(e);for(var i=0,n="";e.c=n=t.charAt(i++);)switch(e.trackPosition&&(e.position++,"\n"===n?(e.line++,e.column=0):e.column++),e.state){case U.BEGIN:if(e.state=U.BEGIN_WHITESPACE,"\ufeff"===n)continue;case U.BEGIN_WHITESPACE:"<"===n?(e.state=U.OPEN_WAKA,e.startTagPosition=e.position):d(I,n)&&(b(e,"Non-whitespace before first tag."),e.textNode=n,e.state=U.TEXT);continue;case U.TEXT:if(e.sawRoot&&!e.closedRoot){for(var r=i-1;n&&"<"!==n&&"&"!==n;)n=t.charAt(i++),n&&e.trackPosition&&(e.position++,"\n"===n?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(r,i-1)}"<"!==n||e.sawRoot&&e.closedRoot&&!e.strict?(!d(I,n)||e.sawRoot&&!e.closedRoot||b(e,"Text data outside of root node."),"&"===n?e.state=U.TEXT_ENTITY:e.textNode+=n):(e.state=U.OPEN_WAKA,e.startTagPosition=e.position);continue;case U.SCRIPT:"<"===n?e.state=U.SCRIPT_ENDING:e.script+=n;continue;case U.SCRIPT_ENDING:"/"===n?e.state=U.CLOSE_TAG:(e.script+="<"+n,e.state=U.SCRIPT);continue;case U.OPEN_WAKA:if("!"===n)e.state=U.SGML_DECL,e.sgmlDecl="";else if(u(I,n));else if(u(q,n))e.state=U.OPEN_TAG,e.tagName=n;else if("/"===n)e.state=U.CLOSE_TAG,e.tagName="";else if("?"===n)e.state=U.PROC_INST,e.procInstName=e.procInstBody="";else{if(b(e,"Unencoded <"),e.startTagPosition+1<e.position){var o=e.position-e.startTagPosition;n=new Array(o).join(" ")+n}e.textNode+="<"+n,e.state=U.TEXT}continue;case U.SGML_DECL:(e.sgmlDecl+n).toUpperCase()===$?(f(e,"onopencdata"),e.state=U.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+n==="--"?(e.state=U.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+n).toUpperCase()===j?(e.state=U.DOCTYPE,(e.doctype||e.sawRoot)&&b(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):">"===n?(f(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=U.TEXT):u(O,n)?(e.state=U.SGML_DECL_QUOTED,e.sgmlDecl+=n):e.sgmlDecl+=n;continue;case U.SGML_DECL_QUOTED:n===e.q&&(e.state=U.SGML_DECL,e.q=""),e.sgmlDecl+=n;continue;case U.DOCTYPE:">"===n?(e.state=U.TEXT,f(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=n,"["===n?e.state=U.DOCTYPE_DTD:u(O,n)&&(e.state=U.DOCTYPE_QUOTED,e.q=n));continue;case U.DOCTYPE_QUOTED:e.doctype+=n,n===e.q&&(e.q="",e.state=U.DOCTYPE);continue;case U.DOCTYPE_DTD:e.doctype+=n,"]"===n?e.state=U.DOCTYPE:u(O,n)&&(e.state=U.DOCTYPE_DTD_QUOTED,e.q=n);continue;case U.DOCTYPE_DTD_QUOTED:e.doctype+=n,n===e.q&&(e.state=U.DOCTYPE_DTD,e.q="");continue;case U.COMMENT:"-"===n?e.state=U.COMMENT_ENDING:e.comment+=n;continue;case U.COMMENT_ENDING:"-"===n?(e.state=U.COMMENT_ENDED,e.comment=m(e.opt,e.comment),e.comment&&f(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+n,e.state=U.COMMENT);continue;case U.COMMENT_ENDED:">"!==n?(b(e,"Malformed comment"),e.comment+="--"+n,e.state=U.COMMENT):e.state=U.TEXT;continue;case U.CDATA:"]"===n?e.state=U.CDATA_ENDING:e.cdata+=n;continue;case U.CDATA_ENDING:"]"===n?e.state=U.CDATA_ENDING_2:(e.cdata+="]"+n,e.state=U.CDATA);continue;case U.CDATA_ENDING_2:">"===n?(e.cdata&&f(e,"oncdata",e.cdata),f(e,"onclosecdata"),e.cdata="",e.state=U.TEXT):"]"===n?e.cdata+="]":(e.cdata+="]]"+n,e.state=U.CDATA);continue;case U.PROC_INST:"?"===n?e.state=U.PROC_INST_ENDING:u(I,n)?e.state=U.PROC_INST_BODY:e.procInstName+=n;continue;case U.PROC_INST_BODY:if(!e.procInstBody&&u(I,n))continue;"?"===n?e.state=U.PROC_INST_ENDING:e.procInstBody+=n;continue;case U.PROC_INST_ENDING:">"===n?(f(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",e.state=U.TEXT):(e.procInstBody+="?"+n,e.state=U.PROC_INST_BODY);continue;case U.OPEN_TAG:u(z,n)?e.tagName+=n:(_(e),">"===n?k(e):"/"===n?e.state=U.OPEN_TAG_SLASH:(d(I,n)&&b(e,"Invalid character in tag name"),e.state=U.ATTRIB));continue;case U.OPEN_TAG_SLASH:">"===n?(k(e,!0),T(e)):(b(e,"Forward-slash in opening tag not followed by >"),e.state=U.ATTRIB);continue;case U.ATTRIB:if(u(I,n))continue;">"===n?k(e):"/"===n?e.state=U.OPEN_TAG_SLASH:u(q,n)?(e.attribName=n,e.attribValue="",e.state=U.ATTRIB_NAME):b(e,"Invalid attribute name");continue;case U.ATTRIB_NAME:"="===n?e.state=U.ATTRIB_VALUE:">"===n?(b(e,"Attribute without value"),e.attribValue=e.attribName,w(e),k(e)):u(I,n)?e.state=U.ATTRIB_NAME_SAW_WHITE:u(z,n)?e.attribName+=n:b(e,"Invalid attribute name");continue;case U.ATTRIB_NAME_SAW_WHITE:if("="===n)e.state=U.ATTRIB_VALUE;else{if(u(I,n))continue;b(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",f(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",">"===n?k(e):u(q,n)?(e.attribName=n,e.state=U.ATTRIB_NAME):(b(e,"Invalid attribute name"),e.state=U.ATTRIB)}continue;case U.ATTRIB_VALUE:if(u(I,n))continue;u(O,n)?(e.q=n,e.state=U.ATTRIB_VALUE_QUOTED):(b(e,"Unquoted attribute value"),e.state=U.ATTRIB_VALUE_UNQUOTED,e.attribValue=n);continue;case U.ATTRIB_VALUE_QUOTED:if(n!==e.q){"&"===n?e.state=U.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=n;continue}w(e),e.q="",e.state=U.ATTRIB_VALUE_CLOSED;continue;case U.ATTRIB_VALUE_CLOSED:u(I,n)?e.state=U.ATTRIB:">"===n?k(e):"/"===n?e.state=U.OPEN_TAG_SLASH:u(q,n)?(b(e,"No whitespace between attributes"),e.attribName=n,e.attribValue="",e.state=U.ATTRIB_NAME):b(e,"Invalid attribute name");continue;case U.ATTRIB_VALUE_UNQUOTED:if(d(R,n)){"&"===n?e.state=U.ATTRIB_VALUE_ENTITY_U:e.attribValue+=n;continue}w(e),">"===n?k(e):e.state=U.ATTRIB;continue;case U.CLOSE_TAG:if(e.tagName)">"===n?T(e):u(z,n)?e.tagName+=n:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=U.SCRIPT):(d(I,n)&&b(e,"Invalid tagname in closing tag"),e.state=U.CLOSE_TAG_SAW_WHITE);else{if(u(I,n))continue;d(q,n)?e.script?(e.script+="</"+n,e.state=U.SCRIPT):b(e,"Invalid tagname in closing tag."):e.tagName=n}continue;case U.CLOSE_TAG_SAW_WHITE:if(u(I,n))continue;">"===n?T(e):b(e,"Invalid characters in closing tag");continue;case U.TEXT_ENTITY:case U.ATTRIB_VALUE_ENTITY_Q:case U.ATTRIB_VALUE_ENTITY_U:switch(e.state){case U.TEXT_ENTITY:var a=U.TEXT,l="textNode";break;case U.ATTRIB_VALUE_ENTITY_Q:var a=U.ATTRIB_VALUE_QUOTED,l="attribValue";break;case U.ATTRIB_VALUE_ENTITY_U:var a=U.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===n?(e[l]+=C(e),e.entity="",e.state=a):u(M,n)?e.entity+=n:(b(e,"Invalid character entity"),e[l]+="&"+e.entity+n,e.entity="",e.state=a);continue;default:throw new Error(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&s(e),e}i.parser=function(t,e){return new n(t,e)},i.SAXParser=n,i.SAXStream=l,i.createStream=a,i.MAX_BUFFER_LENGTH=65536;var A=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){this.__proto__=t}return e.prototype=t,new e}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),n.prototype={end:function(){y(this)},write:S,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};try{var E=t("stream").Stream}catch(L){var E=function(){}}var D=i.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});l.prototype=Object.create(E.prototype,{constructor:{value:l}}),l.prototype.write=function(i){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(i)){if(!this._decoder){var n=t("string_decoder").StringDecoder;this._decoder=new n("utf8")}i=this._decoder.write(i)}return this._parser.write(i.toString()),this.emit("data",i),!0},l.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},l.prototype.on=function(t,e){var i=this;return i._parser["on"+t]||-1===D.indexOf(t)||(i._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),i.emit.apply(i,e)}),E.prototype.on.call(i,t,e)};var I="\r\n	 ",P="0124356789",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",O="'\"",M=P+N+"#",R=I+">",$="[CDATA[",j="DOCTYPE",B="http://www.w3.org/XML/1998/namespace",F="http://www.w3.org/2000/xmlns/",H={xml:B,xmlns:F};I=c(I),P=c(P),N=c(N);var q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;O=c(O),M=c(M),R=c(R);var U=0;i.STATE={BEGIN:U++,BEGIN_WHITESPACE:U++,TEXT:U++,TEXT_ENTITY:U++,OPEN_WAKA:U++,SGML_DECL:U++,SGML_DECL_QUOTED:U++,DOCTYPE:U++,DOCTYPE_QUOTED:U++,DOCTYPE_DTD:U++,DOCTYPE_DTD_QUOTED:U++,COMMENT_STARTING:U++,COMMENT:U++,COMMENT_ENDING:U++,COMMENT_ENDED:U++,CDATA:U++,CDATA_ENDING:U++,CDATA_ENDING_2:U++,PROC_INST:U++,PROC_INST_BODY:U++,PROC_INST_ENDING:U++,OPEN_TAG:U++,OPEN_TAG_SLASH:U++,ATTRIB:U++,ATTRIB_NAME:U++,ATTRIB_NAME_SAW_WHITE:U++,ATTRIB_VALUE:U++,ATTRIB_VALUE_QUOTED:U++,ATTRIB_VALUE_CLOSED:U++,ATTRIB_VALUE_UNQUOTED:U++,ATTRIB_VALUE_ENTITY_Q:U++,ATTRIB_VALUE_ENTITY_U:U++,CLOSE_TAG:U++,CLOSE_TAG_SAW_WHITE:U++,SCRIPT:U++,SCRIPT_ENDING:U++},i.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},i.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(i.ENTITIES).forEach(function(t){var e=i.ENTITIES[t],n="number"==typeof e?String.fromCharCode(e):e;i.ENTITIES[t]=n});for(var U in i.STATE)i.STATE[i.STATE[U]]=U;U=i.STATE,String.fromCodePoint||!function(){var t=String.fromCharCode,e=Math.floor,i=function(){var i,n,s=16384,r=[],o=-1,a=arguments.length;if(!a)return"";for(var l="";++o<a;){var c=Number(arguments[o]);if(!isFinite(c)||0>c||c>1114111||e(c)!=c)throw RangeError("Invalid code point: "+c);65535>=c?r.push(c):(c-=65536,i=(c>>10)+55296,n=c%1024+56320,r.push(i,n)),(o+1==a||r.length>s)&&(l+=t.apply(null,r),r.length=0)}return l};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:i,configurable:!0,writable:!0}):String.fromCodePoint=i}()}("undefined"==typeof i?sax={}:i)}).call(this,t("buffer").Buffer)},{buffer:22,stream:42,string_decoder:43}],49:[function(t,e,i){(function(){var i,n;n=t("lodash/object/create"),e.exports=i=function(){function t(t,e,i){if(this.stringify=t.stringify,null==e)throw new Error("Missing attribute name of element "+t.name);if(null==i)throw new Error("Missing attribute value for attribute "+e+" of element "+t.name);this.name=this.stringify.attName(e),this.value=this.stringify.attValue(i)}return t.prototype.clone=function(){return n(t.prototype,this)},t.prototype.toString=function(t,e){return" "+this.name+'="'+this.value+'"'},t}()}).call(this)},{"lodash/object/create":119}],50:[function(t,e,i){(function(){var i,n,s,r,o;o=t("./XMLStringifier"),n=t("./XMLDeclaration"),s=t("./XMLDocType"),r=t("./XMLElement"),e.exports=i=function(){function t(t,e){var i,n;if(null==t)throw new Error("Root element needs a name");null==e&&(e={}),this.options=e,this.stringify=new o(e),n=new r(this,"doc"),i=n.element(t),i.isRoot=!0,i.documentObject=this,this.rootObject=i,e.headless||(i.declaration(e),(null!=e.pubID||null!=e.sysID)&&i.doctype(e))}return t.prototype.root=function(){return this.rootObject},t.prototype.end=function(t){return this.toString(t)},t.prototype.toString=function(t){var e,i,n,s,r,o,a,l;return s=(null!=t?t.pretty:void 0)||!1,e=null!=(o=null!=t?t.indent:void 0)?o:"  ",n=null!=(a=null!=t?t.offset:void 0)?a:0,i=null!=(l=null!=t?t.newline:void 0)?l:"\n",r="",null!=this.xmldec&&(r+=this.xmldec.toString(t)),null!=this.doctype&&(r+=this.doctype.toString(t)),r+=this.rootObject.toString(t),s&&r.slice(-i.length)===i&&(r=r.slice(0,-i.length)),r},t}()}).call(this)},{"./XMLDeclaration":57,"./XMLDocType":58,"./XMLElement":59,"./XMLStringifier":63}],51:[function(t,e,i){(function(){var i,n,s,r=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;s=t("lodash/object/create"),n=t("./XMLNode"),e.exports=i=function(t){function e(t,i){if(e.__super__.constructor.call(this,t),null==i)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(i)}return r(e,t),e.prototype.clone=function(){return s(e.prototype,this)},e.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+="<![CDATA["+this.text+"]]>",r&&(o+=n),o},e}(n)}).call(this)},{"./XMLNode":60,"lodash/object/create":119}],52:[function(t,e,i){(function(){var i,n,s,r=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;s=t("lodash/object/create"),n=t("./XMLNode"),e.exports=i=function(t){function e(t,i){if(e.__super__.constructor.call(this,t),null==i)throw new Error("Missing comment text");this.text=this.stringify.comment(i)}return r(e,t),e.prototype.clone=function(){return s(e.prototype,this)},e.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+="<!-- "+this.text+" -->",r&&(o+=n),o},e}(n)}).call(this)},{"./XMLNode":60,"lodash/object/create":119}],53:[function(t,e,i){(function(){var i,n;n=t("lodash/object/create"),e.exports=i=function(){function t(t,e,i,n,s,r){if(this.stringify=t.stringify,null==e)throw new Error("Missing DTD element name");if(null==i)throw new Error("Missing DTD attribute name");if(!n)throw new Error("Missing DTD attribute type");if(!s)throw new Error("Missing DTD attribute default");if(0!==s.indexOf("#")&&(s="#"+s),!s.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(r&&!s.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(e),this.attributeName=this.stringify.attName(i),this.attributeType=this.stringify.dtdAttType(n),this.defaultValue=this.stringify.dtdAttDefault(r),this.defaultValueType=s}return t.prototype.clone=function(){return n(t.prototype,this)},t.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+="<!ATTLIST "+this.elementName+" "+this.attributeName+" "+this.attributeType,"#DEFAULT"!==this.defaultValueType&&(o+=" "+this.defaultValueType),this.defaultValue&&(o+=' "'+this.defaultValue+'"'),o+=">",r&&(o+=n),o},t}()}).call(this)},{"lodash/object/create":119}],54:[function(t,e,i){(function(){var i,n;n=t("lodash/object/create"),e.exports=i=function(){function t(t,e,i){if(this.stringify=t.stringify,null==e)throw new Error("Missing DTD element name");i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.eleName(e),this.value=this.stringify.dtdElementValue(i)}return t.prototype.clone=function(){return n(t.prototype,this)},t.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+="<!ELEMENT "+this.name+" "+this.value+">",r&&(o+=n),o},t}()}).call(this)},{"lodash/object/create":119}],55:[function(t,e,i){(function(){var i,n,s;n=t("lodash/object/create"),s=t("lodash/lang/isObject"),e.exports=i=function(){function t(t,e,i,n){if(this.stringify=t.stringify,null==i)throw new Error("Missing entity name");if(null==n)throw new Error("Missing entity value");if(this.pe=!!e,this.name=this.stringify.eleName(i),s(n)){if(!n.pubID&&!n.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(n.pubID&&!n.sysID)throw new Error("System identifier is required for a public external entity");if(null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID)),null!=n.nData&&(this.nData=this.stringify.dtdNData(n.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(n)}return t.prototype.clone=function(){return n(t.prototype,this)},t.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+="<!ENTITY",this.pe&&(o+=" %"),o+=" "+this.name,this.value?o+=' "'+this.value+'"':(this.pubID&&this.sysID?o+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(o+=' SYSTEM "'+this.sysID+'"'),this.nData&&(o+=" NDATA "+this.nData)),o+=">",r&&(o+=n),o},t}()}).call(this)},{"lodash/lang/isObject":115,"lodash/object/create":119}],56:[function(t,e,i){(function(){var i,n;n=t("lodash/object/create"),e.exports=i=function(){function t(t,e,i){if(this.stringify=t.stringify,null==e)throw new Error("Missing notation name");if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(e),null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return t.prototype.clone=function(){return n(t.prototype,this)},t.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+="<!NOTATION "+this.name,this.pubID&&this.sysID?o+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.pubID?o+=' PUBLIC "'+this.pubID+'"':this.sysID&&(o+=' SYSTEM "'+this.sysID+'"'),o+=">",r&&(o+=n),o},t}()}).call(this)},{"lodash/object/create":119}],57:[function(t,e,i){(function(){var i,n,s,r,o=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;s=t("lodash/object/create"),r=t("lodash/lang/isObject"),n=t("./XMLNode"),e.exports=i=function(t){function e(t,i,n,s){var o;e.__super__.constructor.call(this,t),r(i)&&(o=i,i=o.version,n=o.encoding,s=o.standalone),i||(i="1.0"),null!=i&&(this.version=this.stringify.xmlVersion(i)),null!=n&&(this.encoding=this.stringify.xmlEncoding(n)),null!=s&&(this.standalone=this.stringify.xmlStandalone(s))}return o(e,t),e.prototype.clone=function(){return s(e.prototype,this)},e.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+="<?xml",null!=this.version&&(o+=' version="'+this.version+'"'),null!=this.encoding&&(o+=' encoding="'+this.encoding+'"'),null!=this.standalone&&(o+=' standalone="'+this.standalone+'"'),o+="?>",r&&(o+=n),o},e}(n)}).call(this)},{"./XMLNode":60,"lodash/lang/isObject":115,"lodash/object/create":119}],58:[function(t,e,i){(function(){var i,n,s,r,o,a,l,c,h,u;h=t("lodash/object/create"),u=t("lodash/lang/isObject"),i=t("./XMLCData"),n=t("./XMLComment"),s=t("./XMLDTDAttList"),o=t("./XMLDTDEntity"),r=t("./XMLDTDElement"),a=t("./XMLDTDNotation"),c=t("./XMLProcessingInstruction"),e.exports=l=function(){function t(t,e,i){var n,s;this.documentObject=t,this.stringify=this.documentObject.stringify,this.children=[],u(e)&&(n=e,e=n.pubID,i=n.sysID),null==i&&(s=[e,i],i=s[0],e=s[1]),null!=e&&(this.pubID=this.stringify.dtdPubID(e)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}return t.prototype.clone=function(){return h(t.prototype,this)},t.prototype.element=function(t,e){var i;return i=new r(this,t,e),this.children.push(i),this},t.prototype.attList=function(t,e,i,n,r){var o;return o=new s(this,t,e,i,n,r),this.children.push(o),this},t.prototype.entity=function(t,e){var i;return i=new o(this,!1,t,e),this.children.push(i),this},t.prototype.pEntity=function(t,e){var i;return i=new o(this,!0,t,e),this.children.push(i),this},t.prototype.notation=function(t,e){var i;return i=new a(this,t,e),this.children.push(i),this},t.prototype.cdata=function(t){var e;return e=new i(this,t),this.children.push(e),this},t.prototype.comment=function(t){var e;return e=new n(this,t),this.children.push(e),this},t.prototype.instruction=function(t,e){var i;return i=new c(this,t,e),this.children.push(i),this},t.prototype.root=function(){return this.documentObject.root()},t.prototype.document=function(){return this.documentObject},t.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h,u,d,p,f;if(l=(null!=t?t.pretty:void 0)||!1,
s=null!=(h=null!=t?t.indent:void 0)?h:"  ",a=null!=(u=null!=t?t.offset:void 0)?u:0,o=null!=(d=null!=t?t.newline:void 0)?d:"\n",e||(e=0),f=new Array(e+a+1).join(s),c="",l&&(c+=f),c+="<!DOCTYPE "+this.root().name,this.pubID&&this.sysID?c+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(c+=' SYSTEM "'+this.sysID+'"'),this.children.length>0){for(c+=" [",l&&(c+=o),p=this.children,n=0,r=p.length;r>n;n++)i=p[n],c+=i.toString(t,e+1);c+="]"}return c+=">",l&&(c+=o),c},t.prototype.ele=function(t,e){return this.element(t,e)},t.prototype.att=function(t,e,i,n,s){return this.attList(t,e,i,n,s)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.up=function(){return this.root()},t.prototype.doc=function(){return this.document()},t}()}).call(this)},{"./XMLCData":51,"./XMLComment":52,"./XMLDTDAttList":53,"./XMLDTDElement":54,"./XMLDTDEntity":55,"./XMLDTDNotation":56,"./XMLProcessingInstruction":61,"lodash/lang/isObject":115,"lodash/object/create":119}],59:[function(t,e,i){(function(){var i,n,s,r,o,a,l,c,h=function(t,e){function i(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t("lodash/object/create"),c=t("lodash/lang/isObject"),l=t("lodash/lang/isFunction"),a=t("lodash/collection/every"),s=t("./XMLNode"),i=t("./XMLAttribute"),r=t("./XMLProcessingInstruction"),e.exports=n=function(t){function e(t,i,n){if(e.__super__.constructor.call(this,t),null==i)throw new Error("Missing element name");this.name=this.stringify.eleName(i),this.children=[],this.instructions=[],this.attributes={},null!=n&&this.attribute(n)}return h(e,t),e.prototype.clone=function(){var t,i,n,s,r,a,l,c;n=o(e.prototype,this),n.isRoot&&(n.documentObject=null),n.attributes={},l=this.attributes;for(i in l)u.call(l,i)&&(t=l[i],n.attributes[i]=t.clone());for(n.instructions=[],c=this.instructions,s=0,r=c.length;r>s;s++)a=c[s],n.instructions.push(a.clone());return n.children=[],this.children.forEach(function(t){var e;return e=t.clone(),e.parent=n,n.children.push(e)}),n},e.prototype.attribute=function(t,e){var n,s;if(null!=t&&(t=t.valueOf()),c(t))for(n in t)u.call(t,n)&&(s=t[n],this.attribute(n,s));else l(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.attributes[t]=new i(this,t,e));return this},e.prototype.removeAttribute=function(t){var e,i,n;if(null==t)throw new Error("Missing attribute name");if(t=t.valueOf(),Array.isArray(t))for(i=0,n=t.length;n>i;i++)e=t[i],delete this.attributes[e];else delete this.attributes[t];return this},e.prototype.instruction=function(t,e){var i,n,s,o,a;if(null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(i=0,a=t.length;a>i;i++)n=t[i],this.instruction(n);else if(c(t))for(n in t)u.call(t,n)&&(s=t[n],this.instruction(n,s));else l(e)&&(e=e.apply()),o=new r(this,t,e),this.instructions.push(o);return this},e.prototype.toString=function(t,e){var i,n,s,r,o,l,c,h,d,p,f,g,m,v,y,b,_,x,w,k;for(g=(null!=t?t.pretty:void 0)||!1,r=null!=(v=null!=t?t.indent:void 0)?v:"  ",f=null!=(y=null!=t?t.offset:void 0)?y:0,p=null!=(b=null!=t?t.newline:void 0)?b:"\n",e||(e=0),k=new Array(e+f+1).join(r),m="",_=this.instructions,s=0,c=_.length;c>s;s++)o=_[s],m+=o.toString(t,e);g&&(m+=k),m+="<"+this.name,x=this.attributes;for(d in x)u.call(x,d)&&(i=x[d],m+=i.toString(t));if(0===this.children.length||a(this.children,function(t){return""===t.value}))m+="/>",g&&(m+=p);else if(g&&1===this.children.length&&null!=this.children[0].value)m+=">",m+=this.children[0].value,m+="</"+this.name+">",m+=p;else{for(m+=">",g&&(m+=p),w=this.children,l=0,h=w.length;h>l;l++)n=w[l],m+=n.toString(t,e+1);g&&(m+=k),m+="</"+this.name+">",g&&(m+=p)}return m},e.prototype.att=function(t,e){return this.attribute(t,e)},e.prototype.ins=function(t,e){return this.instruction(t,e)},e.prototype.a=function(t,e){return this.attribute(t,e)},e.prototype.i=function(t,e){return this.instruction(t,e)},e}(s)}).call(this)},{"./XMLAttribute":49,"./XMLNode":60,"./XMLProcessingInstruction":61,"lodash/collection/every":67,"lodash/lang/isFunction":113,"lodash/lang/isObject":115,"lodash/object/create":119}],60:[function(t,e,i){(function(){var i,n,s,r,o,a,l,c,h,u,d,p={}.hasOwnProperty;d=t("lodash/lang/isObject"),u=t("lodash/lang/isFunction"),h=t("lodash/lang/isEmpty"),o=null,i=null,n=null,s=null,r=null,l=null,c=null,e.exports=a=function(){function e(e){this.parent=e,this.options=this.parent.options,this.stringify=this.parent.stringify,null===o&&(o=t("./XMLElement"),i=t("./XMLCData"),n=t("./XMLComment"),s=t("./XMLDeclaration"),r=t("./XMLDocType"),l=t("./XMLRaw"),c=t("./XMLText"))}return e.prototype.clone=function(){throw new Error("Cannot clone generic XMLNode")},e.prototype.element=function(t,e,i){var n,s,r,o,a,l,c;if(o=null,null==e&&(e={}),e=e.valueOf(),d(e)||(l=[e,i],i=l[0],e=l[1]),null!=t&&(t=t.valueOf()),Array.isArray(t))for(s=0,a=t.length;a>s;s++)n=t[s],o=this.element(n);else if(u(t))o=this.element(t.apply());else if(d(t))for(r in t)p.call(t,r)&&(c=t[r],u(c)&&(c=c.apply()),d(c)&&h(c)&&(c=null),c||this.options.ignoreDecorators||!this.stringify.convertListKey||0!==r.indexOf(this.stringify.convertListKey)?!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===r.indexOf(this.stringify.convertAttKey)?o=this.attribute(r.substr(this.stringify.convertAttKey.length),c):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===r.indexOf(this.stringify.convertPIKey)?o=this.instruction(r.substr(this.stringify.convertPIKey.length),c):d(c)?!this.options.ignoreDecorators&&this.stringify.convertListKey&&0===r.indexOf(this.stringify.convertListKey)&&Array.isArray(c)?o=this.element(c):(o=this.element(r),o.element(c)):o=this.element(r,c):o=this);else o=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(i):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(i):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(i):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(i):this.node(t,e,i);if(null==o)throw new Error("Could not create any elements with: "+t);return o},e.prototype.insertBefore=function(t,e,i){var n,s,r;if(this.isRoot)throw new Error("Cannot insert elements at root level");return s=this.parent.children.indexOf(this),r=this.parent.children.splice(s),n=this.parent.element(t,e,i),Array.prototype.push.apply(this.parent.children,r),n},e.prototype.insertAfter=function(t,e,i){var n,s,r;if(this.isRoot)throw new Error("Cannot insert elements at root level");return s=this.parent.children.indexOf(this),r=this.parent.children.splice(s+1),n=this.parent.element(t,e,i),Array.prototype.push.apply(this.parent.children,r),n},e.prototype.remove=function(){var t,e;if(this.isRoot)throw new Error("Cannot remove the root element");return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat(e=[])),this.parent},e.prototype.node=function(t,e,i){var n,s;return null!=t&&(t=t.valueOf()),null==e&&(e={}),e=e.valueOf(),d(e)||(s=[e,i],i=s[0],e=s[1]),n=new o(this,t,e),null!=i&&n.text(i),this.children.push(n),n},e.prototype.text=function(t){var e;return e=new c(this,t),this.children.push(e),this},e.prototype.cdata=function(t){var e;return e=new i(this,t),this.children.push(e),this},e.prototype.comment=function(t){var e;return e=new n(this,t),this.children.push(e),this},e.prototype.raw=function(t){var e;return e=new l(this,t),this.children.push(e),this},e.prototype.declaration=function(t,e,i){var n,r;return n=this.document(),r=new s(n,t,e,i),n.xmldec=r,n.root()},e.prototype.doctype=function(t,e){var i,n;return i=this.document(),n=new r(i,t,e),i.doctype=n,n},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var t;if(this.isRoot)return this;for(t=this.parent;!t.isRoot;)t=t.parent;return t},e.prototype.document=function(){return this.root().documentObject},e.prototype.end=function(t){return this.document().toString(t)},e.prototype.prev=function(){var t;if(this.isRoot)throw new Error("Root node has no siblings");if(t=this.parent.children.indexOf(this),1>t)throw new Error("Already at the first node");return this.parent.children[t-1]},e.prototype.next=function(){var t;if(this.isRoot)throw new Error("Root node has no siblings");if(t=this.parent.children.indexOf(this),-1===t||t===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[t+1]},e.prototype.importXMLBuilder=function(t){var e;return e=t.root().clone(),e.parent=this,e.isRoot=!1,this.children.push(e),this},e.prototype.ele=function(t,e,i){return this.element(t,e,i)},e.prototype.nod=function(t,e,i){return this.node(t,e,i)},e.prototype.txt=function(t){return this.text(t)},e.prototype.dat=function(t){return this.cdata(t)},e.prototype.com=function(t){return this.comment(t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(t,e,i){return this.declaration(t,e,i)},e.prototype.dtd=function(t,e){return this.doctype(t,e)},e.prototype.e=function(t,e,i){return this.element(t,e,i)},e.prototype.n=function(t,e,i){return this.node(t,e,i)},e.prototype.t=function(t){return this.text(t)},e.prototype.d=function(t){return this.cdata(t)},e.prototype.c=function(t){return this.comment(t)},e.prototype.r=function(t){return this.raw(t)},e.prototype.u=function(){return this.up()},e}()}).call(this)},{"./XMLCData":51,"./XMLComment":52,"./XMLDeclaration":57,"./XMLDocType":58,"./XMLElement":59,"./XMLRaw":62,"./XMLText":64,"lodash/lang/isEmpty":112,"lodash/lang/isFunction":113,"lodash/lang/isObject":115}],61:[function(t,e,i){(function(){var i,n;n=t("lodash/object/create"),e.exports=i=function(){function t(t,e,i){if(this.stringify=t.stringify,null==e)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(e),i&&(this.value=this.stringify.insValue(i))}return t.prototype.clone=function(){return n(t.prototype,this)},t.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+="<?",o+=this.target,this.value&&(o+=" "+this.value),o+="?>",r&&(o+=n),o},t}()}).call(this)},{"lodash/object/create":119}],62:[function(t,e,i){(function(){var i,n,s,r=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;s=t("lodash/object/create"),i=t("./XMLNode"),e.exports=n=function(t){function e(t,i){if(e.__super__.constructor.call(this,t),null==i)throw new Error("Missing raw text");this.value=this.stringify.raw(i)}return r(e,t),e.prototype.clone=function(){return s(e.prototype,this)},e.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+=this.value,r&&(o+=n),o},e}(i)}).call(this)},{"./XMLNode":60,"lodash/object/create":119}],63:[function(t,e,i){(function(){var t,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.exports=t=function(){function t(t){this.assertLegalChar=i(this.assertLegalChar,this);var e,s,r;this.allowSurrogateChars=null!=t?t.allowSurrogateChars:void 0,s=(null!=t?t.stringify:void 0)||{};for(e in s)n.call(s,e)&&(r=s[e],this[e]=r)}return t.prototype.eleName=function(t){return t=""+t||"",this.assertLegalChar(t)},t.prototype.eleText=function(t){return t=""+t||"",this.assertLegalChar(this.elEscape(t))},t.prototype.cdata=function(t){if(t=""+t||"",t.match(/]]>/))throw new Error("Invalid CDATA text: "+t);return this.assertLegalChar(t)},t.prototype.comment=function(t){if(t=""+t||"",t.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return""+t||""},t.prototype.attName=function(t){return""+t||""},t.prototype.attValue=function(t){return t=""+t||"",this.attEscape(t)},t.prototype.insTarget=function(t){return""+t||""},t.prototype.insValue=function(t){if(t=""+t||"",t.match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return t},t.prototype.xmlVersion=function(t){if(t=""+t||"",!t.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(t=""+t||"",!t.match(/[A-Za-z](?:[A-Za-z0-9._-]|-)*/))throw new Error("Invalid encoding: "+t);return t},t.prototype.xmlStandalone=function(t){return t?"yes":"no"},t.prototype.dtdPubID=function(t){return""+t||""},t.prototype.dtdSysID=function(t){return""+t||""},t.prototype.dtdElementValue=function(t){return""+t||""},t.prototype.dtdAttType=function(t){return""+t||""},t.prototype.dtdAttDefault=function(t){return null!=t?""+t||"":t},t.prototype.dtdEntityValue=function(t){return""+t||""},t.prototype.dtdNData=function(t){return""+t||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.convertListKey="#list",t.prototype.assertLegalChar=function(t){var e,i;if(e=this.allowSurrogateChars?/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uFFFE-\uFFFF]/:/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE-\uFFFF]/,i=t.match(e))throw new Error("Invalid character ("+i+") in string: "+t+" at index "+i.index);return t},t.prototype.elEscape=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},t}()}).call(this)},{}],64:[function(t,e,i){(function(){var i,n,s,r=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;s=t("lodash/object/create"),i=t("./XMLNode"),e.exports=n=function(t){function e(t,i){if(e.__super__.constructor.call(this,t),null==i)throw new Error("Missing element text");this.value=this.stringify.eleText(i)}return r(e,t),e.prototype.clone=function(){return s(e.prototype,this)},e.prototype.toString=function(t,e){var i,n,s,r,o,a,l,c,h;return r=(null!=t?t.pretty:void 0)||!1,i=null!=(a=null!=t?t.indent:void 0)?a:"  ",s=null!=(l=null!=t?t.offset:void 0)?l:0,n=null!=(c=null!=t?t.newline:void 0)?c:"\n",e||(e=0),h=new Array(e+s+1).join(i),o="",r&&(o+=h),o+=this.value,r&&(o+=n),o},e}(i)}).call(this)},{"./XMLNode":60,"lodash/object/create":119}],65:[function(t,e,i){(function(){var i,n;n=t("lodash/object/assign"),i=t("./XMLBuilder"),e.exports.create=function(t,e,s,r){return r=n({},e,s,r),new i(t,r).root()}}).call(this)},{"./XMLBuilder":50,"lodash/object/assign":118}],66:[function(t,e,i){function n(t){var e=t?t.length:0;return e?t[e-1]:void 0}e.exports=n},{}],67:[function(t,e,i){function n(t,e,i){var n=a(t)?s:o;return i&&l(t,e,i)&&(e=void 0),("function"!=typeof e||void 0!==i)&&(e=r(e,i,3)),n(t,e)}var s=t("../internal/arrayEvery"),r=t("../internal/baseCallback"),o=t("../internal/baseEvery"),a=t("../lang/isArray"),l=t("../internal/isIterateeCall");e.exports=n},{"../internal/arrayEvery":69,"../internal/baseCallback":73,"../internal/baseEvery":77,"../internal/isIterateeCall":102,"../lang/isArray":111}],68:[function(t,e,i){function n(t,e){if("function"!=typeof t)throw new TypeError(s);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var i=arguments,n=-1,s=r(i.length-e,0),o=Array(s);++n<s;)o[n]=i[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,i[0],o);case 2:return t.call(this,i[0],i[1],o)}var a=Array(e+1);for(n=-1;++n<e;)a[n]=i[n];return a[e]=o,t.apply(this,a)}}var s="Expected a function",r=Math.max;e.exports=n},{}],69:[function(t,e,i){function n(t,e){for(var i=-1,n=t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}e.exports=n},{}],70:[function(t,e,i){function n(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}e.exports=n},{}],71:[function(t,e,i){function n(t,e,i){for(var n=-1,r=s(e),o=r.length;++n<o;){var a=r[n],l=t[a],c=i(l,e[a],a,t,e);(c===c?c===l:l!==l)&&(void 0!==l||a in t)||(t[a]=c)}return t}var s=t("../object/keys");e.exports=n},{"../object/keys":120}],72:[function(t,e,i){function n(t,e){return null==e?t:s(e,r(e),t)}var s=t("./baseCopy"),r=t("../object/keys");e.exports=n},{"../object/keys":120,"./baseCopy":74}],73:[function(t,e,i){function n(t,e,i){var n=typeof t;return"function"==n?void 0===e?t:o(t,e,i):null==t?a:"object"==n?s(t):void 0===e?l(t):r(t,e)}var s=t("./baseMatches"),r=t("./baseMatchesProperty"),o=t("./bindCallback"),a=t("../utility/identity"),l=t("../utility/property");e.exports=n},{"../utility/identity":123,"../utility/property":124,"./baseMatches":84,"./baseMatchesProperty":85,"./bindCallback":90}],74:[function(t,e,i){function n(t,e,i){i||(i={});for(var n=-1,s=e.length;++n<s;){var r=e[n];i[r]=t[r]}return i}e.exports=n},{}],75:[function(t,e,i){var n=t("../lang/isObject"),s=function(){function t(){}return function(e){if(n(e)){t.prototype=e;var i=new t;t.prototype=void 0}return i||{}}}();e.exports=s},{"../lang/isObject":115}],76:[function(t,e,i){var n=t("./baseForOwn"),s=t("./createBaseEach"),r=s(n);e.exports=r},{"./baseForOwn":79,"./createBaseEach":92}],77:[function(t,e,i){function n(t,e){var i=!0;return s(t,function(t,n,s){return i=!!e(t,n,s)}),i}var s=t("./baseEach");e.exports=n},{"./baseEach":76}],78:[function(t,e,i){var n=t("./createBaseFor"),s=n();e.exports=s},{"./createBaseFor":93}],79:[function(t,e,i){function n(t,e){return s(t,e,r)}var s=t("./baseFor"),r=t("../object/keys");e.exports=n},{"../object/keys":120,"./baseFor":78}],80:[function(t,e,i){function n(t,e,i){if(null!=t){void 0!==i&&i in s(t)&&(e=[i]);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:void 0}}var s=t("./toObject");e.exports=n},{"./toObject":108}],81:[function(t,e,i){function n(t,e,i,a,l,c){return t===e?!0:null==t||null==e||!r(t)&&!o(e)?t!==t&&e!==e:s(t,e,n,i,a,l,c)}var s=t("./baseIsEqualDeep"),r=t("../lang/isObject"),o=t("./isObjectLike");e.exports=n},{"../lang/isObject":115,"./baseIsEqualDeep":82,"./isObjectLike":105}],82:[function(t,e,i){function n(t,e,i,n,d,g,m){var v=a(t),y=a(e),b=h,_=h;v||(b=f.call(t),b==c?b=u:b!=u&&(v=l(t))),y||(_=f.call(e),_==c?_=u:_!=u&&(y=l(e)));var x=b==u,w=_==u,k=b==_;if(k&&!v&&!x)return r(t,e,b);if(!d){var T=x&&p.call(t,"__wrapped__"),C=w&&p.call(e,"__wrapped__");if(T||C)return i(T?t.value():t,C?e.value():e,n,d,g,m)}if(!k)return!1;g||(g=[]),m||(m=[]);for(var S=g.length;S--;)if(g[S]==t)return m[S]==e;g.push(t),m.push(e);var A=(v?s:o)(t,e,i,n,d,g,m);return g.pop(),m.pop(),A}var s=t("./equalArrays"),r=t("./equalByTag"),o=t("./equalObjects"),a=t("../lang/isArray"),l=t("../lang/isTypedArray"),c="[object Arguments]",h="[object Array]",u="[object Object]",d=Object.prototype,p=d.hasOwnProperty,f=d.toString;e.exports=n},{"../lang/isArray":111,"../lang/isTypedArray":117,"./equalArrays":94,"./equalByTag":95,"./equalObjects":96}],83:[function(t,e,i){function n(t,e,i){var n=e.length,o=n,a=!i;if(null==t)return!o;for(t=r(t);n--;){var l=e[n];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++n<o;){l=e[n];var c=l[0],h=t[c],u=l[1];if(a&&l[2]){if(void 0===h&&!(c in t))return!1}else{var d=i?i(h,u,c):void 0;if(!(void 0===d?s(u,h,i,!0):d))return!1}}return!0}var s=t("./baseIsEqual"),r=t("./toObject");e.exports=n},{"./baseIsEqual":81,"./toObject":108}],84:[function(t,e,i){function n(t){var e=r(t);if(1==e.length&&e[0][2]){var i=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[i]===n&&(void 0!==n||i in o(t))}}return function(t){return s(t,e)}}var s=t("./baseIsMatch"),r=t("./getMatchData"),o=t("./toObject");e.exports=n},{"./baseIsMatch":83,"./getMatchData":98,"./toObject":108}],85:[function(t,e,i){function n(t,e){var i=a(t),n=l(t)&&c(e),p=t+"";return t=d(t),function(a){if(null==a)return!1;var l=p;if(a=u(a),(i||!n)&&!(l in a)){if(a=1==t.length?a:s(a,o(t,0,-1)),null==a)return!1;l=h(t),a=u(a)}return a[l]===e?void 0!==e||l in a:r(e,a[l],void 0,!0)}}var s=t("./baseGet"),r=t("./baseIsEqual"),o=t("./baseSlice"),a=t("../lang/isArray"),l=t("./isKey"),c=t("./isStrictComparable"),h=t("../array/last"),u=t("./toObject"),d=t("./toPath");e.exports=n},{"../array/last":66,"../lang/isArray":111,"./baseGet":80,"./baseIsEqual":81,"./baseSlice":88,"./isKey":103,"./isStrictComparable":106,"./toObject":108,"./toPath":109}],86:[function(t,e,i){function n(t){return function(e){return null==e?void 0:e[t]}}e.exports=n},{}],87:[function(t,e,i){function n(t){var e=t+"";return t=r(t),function(i){return s(i,t,e)}}var s=t("./baseGet"),r=t("./toPath");e.exports=n},{"./baseGet":80,"./toPath":109}],88:[function(t,e,i){function n(t,e,i){var n=-1,s=t.length;e=null==e?0:+e||0,0>e&&(e=-e>s?0:s+e),i=void 0===i||i>s?s:+i||0,0>i&&(i+=s),s=e>i?0:i-e>>>0,e>>>=0;for(var r=Array(s);++n<s;)r[n]=t[n+e];return r}e.exports=n},{}],89:[function(t,e,i){function n(t){return null==t?"":t+""}e.exports=n},{}],90:[function(t,e,i){function n(t,e,i){if("function"!=typeof t)return s;if(void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,s){return t.call(e,i,n,s)};case 4:return function(i,n,s,r){return t.call(e,i,n,s,r)};case 5:return function(i,n,s,r,o){return t.call(e,i,n,s,r,o)}}return function(){return t.apply(e,arguments)}}var s=t("../utility/identity");e.exports=n},{"../utility/identity":123}],91:[function(t,e,i){function n(t){return o(function(e,i){var n=-1,o=null==e?0:i.length,a=o>2?i[o-2]:void 0,l=o>2?i[2]:void 0,c=o>1?i[o-1]:void 0;for("function"==typeof a?(a=s(a,c,5),o-=2):(a="function"==typeof c?c:void 0,o-=a?1:0),l&&r(i[0],i[1],l)&&(a=3>o?void 0:a,o=1);++n<o;){var h=i[n];h&&t(e,h,a)}return e})}var s=t("./bindCallback"),r=t("./isIterateeCall"),o=t("../function/restParam");e.exports=n},{"../function/restParam":68,"./bindCallback":90,"./isIterateeCall":102}],92:[function(t,e,i){function n(t,e){return function(i,n){var a=i?s(i):0;if(!r(a))return t(i,n);for(var l=e?a:-1,c=o(i);(e?l--:++l<a)&&n(c[l],l,c)!==!1;);return i}}var s=t("./getLength"),r=t("./isLength"),o=t("./toObject");e.exports=n},{"./getLength":97,"./isLength":104,"./toObject":108}],93:[function(t,e,i){function n(t){return function(e,i,n){for(var r=s(e),o=n(e),a=o.length,l=t?a:-1;t?l--:++l<a;){var c=o[l];if(i(r[c],c,r)===!1)break}return e}}var s=t("./toObject");e.exports=n},{"./toObject":108}],94:[function(t,e,i){function n(t,e,i,n,r,o,a){var l=-1,c=t.length,h=e.length;if(c!=h&&!(r&&h>c))return!1;for(;++l<c;){var u=t[l],d=e[l],p=n?n(r?d:u,r?u:d,l):void 0;if(void 0!==p){if(p)continue;return!1}if(r){if(!s(e,function(t){return u===t||i(u,t,n,r,o,a)}))return!1}else if(u!==d&&!i(u,d,n,r,o,a))return!1}return!0}var s=t("./arraySome");e.exports=n},{"./arraySome":70}],95:[function(t,e,i){function n(t,e,i){switch(i){case s:case r:return+t==+e;case o:return t.name==e.name&&t.message==e.message;case a:return t!=+t?e!=+e:t==+e;case l:case c:return t==e+""}return!1}var s="[object Boolean]",r="[object Date]",o="[object Error]",a="[object Number]",l="[object RegExp]",c="[object String]";e.exports=n},{}],96:[function(t,e,i){function n(t,e,i,n,r,a,l){var c=s(t),h=c.length,u=s(e),d=u.length;if(h!=d&&!r)return!1;for(var p=h;p--;){var f=c[p];if(!(r?f in e:o.call(e,f)))return!1}for(var g=r;++p<h;){f=c[p];var m=t[f],v=e[f],y=n?n(r?v:m,r?m:v,f):void 0;if(!(void 0===y?i(m,v,n,r,a,l):y))return!1;g||(g="constructor"==f)}if(!g){var b=t.constructor,_=e.constructor;if(b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _))return!1}return!0}var s=t("../object/keys"),r=Object.prototype,o=r.hasOwnProperty;e.exports=n},{"../object/keys":120}],97:[function(t,e,i){var n=t("./baseProperty"),s=n("length");e.exports=s},{"./baseProperty":86}],98:[function(t,e,i){function n(t){for(var e=r(t),i=e.length;i--;)e[i][2]=s(e[i][1]);return e}var s=t("./isStrictComparable"),r=t("../object/pairs");e.exports=n},{"../object/pairs":122,"./isStrictComparable":106}],99:[function(t,e,i){function n(t,e){var i=null==t?void 0:t[e];return s(i)?i:void 0}var s=t("../lang/isNative");e.exports=n},{"../lang/isNative":114}],100:[function(t,e,i){function n(t){return null!=t&&r(s(t))}var s=t("./getLength"),r=t("./isLength");e.exports=n},{"./getLength":97,"./isLength":104}],101:[function(t,e,i){function n(t,e){return t="number"==typeof t||s.test(t)?+t:-1,e=null==e?r:e,t>-1&&t%1==0&&e>t}var s=/^\d+$/,r=9007199254740991;e.exports=n},{}],102:[function(t,e,i){function n(t,e,i){if(!o(i))return!1;var n=typeof e;if("number"==n?s(i)&&r(e,i.length):"string"==n&&e in i){var a=i[e];return t===t?t===a:a!==a}return!1}var s=t("./isArrayLike"),r=t("./isIndex"),o=t("../lang/isObject");e.exports=n},{"../lang/isObject":115,"./isArrayLike":100,"./isIndex":101}],103:[function(t,e,i){function n(t,e){var i=typeof t;if("string"==i&&a.test(t)||"number"==i)return!0;if(s(t))return!1;var n=!o.test(t);return n||null!=e&&t in r(e)}var s=t("../lang/isArray"),r=t("./toObject"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=n},{"../lang/isArray":111,"./toObject":108}],104:[function(t,e,i){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&s>=t}var s=9007199254740991;e.exports=n},{}],105:[function(t,e,i){function n(t){return!!t&&"object"==typeof t}e.exports=n},{}],106:[function(t,e,i){function n(t){return t===t&&!s(t)}var s=t("../lang/isObject");e.exports=n},{"../lang/isObject":115}],107:[function(t,e,i){function n(t){for(var e=l(t),i=e.length,n=i&&t.length,c=!!n&&a(n)&&(r(t)||s(t)),u=-1,d=[];++u<i;){var p=e[u];(c&&o(p,n)||h.call(t,p))&&d.push(p)}return d}var s=t("../lang/isArguments"),r=t("../lang/isArray"),o=t("./isIndex"),a=t("./isLength"),l=t("../object/keysIn"),c=Object.prototype,h=c.hasOwnProperty;e.exports=n},{"../lang/isArguments":110,"../lang/isArray":111,"../object/keysIn":121,"./isIndex":101,"./isLength":104}],108:[function(t,e,i){function n(t){return s(t)?t:Object(t)}var s=t("../lang/isObject");e.exports=n},{"../lang/isObject":115}],109:[function(t,e,i){function n(t){if(r(t))return t;var e=[];return s(t).replace(o,function(t,i,n,s){e.push(n?s.replace(a,"$1"):i||t)}),e}var s=t("./baseToString"),r=t("../lang/isArray"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;e.exports=n},{"../lang/isArray":111,"./baseToString":89}],110:[function(t,e,i){function n(t){return r(t)&&s(t)&&a.call(t,"callee")&&!l.call(t,"callee")}var s=t("../internal/isArrayLike"),r=t("../internal/isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,l=o.propertyIsEnumerable;e.exports=n},{"../internal/isArrayLike":100,"../internal/isObjectLike":105}],111:[function(t,e,i){var n=t("../internal/getNative"),s=t("../internal/isLength"),r=t("../internal/isObjectLike"),o="[object Array]",a=Object.prototype,l=a.toString,c=n(Array,"isArray"),h=c||function(t){return r(t)&&s(t.length)&&l.call(t)==o};e.exports=h},{"../internal/getNative":99,"../internal/isLength":104,"../internal/isObjectLike":105}],112:[function(t,e,i){function n(t){return null==t?!0:o(t)&&(r(t)||c(t)||s(t)||l(t)&&a(t.splice))?!t.length:!h(t).length}var s=t("./isArguments"),r=t("./isArray"),o=t("../internal/isArrayLike"),a=t("./isFunction"),l=t("../internal/isObjectLike"),c=t("./isString"),h=t("../object/keys");e.exports=n},{"../internal/isArrayLike":100,"../internal/isObjectLike":105,"../object/keys":120,"./isArguments":110,"./isArray":111,"./isFunction":113,"./isString":116}],113:[function(t,e,i){function n(t){return s(t)&&a.call(t)==r}var s=t("./isObject"),r="[object Function]",o=Object.prototype,a=o.toString;e.exports=n},{"./isObject":115}],114:[function(t,e,i){function n(t){return null==t?!1:s(t)?h.test(l.call(t)):r(t)&&o.test(t)}var s=t("./isFunction"),r=t("../internal/isObjectLike"),o=/^\[object .+?Constructor\]$/,a=Object.prototype,l=Function.prototype.toString,c=a.hasOwnProperty,h=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},{"../internal/isObjectLike":105,"./isFunction":113}],115:[function(t,e,i){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=n},{}],116:[function(t,e,i){function n(t){return"string"==typeof t||s(t)&&a.call(t)==r}var s=t("../internal/isObjectLike"),r="[object String]",o=Object.prototype,a=o.toString;e.exports=n},{"../internal/isObjectLike":105}],117:[function(t,e,i){function n(t){return r(t)&&s(t.length)&&!!L[I.call(t)]}var s=t("../internal/isLength"),r=t("../internal/isObjectLike"),o="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",u="[object Function]",d="[object Map]",p="[object Number]",f="[object Object]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object Float32Array]",x="[object Float64Array]",w="[object Int8Array]",k="[object Int16Array]",T="[object Int32Array]",C="[object Uint8Array]",S="[object Uint8ClampedArray]",A="[object Uint16Array]",E="[object Uint32Array]",L={};L[_]=L[x]=L[w]=L[k]=L[T]=L[C]=L[S]=L[A]=L[E]=!0,L[o]=L[a]=L[b]=L[l]=L[c]=L[h]=L[u]=L[d]=L[p]=L[f]=L[g]=L[m]=L[v]=L[y]=!1;var D=Object.prototype,I=D.toString;e.exports=n},{"../internal/isLength":104,"../internal/isObjectLike":105}],118:[function(t,e,i){var n=t("../internal/assignWith"),s=t("../internal/baseAssign"),r=t("../internal/createAssigner"),o=r(function(t,e,i){return i?n(t,e,i):s(t,e)});e.exports=o},{"../internal/assignWith":71,"../internal/baseAssign":72,"../internal/createAssigner":91}],119:[function(t,e,i){function n(t,e,i){var n=r(t);return i&&o(t,e,i)&&(e=void 0),e?s(n,e):n}var s=t("../internal/baseAssign"),r=t("../internal/baseCreate"),o=t("../internal/isIterateeCall");e.exports=n},{"../internal/baseAssign":72,"../internal/baseCreate":75,"../internal/isIterateeCall":102}],120:[function(t,e,i){var n=t("../internal/getNative"),s=t("../internal/isArrayLike"),r=t("../lang/isObject"),o=t("../internal/shimKeys"),a=n(Object,"keys"),l=a?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&s(t)?o(t):r(t)?a(t):[]}:o;e.exports=l},{"../internal/getNative":99,"../internal/isArrayLike":100,"../internal/shimKeys":107,"../lang/isObject":115}],121:[function(t,e,i){function n(t){if(null==t)return[];l(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(r(t)||s(t))&&e||0;for(var i=t.constructor,n=-1,c="function"==typeof i&&i.prototype===t,u=Array(e),d=e>0;++n<e;)u[n]=n+"";for(var p in t)d&&o(p,e)||"constructor"==p&&(c||!h.call(t,p))||u.push(p);return u}var s=t("../lang/isArguments"),r=t("../lang/isArray"),o=t("../internal/isIndex"),a=t("../internal/isLength"),l=t("../lang/isObject"),c=Object.prototype,h=c.hasOwnProperty;e.exports=n},{"../internal/isIndex":101,"../internal/isLength":104,"../lang/isArguments":110,"../lang/isArray":111,"../lang/isObject":115}],122:[function(t,e,i){function n(t){t=r(t);for(var e=-1,i=s(t),n=i.length,o=Array(n);++e<n;){var a=i[e];o[e]=[a,t[a]]}return o}var s=t("./keys"),r=t("../internal/toObject");e.exports=n},{"../internal/toObject":108,"./keys":120}],123:[function(t,e,i){function n(t){return t}e.exports=n},{}],124:[function(t,e,i){function n(t){return o(t)?s(t):r(t)}var s=t("../internal/baseProperty"),r=t("../internal/basePropertyDeep"),o=t("../internal/isKey");e.exports=n},{"../internal/baseProperty":86,"../internal/basePropertyDeep":87,"../internal/isKey":103}]},{},[10])(10)});var QBApp={appId:31817,authKey:"RxHbZrPfNhJdNX3",authSecret:"WPGpqShqtZB4DGK",server:"api.quickblox.com",user_owner_id:40352},CONFIG={chatProtocol:{active:2},debug:!0,webrtc:{answerTimeInterval:60,dialingTimeInterval:5}};(function(){}).call(this),function(){$.ajaxSetup({cache:!1})}.call(this),/*!
 Chosen, a Select Box Enhancer for jQuery and Prototype
 by Patrick Filler for Harvest, http://getharvest.com

 Version 1.1.0
 Full source at https://github.com/harvesthq/chosen
 Copyright (c) 2011 Harvest http://getharvest.com

 MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
 This file is generated by `grunt build`, do not edit it by hand.
 */
function(){var t,e,i,n,s,r={}.hasOwnProperty,o=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,n,s,r,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),r=t.childNodes,o=[],n=0,s=r.length;s>n;n++)i=r[n],o.push(this.add_option(i,e,t.disabled));return o},t.prototype.add_option=function(t,e,i){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:i===!0?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,i;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},t}(),n.select_to_array=function(t){var e,i,s,r,o;for(i=new n,o=t.childNodes,s=0,r=o.length;r>s;s++)e=o[s],i.add_node(e);return i.parsed},e=function(){function t(e,i){this.form_field=e,this.options=null!=i?i:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(t){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(t){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},t.prototype.results_option_build=function(t){var e,i,n,s,r;for(e="",r=this.results_data,n=0,s=r.length;s>n;n++)i=r[n],e+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return e},t.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=document.createElement("li"),i.className=e.join(" "),i.style.cssText=t.style,i.setAttribute("data-option-array-index",t.array_index),i.innerHTML=t.search_text,this.outerHTML(i)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,i,n,s;for(n=this.results_data,s=[],e=0,i=n.length;i>e;e++)t=n[e],t.selected?s.push(t.selected=!1):s.push(void 0);return s},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,i,n,s,r,o,a,l,c,h,u,d;for(this.no_results_clear(),s=0,o=this.get_search_text(),t=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),n=this.search_contains?"":"^",i=new RegExp(n+t,"i"),c=new RegExp(t,"i"),d=this.results_data,h=0,u=d.length;u>h;h++)e=d[h],e.search_match=!1,r=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(r=this.results_data[e.group_array_index],0===r.active_options&&r.search_match&&(s+=1),r.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,i),e.search_match&&!e.group&&(s+=1),e.search_match?(o.length&&(a=e.search_text.search(c),l=e.search_text.substr(0,a+o.length)+"</em>"+e.search_text.substr(a+o.length),e.search_text=l.substr(0,a)+"<em>"+l.substr(a)),null!=r&&(r.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>s&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var i,n,s,r;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(n=t.replace(/\[|\]/g,"").split(" "),n.length))for(s=0,r=n.length;r>s;s++)if(i=n[s],e.test(i))return!0},t.prototype.choices_count=function(){var t,e,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,e=0,i=n.length;i>e;e++)t=n[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(t){var e=this;return setTimeout(function(){return e.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return this.is_multiple&&!this.display_selected_options&&t.selected?!1:!this.display_disabled_options&&t.disabled?!1:t.empty?!1:!0},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(n){return e.browser_is_supported()?this.each(function(e){var s,r;s=t(this),r=s.data("chosen"),"destroy"===n&&r?r.destroy():r||s.data("chosen",new i(this,n))}):this}}),i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments)}return o(i,e),i.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var e,i;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),i={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(t){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(e){var i;return i=t(e.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t){var e,i,n,s,r;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),s=n+r,i=this.result_highlight.position().top+this.search_results.scrollTop(),e=i+this.result_highlight.outerHeight(),e>=s)return this.search_results.scrollTop(e-n>0?e-n:0);if(r>i)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(t){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},i.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(e),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},i.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(e){var i,n,s=this;return i=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?i.addClass("search-choice-disabled"):(n=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),n.bind("click.chosen",function(t){return s.choice_destroy_link_click(t)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},i.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,i;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[e[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],this.form_field.options[e.options_index].disabled?!1:(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},i.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,i,n,s,r,o,a,l,c;if(this.is_multiple){for(n=0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=o.length;c>l;l++)s=o[l],r+=s+":"+this.search_field.css(s)+";";return e=t("<div />",{style:r}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(e)}.call(this);var ready;ready=function(){var t=new Bloodhound({datumTokenizer:function(t){return console.log(t),Bloodhound.tokenizers.whitespace(t.title)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"../institutions/autocomplete?query=%QUERY"}}),e=t.initialize();e.done(function(){console.log("success")}).fail(function(){console.log("err")}),$(".form-control typeahead").typeahead(null,{name:"engine",displayKey:"title",source:t.ttAdapter()})},$(document).ready(ready),$(document).on("page:load",ready),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery"),window,document):e(t.jQuery||t.Zepto,window,document)}(this,function(t,e,i){"use strict";var n=function(n,s){function r(){x=_,0===_?(x=v,"fade"!==s.animation&&f.css("left",-x*b)):_===y-1&&(x=1,"fade"!==s.animation&&f.css("left",-b)),"fade"===s.animation&&m.eq(x).show(),s.showBullets&&n.next(".as-nav").find("a").removeClass("as-active").eq(x-1).addClass("as-active"),w=!1,s.afterChange.call(n[0])}function o(){w||1>=v||(w=!0,s.beforeChange.call(n[0]),"fade"===s.animation?m.css("z-index",1).fadeOut(s.speed).eq(_).css("z-index",2).fadeIn(s.speed,r):f.animate({left:-_*b},s.speed,s.easing,r),a())}function a(){clearTimeout(g),s.interval&&v>1&&(g=setTimeout(function(){s.reverse?p():h()},s.interval))}function l(){return x}function c(t){_=t,o()}function h(){_=x+1,o()}function u(){clearTimeout(g)}function d(){a()}function p(){_=x-1,o()}var f,g,m=n.children(),v=m.length,y=v,b=n.width(),_=0,x=0,w=!1,k={afterChange:function(){},afterSetup:function(){},animation:"slide",beforeChange:function(){},easing:"swing",interval:5e3,keyboard:!0,nextLabel:"Next slide",pauseOnHover:!0,prevLabel:"Previous slide",reverse:!1,showBullets:!0,showControls:!0,speed:400,startSlide:1,touch:!0};if(s=t.extend(k,s),v>1&&(m.eq(0).clone().addClass("clone").appendTo(n),m.eq(y-1).clone().addClass("clone").prependTo(n),s.startSlide<v&&(x=s.startSlide)),m=n.children(),y=m.length,m.wrapAll('<div class="as-slide-inner"></div>').css("width",b),f=n.css("overflow","hidden").find(".as-slide-inner"),"fade"===s.animation?(m.css({display:"none",left:0,position:"absolute",top:0}).eq(x).show(),f.css("width",b)):(m.css({"float":"left",position:"relative"}),f.css({left:-x*b,width:y*b})),f.css({"float":"left",position:"relative"}),s.showControls&&v>1&&(n.prepend('<a href="#" class="as-prev-arrow" title="LABEL">LABEL</a>'.replace(/LABEL/g,s.prevLabel)),n.append('<a href="#" class="as-next-arrow" title="LABEL">LABEL</a>'.replace(/LABEL/g,s.nextLabel)),n.on("click.as",".as-prev-arrow, .as-next-arrow",function(e){e.preventDefault(),w||(t(this).hasClass("as-prev-arrow")?p():h())})),s.showBullets&&v>1){var T,C,S='<div class="as-nav"></div>',A=t(S);for(C=1;v>=C;C++)T="",C===x&&(T=' class="as-active"'),A.append('<a href="#"'+T+">"+C+"</a>");A.on("click.as","a",function(e){var i=t(this).index();e.preventDefault(),t(this).hasClass("as-active")||w||(A.find("a").removeClass("as-active").eq(i).addClass("as-active"),c(i+1))}),n.after(A)}if(s.keyboard&&t(i).on("keydown.as",function(t){var e=t.keyCode;37!==e&&39!==e||1>=v||(37===e?p():h())}),s.pauseOnHover&&n.on("mouseenter",function(){u()}).on("mouseleave",function(){d()}),t(e).resize(function(){w||(b=n.width(),f.css("width",b),m.css("width",b),"fade"!==s.animation&&f.css({left:-x*b,width:y*b}))}),s.touch&&"ontouchstart"in e||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0){var E,L;n.on("touchstart.as pointerdown.as MSPointerDown.as",function(t){E=t.timeStamp,L=t.originalEvent?t.originalEvent.pageX||t.originalEvent.touches[0].pageX:t.pageX||t.touches[0].pageX}).on("touchmove.as pointermove.as MSPointerMove.as",function(t){var e,i=t.timeStamp,s=0;e=t.originalEvent?t.originalEvent.pageX||t.originalEvent.touches[0].pageX:t.pageX||t.touches[0].pageX,0!==L&&(s=Math.abs(e-L)),0!==E&&1e3>i-E&&s>200&&(t.preventDefault(),L>e?h():e>L&&p(),E=0,L=0,n.trigger("touchend.as"))}).on("touchend.as pointerup.as MSPointerUp.as",function(){E=0,L=0})}return a(),s.afterSetup.call(n[0]),{currentSlide:l,goTo:c,next:h,pause:u,play:d,prev:p}};t.fn.anyslider=function(e){return this.each(function(){var i,s=t(this);return s.data("anyslider")?s.data("anyslider"):(i=new n(s,e),void s.data("anyslider",i))})}}),$(function(){$("#review_content").redactor()}),$(function(){$("#skill_description").redactor()}),$(function(){$("#institution_description").redactor()}),$(function(){$("#user_description").redactor()}),document.addEventListener("DOMContentLoaded",function(t){$("#timeline-embed").ready(function(){var e=t.currentTarget.URL;$.ajax({method:"GET",url:e,dataType:"json"}).done(function(t){var e=formatData(t);timeline=new TL.Timeline("timeline-embed",e)})})}),document.addEventListener("DOMContentLoaded",function(t){$("#user-index-show").ready(function(){var e=t.currentTarget.URL;$.ajax({method:"GET",url:e,dataType:"json"}).done(function(t){var e=t[0],i=t[1];$("#user-index-show").highcharts({chart:{type:"bar"},title:{text:"Skill leaderboard"},xAxis:{categories:e},yAxis:{min:0,title:{text:"Total skill points"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:i})})})}),$(function(){$("#user_profile_intro").on("click",function(t){t.preventDefault();var e=t.currentTarget.baseURI;$.ajax({method:"GET",url:e,dataType:"json"}).done(function(t){$("#user_show").html(t[2])})})}),$(function(){$("#user_program_attendancy_location").change(function(){var t=this.value;$.ajax({method:"GET",url:"/institutions/"+t,dataType:"json"}).done(function(t){$("#user_program_attendancy_program_id > option").replaceWith("");for(var e=0;e<t[0].length;e++){var i=t[0][e].id,n=t[0][e].title;$("#user_program_attendancy_program_id").append($("<option>",{value:i,text:n}))}})})}),document.addEventListener("DOMContentLoaded",function(t){console.log("user-skill",t);var e=t.target.URL;$.ajax({method:"GET",url:e,dataType:"json"}).done(function(t){categoryList=[],priceList=[];for(var e in t[0])t[0].hasOwnProperty(e)&&(categoryList.push(e),priceList.push(t[0][e]));$("#container-user-skill-webmap").highcharts({chart:{polar:!0,type:"line"},title:{text:"My skill set",x:-80},pane:{size:"80%"},xAxis:{categories:categoryList,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/>'},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"},series:[{name:"Skill learned",data:priceList,pointPlacement:"on"}]})})}),$(document).ready(function(){$(".upvote_review").on("click",function(t){t.preventDefault();var e=t.currentTarget.href;$.ajax({method:"PUT",url:e,success:function(t){t[2]===!0?$(".update-rating-"+t[0].id).html(t[1]):alert("You need to sign in to vote!");
}})}),$(".downvote_review").on("click",function(t){t.preventDefault();var e=t.currentTarget.href;$.ajax({method:"PUT",url:e,success:function(t){t[2]===!0?$(".update-rating-"+t[0].id).html(t[1]):alert("You need to sign in to vote!")}})})}),function(){}.call(this),$(function(){$(document).foundation()}),$(document).ready(function(){setTimeout(function(){$("#layout-flash-box").fadeOut("slow",function(){$(this).remove()})},4500)});